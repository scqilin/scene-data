(self.webpackChunkcomponent_library=self.webpackChunkcomponent_library||[]).push([[852],{19238:(e,t,n)=>{"use strict";n.d(t,{rt:()=>Xt,kH:()=>Je,Em:()=>Oe,tE:()=>Ye});var o=n(38583),s=n(37716),i=n(79765),a=n(75319),l=n(26215),r=n(25917),d=n(36461),u=n(93342),g=n(54395),f=n(45435),v=n(88002),z=(n(15257),n(13653)),b=n(87519),_=n(46782),H=n(39490),T=n(80521),L=n(18553);class Oe extends class{constructor(q){this._items=q,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new i.xQ,this._typeaheadSubscription=a.w.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=B=>B.disabled,this._pressedLetters=[],this.tabOut=new i.xQ,this.change=new i.xQ,q instanceof s.n_E&&q.changes.subscribe(B=>{if(this._activeItem){const ze=B.toArray().indexOf(this._activeItem);ze>-1&&ze!==this._activeItemIndex&&(this._activeItemIndex=ze)}})}skipPredicate(q){return this._skipPredicateFn=q,this}withWrap(q=!0){return this._wrap=q,this}withVerticalOrientation(q=!0){return this._vertical=q,this}withHorizontalOrientation(q){return this._horizontal=q,this}withAllowedModifierKeys(q){return this._allowedModifierKeys=q,this}withTypeAhead(q=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,u.b)(B=>this._pressedLetters.push(B)),(0,g.b)(q),(0,f.h)(()=>this._pressedLetters.length>0),(0,v.U)(()=>this._pressedLetters.join(""))).subscribe(B=>{const se=this._getItemsArray();for(let ze=1;ze<se.length+1;ze++){const Xe=(this._activeItemIndex+ze)%se.length,ie=se[Xe];if(!this._skipPredicateFn(ie)&&0===ie.getLabel().toUpperCase().trim().indexOf(B)){this.setActiveItem(Xe);break}}this._pressedLetters=[]}),this}withHomeAndEnd(q=!0){return this._homeAndEnd=q,this}setActiveItem(q){const B=this._activeItem;this.updateActiveItem(q),this._activeItem!==B&&this.change.next(this._activeItemIndex)}onKeydown(q){const B=q.keyCode,ze=["altKey","ctrlKey","metaKey","shiftKey"].every(Xe=>!q[Xe]||this._allowedModifierKeys.indexOf(Xe)>-1);switch(B){case d.Mf:return void this.tabOut.next();case d.JH:if(this._vertical&&ze){this.setNextItemActive();break}return;case d.LH:if(this._vertical&&ze){this.setPreviousItemActive();break}return;case d.SV:if(this._horizontal&&ze){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case d.oh:if(this._horizontal&&ze){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case d.Sd:if(this._homeAndEnd&&ze){this.setFirstItemActive();break}return;case d.uR:if(this._homeAndEnd&&ze){this.setLastItemActive();break}return;default:return void((ze||(0,d.Vb)(q,"shiftKey"))&&(q.key&&1===q.key.length?this._letterKeyStream.next(q.key.toLocaleUpperCase()):(B>=d.A&&B<=d.Z||B>=d.xE&&B<=d.aO)&&this._letterKeyStream.next(String.fromCharCode(B))))}this._pressedLetters=[],q.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(q){const B=this._getItemsArray(),se="number"==typeof q?q:B.indexOf(q),ze=B[se];this._activeItem=null==ze?null:ze,this._activeItemIndex=se}_setActiveItemByDelta(q){this._wrap?this._setActiveInWrapMode(q):this._setActiveInDefaultMode(q)}_setActiveInWrapMode(q){const B=this._getItemsArray();for(let se=1;se<=B.length;se++){const ze=(this._activeItemIndex+q*se+B.length)%B.length;if(!this._skipPredicateFn(B[ze]))return void this.setActiveItem(ze)}}_setActiveInDefaultMode(q){this._setActiveItemByIndex(this._activeItemIndex+q,q)}_setActiveItemByIndex(q,B){const se=this._getItemsArray();if(se[q]){for(;this._skipPredicateFn(se[q]);)if(!se[q+=B])return;this.setActiveItem(q)}}_getItemsArray(){return this._items instanceof s.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(q){return this._origin=q,this}setActiveItem(q){super.setActiveItem(q),this.activeItem&&this.activeItem.focus(this._origin)}}"undefined"!=typeof Element&&Element;const ee=new s.OlP("cdk-input-modality-detector-options"),Ce={ignoreKeys:[d.zL,d.jx,d.b2,d.MW,d.JU]},Z=(0,T.i$)({passive:!0,capture:!0});let we=(()=>{class ve{constructor(B,se,ze,Xe){this._platform=B,this._mostRecentTarget=null,this._modality=new l.X(null),this._lastTouchMs=0,this._onKeydown=ie=>{var Ve,I;(null===(I=null===(Ve=this._options)||void 0===Ve?void 0:Ve.ignoreKeys)||void 0===I?void 0:I.some(U=>U===ie.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=(0,T.sA)(ie))},this._onMousedown=ie=>{Date.now()-this._lastTouchMs<650||(this._modality.next(function(ve){return 0===ve.offsetX&&0===ve.offsetY}(ie)?"keyboard":"mouse"),this._mostRecentTarget=(0,T.sA)(ie))},this._onTouchstart=ie=>{!function(ve){const q=ve.touches&&ve.touches[0]||ve.changedTouches&&ve.changedTouches[0];return!(!q||-1!==q.identifier||null!=q.radiusX&&1!==q.radiusX||null!=q.radiusY&&1!==q.radiusY)}(ie)?(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,T.sA)(ie)):this._modality.next("keyboard")},this._options=Object.assign(Object.assign({},Ce),Xe),this.modalityDetected=this._modality.pipe((0,z.T)(1)),this.modalityChanged=this.modalityDetected.pipe((0,b.x)()),B.isBrowser&&se.runOutsideAngular(()=>{ze.addEventListener("keydown",this._onKeydown,Z),ze.addEventListener("mousedown",this._onMousedown,Z),ze.addEventListener("touchstart",this._onTouchstart,Z)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Z),document.removeEventListener("mousedown",this._onMousedown,Z),document.removeEventListener("touchstart",this._onTouchstart,Z))}}return ve.\u0275fac=function(B){return new(B||ve)(s.LFG(T.t4),s.LFG(s.R0b),s.LFG(o.K0),s.LFG(ee,8))},ve.\u0275prov=s.Yz7({factory:function(){return new ve(s.LFG(T.t4),s.LFG(s.R0b),s.LFG(o.K0),s.LFG(ee,8))},token:ve,providedIn:"root"}),ve})();const W=new s.OlP("cdk-focus-monitor-default-options"),G=(0,T.i$)({passive:!0,capture:!0});let Ye=(()=>{class ve{constructor(B,se,ze,Xe,ie){this._ngZone=B,this._platform=se,this._inputModalityDetector=ze,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new i.xQ,this._rootNodeFocusAndBlurListener=Ve=>{const I=(0,T.sA)(Ve),U="focus"===Ve.type?this._onFocus:this._onBlur;for(let pe=I;pe;pe=pe.parentElement)U.call(this,Ve,pe)},this._document=Xe,this._detectionMode=(null==ie?void 0:ie.detectionMode)||0}monitor(B,se=!1){const ze=(0,H.fI)(B);if(!this._platform.isBrowser||1!==ze.nodeType)return(0,r.of)(null);const Xe=(0,T.kV)(ze)||this._getDocument(),ie=this._elementInfo.get(ze);if(ie)return se&&(ie.checkChildren=!0),ie.subject;const Ve={checkChildren:se,subject:new i.xQ,rootNode:Xe};return this._elementInfo.set(ze,Ve),this._registerGlobalListeners(Ve),Ve.subject}stopMonitoring(B){const se=(0,H.fI)(B),ze=this._elementInfo.get(se);ze&&(ze.subject.complete(),this._setClasses(se),this._elementInfo.delete(se),this._removeGlobalListeners(ze))}focusVia(B,se,ze){const Xe=(0,H.fI)(B);Xe===this._getDocument().activeElement?this._getClosestElementsInfo(Xe).forEach(([Ve,I])=>this._originChanged(Ve,se,I)):(this._setOrigin(se),"function"==typeof Xe.focus&&Xe.focus(ze))}ngOnDestroy(){this._elementInfo.forEach((B,se)=>this.stopMonitoring(se))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(B,se,ze){ze?B.classList.add(se):B.classList.remove(se)}_getFocusOrigin(B){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(B)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(B){return 1===this._detectionMode||!!(null==B?void 0:B.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(B,se){this._toggleClass(B,"cdk-focused",!!se),this._toggleClass(B,"cdk-touch-focused","touch"===se),this._toggleClass(B,"cdk-keyboard-focused","keyboard"===se),this._toggleClass(B,"cdk-mouse-focused","mouse"===se),this._toggleClass(B,"cdk-program-focused","program"===se)}_setOrigin(B,se=!1){this._ngZone.runOutsideAngular(()=>{this._origin=B,this._originFromTouchInteraction="touch"===B&&se,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(B,se){const ze=this._elementInfo.get(se),Xe=(0,T.sA)(B);!ze||!ze.checkChildren&&se!==Xe||this._originChanged(se,this._getFocusOrigin(Xe),ze)}_onBlur(B,se){const ze=this._elementInfo.get(se);!ze||ze.checkChildren&&B.relatedTarget instanceof Node&&se.contains(B.relatedTarget)||(this._setClasses(se),this._emitOrigin(ze.subject,null))}_emitOrigin(B,se){this._ngZone.run(()=>B.next(se))}_registerGlobalListeners(B){if(!this._platform.isBrowser)return;const se=B.rootNode,ze=this._rootNodeFocusListenerCount.get(se)||0;ze||this._ngZone.runOutsideAngular(()=>{se.addEventListener("focus",this._rootNodeFocusAndBlurListener,G),se.addEventListener("blur",this._rootNodeFocusAndBlurListener,G)}),this._rootNodeFocusListenerCount.set(se,ze+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,_.R)(this._stopInputModalityDetector)).subscribe(Xe=>{this._setOrigin(Xe,!0)}))}_removeGlobalListeners(B){const se=B.rootNode;if(this._rootNodeFocusListenerCount.has(se)){const ze=this._rootNodeFocusListenerCount.get(se);ze>1?this._rootNodeFocusListenerCount.set(se,ze-1):(se.removeEventListener("focus",this._rootNodeFocusAndBlurListener,G),se.removeEventListener("blur",this._rootNodeFocusAndBlurListener,G),this._rootNodeFocusListenerCount.delete(se))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(B,se,ze){this._setClasses(B,se),this._emitOrigin(ze.subject,se),this._lastFocusOrigin=se}_getClosestElementsInfo(B){const se=[];return this._elementInfo.forEach((ze,Xe)=>{(Xe===B||ze.checkChildren&&Xe.contains(B))&&se.push([Xe,ze])}),se}}return ve.\u0275fac=function(B){return new(B||ve)(s.LFG(s.R0b),s.LFG(T.t4),s.LFG(we),s.LFG(o.K0,8),s.LFG(W,8))},ve.\u0275prov=s.Yz7({factory:function(){return new ve(s.LFG(s.R0b),s.LFG(T.t4),s.LFG(we),s.LFG(o.K0,8),s.LFG(W,8))},token:ve,providedIn:"root"}),ve})(),Je=(()=>{class ve{constructor(B,se){this._elementRef=B,this._focusMonitor=se,this.cdkFocusChange=new s.vpe}ngAfterViewInit(){const B=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(B,1===B.nodeType&&B.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(se=>this.cdkFocusChange.emit(se))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return ve.\u0275fac=function(B){return new(B||ve)(s.Y36(s.SBq),s.Y36(Ye))},ve.\u0275dir=s.lG2({type:ve,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),ve})();const Ht="cdk-high-contrast-black-on-white",kt="cdk-high-contrast-white-on-black",Mt="cdk-high-contrast-active";let jt=(()=>{class ve{constructor(B,se){this._platform=B,this._document=se}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const B=this._document.createElement("div");B.style.backgroundColor="rgb(1,2,3)",B.style.position="absolute",this._document.body.appendChild(B);const se=this._document.defaultView||window,ze=se&&se.getComputedStyle?se.getComputedStyle(B):null,Xe=(ze&&ze.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(B),Xe){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const B=this._document.body.classList;B.remove(Mt),B.remove(Ht),B.remove(kt),this._hasCheckedHighContrastMode=!0;const se=this.getHighContrastMode();1===se?(B.add(Mt),B.add(Ht)):2===se&&(B.add(Mt),B.add(kt))}}}return ve.\u0275fac=function(B){return new(B||ve)(s.LFG(T.t4),s.LFG(o.K0))},ve.\u0275prov=s.Yz7({factory:function(){return new ve(s.LFG(T.t4),s.LFG(o.K0))},token:ve,providedIn:"root"}),ve})(),Xt=(()=>{class ve{constructor(B){B._applyBodyHighContrastModeCssClasses()}}return ve.\u0275fac=function(B){return new(B||ve)(s.LFG(jt))},ve.\u0275mod=s.oAB({type:ve}),ve.\u0275inj=s.cJS({imports:[[T.ud,L.Q8]]}),ve})()},65072:(e,t,n)=>{"use strict";n.d(t,{xu:()=>i,vx:()=>r});var o=n(37716),s=n(80521);let i=(()=>{class x{}return x.\u0275fac=function(b){return new(b||x)},x.\u0275mod=o.oAB({type:x}),x.\u0275inj=o.cJS({}),x})();const a=new Set;let l,r=(()=>{class x{constructor(b){this._platform=b,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):u}matchMedia(b){return(this._platform.WEBKIT||this._platform.BLINK)&&function(x){if(!a.has(x))try{l||(l=document.createElement("style"),l.setAttribute("type","text/css"),document.head.appendChild(l)),l.sheet&&(l.sheet.insertRule(`@media ${x} {body{ }}`,0),a.add(x))}catch(z){console.error(z)}}(b),this._matchMedia(b)}}return x.\u0275fac=function(b){return new(b||x)(o.LFG(s.t4))},x.\u0275prov=o.Yz7({factory:function(){return new x(o.LFG(s.t4))},token:x,providedIn:"root"}),x})();function u(x){return{matches:"all"===x||""===x,media:x,addListener:()=>{},removeListener:()=>{}}}},18553:(e,t,n)=>{"use strict";n.d(t,{yq:()=>d,Q8:()=>g});var o=n(39490),s=n(37716),i=n(67574),a=n(79765);n(54395);let r=(()=>{class f{create(x){return"undefined"==typeof MutationObserver?null:new MutationObserver(x)}}return f.\u0275fac=function(x){return new(x||f)},f.\u0275prov=s.Yz7({factory:function(){return new f},token:f,providedIn:"root"}),f})(),d=(()=>{class f{constructor(x){this._mutationObserverFactory=x,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((x,z)=>this._cleanupObserver(z))}observe(x){const z=(0,o.fI)(x);return new i.y(b=>{const H=this._observeElement(z).subscribe(b);return()=>{H.unsubscribe(),this._unobserveElement(z)}})}_observeElement(x){if(this._observedElements.has(x))this._observedElements.get(x).count++;else{const z=new a.xQ,b=this._mutationObserverFactory.create(_=>z.next(_));b&&b.observe(x,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(x,{observer:b,stream:z,count:1})}return this._observedElements.get(x).stream}_unobserveElement(x){this._observedElements.has(x)&&(this._observedElements.get(x).count--,this._observedElements.get(x).count||this._cleanupObserver(x))}_cleanupObserver(x){if(this._observedElements.has(x)){const{observer:z,stream:b}=this._observedElements.get(x);z&&z.disconnect(),b.complete(),this._observedElements.delete(x)}}}return f.\u0275fac=function(x){return new(x||f)(s.LFG(r))},f.\u0275prov=s.Yz7({factory:function(){return new f(s.LFG(r))},token:f,providedIn:"root"}),f})(),g=(()=>{class f{}return f.\u0275fac=function(x){return new(x||f)},f.\u0275mod=s.oAB({type:f}),f.\u0275inj=s.cJS({providers:[r]}),f})()},44134:function(module){var t;t=function(){return function(e){function t(o){if(n[o])return n[o].exports;var s=n[o]={exports:{},id:o,loaded:!1};return e[o].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(module,exports){function mxDictionary(){this.clear()}function mxPoint(e,t){this.x=null!=e?e:0,this.y=null!=t?t:0}function mxRectangle(e,t,n,o){mxPoint.call(this,e,t),this.width=null!=n?n:0,this.height=null!=o?o:0}function mxEventObject(e){this.name=e,this.properties=[];for(var t=1;t<arguments.length;t+=2)null!=arguments[t+1]&&(this.properties[arguments[t]]=arguments[t+1])}function mxMouseEvent(e,t){this.evt=e,this.state=t,this.sourceState=t}function mxEventSource(e){this.setEventSource(e)}function mxXmlRequest(e,t,n,o,s,i){this.url=e,this.params=t,this.method=n||"POST",this.async=null==o||o,this.username=s,this.password=i}function mxWindow(e,t,n,o,s,i,a,l,r,d){null!=t&&(a=null==a||a,this.content=t,this.init(n,o,s,i,d),this.installMaximizeHandler(),this.installMinimizeHandler(),this.installCloseHandler(),this.setMinimizable(a),this.setTitle(e),(null==l||l)&&this.installMoveHandler(),null!=r&&null!=r.parentNode?r.parentNode.replaceChild(this.div,r):document.body.appendChild(this.div))}function mxForm(e){this.table=document.createElement("table"),this.table.className=e,this.body=document.createElement("tbody"),this.table.appendChild(this.body)}function mxImage(e,t,n){this.src=e,this.width=t,this.height=n}function mxDivResizer(e,t){if("div"==e.nodeName.toLowerCase()){null==t&&(t=window),this.div=e;var n=mxUtils.getCurrentStyle(e);null!=n&&(this.resizeWidth="auto"==n.width,this.resizeHeight="auto"==n.height),mxEvent.addListener(t,"resize",mxUtils.bind(this,function(o){this.handlingResize||(this.handlingResize=!0,this.resize(),this.handlingResize=!1)})),this.resize()}}function mxDragSource(e,t){this.element=e,this.dropHandler=t,mxEvent.addGestureListeners(e,mxUtils.bind(this,function(n){this.mouseDown(n)})),mxEvent.addListener(e,"dragstart",function(n){mxEvent.consume(n)}),this.eventConsumer=function(n,o){var s=o.getProperty("eventName"),i=o.getProperty("event");s!=mxEvent.MOUSE_DOWN&&i.consume()}}function mxToolbar(e){this.container=e}function mxUndoableEdit(e,t){this.source=e,this.changes=[],this.significant=null==t||t}function mxUndoManager(e){this.size=null!=e?e:100,this.clear()}function mxPanningManager(e){this.thread=null,this.active=!1,this.tdx=0,this.tdy=0,this.t0x=0,this.t0y=0,this.dx=0,this.dy=0,this.scrollbars=!1,this.scrollLeft=0,this.scrollTop=0,this.mouseListener={mouseDown:function(n,o){},mouseMove:function(n,o){},mouseUp:mxUtils.bind(this,function(n,o){this.active&&this.stop()})},e.addMouseListener(this.mouseListener),mxEvent.addListener(document,"mouseup",mxUtils.bind(this,function(){this.active&&this.stop()}));var t=mxUtils.bind(this,function(){return this.scrollbars=mxUtils.hasScrollbars(e.container),this.scrollLeft=e.container.scrollLeft,this.scrollTop=e.container.scrollTop,window.setInterval(mxUtils.bind(this,function(){if(this.tdx-=this.dx,this.tdy-=this.dy,this.scrollbars){var n=-e.container.scrollLeft-Math.ceil(this.dx),o=-e.container.scrollTop-Math.ceil(this.dy);e.panGraph(n,o),e.panDx=this.scrollLeft-e.container.scrollLeft,e.panDy=this.scrollTop-e.container.scrollTop,e.fireEvent(new mxEventObject(mxEvent.PAN))}else e.panGraph(this.getDx(),this.getDy())}),this.delay)});this.isActive=function(){return active},this.getDx=function(){return Math.round(this.tdx)},this.getDy=function(){return Math.round(this.tdy)},this.start=function(){this.t0x=e.view.translate.x,this.t0y=e.view.translate.y,this.active=!0},this.panTo=function(n,o,s,i){this.active||this.start(),this.scrollLeft=e.container.scrollLeft,this.scrollTop=e.container.scrollTop,i=null!=i?i:0;var a=e.container;this.dx=n+(s=null!=s?s:0)-a.scrollLeft-a.clientWidth,this.dx=this.dx<0&&Math.abs(this.dx)<this.border?this.border+this.dx:this.handleMouseOut?Math.max(this.dx,0):0,0==this.dx&&(this.dx=n-a.scrollLeft,this.dx=this.dx>0&&this.dx<this.border?this.dx-this.border:this.handleMouseOut?Math.min(0,this.dx):0),this.dy=o+i-a.scrollTop-a.clientHeight,this.dy=this.dy<0&&Math.abs(this.dy)<this.border?this.border+this.dy:this.handleMouseOut?Math.max(this.dy,0):0,0==this.dy&&(this.dy=o-a.scrollTop,this.dy=this.dy>0&&this.dy<this.border?this.dy-this.border:this.handleMouseOut?Math.min(0,this.dy):0),0!=this.dx||0!=this.dy?(this.dx*=this.damper,this.dy*=this.damper,null==this.thread&&(this.thread=t())):null!=this.thread&&(window.clearInterval(this.thread),this.thread=null)},this.stop=function(){if(this.active)if(this.active=!1,null!=this.thread&&(window.clearInterval(this.thread),this.thread=null),this.tdx=0,this.tdy=0,this.scrollbars)e.panDx=0,e.panDy=0,e.fireEvent(new mxEventObject(mxEvent.PAN));else{var n=e.panDx,o=e.panDy;0==n&&0==o||(e.panGraph(0,0),e.view.setTranslate(this.t0x+n/e.view.scale,this.t0y+o/e.view.scale))}},this.destroy=function(){e.removeMouseListener(this.mouseListener)}}function mxPopupMenu(e){this.factoryMethod=e,null!=e&&this.init()}function mxAutoSaveManager(e){this.changeHandler=mxUtils.bind(this,function(t,n){this.isEnabled()&&this.graphModelChanged(n.getProperty("edit").changes)}),this.setGraph(e)}function mxAnimation(e){this.delay=null!=e?e:20}function mxMorphing(e,t,n,o){mxAnimation.call(this,o),this.graph=e,this.steps=null!=t?t:6,this.ease=null!=n?n:1.5}function mxImageBundle(e){this.images=[],this.alt=null!=e&&e}function mxImageExport(){}function mxAbstractCanvas2D(){this.converter=this.createUrlConverter(),this.reset()}function mxXmlCanvas2D(e){mxAbstractCanvas2D.call(this),this.root=e,this.writeDefaults()}function mxSvgCanvas2D(e,t){mxAbstractCanvas2D.call(this),this.root=e,this.gradients=[],this.defs=null,this.styleEnabled=null!=t&&t;var n=null;if(e.ownerDocument!=document){for(var o=e;null!=o&&"svg"!=o.nodeName;)o=o.parentNode;n=o}null!=n&&(n.getElementsByTagName("defs").length>0&&(this.defs=n.getElementsByTagName("defs")[0]),null==this.defs&&(this.defs=this.createElement("defs"),null!=n.firstChild?n.insertBefore(this.defs,n.firstChild):n.appendChild(this.defs)),this.styleEnabled&&this.defs.appendChild(this.createStyle()))}function mxGuide(e,t){this.graph=e,this.setStates(t)}function mxStencil(e){this.desc=e,this.parseDescription(),this.parseConstraints()}function mxShape(e){this.stencil=e,this.initStyles()}function mxActor(e,t,n,o){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=o?o:1}function mxCloud(e,t,n,o){mxActor.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=o?o:1}function mxRectangleShape(e,t,n,o){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=o?o:1}function mxEllipse(e,t,n,o){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=o?o:1}function mxDoubleEllipse(e,t,n,o){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=o?o:1}function mxRhombus(e,t,n,o){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=o?o:1}function mxPolyline(e,t,n){mxShape.call(this),this.points=e,this.stroke=t,this.strokewidth=null!=n?n:1}function mxArrow(e,t,n,o,s,i,a){mxShape.call(this),this.points=e,this.fill=t,this.stroke=n,this.strokewidth=null!=o?o:1,this.arrowWidth=null!=s?s:mxConstants.ARROW_WIDTH,this.spacing=null!=i?i:mxConstants.ARROW_SPACING,this.endSize=null!=a?a:mxConstants.ARROW_SIZE}function mxArrowConnector(e,t,n,o,s,i,a){mxShape.call(this),this.points=e,this.fill=t,this.stroke=n,this.strokewidth=null!=o?o:1,this.arrowWidth=null!=s?s:mxConstants.ARROW_WIDTH,this.arrowSpacing=null!=i?i:mxConstants.ARROW_SPACING,this.startSize=mxConstants.ARROW_SIZE/5,this.endSize=mxConstants.ARROW_SIZE/5}function mxText(e,t,n,o,s,i,a,l,r,d,u,g,f,v,x,z,b,_,H,T,L){mxShape.call(this),this.value=e,this.bounds=t,this.color=null!=s?s:"black",this.align=null!=n?n:"",this.valign=null!=o?o:"",this.family=null!=i?i:mxConstants.DEFAULT_FONTFAMILY,this.size=null!=a?a:mxConstants.DEFAULT_FONTSIZE,this.fontStyle=null!=l?l:mxConstants.DEFAULT_FONTSTYLE,this.spacing=parseInt(r||2),this.spacingTop=this.spacing+parseInt(d||0),this.spacingRight=this.spacing+parseInt(u||0),this.spacingBottom=this.spacing+parseInt(g||0),this.spacingLeft=this.spacing+parseInt(f||0),this.horizontal=null==v||v,this.background=x,this.border=z,this.wrap=null!=b&&b,this.clipped=null!=_&&_,this.overflow=null!=H?H:"visible",this.labelPadding=null!=T?T:0,this.textDirection=L,this.rotation=0,this.updateMargin()}function mxTriangle(){mxActor.call(this)}function mxHexagon(){mxActor.call(this)}function mxLine(e,t,n){mxShape.call(this),this.bounds=e,this.stroke=t,this.strokewidth=null!=n?n:1}function mxImageShape(e,t,n,o,s){mxShape.call(this),this.bounds=e,this.image=t,this.fill=n,this.stroke=o,this.strokewidth=null!=s?s:1,this.shadow=!1}function mxLabel(e,t,n,o){mxRectangleShape.call(this,e,t,n,o)}function mxCylinder(e,t,n,o){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=o?o:1}function mxConnector(e,t,n){mxPolyline.call(this,e,t,n)}function mxSwimlane(e,t,n,o){mxShape.call(this),this.bounds=e,this.fill=t,this.stroke=n,this.strokewidth=null!=o?o:1}function mxGraphLayout(e){this.graph=e}function mxStackLayout(e,t,n,o,s,i){mxGraphLayout.call(this,e),this.horizontal=null==t||t,this.spacing=null!=n?n:0,this.x0=null!=o?o:0,this.y0=null!=s?s:0,this.border=null!=i?i:0}function mxPartitionLayout(e,t,n,o){mxGraphLayout.call(this,e),this.horizontal=null==t||t,this.spacing=n||0,this.border=o||0}function mxCompactTreeLayout(e,t,n){mxGraphLayout.call(this,e),this.horizontal=null==t||t,this.invert=null!=n&&n}function WeightedCellSorter(e,t){this.cell=e,this.weightedValue=t}function mxRadialTreeLayout(e){mxCompactTreeLayout.call(this,e,!1)}function mxFastOrganicLayout(e){mxGraphLayout.call(this,e)}function mxCircleLayout(e,t){mxGraphLayout.call(this,e),this.radius=null!=t?t:100}function mxParallelEdgeLayout(e){mxGraphLayout.call(this,e)}function mxCompositeLayout(e,t,n){mxGraphLayout.call(this,e),this.layouts=t,this.master=n}function mxEdgeLabelLayout(e,t){mxGraphLayout.call(this,e)}function mxGraphAbstractHierarchyCell(){this.x=[],this.y=[],this.temp=[]}function mxGraphHierarchyNode(e){mxGraphAbstractHierarchyCell.apply(this,arguments),this.cell=e,this.id=mxObjectIdentity.get(e),this.connectsAsTarget=[],this.connectsAsSource=[]}function mxGraphHierarchyEdge(e){mxGraphAbstractHierarchyCell.apply(this,arguments),this.edges=e,this.ids=[];for(var t=0;t<e.length;t++)this.ids.push(mxObjectIdentity.get(e[t]))}function mxGraphHierarchyModel(e,t,n,o,s){e.getGraph(),this.tightenToSource=s,this.roots=n,this.parent=o,this.vertexMapper=new mxDictionary,this.edgeMapper=new mxDictionary,this.maxRank=0;var i=[];null==t&&(t=this.graph.getChildVertices(o)),this.maxRank=this.SOURCESCANSTARTRANK,this.createInternalCells(e,t,i);for(var a=0;a<t.length;a++){for(var l=i[a].connectsAsSource,r=0;r<l.length;r++){var d=l[r],u=d.edges;if(null!=u&&u.length>0){var g=u[0],f=e.getVisibleTerminal(g,!1),v=this.vertexMapper.get(f);i[a]==v&&(f=e.getVisibleTerminal(g,!0),v=this.vertexMapper.get(f)),null!=v&&i[a]!=v&&(d.target=v,0==v.connectsAsTarget.length&&(v.connectsAsTarget=[]),mxUtils.indexOf(v.connectsAsTarget,d)<0&&v.connectsAsTarget.push(d))}}i[a].temp[0]=1}}function mxSwimlaneModel(e,t,n,o,s){e.getGraph(),this.tightenToSource=s,this.roots=n,this.parent=o,this.vertexMapper=new mxDictionary,this.edgeMapper=new mxDictionary,this.maxRank=0;var i=[];null==t&&(t=this.graph.getChildVertices(o)),this.maxRank=this.SOURCESCANSTARTRANK,this.createInternalCells(e,t,i);for(var a=0;a<t.length;a++){for(var l=i[a].connectsAsSource,r=0;r<l.length;r++){var d=l[r],u=d.edges;if(null!=u&&u.length>0){var g=u[0],f=e.getVisibleTerminal(g,!1),v=this.vertexMapper.get(f);i[a]==v&&(f=e.getVisibleTerminal(g,!0),v=this.vertexMapper.get(f)),null!=v&&i[a]!=v&&(d.target=v,0==v.connectsAsTarget.length&&(v.connectsAsTarget=[]),mxUtils.indexOf(v.connectsAsTarget,d)<0&&v.connectsAsTarget.push(d))}}i[a].temp[0]=1}}function mxHierarchicalLayoutStage(){}function mxMedianHybridCrossingReduction(e){this.layout=e}function MedianCellSorter(){}function mxMinimumCycleRemover(e){this.layout=e}function mxCoordinateAssignment(e,t,n,o,s,i){this.layout=e,this.intraCellSpacing=t,this.interRankCellSpacing=n,this.orientation=o,this.initialX=s,this.parallelEdgeSpacing=i}function WeightedCellSorter(e,t){this.cell=e,this.weightedValue=t}function mxSwimlaneOrdering(e){this.layout=e}function mxHierarchicalLayout(e,t,n){mxGraphLayout.call(this,e),this.orientation=null!=t?t:mxConstants.DIRECTION_NORTH,this.deterministic=null==n||n}function mxSwimlaneLayout(e,t,n){mxGraphLayout.call(this,e),this.orientation=null!=t?t:mxConstants.DIRECTION_NORTH,this.deterministic=null==n||n}function mxGraphModel(e){this.currentEdit=this.createUndoableEdit(),null!=e?this.setRoot(e):this.clear()}function mxRootChange(e,t){this.model=e,this.root=t,this.previous=t}function mxChildChange(e,t,n,o){this.model=e,this.parent=t,this.previous=t,this.child=n,this.index=o,this.previousIndex=o}function mxTerminalChange(e,t,n,o){this.model=e,this.cell=t,this.terminal=n,this.previous=n,this.source=o}function mxValueChange(e,t,n){this.model=e,this.cell=t,this.value=n,this.previous=n}function mxStyleChange(e,t,n){this.model=e,this.cell=t,this.style=n,this.previous=n}function mxGeometryChange(e,t,n){this.model=e,this.cell=t,this.geometry=n,this.previous=n}function mxCollapseChange(e,t,n){this.model=e,this.cell=t,this.collapsed=n,this.previous=n}function mxVisibleChange(e,t,n){this.model=e,this.cell=t,this.visible=n,this.previous=n}function mxCellAttributeChange(e,t,n){this.cell=e,this.attribute=t,this.value=n,this.previous=n}function mxCell(e,t,n){this.value=e,this.setGeometry(t),this.setStyle(n),null!=this.onInit&&this.onInit()}function mxGeometry(e,t,n,o){mxRectangle.call(this,e,t,n,o)}function mxPrintPreview(e,t,n,o,s,i,a,l,r){this.graph=e,this.scale=null!=t?t:1/e.pageScale,this.border=null!=o?o:0,this.pageFormat=null!=n?n:e.pageFormat,this.title=null!=l?l:"Printer-friendly version",this.x0=null!=s?s:0,this.y0=null!=i?i:0,this.borderColor=a,this.pageSelector=null==r||r}function mxStylesheet(){this.styles=new Object,this.putDefaultVertexStyle(this.createDefaultVertexStyle()),this.putDefaultEdgeStyle(this.createDefaultEdgeStyle())}function mxCellState(e,t,n){this.view=e,this.cell=t,this.style=n,this.origin=new mxPoint,this.absoluteOffset=new mxPoint}function mxGraphSelectionModel(e){this.graph=e,this.cells=[]}function mxSelectionChange(e,t,n){this.selectionModel=e,this.added=null!=t?t.slice():null,this.removed=null!=n?n.slice():null}function mxCellEditor(e){this.graph=e,this.zoomHandler=mxUtils.bind(this,function(){this.graph.isEditing()&&this.resize()}),this.graph.view.addListener(mxEvent.SCALE,this.zoomHandler),this.graph.view.addListener(mxEvent.SCALE_AND_TRANSLATE,this.zoomHandler)}function mxCellRenderer(){}function mxGraphView(e){this.graph=e,this.translate=new mxPoint,this.graphBounds=new mxRectangle,this.states=new mxDictionary}function mxCurrentRootChange(e,t){if(this.view=e,this.root=t,this.previous=t,this.isUp=null==t,!this.isUp)for(var n=this.view.currentRoot,o=this.view.graph.getModel();null!=n;){if(n==t){this.isUp=!0;break}n=o.getParent(n)}}function mxGraph(e,t,n,o){this.mouseListeners=null,this.renderHint=n,this.dialect=mxClient.IS_SVG?mxConstants.DIALECT_SVG:n==mxConstants.RENDERING_HINT_EXACT&&mxClient.IS_VML?mxConstants.DIALECT_VML:n==mxConstants.RENDERING_HINT_FASTEST?mxConstants.DIALECT_STRICTHTML:n==mxConstants.RENDERING_HINT_FASTER?mxConstants.DIALECT_PREFERHTML:mxConstants.DIALECT_MIXEDHTML,this.model=null!=t?t:new mxGraphModel,this.multiplicities=[],this.imageBundles=[],this.cellRenderer=this.createCellRenderer(),this.setSelectionModel(this.createSelectionModel()),this.setStylesheet(null!=o?o:this.createStylesheet()),this.view=this.createGraphView(),this.graphModelChangeListener=mxUtils.bind(this,function(s,i){this.graphModelChanged(i.getProperty("edit").changes)}),this.model.addListener(mxEvent.CHANGE,this.graphModelChangeListener),this.createHandlers(),null!=e&&this.init(e),this.view.revalidate()}function mxCellOverlay(e,t,n,o,s,i){this.image=e,this.tooltip=t,this.align=null!=n?n:this.align,this.verticalAlign=null!=o?o:this.verticalAlign,this.offset=null!=s?s:new mxPoint,this.cursor=null!=i?i:"help"}function mxOutline(e,t){this.source=e,null!=t&&this.init(t)}function mxMultiplicity(e,t,n,o,s,i,a,l,r,d){this.source=e,this.type=t,this.attr=n,this.value=o,this.min=null!=s?s:0,this.max=null!=i?i:"n",this.validNeighbors=a,this.countError=mxResources.get(l)||l,this.typeError=mxResources.get(r)||r,this.validNeighborsAllowed=null==d||d}function mxLayoutManager(e){this.undoHandler=mxUtils.bind(this,function(t,n){this.isEnabled()&&this.beforeUndo(n.getProperty("edit"))}),this.moveHandler=mxUtils.bind(this,function(t,n){this.isEnabled()&&this.cellsMoved(n.getProperty("cells"),n.getProperty("event"))}),this.setGraph(e)}function mxSwimlaneManager(e,t,n,o){this.horizontal=null==t||t,this.addEnabled=null==n||n,this.resizeEnabled=null==o||o,this.addHandler=mxUtils.bind(this,function(s,i){this.isEnabled()&&this.isAddEnabled()&&this.cellsAdded(i.getProperty("cells"))}),this.resizeHandler=mxUtils.bind(this,function(s,i){this.isEnabled()&&this.isResizeEnabled()&&this.cellsResized(i.getProperty("cells"))}),this.setGraph(e)}function mxTemporaryCellStates(e,t,n,o){t=null!=t?t:1,this.view=e,this.oldValidateCellState=e.validateCellState,this.oldBounds=e.getGraphBounds(),this.oldStates=e.getStates(),this.oldScale=e.getScale();var s=this;if(e.validateCellState=function(r,d){return null==r||null==o||o(r)?s.oldValidateCellState.apply(e,arguments):null},e.setStates(new mxDictionary),e.setScale(t),null!=n){e.resetValidationState();for(var i=null,a=0;a<n.length;a++){var l=e.getBoundingBox(e.validateCellState(e.validateCell(n[a])));null==i?i=l:i.add(l)}e.setGraphBounds(i||new mxRectangle)}}function mxCellStatePreview(e){this.deltas=new mxDictionary,this.graph=e}function mxConnectionConstraint(e,t){this.point=e,this.perimeter=null==t||t}function mxGraphHandler(e){this.graph=e,this.graph.addMouseListener(this),this.panHandler=mxUtils.bind(this,function(){this.updatePreviewShape(),this.updateHint()}),this.graph.addListener(mxEvent.PAN,this.panHandler),this.escapeHandler=mxUtils.bind(this,function(t,n){this.reset()}),this.graph.addListener(mxEvent.ESCAPE,this.escapeHandler)}function mxPanningHandler(e){null!=e&&(this.graph=e,this.graph.addMouseListener(this),this.forcePanningHandler=mxUtils.bind(this,function(t,n){var o=n.getProperty("eventName"),s=n.getProperty("event");o==mxEvent.MOUSE_DOWN&&this.isForcePanningEvent(s)&&(this.start(s),this.active=!0,this.fireEvent(new mxEventObject(mxEvent.PAN_START,"event",s)),s.consume())}),this.graph.addListener(mxEvent.FIRE_MOUSE_EVENT,this.forcePanningHandler),this.gestureHandler=mxUtils.bind(this,function(t,n){if(this.isPinchEnabled()){var o=n.getProperty("event");if(mxEvent.isConsumed(o)||"gesturestart"!=o.type?"gestureend"==o.type&&null==this.initialScale&&(this.initialScale=null):(this.initialScale=this.graph.view.scale,this.active||null==this.mouseDownEvent||(this.start(this.mouseDownEvent),this.mouseDownEvent=null)),null!=this.initialScale){var s=Math.round(this.initialScale*o.scale*100)/100;null!=this.minScale&&(s=Math.max(this.minScale,s)),null!=this.maxScale&&(s=Math.min(this.maxScale,s)),this.graph.view.scale!=s&&(this.graph.zoomTo(s),mxEvent.consume(o))}}}),this.graph.addListener(mxEvent.GESTURE,this.gestureHandler))}function mxPopupMenuHandler(e,t){null!=e&&(this.graph=e,this.factoryMethod=t,this.graph.addMouseListener(this),this.gestureHandler=mxUtils.bind(this,function(n,o){this.inTolerance=!1}),this.graph.addListener(mxEvent.GESTURE,this.gestureHandler),this.init())}function mxCellMarker(e,t,n,o){mxEventSource.call(this),null!=e&&(this.graph=e,this.validColor=null!=t?t:mxConstants.DEFAULT_VALID_COLOR,this.invalidColor=null!=t?n:mxConstants.DEFAULT_INVALID_COLOR,this.hotspot=null!=o?o:mxConstants.DEFAULT_HOTSPOT,this.highlight=new mxCellHighlight(e))}function mxSelectionCellsHandler(e){mxEventSource.call(this),this.graph=e,this.handlers=new mxDictionary,this.graph.addMouseListener(this),this.refreshHandler=mxUtils.bind(this,function(t,n){this.isEnabled()&&this.refresh()}),this.graph.getSelectionModel().addListener(mxEvent.CHANGE,this.refreshHandler),this.graph.getModel().addListener(mxEvent.CHANGE,this.refreshHandler),this.graph.getView().addListener(mxEvent.SCALE,this.refreshHandler),this.graph.getView().addListener(mxEvent.TRANSLATE,this.refreshHandler),this.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,this.refreshHandler),this.graph.getView().addListener(mxEvent.DOWN,this.refreshHandler),this.graph.getView().addListener(mxEvent.UP,this.refreshHandler)}function mxConnectionHandler(e,t){mxEventSource.call(this),null!=e&&(this.graph=e,this.factoryMethod=t,this.init(),this.escapeHandler=mxUtils.bind(this,function(n,o){this.reset()}),this.graph.addListener(mxEvent.ESCAPE,this.escapeHandler))}function mxConstraintHandler(e){this.graph=e,this.resetHandler=mxUtils.bind(this,function(t,n){null!=this.currentFocus&&null==this.graph.view.getState(this.currentFocus.cell)&&this.reset()}),this.graph.model.addListener(mxEvent.CHANGE,this.resetHandler),this.graph.view.addListener(mxEvent.SCALE,this.resetHandler),this.graph.addListener(mxEvent.ROOT,this.resetHandler)}function mxRubberband(e){null!=e&&(this.graph=e,this.graph.addMouseListener(this),this.forceRubberbandHandler=mxUtils.bind(this,function(t,n){var o=n.getProperty("eventName"),s=n.getProperty("event");if(o==mxEvent.MOUSE_DOWN&&this.isForceRubberbandEvent(s)){var i=mxUtils.getOffset(this.graph.container),a=mxUtils.getScrollOrigin(this.graph.container);a.x-=i.x,a.y-=i.y,this.start(s.getX()+a.x,s.getY()+a.y),s.consume(!1)}}),this.graph.addListener(mxEvent.FIRE_MOUSE_EVENT,this.forceRubberbandHandler),this.panHandler=mxUtils.bind(this,function(){this.repaint()}),this.graph.addListener(mxEvent.PAN,this.panHandler),this.gestureHandler=mxUtils.bind(this,function(t,n){null!=this.first&&this.reset()}),this.graph.addListener(mxEvent.GESTURE,this.gestureHandler),mxClient.IS_IE&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()})))}function mxHandle(e,t,n){this.graph=e.view.graph,this.state=e,this.cursor=null!=t?t:this.cursor,this.image=null!=n?n:this.image,this.init()}function mxVertexHandler(e){null!=e&&(this.state=e,this.init(),this.escapeHandler=mxUtils.bind(this,function(t,n){this.livePreview&&null!=this.index&&(this.state.view.graph.cellRenderer.redraw(this.state,!0),this.state.view.invalidate(this.state.cell),this.state.invalid=!1,this.state.view.validate()),this.reset()}),this.state.view.graph.addListener(mxEvent.ESCAPE,this.escapeHandler))}function mxEdgeHandler(e){null!=e&&(this.state=e,this.init(),this.escapeHandler=mxUtils.bind(this,function(t,n){this.reset()}),this.state.view.graph.addListener(mxEvent.ESCAPE,this.escapeHandler))}function mxElbowEdgeHandler(e){mxEdgeHandler.call(this,e)}function mxEdgeSegmentHandler(e){mxEdgeHandler.call(this,e)}function mxKeyHandler(e,t){null!=e&&(this.graph=e,this.target=t||document.documentElement,this.normalKeys=[],this.shiftKeys=[],this.controlKeys=[],this.controlShiftKeys=[],this.keydownHandler=mxUtils.bind(this,function(n){this.keyDown(n)}),mxEvent.addListener(this.target,"keydown",this.keydownHandler),mxClient.IS_IE&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()})))}function mxTooltipHandler(e,t){null!=e&&(this.graph=e,this.delay=t||500,this.graph.addMouseListener(this))}function mxCellTracker(e,t,n){mxCellMarker.call(this,e,t),this.graph.addMouseListener(this),null!=n&&(this.getCell=n),mxClient.IS_IE&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()}))}function mxCellHighlight(e,t,n,o){null!=e&&(this.graph=e,this.highlightColor=null!=t?t:mxConstants.DEFAULT_VALID_COLOR,this.strokeWidth=null!=n?n:mxConstants.HIGHLIGHT_STROKEWIDTH,this.dashed=null!=o&&o,this.opacity=mxConstants.HIGHLIGHT_OPACITY,this.repaintHandler=mxUtils.bind(this,function(){if(null!=this.state){var s=this.graph.view.getState(this.state.cell);null==s?this.hide():(this.state=s,this.repaint())}}),this.graph.getView().addListener(mxEvent.SCALE,this.repaintHandler),this.graph.getView().addListener(mxEvent.TRANSLATE,this.repaintHandler),this.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,this.repaintHandler),this.graph.getModel().addListener(mxEvent.CHANGE,this.repaintHandler),this.resetHandler=mxUtils.bind(this,function(){this.hide()}),this.graph.getView().addListener(mxEvent.DOWN,this.resetHandler),this.graph.getView().addListener(mxEvent.UP,this.resetHandler))}function mxDefaultKeyHandler(e){if(null!=e){this.editor=e,this.handler=new mxKeyHandler(e.graph);var t=this.handler.escape;this.handler.escape=function(n){t.apply(this,arguments),e.hideProperties(),e.fireEvent(new mxEventObject(mxEvent.ESCAPE,"event",n))}}}function mxDefaultPopupMenu(e){this.config=e}function mxDefaultToolbar(e,t){this.editor=t,null!=e&&null!=t&&this.init(e)}function mxEditor(e){this.actions=[],this.addActions(),null!=document.body&&(this.cycleAttributeValues=[],this.popupHandler=new mxDefaultPopupMenu,this.undoManager=new mxUndoManager,this.graph=this.createGraph(),this.toolbar=this.createToolbar(),this.keyHandler=new mxDefaultKeyHandler(this),this.configure(e),this.graph.swimlaneIndicatorColorAttribute=this.cycleAttributeName,null!=this.onInit&&this.onInit(),mxClient.IS_IE&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()})))}function mxCodec(e){this.document=e||mxUtils.createXmlDocument(),this.objects=[]}function mxObjectCodec(e,t,n,o){for(var s in this.template=e,this.exclude=null!=t?t:[],this.idrefs=null!=n?n:[],this.mapping=null!=o?o:[],this.reverse=new Object,this.mapping)this.reverse[this.mapping[s]]=s}var mxClient={VERSION:"3.6.0.0",IS_IE:navigator.userAgent.indexOf("MSIE")>=0,IS_IE6:navigator.userAgent.indexOf("MSIE 6")>=0,IS_IE11:!!navigator.userAgent.match(/Trident\/7\./),IS_EDGE:!!navigator.userAgent.match(/Edge\//),IS_QUIRKS:navigator.userAgent.indexOf("MSIE")>=0&&(null==document.documentMode||5==document.documentMode),IS_EM:"spellcheck"in document.createElement("textarea")&&8==document.documentMode,VML_PREFIX:"v",OFFICE_PREFIX:"o",IS_NS:navigator.userAgent.indexOf("Mozilla/")>=0&&navigator.userAgent.indexOf("MSIE")<0&&navigator.userAgent.indexOf("Edge/")<0,IS_OP:navigator.userAgent.indexOf("Opera/")>=0||navigator.userAgent.indexOf("OPR/")>=0,IS_OT:navigator.userAgent.indexOf("Presto/")>=0&&navigator.userAgent.indexOf("Presto/2.4.")<0&&navigator.userAgent.indexOf("Presto/2.3.")<0&&navigator.userAgent.indexOf("Presto/2.2.")<0&&navigator.userAgent.indexOf("Presto/2.1.")<0&&navigator.userAgent.indexOf("Presto/2.0.")<0&&navigator.userAgent.indexOf("Presto/1.")<0,IS_SF:navigator.userAgent.indexOf("AppleWebKit/")>=0&&navigator.userAgent.indexOf("Chrome/")<0&&navigator.userAgent.indexOf("Edge/")<0,IS_IOS:!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g),IS_GC:navigator.userAgent.indexOf("Chrome/")>=0&&navigator.userAgent.indexOf("Edge/")<0,IS_CHROMEAPP:null!=window.chrome&&null!=chrome.app&&null!=chrome.app.runtime,IS_FF:navigator.userAgent.indexOf("Firefox/")>=0,IS_MT:navigator.userAgent.indexOf("Firefox/")>=0&&navigator.userAgent.indexOf("Firefox/1.")<0&&navigator.userAgent.indexOf("Firefox/2.")<0||navigator.userAgent.indexOf("Iceweasel/")>=0&&navigator.userAgent.indexOf("Iceweasel/1.")<0&&navigator.userAgent.indexOf("Iceweasel/2.")<0||navigator.userAgent.indexOf("SeaMonkey/")>=0&&navigator.userAgent.indexOf("SeaMonkey/1.")<0||navigator.userAgent.indexOf("Iceape/")>=0&&navigator.userAgent.indexOf("Iceape/1.")<0,IS_SVG:navigator.userAgent.indexOf("Firefox/")>=0||navigator.userAgent.indexOf("Iceweasel/")>=0||navigator.userAgent.indexOf("Seamonkey/")>=0||navigator.userAgent.indexOf("Iceape/")>=0||navigator.userAgent.indexOf("Galeon/")>=0||navigator.userAgent.indexOf("Epiphany/")>=0||navigator.userAgent.indexOf("AppleWebKit/")>=0||navigator.userAgent.indexOf("Gecko/")>=0||navigator.userAgent.indexOf("Opera/")>=0||null!=document.documentMode&&document.documentMode>=9,NO_FO:!document.createElementNS||"[object SVGForeignObjectElement]"!=document.createElementNS("http://www.w3.org/2000/svg","foreignObject")||navigator.userAgent.indexOf("Opera/")>=0,IS_VML:"MICROSOFT INTERNET EXPLORER"==navigator.appName.toUpperCase(),IS_WIN:navigator.appVersion.indexOf("Win")>0,IS_MAC:navigator.appVersion.indexOf("Mac")>0,IS_TOUCH:"ontouchstart"in document.documentElement,IS_POINTER:null!=window.PointerEvent,IS_LOCAL:document.location.href.indexOf("http://")<0&&document.location.href.indexOf("https://")<0,isBrowserSupported:function(){return mxClient.IS_VML||mxClient.IS_SVG},link:function(e,t,n){if(n=n||document,mxClient.IS_IE6)n.write('<link rel="'+e+'" href="'+t+'" charset="ISO-8859-1" type="text/css"/>');else{var o=n.createElement("link");o.setAttribute("rel",e),o.setAttribute("href",t),o.setAttribute("charset","ISO-8859-1"),o.setAttribute("type","text/css"),n.getElementsByTagName("head")[0].appendChild(o)}},include:function(e){document.write('<script src="'+e+'"><\/script>')},dispose:function(){for(var e=0;e<mxEvent.objects.length;e++)null!=mxEvent.objects[e].mxListenerList&&mxEvent.removeAllListeners(mxEvent.objects[e])}},e;exports.mxClient=mxClient,"undefined"==typeof mxLoadResources&&(mxLoadResources=!0),"undefined"==typeof mxResourceExtension&&(mxResourceExtension=".txt"),"undefined"==typeof mxLoadStylesheets&&(mxLoadStylesheets=!0),"undefined"!=typeof mxBasePath&&mxBasePath.length>0?("/"==mxBasePath.substring(mxBasePath.length-1)&&(mxBasePath=mxBasePath.substring(0,mxBasePath.length-1)),mxClient.basePath=mxBasePath):mxClient.basePath=".","undefined"!=typeof mxImageBasePath&&mxImageBasePath.length>0?("/"==mxImageBasePath.substring(mxImageBasePath.length-1)&&(mxImageBasePath=mxImageBasePath.substring(0,mxImageBasePath.length-1)),mxClient.imageBasePath=mxImageBasePath):mxClient.imageBasePath=mxClient.basePath+"/images",mxClient.language="undefined"!=typeof mxLanguage&&null!=mxLanguage?mxLanguage:mxClient.IS_IE?navigator.userLanguage:navigator.language,mxClient.defaultLanguage="undefined"!=typeof mxDefaultLanguage&&null!=mxDefaultLanguage?mxDefaultLanguage:"en",mxLoadStylesheets&&mxClient.link("stylesheet",mxClient.basePath+"/css/common.css"),"undefined"!=typeof mxLanguages&&null!=mxLanguages&&(mxClient.languages=mxLanguages),mxClient.IS_VML&&(mxClient.IS_SVG?mxClient.IS_VML=!1:(8==document.documentMode?(document.namespaces.add(mxClient.VML_PREFIX,"urn:schemas-microsoft-com:vml","#default#VML"),document.namespaces.add(mxClient.OFFICE_PREFIX,"urn:schemas-microsoft-com:office:office","#default#VML")):(document.namespaces.add(mxClient.VML_PREFIX,"urn:schemas-microsoft-com:vml"),document.namespaces.add(mxClient.OFFICE_PREFIX,"urn:schemas-microsoft-com:office:office")),mxClient.IS_QUIRKS&&document.styleSheets.length>=30?(e=document.createElement("style"),e.type="text/css",e.styleSheet.cssText=mxClient.VML_PREFIX+"\\:*{behavior:url(#default#VML)}"+mxClient.OFFICE_PREFIX+"\\:*{behavior:url(#default#VML)}",document.getElementsByTagName("head")[0].appendChild(e)):document.createStyleSheet().cssText=mxClient.VML_PREFIX+"\\:*{behavior:url(#default#VML)}"+mxClient.OFFICE_PREFIX+"\\:*{behavior:url(#default#VML)}",mxLoadStylesheets&&mxClient.link("stylesheet",mxClient.basePath+"/css/explorer.css"),window.attachEvent("onunload",mxClient.dispose)));var mxLog={consoleName:"Console",TRACE:!1,DEBUG:!0,WARN:!0,buffer:"",init:function(){if(null==mxLog.window&&null!=document.body){var e=mxLog.consoleName+" - mxGraph "+mxClient.VERSION,t=document.createElement("table");t.setAttribute("width","100%"),t.setAttribute("height","100%");var n=document.createElement("tbody"),o=document.createElement("tr"),s=document.createElement("td");s.style.verticalAlign="top",mxLog.textarea=document.createElement("textarea"),mxLog.textarea.setAttribute("readOnly","true"),mxLog.textarea.style.height="100%",mxLog.textarea.style.resize="none",mxLog.textarea.value=mxLog.buffer,mxLog.textarea.style.width=mxClient.IS_NS&&"BackCompat"!=document.compatMode?"99%":"100%",s.appendChild(mxLog.textarea),o.appendChild(s),n.appendChild(o),o=document.createElement("tr"),mxLog.td=document.createElement("td"),mxLog.td.style.verticalAlign="top",mxLog.td.setAttribute("height","30px"),o.appendChild(mxLog.td),n.appendChild(o),t.appendChild(n),mxLog.addButton("Info",function(d){mxLog.info()}),mxLog.addButton("DOM",function(d){var u=mxUtils.getInnerHtml(document.body);mxLog.debug(u)}),mxLog.addButton("Trace",function(d){mxLog.TRACE=!mxLog.TRACE,mxLog.debug(mxLog.TRACE?"Tracing enabled":"Tracing disabled")}),mxLog.addButton("Copy",function(d){try{mxUtils.copy(mxLog.textarea.value)}catch(u){mxUtils.alert(u)}}),mxLog.addButton("Show",function(d){try{mxUtils.popup(mxLog.textarea.value)}catch(u){mxUtils.alert(u)}}),mxLog.addButton("Clear",function(d){mxLog.textarea.value=""});var i=0,a=0;if("number"==typeof window.innerWidth?(i=window.innerHeight,a=window.innerWidth):(i=document.documentElement.clientHeight||document.body.clientHeight,a=document.body.clientWidth),mxLog.window=new mxWindow(e,t,Math.max(0,a-320),Math.max(0,i-210),300,160),mxLog.window.setMaximizable(!0),mxLog.window.setScrollable(!1),mxLog.window.setResizable(!0),mxLog.window.setClosable(!0),mxLog.window.destroyOnClose=!1,(mxClient.IS_NS||mxClient.IS_IE)&&!mxClient.IS_GC&&!mxClient.IS_SF&&"BackCompat"!=document.compatMode||11==document.documentMode){var l=mxLog.window.getElement(),r=function(d,u){mxLog.textarea.style.height=Math.max(0,l.offsetHeight-70)+"px"};mxLog.window.addListener(mxEvent.RESIZE_END,r),mxLog.window.addListener(mxEvent.MAXIMIZE,r),mxLog.window.addListener(mxEvent.NORMALIZE,r),mxLog.textarea.style.height="92px"}}},info:function(){mxLog.writeln(mxUtils.toString(navigator))},addButton:function(e,t){var n=document.createElement("button");mxUtils.write(n,e),mxEvent.addListener(n,"click",t),mxLog.td.appendChild(n)},isVisible:function(){return null!=mxLog.window&&mxLog.window.isVisible()},show:function(){mxLog.setVisible(!0)},setVisible:function(e){null==mxLog.window&&mxLog.init(),null!=mxLog.window&&mxLog.window.setVisible(e)},enter:function(e){if(mxLog.TRACE)return mxLog.writeln("Entering "+e),(new Date).getTime()},leave:function(e,t){if(mxLog.TRACE){var n=0!=t?" ("+((new Date).getTime()-t)+" ms)":"";mxLog.writeln("Leaving "+e+n)}},debug:function(){mxLog.DEBUG&&mxLog.writeln.apply(this,arguments)},warn:function(){mxLog.WARN&&mxLog.writeln.apply(this,arguments)},write:function(){for(var e="",t=0;t<arguments.length;t++)e+=arguments[t],t<arguments.length-1&&(e+=" ");null!=mxLog.textarea?(mxLog.textarea.value=mxLog.textarea.value+e,navigator.userAgent.indexOf("Presto/2.5")>=0&&(mxLog.textarea.style.visibility="hidden",mxLog.textarea.style.visibility="visible"),mxLog.textarea.scrollTop=mxLog.textarea.scrollHeight):mxLog.buffer+=e},writeln:function(){for(var e="",t=0;t<arguments.length;t++)e+=arguments[t],t<arguments.length-1&&(e+=" ");mxLog.write(e+"\n")}};exports.mxLog=mxLog;var mxObjectIdentity={FIELD_NAME:"mxObjectId",counter:0,get:function(e){if(null!=e){if(null==e[mxObjectIdentity.FIELD_NAME])if("object"==typeof e){var t=mxUtils.getFunctionName(e.constructor);e[mxObjectIdentity.FIELD_NAME]=t+"#"+mxObjectIdentity.counter++}else"function"==typeof e&&(e[mxObjectIdentity.FIELD_NAME]="Function#"+mxObjectIdentity.counter++);return e[mxObjectIdentity.FIELD_NAME]}return null},clear:function(e){"object"!=typeof e&&"function"!=typeof e||delete e[mxObjectIdentity.FIELD_NAME]}};exports.mxObjectIdentity=mxObjectIdentity,mxDictionary.prototype.map=null,mxDictionary.prototype.clear=function(){this.map={}},mxDictionary.prototype.get=function(e){var t=mxObjectIdentity.get(e);return this.map[t]},mxDictionary.prototype.put=function(e,t){var n=mxObjectIdentity.get(e),o=this.map[n];return this.map[n]=t,o},mxDictionary.prototype.remove=function(e){var t=mxObjectIdentity.get(e),n=this.map[t];return delete this.map[t],n},mxDictionary.prototype.getKeys=function(){var e=[];for(var t in this.map)e.push(t);return e},mxDictionary.prototype.getValues=function(){var e=[];for(var t in this.map)e.push(this.map[t]);return e},mxDictionary.prototype.visit=function(e){for(var t in this.map)e(t,this.map[t])},exports.mxDictionary=mxDictionary;var mxResources={resources:[],extension:mxResourceExtension,resourcesEncoded:!1,loadDefaultBundle:!0,loadSpecialBundle:!0,isLanguageSupported:function(e){return null==mxClient.languages||mxUtils.indexOf(mxClient.languages,e)>=0},getDefaultBundle:function(e,t){return mxResources.loadDefaultBundle||!mxResources.isLanguageSupported(t)?e+mxResources.extension:null},getSpecialBundle:function(e,t){if(null==mxClient.languages||!this.isLanguageSupported(t)){var n=t.indexOf("-");n>0&&(t=t.substring(0,n))}return mxResources.loadSpecialBundle&&mxResources.isLanguageSupported(t)&&t!=mxClient.defaultLanguage?e+"_"+t+mxResources.extension:null},add:function(e,t,n){if((t=null!=t?t:null!=mxClient.language?mxClient.language.toLowerCase():mxConstants.NONE)!=mxConstants.NONE){var o=mxResources.getDefaultBundle(e,t),s=mxResources.getSpecialBundle(e,t),i=function(){if(null!=s)if(n)mxUtils.get(s,function(r){mxResources.parse(r.getText()),n()},function(){n()});else try{var l=mxUtils.load(s);l.isReady()&&mxResources.parse(l.getText())}catch(r){}else null!=n&&n()};if(null!=o)if(n)mxUtils.get(o,function(l){mxResources.parse(l.getText()),i()},function(){i()});else try{var a=mxUtils.load(o);a.isReady()&&mxResources.parse(a.getText()),i()}catch(l){}else i()}},parse:function(e){if(null!=e)for(var t=e.split("\n"),n=0;n<t.length;n++)if("#"!=t[n].charAt(0)){var o=t[n].indexOf("=");if(o>0){var s=t[n].substring(0,o),i=t[n].length;13==t[n].charCodeAt(i-1)&&i--;var a=t[n].substring(o+1,i);this.resourcesEncoded?(a=a.replace(/\\(?=u[a-fA-F\d]{4})/g,"%"),mxResources.resources[s]=unescape(a)):mxResources.resources[s]=a}}},get:function(e,t,n){var o=mxResources.resources[e];return null==o&&(o=n),null!=o&&null!=t&&(o=mxResources.replacePlaceholders(o,t)),o},replacePlaceholders:function(e,t){for(var n=[],o=null,s=0;s<e.length;s++){var i=e.charAt(s);"{"==i?o="":null!=o&&"}"==i?((o=parseInt(o)-1)>=0&&o<t.length&&n.push(t[o]),o=null):null!=o?o+=i:n.push(i)}return n.join("")},loadResources:function(e){mxResources.add(mxClient.basePath+"/resources/editor",null,function(){mxResources.add(mxClient.basePath+"/resources/graph",null,e)})}};exports.mxResources=mxResources,mxPoint.prototype.x=null,mxPoint.prototype.y=null,mxPoint.prototype.equals=function(e){return null!=e&&e.x==this.x&&e.y==this.y},mxPoint.prototype.clone=function(){return mxUtils.clone(this)},exports.mxPoint=mxPoint,mxRectangle.prototype=new mxPoint,mxRectangle.prototype.constructor=mxRectangle,mxRectangle.prototype.width=null,mxRectangle.prototype.height=null,mxRectangle.prototype.setRect=function(e,t,n,o){this.x=e,this.y=t,this.width=n,this.height=o},mxRectangle.prototype.getCenterX=function(){return this.x+this.width/2},mxRectangle.prototype.getCenterY=function(){return this.y+this.height/2},mxRectangle.prototype.add=function(e){if(null!=e){var t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),o=Math.max(this.x+this.width,e.x+e.width),s=Math.max(this.y+this.height,e.y+e.height);this.x=t,this.y=n,this.width=o-t,this.height=s-n}},mxRectangle.prototype.intersect=function(e){if(null!=e){var t=this.x+this.width,n=e.x+e.width,o=this.y+this.height,s=e.y+e.height;this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.width=Math.min(t,n)-this.x,this.height=Math.min(o,s)-this.y}},mxRectangle.prototype.grow=function(e){this.x-=e,this.y-=e,this.width+=2*e,this.height+=2*e},mxRectangle.prototype.getPoint=function(){return new mxPoint(this.x,this.y)},mxRectangle.prototype.rotate90=function(){var e=(this.width-this.height)/2;this.x+=e,this.y-=e;var t=this.width;this.width=this.height,this.height=t},mxRectangle.prototype.equals=function(e){return null!=e&&e.x==this.x&&e.y==this.y&&e.width==this.width&&e.height==this.height},mxRectangle.fromRectangle=function(e){return new mxRectangle(e.x,e.y,e.width,e.height)},exports.mxRectangle=mxRectangle;var mxEffects={animateChanges:function(e,t,n){var o=10,s=0,i=function(){for(var l=!1,r=0;r<t.length;r++){var d=t[r];if(d instanceof mxGeometryChange||d instanceof mxTerminalChange||d instanceof mxValueChange||d instanceof mxChildChange||d instanceof mxStyleChange){var u=e.getView().getState(d.cell||d.child,!1);if(null!=u)if(l=!0,d.constructor!=mxGeometryChange||e.model.isEdge(d.cell))mxUtils.setOpacity(u.shape.node,100*s/o);else{var g=e.getView().scale,f=(d.geometry.x-d.previous.x)*g,v=(d.geometry.y-d.previous.y)*g,x=(d.geometry.width-d.previous.width)*g,z=(d.geometry.height-d.previous.height)*g;0==s?(u.x-=f,u.y-=v,u.width-=x,u.height-=z):(u.x+=f/o,u.y+=v/o,u.width+=x/o,u.height+=z/o),e.cellRenderer.redraw(u),mxEffects.cascadeOpacity(e,d.cell,100*s/o)}}}s<o&&l?(s++,window.setTimeout(i,a)):null!=n&&n()},a=30;i()},cascadeOpacity:function(e,t,n){for(var o=e.model.getChildCount(t),s=0;s<o;s++){var i=e.model.getChildAt(t,s),a=e.getView().getState(i);null!=a&&(mxUtils.setOpacity(a.shape.node,n),mxEffects.cascadeOpacity(e,i,n))}var l=e.model.getEdges(t);if(null!=l)for(s=0;s<l.length;s++){var r=e.getView().getState(l[s]);null!=r&&mxUtils.setOpacity(r.shape.node,n)}},fadeOut:function(e,t,n,o,s,i){o=o||40,s=s||30;var a=t||100;if(mxUtils.setOpacity(e,a),i||null==i){var l=function(){a=Math.max(a-o,0),mxUtils.setOpacity(e,a),a>0?window.setTimeout(l,s):(e.style.visibility="hidden",n&&e.parentNode&&e.parentNode.removeChild(e))};window.setTimeout(l,s)}else e.style.visibility="hidden",n&&e.parentNode&&e.parentNode.removeChild(e)}};exports.mxEffects=mxEffects;var mxUtils={errorResource:"none"!=mxClient.language?"error":"",closeResource:"none"!=mxClient.language?"close":"",errorImage:mxClient.imageBasePath+"/error.gif",removeCursors:function(e){null!=e.style&&(e.style.cursor="");var t=e.childNodes;if(null!=t)for(var n=t.length,o=0;o<n;o+=1)mxUtils.removeCursors(t[o])},getCurrentStyle:mxClient.IS_IE?function(e){return null!=e?e.currentStyle:null}:function(e){return null!=e?window.getComputedStyle(e,""):null},parseCssNumber:function(e){return"thin"==e?e="2":"medium"==e?e="4":"thick"==e&&(e="6"),e=parseFloat(e),isNaN(e)&&(e=0),e},setPrefixedStyle:function(){var e=null;return mxClient.IS_OT?e="O":mxClient.IS_SF||mxClient.IS_GC?e="Webkit":mxClient.IS_MT?e="Moz":mxClient.IS_IE&&document.documentMode>=9&&document.documentMode<10&&(e="ms"),function(t,n,o){t[n]=o,null!=e&&n.length>0&&(t[n=e+n.substring(0,1).toUpperCase()+n.substring(1)]=o)}}(),hasScrollbars:function(e){var t=mxUtils.getCurrentStyle(e);return null!=t&&("scroll"==t.overflow||"auto"==t.overflow)},bind:function(e,t){return function(){return t.apply(e,arguments)}},eval:function(expr){var result=null;if(expr.indexOf("function")>=0)try{eval("var _mxJavaScriptExpression="+expr),result=_mxJavaScriptExpression,_mxJavaScriptExpression=null}catch(e){mxLog.warn(e.message+" while evaluating "+expr)}else try{result=eval(expr)}catch(e){mxLog.warn(e.message+" while evaluating "+expr)}return result},findNode:function(e,t,n){if(e.nodeType==mxConstants.NODETYPE_ELEMENT){var o=e.getAttribute(t);if(null!=o&&o==n)return e}for(e=e.firstChild;null!=e;){var s=mxUtils.findNode(e,t,n);if(null!=s)return s;e=e.nextSibling}return null},getFunctionName:function(e){var t=null;if(null!=e)if(null!=e.name)t=e.name;else if(t=mxUtils.trim(e.toString()),/^function\s/.test(t)){var n=(t=mxUtils.ltrim(t.substring(9))).indexOf("(");n>0&&(t=t.substring(0,n))}return t},indexOf:function(e,t){if(null!=e&&null!=t)for(var n=0;n<e.length;n++)if(e[n]==t)return n;return-1},forEach:function(e,t){if(null!=e&&null!=t)for(var n=0;n<e.length;n++)t(e[n]);return e},remove:function(e,t){var n=null;if("object"==typeof t)for(var o=mxUtils.indexOf(t,e);o>=0;)t.splice(o,1),n=e,o=mxUtils.indexOf(t,e);for(var s in t)t[s]==e&&(delete t[s],n=e);return n},isNode:function(e,t,n,o){return!(null==e||isNaN(e.nodeType)||null!=t&&e.nodeName.toLowerCase()!=t.toLowerCase()||null!=n&&e.getAttribute(n)!=o)},isAncestorNode:function(e,t){for(var n=t;null!=n;){if(n==e)return!0;n=n.parentNode}return!1},getChildNodes:function(e,t){t=t||mxConstants.NODETYPE_ELEMENT;for(var n=[],o=e.firstChild;null!=o;)o.nodeType==t&&n.push(o),o=o.nextSibling;return n},importNode:function(e,t,n){if(!mxClient.IS_IE||!(null==document.documentMode||document.documentMode<10))return e.importNode(t,n);switch(t.nodeType){case 1:var o=e.createElement(t.nodeName);if(t.attributes&&t.attributes.length>0){for(var s=0;s<t.attributes.length;s++)o.setAttribute(t.attributes[s].nodeName,t.getAttribute(t.attributes[s].nodeName));if(n&&t.childNodes&&t.childNodes.length>0)for(s=0;s<t.childNodes.length;s++)o.appendChild(mxUtils.importNode(e,t.childNodes[s],n))}return o;case 3:case 4:case 8:return e.createTextNode(t.value)}},createXmlDocument:function(){var e=null;return document.implementation&&document.implementation.createDocument?e=document.implementation.createDocument("","",null):window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLDOM")),e},parseXml:window.DOMParser?function(e){return(new DOMParser).parseFromString(e,"text/xml")}:function(e){var t=mxUtils.createXmlDocument();return t.async=!1,t.validateOnParse=!1,t.resolveExternals=!1,t.loadXML(e),t},clearSelection:document.selection?function(){document.selection.empty()}:window.getSelection?function(){window.getSelection().removeAllRanges()}:function(){},getPrettyXml:function(e,t,n){var o=[];if(null!=e)if(t=t||"  ",n=n||"",e.nodeType==mxConstants.NODETYPE_TEXT)o.push(e.value);else{o.push(n+"<"+e.nodeName);var s=e.attributes;if(null!=s)for(var i=0;i<s.length;i++){var a=mxUtils.htmlEntities(s[i].value);o.push(" "+s[i].nodeName+'="'+a+'"')}var l=e.firstChild;if(null!=l){for(o.push(">\n");null!=l;)o.push(mxUtils.getPrettyXml(l,t,n+t)),l=l.nextSibling;o.push(n+"</"+e.nodeName+">\n")}else o.push("/>\n")}return o.join("")},removeWhitespace:function(e,t){for(var n=t?e.previousSibling:e.nextSibling;null!=n&&n.nodeType==mxConstants.NODETYPE_TEXT;){var o=t?n.previousSibling:n.nextSibling,s=mxUtils.getTextContent(n);0==mxUtils.trim(s).length&&n.parentNode.removeChild(n),n=o}},htmlEntities:function(e,t){return e=(e=(e=(e=(e=(e=e||"").replace(/&/g,"&amp;")).replace(/"/g,"&quot;")).replace(/\'/g,"&#39;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),(null==t||t)&&(e=e.replace(/\n/g,"&#xa;")),e},isVml:function(e){return null!=e&&"urn:schemas-microsoft-com:vml"==e.tagUrn},getXml:function(e,t){var n="";return null!=window.XMLSerializer?n=(new XMLSerializer).serializeToString(e):null!=e.xml&&(n=e.xml.replace(/\r\n\t[\t]*/g,"").replace(/>\r\n/g,">").replace(/\r\n/g,"\n")),n.replace(/\n/g,t=t||"&#xa;")},extractTextWithWhitespace:function(e){for(var t=!1,n=[],o=0;e[o];o++){var s=e[o];if(3===s.nodeType||4===s.nodeType){if(11==document.documentMode&&o==e.length-1&&0==s.nodeValue.length)break;n.push(s.nodeValue+(null==s.nextSibling||3!=s.nextSibling.nodeType?"\n":"")),t=!0}else 8!==s.nodeType&&(n.push((mxClient.IS_IE||mxClient.IS_IE11)&&"P"==s.nodeName&&0==s.innerHTML.length||!t&&"BR"==s.nodeName||"DIV"==s.nodeName&&"<br>"==s.innerHTML?"\n":mxUtils.extractTextWithWhitespace(s.childNodes)),t=!1)}return n.join("")},replaceTrailingNewlines:function(e,t){for(var n="";e.length>0&&"\n"==e.charAt(e.length-1);)e=e.substring(0,e.length-1),n+=t;return e+n},getTextContent:function(e){return void 0!==e.innerText?e.innerText:null!=e?e[void 0===e.textContent?"text":"textContent"]:""},setTextContent:function(e,t){void 0!==e.innerText?e.innerText=t:e[void 0===e.textContent?"text":"textContent"]=t},getInnerHtml:mxClient.IS_IE?function(e){return null!=e?e.innerHTML:""}:function(e){return null!=e?(new XMLSerializer).serializeToString(e):""},getOuterHtml:mxClient.IS_IE?function(e){if(null!=e){if(null!=e.outerHTML)return e.outerHTML;var t=[];t.push("<"+e.nodeName);var n=e.attributes;if(null!=n)for(var o=0;o<n.length;o++){var s=n[o].value;null!=s&&s.length>0&&(t.push(" "),t.push(n[o].nodeName),t.push('="'),t.push(s),t.push('"'))}return 0==e.innerHTML.length?t.push("/>"):(t.push(">"),t.push(e.innerHTML),t.push("</"+e.nodeName+">")),t.join("")}return""}:function(e){return null!=e?(new XMLSerializer).serializeToString(e):""},write:function(e,t){var o=e.ownerDocument.createTextNode(t);return null!=e&&e.appendChild(o),o},writeln:function(e,t){var o=e.ownerDocument.createTextNode(t);return null!=e&&(e.appendChild(o),e.appendChild(document.createElement("br"))),o},br:function(e,t){t=t||1;for(var n=null,o=0;o<t;o++)null!=e&&(n=e.ownerDocument.createElement("br"),e.appendChild(n));return n},button:function(e,t,n){var o=(n=null!=n?n:document).createElement("button");return mxUtils.write(o,e),mxEvent.addListener(o,"click",function(s){t(s)}),o},para:function(e,t){var n=document.createElement("p");return mxUtils.write(n,t),null!=e&&e.appendChild(n),n},addTransparentBackgroundFilter:function(e){e.style.filter+="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+mxClient.imageBasePath+"/transparent.gif', sizingMethod='scale')"},linkAction:function(e,t,n,o,s){return mxUtils.link(e,t,function(){n.execute(o)},s)},linkInvoke:function(e,t,n,o,s,i){return mxUtils.link(e,t,function(){n[o](s)},i)},link:function(e,t,n,o){var s=document.createElement("span");return s.style.color="blue",s.style.textDecoration="underline",s.style.cursor="pointer",null!=o&&(s.style.paddingLeft=o+"px"),mxEvent.addListener(s,"click",n),mxUtils.write(s,t),null!=e&&e.appendChild(s),s},fit:function(e){var t=parseInt(e.offsetLeft),n=parseInt(e.offsetWidth),o=mxUtils.getDocumentScrollOrigin(e.ownerDocument),s=o.x,i=o.y,a=document.body,l=document.documentElement,r=s+(a.clientWidth||l.clientWidth);t+n>r&&(e.style.left=Math.max(s,r-n)+"px");var d=parseInt(e.offsetTop),u=parseInt(e.offsetHeight),g=i+Math.max(a.clientHeight||0,l.clientHeight);d+u>g&&(e.style.top=Math.max(i,g-u)+"px")},load:function(e){var t=new mxXmlRequest(e,null,"GET",!1);return t.send(),t},get:function(e,t,n,o,s,i){var a=new mxXmlRequest(e,null,"GET");return null!=o&&a.setBinary(o),a.send(t,n,s,i),a},getAll:function(e,t,n){for(var o=e.length,s=[],i=0,a=function(){0==i&&null!=n&&n(),i++},l=0;l<e.length;l++)!function(r,d){mxUtils.get(r,function(u){var g=u.getStatus();g<200||g>299?a():(s[d]=u,0==--o&&t(s))},a)}(e[l],l);0==o&&t(s)},post:function(e,t,n,o){return new mxXmlRequest(e,t).send(n,o)},submit:function(e,t,n,o){return new mxXmlRequest(e,t).simulate(n,o)},loadInto:function(e,t,n){mxClient.IS_IE?t.onreadystatechange=function(){4==t.readyState&&n()}:t.addEventListener("load",n,!1),t.load(e)},getValue:function(e,t,n){var o=null!=e?e[t]:null;return null==o&&(o=n),o},getNumber:function(e,t,n){var o=null!=e?e[t]:null;return null==o&&(o=n||0),Number(o)},getColor:function(e,t,n){var o=null!=e?e[t]:null;return null==o?o=n:o==mxConstants.NONE&&(o=null),o},clone:function(e,t,n){n=null!=n&&n;var o=null;if(null!=e&&"function"==typeof e.constructor)for(var s in o=new e.constructor,e)s!=mxObjectIdentity.FIELD_NAME&&(null==t||mxUtils.indexOf(t,s)<0)&&(o[s]=n||"object"!=typeof e[s]?e[s]:mxUtils.clone(e[s]));return o},equalPoints:function(e,t){if(null==e&&null!=t||null!=e&&null==t||null!=e&&null!=t&&e.length!=t.length)return!1;if(null!=e&&null!=t)for(var n=0;n<e.length;n++)if(e[n]==t[n]||null!=e[n]&&!e[n].equals(t[n]))return!1;return!0},equalEntries:function(e,t){if(null==e&&null!=t||null!=e&&null==t||null!=e&&null!=t&&e.length!=t.length)return!1;if(null!=e&&null!=t){var n=0;for(var o in t)n++;for(var o in e)if(n--,!(mxUtils.isNaN(e[o])&&mxUtils.isNaN(t[o])||e[o]==t[o]))return!1}return 0==n},removeDuplicates:function(e){for(var t=new mxDictionary,n=[],o=0;o<e.length;o++)t.get(e[o])||(n.push(e[o]),t.put(e[o],!0));return n},isNaN:function(e){return"number"==typeof e&&isNaN(e)},extend:function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},toString:function(e){var t="";for(var n in e)try{t+=null==e[n]?n+" = [null]\n":"function"==typeof e[n]?n+" => [Function]\n":"object"==typeof e[n]?n+" => ["+mxUtils.getFunctionName(e[n].constructor)+"]\n":n+" = "+e[n]+"\n"}catch(s){t+=n+"="+s.message}return t},toRadians:function(e){return Math.PI*e/180},toDegree:function(e){return 180*e/Math.PI},arcToCurves:function(e,t,n,o,s,i,a,l,r){if(l-=e,r-=t,0===n||0===o)return ut;var d=a,u=s;n=Math.abs(n),o=Math.abs(o);var g,f=-l/2,v=-r/2,x=Math.cos(u*Math.PI/180),z=Math.sin(u*Math.PI/180),b=x*f+z*v,_=-1*z*f+x*v,H=b*b,T=_*_,L=n*n,V=o*o,Y=H/L+T/V;if(Y>1)n=Math.sqrt(Y)*n,o=Math.sqrt(Y)*o,g=0;else{var J=1;i===d&&(J=-1),g=J*Math.sqrt((L*V-L*T-V*H)/(L*T+V*H))}var K=g*n*_/o,re=-1*g*o*b/n,X=x*K-z*re+l/2,ne=z*K+x*re+r/2,he=Math.atan2((_-re)/o,(b-K)/n)-Math.atan2(0,1),Q=he>=0?he:2*Math.PI+he,ye=(he=Math.atan2((-_-re)/o,(-b-K)/n)-Math.atan2((_-re)/o,(b-K)/n))>=0?he:2*Math.PI+he;0==d&&ye>0?ye-=2*Math.PI:0!=d&&ye<0&&(ye+=2*Math.PI);for(var Le=2*ye/Math.PI,lt=Math.ceil(Le<0?-1*Le:Le),Me=ye/lt,De=8/3*Math.sin(Me/4)*Math.sin(Me/4)/Math.sin(Me/2),xe=x*n,Oe=x*o,k=z*n,tt=z*o,nt=Math.cos(Q),St=Math.sin(Q),zt=-De*(xe*St+tt*nt),et=-De*(k*St-Oe*nt),ot=0,gt=0,ut=[],Nt=0;Nt<lt;++Nt){Q+=Me,ot=xe*(nt=Math.cos(Q))-tt*(St=Math.sin(Q))+X,gt=k*nt+Oe*St+ne;var je=-De*(xe*St+tt*nt),Ze=-De*(k*St-Oe*nt),ke=6*Nt;ut[ke]=Number(zt+e),ut[ke+1]=Number(et+t),ut[ke+2]=Number(ot-je+e),ut[ke+3]=Number(gt-Ze+t),ut[ke+4]=Number(ot+e),ut[ke+5]=Number(gt+t),zt=ot+je,et=gt+Ze}return ut},getBoundingBox:function(e,t,n){var o=null;if(null!=e&&null!=t&&0!=t){var s=mxUtils.toRadians(t),i=Math.cos(s),a=Math.sin(s);n=null!=n?n:new mxPoint(e.x+e.width/2,e.y+e.height/2);var l=new mxPoint(e.x,e.y),r=new mxPoint(e.x+e.width,e.y),d=new mxPoint(r.x,e.y+e.height),u=new mxPoint(e.x,d.y);l=mxUtils.getRotatedPoint(l,i,a,n),r=mxUtils.getRotatedPoint(r,i,a,n),d=mxUtils.getRotatedPoint(d,i,a,n),u=mxUtils.getRotatedPoint(u,i,a,n),(o=new mxRectangle(l.x,l.y,0,0)).add(new mxRectangle(r.x,r.y,0,0)),o.add(new mxRectangle(d.x,d.y,0,0)),o.add(new mxRectangle(u.x,u.y,0,0))}return o},getRotatedPoint:function(e,t,n,o){o=null!=o?o:new mxPoint;var s=e.x-o.x,i=e.y-o.y;return new mxPoint(s*t-i*n+o.x,i*t+s*n+o.y)},getPortConstraints:function(e,t,n,o){var s=mxUtils.getValue(e.style,mxConstants.STYLE_PORT_CONSTRAINT,null);if(null==s)return o;var i=s.toString(),a=mxConstants.DIRECTION_MASK_NONE,r=0;1==mxUtils.getValue(e.style,mxConstants.STYLE_PORT_CONSTRAINT_ROTATION,0)&&(r=mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION,0));var d=0;if(r>45?(d=1,r>=135&&(d=2)):r<-45&&(d=3,r<=-135&&(d=2)),i.indexOf(mxConstants.DIRECTION_NORTH)>=0)switch(d){case 0:a|=mxConstants.DIRECTION_MASK_NORTH;break;case 1:a|=mxConstants.DIRECTION_MASK_EAST;break;case 2:a|=mxConstants.DIRECTION_MASK_SOUTH;break;case 3:a|=mxConstants.DIRECTION_MASK_WEST}if(i.indexOf(mxConstants.DIRECTION_WEST)>=0)switch(d){case 0:a|=mxConstants.DIRECTION_MASK_WEST;break;case 1:a|=mxConstants.DIRECTION_MASK_NORTH;break;case 2:a|=mxConstants.DIRECTION_MASK_EAST;break;case 3:a|=mxConstants.DIRECTION_MASK_SOUTH}if(i.indexOf(mxConstants.DIRECTION_SOUTH)>=0)switch(d){case 0:a|=mxConstants.DIRECTION_MASK_SOUTH;break;case 1:a|=mxConstants.DIRECTION_MASK_WEST;break;case 2:a|=mxConstants.DIRECTION_MASK_NORTH;break;case 3:a|=mxConstants.DIRECTION_MASK_EAST}if(i.indexOf(mxConstants.DIRECTION_EAST)>=0)switch(d){case 0:a|=mxConstants.DIRECTION_MASK_EAST;break;case 1:a|=mxConstants.DIRECTION_MASK_SOUTH;break;case 2:a|=mxConstants.DIRECTION_MASK_WEST;break;case 3:a|=mxConstants.DIRECTION_MASK_NORTH}return a},reversePortConstraints:function(e){var t=0;return t=(e&mxConstants.DIRECTION_MASK_WEST)<<3,t|=(e&mxConstants.DIRECTION_MASK_NORTH)<<1,(t|=(e&mxConstants.DIRECTION_MASK_SOUTH)>>1)|(e&mxConstants.DIRECTION_MASK_EAST)>>3},findNearestSegment:function(e,t,n){var o=-1;if(e.absolutePoints.length>0)for(var s=e.absolutePoints[0],i=null,a=1;a<e.absolutePoints.length;a++){var l=e.absolutePoints[a],r=mxUtils.ptSegDistSq(s.x,s.y,l.x,l.y,t,n);(null==i||r<i)&&(i=r,o=a-1),s=l}return o},rectangleIntersectsSegment:function(e,t,n){var o=e.y,s=e.x,i=o+e.height,a=s+e.width,l=t.x,r=n.x;if(t.x>n.x&&(l=n.x,r=t.x),r>a&&(r=a),l<s&&(l=s),l>r)return!1;var d=t.y,u=n.y,g=n.x-t.x;if(Math.abs(g)>1e-7){var f=(n.y-t.y)/g,v=t.y-f*t.x;d=f*l+v,u=f*r+v}if(d>u){var x=u;u=d,d=x}return u>i&&(u=i),d<o&&(d=o),!(d>u)},contains:function(e,t,n){return e.x<=t&&e.x+e.width>=t&&e.y<=n&&e.y+e.height>=n},intersects:function(e,t){var n=e.width,o=e.height,s=t.width,i=t.height;if(s<=0||i<=0||n<=0||o<=0)return!1;var a=e.x,l=e.y,r=t.x,d=t.y;return i+=d,n+=a,o+=l,((s+=r)<r||s>a)&&(i<d||i>l)&&(n<a||n>r)&&(o<l||o>d)},intersectsHotspot:function(e,t,n,o,s,i){if(s=null!=s?s:0,i=null!=i?i:0,(o=null!=o?o:1)>0){var a=e.getCenterX(),l=e.getCenterY(),r=e.width,d=e.height,u=mxUtils.getValue(e.style,mxConstants.STYLE_STARTSIZE)*e.view.scale;u>0&&(mxUtils.getValue(e.style,mxConstants.STYLE_HORIZONTAL,!0)?(l=e.y+u/2,d=u):(a=e.x+u/2,r=u)),r=Math.max(s,r*o),d=Math.max(s,d*o),i>0&&(r=Math.min(r,i),d=Math.min(d,i));var g=new mxRectangle(a-r/2,l-d/2,r,d),f=mxUtils.toRadians(mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION)||0);if(0!=f){var v=Math.cos(-f),x=Math.sin(-f),z=(a=new mxPoint(e.getCenterX(),e.getCenterY()),mxUtils.getRotatedPoint(new mxPoint(t,n),v,x,a));t=z.x,n=z.y}return mxUtils.contains(g,t,n)}return!0},getOffset:function(e,t){var n=0,o=0;if(null!=t&&t){var s=mxUtils.getDocumentScrollOrigin(e.ownerDocument);n+=s.x,o+=s.y}var i=e.getBoundingClientRect();return null!=i&&(n+=i.left,o+=i.top),new mxPoint(n,o)},getDocumentScrollOrigin:function(e){if(mxClient.IS_QUIRKS)return new mxPoint(e.body.scrollLeft,e.body.scrollTop);var t=e.defaultView||e.parentWindow;return new mxPoint(null!=t&&void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,null!=t&&void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop)},getScrollOrigin:function(e){for(var t=document.body,n=document.documentElement,o=mxUtils.getDocumentScrollOrigin(null!=e?e.ownerDocument:document);null!=e&&e!=t&&e!=n;)isNaN(e.scrollLeft)||isNaN(e.scrollTop)||(o.x+=e.scrollLeft,o.y+=e.scrollTop),e=e.parentNode;return o},convertPoint:function(e,t,n){var o=mxUtils.getScrollOrigin(e),s=mxUtils.getOffset(e);return s.x-=o.x,s.y-=o.y,new mxPoint(t-s.x,n-s.y)},ltrim:function(e,t){return t=t||"\\s",e.replace(new RegExp("^["+t+"]+","g"),"")},rtrim:function(e,t){return t=t||"\\s",e.replace(new RegExp("["+t+"]+$","g"),"")},trim:function(e,t){return mxUtils.ltrim(mxUtils.rtrim(e,t),t)},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)&&("string"!=typeof e||e.toLowerCase().indexOf("0x")<0)},isInteger:function(e){return String(parseInt(e))===String(e)},mod:function(e,t){return(e%t+t)%t},intersection:function(e,t,n,o,s,i,a,l){var r=(l-i)*(n-e)-(a-s)*(o-t),g=((a-s)*(t-i)-(l-i)*(e-s))/r,f=((n-e)*(t-i)-(o-t)*(e-s))/r;return g>=0&&g<=1&&f>=0&&f<=1?new mxPoint(e+g*(n-e),t+g*(o-t)):null},ptSegDistSq:function(e,t,n,o,s,i){var a,l=(s-=e)*(n-=e)+(i-=t)*(o-=t);a=l<=0||(l=(s=n-s)*n+(i=o-i)*o)<=0?0:l*l/(n*n+o*o);var r=s*s+i*i-a;return r<0&&(r=0),r},ptLineDist:function(e,t,n,o,s,i){return Math.abs((o-t)*s-(n-e)*i+n*t-o*e)/Math.sqrt((o-t)*(o-t)+(n-e)*(n-e))},relativeCcw:function(e,t,n,o,s,i){var a=(s-=e)*(o-=t)-(i-=t)*(n-=e);return 0==a&&(a=s*n+i*o)>0&&(a=(s-=n)*n+(i-=o)*o)<0&&(a=0),a<0?-1:a>0?1:0},animateChanges:function(e,t){mxEffects.animateChanges.apply(this,arguments)},cascadeOpacity:function(e,t,n){mxEffects.cascadeOpacity.apply(this,arguments)},fadeOut:function(e,t,n,o,s,i){mxEffects.fadeOut.apply(this,arguments)},setOpacity:function(e,t){mxUtils.isVml(e)?e.style.filter=t>=100?"":"alpha(opacity="+t/5+")":mxClient.IS_IE&&(void 0===document.documentMode||document.documentMode<9)?e.style.filter=t>=100?"":"alpha(opacity="+t+")":e.style.opacity=t/100},createImage:function(e){var t=null;return mxClient.IS_IE6&&"CSS1Compat"!=document.compatMode?((t=document.createElement(mxClient.VML_PREFIX+":image")).setAttribute("src",e),t.style.borderStyle="none"):((t=document.createElement("img")).setAttribute("src",e),t.setAttribute("border","0")),t},sortCells:function(e,t){t=null==t||t;var n=new mxDictionary;return e.sort(function(o,s){var i=n.get(o);null==i&&(i=mxCellPath.create(o).split(mxCellPath.PATH_SEPARATOR),n.put(o,i));var a=n.get(s);null==a&&(a=mxCellPath.create(s).split(mxCellPath.PATH_SEPARATOR),n.put(s,a));var l=mxCellPath.compare(i,a);return 0==l?0:l>0==t?1:-1}),e},getStylename:function(e){if(null!=e){var n=e.split(";")[0];if(n.indexOf("=")<0)return n}return""},getStylenames:function(e){var t=[];if(null!=e)for(var n=e.split(";"),o=0;o<n.length;o++)n[o].indexOf("=")<0&&t.push(n[o]);return t},indexOfStylename:function(e,t){if(null!=e&&null!=t)for(var n=e.split(";"),o=0,s=0;s<n.length;s++){if(n[s]==t)return o;o+=n[s].length+1}return-1},addStylename:function(e,t){return mxUtils.indexOfStylename(e,t)<0&&(null==e?e="":e.length>0&&";"!=e.charAt(e.length-1)&&(e+=";"),e+=t),e},removeStylename:function(e,t){var n=[];if(null!=e)for(var o=e.split(";"),s=0;s<o.length;s++)o[s]!=t&&n.push(o[s]);return n.join(";")},removeAllStylenames:function(e){var t=[];if(null!=e)for(var n=e.split(";"),o=0;o<n.length;o++)n[o].indexOf("=")>=0&&t.push(n[o]);return t.join(";")},setCellStyles:function(e,t,n,o){if(null!=t&&t.length>0){e.beginUpdate();try{for(var s=0;s<t.length;s++)if(null!=t[s]){var i=mxUtils.setStyle(e.getStyle(t[s]),n,o);e.setStyle(t[s],i)}}finally{e.endUpdate()}}},setStyle:function(e,t,n){var o=null!=n&&(void 0===n.length||n.length>0);if(null==e||0==e.length)o&&(e=t+"="+n+";");else if(e.substring(0,t.length+1)==t+"="){var s=e.indexOf(";");e=o?t+"="+n+(s<0?";":e.substring(s)):s<0||s==e.length-1?"":e.substring(s+1)}else{var i=e.indexOf(";"+t+"=");if(i<0){if(o){var a=";"==e.charAt(e.length-1)?"":";";e=e+a+t+"="+n+";"}}else s=e.indexOf(";",i+1),e=o?e.substring(0,i+1)+t+"="+n+(s<0?";":e.substring(s)):e.substring(0,i)+(s<0?";":e.substring(s))}return e},setCellStyleFlags:function(e,t,n,o,s){if(null!=t&&t.length>0){e.beginUpdate();try{for(var i=0;i<t.length;i++)if(null!=t[i]){var a=mxUtils.setStyleFlag(e.getStyle(t[i]),n,o,s);e.setStyle(t[i],a)}}finally{e.endUpdate()}}},setStyleFlag:function(e,t,n,o){if(null==e||0==e.length)e=o||null==o?t+"="+n:t+"=0";else{var s=e.indexOf(t+"=");if(s<0){var i=";"==e.charAt(e.length-1)?"":";";e=o||null==o?e+i+t+"="+n:e+i+t+"=0"}else{var a=e.indexOf(";",s),l="";l=a<0?e.substring(s+t.length+1):e.substring(s+t.length+1,a),l=null==o?parseInt(l)^n:o?parseInt(l)|n:parseInt(l)&~n,e=e.substring(0,s)+t+"="+l+(a>=0?e.substring(a):"")}}return e},getAlignmentAsPoint:function(e,t){var n=0,o=0;return e==mxConstants.ALIGN_CENTER?n=-.5:e==mxConstants.ALIGN_RIGHT&&(n=-1),t==mxConstants.ALIGN_MIDDLE?o=-.5:t==mxConstants.ALIGN_BOTTOM&&(o=-1),new mxPoint(n,o)},getSizeForString:function(e,t,n,o){t=null!=t?t:mxConstants.DEFAULT_FONTSIZE,n=null!=n?n:mxConstants.DEFAULT_FONTFAMILY;var s=document.createElement("div");s.style.fontFamily=n,s.style.fontSize=Math.round(t)+"px",s.style.lineHeight=Math.round(t*mxConstants.LINE_HEIGHT)+"px",s.style.position="absolute",s.style.visibility="hidden",s.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",s.style.zoom="1",null!=o?(s.style.width=o+"px",s.style.whiteSpace="normal"):s.style.whiteSpace="nowrap",s.innerHTML=e,document.body.appendChild(s);var i=new mxRectangle(0,0,s.offsetWidth,s.offsetHeight);return document.body.removeChild(s),i},getViewXml:function(e,t,n,o,s){o=null!=o?o:0,s=null!=s?s:0,t=null!=t?t:1,null==n&&(n=[e.getModel().getRoot()]);var a=e.getView(),l=null,r=a.isEventsEnabled();a.setEventsEnabled(!1);var d=a.drawPane,u=a.overlayPane;e.dialect==mxConstants.DIALECT_SVG?(a.drawPane=document.createElementNS(mxConstants.NS_SVG,"g"),a.canvas.appendChild(a.drawPane),a.overlayPane=document.createElementNS(mxConstants.NS_SVG,"g"),a.canvas.appendChild(a.overlayPane)):(a.drawPane=a.drawPane.cloneNode(!1),a.canvas.appendChild(a.drawPane),a.overlayPane=a.overlayPane.cloneNode(!1),a.canvas.appendChild(a.overlayPane));var g=a.getTranslate();a.translate=new mxPoint(o,s);var f=new mxTemporaryCellStates(e.getView(),t,n);try{l=(new mxCodec).encode(e.getView())}finally{f.destroy(),a.translate=g,a.canvas.removeChild(a.drawPane),a.canvas.removeChild(a.overlayPane),a.drawPane=d,a.overlayPane=u,a.setEventsEnabled(r)}return l},getScaleForPageCount:function(e,t,n,o){if(e<1)return 1;var s=(n=null!=n?n:mxConstants.PAGE_FORMAT_A4_PORTRAIT).width-2*(o=null!=o?o:0),i=n.height-2*o,a=t.getGraphBounds().clone(),l=t.getView().getScale();a.width/=l,a.height/=l;var r=a.width,v=r/a.height/(s/i),x=Math.sqrt(e),z=Math.sqrt(v),b=x*z,_=x/z;if(b<1&&_>e){var H=_/e;_=e,b/=H}_<1&&b>e&&(H=b/e,b=e,_/=H);for(var T=Math.ceil(b)*Math.ceil(_),L=0;T>e;){var V=Math.floor(b)/b,Y=Math.floor(_)/_;if(1==V&&(V=Math.floor(b-1)/b),1==Y&&(Y=Math.floor(_-1)/_),H=1,b*=H=V>Y?V:Y,_*=H,T=Math.ceil(b)*Math.ceil(_),++L>10)break}return s*b/r*.99999},show:function(e,t,n,o,s,i){n=null!=n?n:0,o=null!=o?o:0,null==t?t=window.open().document:t.open(),9==document.documentMode&&t.writeln('\x3c!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=9"><![endif]--\x3e');var l=e.getGraphBounds(),r=Math.ceil(n-l.x),d=Math.ceil(o-l.y);if(null==s&&(s=Math.ceil(l.width+n)+Math.ceil(Math.ceil(l.x)-l.x)),null==i&&(i=Math.ceil(l.height+o)+Math.ceil(Math.ceil(l.y)-l.y)),mxClient.IS_IE||11==document.documentMode){for(var u="<html><head>",g=document.getElementsByTagName("base"),f=0;f<g.length;f++)u+=g[f].outerHTML;for(u+="<style>",f=0;f<document.styleSheets.length;f++)try{u+=document.styleSheets[f].cssText}catch(V){}u+='</style></head><body style="margin:0px;">',u+='<div style="position:absolute;overflow:hidden;width:'+s+"px;height:"+i+'px;"><div style="position:relative;left:'+r+"px;top:"+d+'px;">',u+=e.container.innerHTML,t.writeln(u+="</div></div></body><html>"),t.close()}else{for(t.writeln("<html><head>"),g=document.getElementsByTagName("base"),f=0;f<g.length;f++)t.writeln(mxUtils.getOuterHtml(g[f]));var v=document.getElementsByTagName("link");for(f=0;f<v.length;f++)t.writeln(mxUtils.getOuterHtml(v[f]));var x=document.getElementsByTagName("style");for(f=0;f<x.length;f++)t.writeln(mxUtils.getOuterHtml(x[f]));t.writeln('</head><body style="margin:0px;"></body></html>'),t.close();var z=t.createElement("div");z.position="absolute",z.overflow="hidden",z.style.width=s+"px",z.style.height=i+"px";var b=t.createElement("div");b.style.position="absolute",b.style.left=r+"px",b.style.top=d+"px";for(var _=e.container.firstChild,H=null;null!=_;){var T=_.cloneNode(!0);_==e.view.drawPane.ownerSVGElement?(z.appendChild(T),H=T):b.appendChild(T),_=_.nextSibling}t.body.appendChild(z),null!=b.firstChild&&t.body.appendChild(b),null!=H&&(H.style.minWidth="",H.style.minHeight="",H.firstChild.setAttribute("transform","translate("+r+","+d+")"))}return mxUtils.removeCursors(t.body),t},printScreen:function(e){var t=window.open();e.getGraphBounds(),mxUtils.show(e,t.document);var n=function(){t.focus(),t.print(),t.close()};mxClient.IS_GC?t.setTimeout(n,500):n()},popup:function(e,t){if(t){var n=document.createElement("div");n.style.overflow="scroll",n.style.width="636px",n.style.height="460px",(o=document.createElement("pre")).innerHTML=mxUtils.htmlEntities(e,!1).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),n.appendChild(o),(a=new mxWindow("Popup Window",n,document.body.clientWidth/2-320,Math.max(document.body.clientHeight||0,document.documentElement.clientHeight)/2-240,640,480,!1,!0)).setClosable(!0),a.setVisible(!0)}else if(mxClient.IS_NS)(a=window.open()).document.writeln("<pre>"+mxUtils.htmlEntities(e)+"</pre"),a.document.close();else{var a,o;(o=(a=window.open()).document.createElement("pre")).innerHTML=mxUtils.htmlEntities(e,!1).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),a.document.body.appendChild(o)}},alert:function(e){alert(e)},prompt:function(e,t){return prompt(e,null!=t?t:"")},confirm:function(e){return confirm(e)},error:function(e,t,n,o){var s=document.createElement("div");s.style.padding="20px";var i=document.createElement("img");i.setAttribute("src",o||mxUtils.errorImage),i.setAttribute("valign","bottom"),i.style.verticalAlign="middle",s.appendChild(i),s.appendChild(document.createTextNode("\xa0")),s.appendChild(document.createTextNode("\xa0")),s.appendChild(document.createTextNode("\xa0")),mxUtils.write(s,e);var a=document.body.clientWidth,l=document.body.clientHeight||document.documentElement.clientHeight,r=new mxWindow(mxResources.get(mxUtils.errorResource)||mxUtils.errorResource,s,(a-t)/2,l/4,t,null,!1,!0);if(n){mxUtils.br(s);var d=document.createElement("p"),u=document.createElement("button");mxClient.IS_IE?u.style.cssText="float:right":u.setAttribute("style","float:right"),mxEvent.addListener(u,"click",function(g){r.destroy()}),mxUtils.write(u,mxResources.get(mxUtils.closeResource)||mxUtils.closeResource),d.appendChild(u),s.appendChild(d),mxUtils.br(s),r.setClosable(!0)}return r.setVisible(!0),r},makeDraggable:function(e,t,n,o,s,i,a,l,r,d){var u=new mxDragSource(e,n);return u.dragOffset=new mxPoint(null!=s?s:0,null!=i?i:mxConstants.TOOLTIP_VERTICAL_OFFSET),u.autoscroll=a,u.setGuidesEnabled(!1),null!=r&&(u.highlightDropTargets=r),null!=d&&(u.getDropTarget=d),u.getGraphForEvent=function(g){return"function"==typeof t?t(g):t},null!=o&&(u.createDragElement=function(){return o.cloneNode(!0)},l&&(u.createPreviewElement=function(g){var f=o.cloneNode(!0),v=parseInt(f.style.width),x=parseInt(f.style.height);return f.style.width=Math.round(v*g.view.scale)+"px",f.style.height=Math.round(x*g.view.scale)+"px",f})),u}};exports.mxUtils=mxUtils;var mxConstants={DEFAULT_HOTSPOT:.3,MIN_HOTSPOT_SIZE:8,MAX_HOTSPOT_SIZE:0,RENDERING_HINT_EXACT:"exact",RENDERING_HINT_FASTER:"faster",RENDERING_HINT_FASTEST:"fastest",DIALECT_SVG:"svg",DIALECT_VML:"vml",DIALECT_MIXEDHTML:"mixedHtml",DIALECT_PREFERHTML:"preferHtml",DIALECT_STRICTHTML:"strictHtml",NS_SVG:"http://www.w3.org/2000/svg",NS_XHTML:"http://www.w3.org/1999/xhtml",NS_XLINK:"http://www.w3.org/1999/xlink",SHADOWCOLOR:"gray",VML_SHADOWCOLOR:"gray",SHADOW_OFFSET_X:2,SHADOW_OFFSET_Y:3,SHADOW_OPACITY:1,NODETYPE_ELEMENT:1,NODETYPE_ATTRIBUTE:2,NODETYPE_TEXT:3,NODETYPE_CDATA:4,NODETYPE_ENTITY_REFERENCE:5,NODETYPE_ENTITY:6,NODETYPE_PROCESSING_INSTRUCTION:7,NODETYPE_COMMENT:8,NODETYPE_DOCUMENT:9,NODETYPE_DOCUMENTTYPE:10,NODETYPE_DOCUMENT_FRAGMENT:11,NODETYPE_NOTATION:12,TOOLTIP_VERTICAL_OFFSET:16,DEFAULT_VALID_COLOR:"#00FF00",DEFAULT_INVALID_COLOR:"#FF0000",OUTLINE_HIGHLIGHT_COLOR:"#00FF00",OUTLINE_HIGHLIGHT_STROKEWIDTH:5,HIGHLIGHT_STROKEWIDTH:3,HIGHLIGHT_SIZE:2,HIGHLIGHT_OPACITY:100,CURSOR_MOVABLE_VERTEX:"move",CURSOR_MOVABLE_EDGE:"move",CURSOR_LABEL_HANDLE:"default",CURSOR_TERMINAL_HANDLE:"pointer",CURSOR_BEND_HANDLE:"crosshair",CURSOR_VIRTUAL_BEND_HANDLE:"crosshair",CURSOR_CONNECT:"pointer",HIGHLIGHT_COLOR:"#00FF00",CONNECT_TARGET_COLOR:"#0000FF",INVALID_CONNECT_TARGET_COLOR:"#FF0000",DROP_TARGET_COLOR:"#0000FF",VALID_COLOR:"#00FF00",INVALID_COLOR:"#FF0000",EDGE_SELECTION_COLOR:"#00FF00",VERTEX_SELECTION_COLOR:"#00FF00",VERTEX_SELECTION_STROKEWIDTH:1,EDGE_SELECTION_STROKEWIDTH:1,VERTEX_SELECTION_DASHED:!0,EDGE_SELECTION_DASHED:!0,GUIDE_COLOR:"#FF0000",GUIDE_STROKEWIDTH:1,OUTLINE_COLOR:"#0099FF",OUTLINE_STROKEWIDTH:mxClient.IS_IE?2:3,HANDLE_SIZE:6,LABEL_HANDLE_SIZE:4,HANDLE_FILLCOLOR:"#00FF00",HANDLE_STROKECOLOR:"black",LABEL_HANDLE_FILLCOLOR:"yellow",CONNECT_HANDLE_FILLCOLOR:"#0000FF",LOCKED_HANDLE_FILLCOLOR:"#FF0000",OUTLINE_HANDLE_FILLCOLOR:"#00FFFF",OUTLINE_HANDLE_STROKECOLOR:"#0033FF",DEFAULT_FONTFAMILY:"Arial,Helvetica",DEFAULT_FONTSIZE:11,DEFAULT_TEXT_DIRECTION:"",LINE_HEIGHT:1.2,WORD_WRAP:"normal",ABSOLUTE_LINE_HEIGHT:!1,DEFAULT_FONTSTYLE:0,DEFAULT_STARTSIZE:40,DEFAULT_MARKERSIZE:6,DEFAULT_IMAGESIZE:24,ENTITY_SEGMENT:30,RECTANGLE_ROUNDING_FACTOR:.15,LINE_ARCSIZE:20,ARROW_SPACING:0,ARROW_WIDTH:30,ARROW_SIZE:30,PAGE_FORMAT_A4_PORTRAIT:new mxRectangle(0,0,826,1169),PAGE_FORMAT_A4_LANDSCAPE:new mxRectangle(0,0,1169,826),PAGE_FORMAT_LETTER_PORTRAIT:new mxRectangle(0,0,850,1100),PAGE_FORMAT_LETTER_LANDSCAPE:new mxRectangle(0,0,1100,850),NONE:"none",STYLE_PERIMETER:"perimeter",STYLE_SOURCE_PORT:"sourcePort",STYLE_TARGET_PORT:"targetPort",STYLE_PORT_CONSTRAINT:"portConstraint",STYLE_PORT_CONSTRAINT_ROTATION:"portConstraintRotation",STYLE_OPACITY:"opacity",STYLE_FILL_OPACITY:"fillOpacity",STYLE_STROKE_OPACITY:"strokeOpacity",STYLE_TEXT_OPACITY:"textOpacity",STYLE_TEXT_DIRECTION:"textDirection",STYLE_OVERFLOW:"overflow",STYLE_ORTHOGONAL:"orthogonal",STYLE_EXIT_X:"exitX",STYLE_EXIT_Y:"exitY",STYLE_EXIT_PERIMETER:"exitPerimeter",STYLE_ENTRY_X:"entryX",STYLE_ENTRY_Y:"entryY",STYLE_ENTRY_PERIMETER:"entryPerimeter",STYLE_WHITE_SPACE:"whiteSpace",STYLE_ROTATION:"rotation",STYLE_FILLCOLOR:"fillColor",STYLE_POINTER_EVENTS:"pointerEvents",STYLE_SWIMLANE_FILLCOLOR:"swimlaneFillColor",STYLE_MARGIN:"margin",STYLE_GRADIENTCOLOR:"gradientColor",STYLE_GRADIENT_DIRECTION:"gradientDirection",STYLE_STROKECOLOR:"strokeColor",STYLE_SEPARATORCOLOR:"separatorColor",STYLE_STROKEWIDTH:"strokeWidth",STYLE_ALIGN:"align",STYLE_VERTICAL_ALIGN:"verticalAlign",STYLE_LABEL_WIDTH:"labelWidth",STYLE_LABEL_POSITION:"labelPosition",STYLE_VERTICAL_LABEL_POSITION:"verticalLabelPosition",STYLE_IMAGE_ASPECT:"imageAspect",STYLE_IMAGE_ALIGN:"imageAlign",STYLE_IMAGE_VERTICAL_ALIGN:"imageVerticalAlign",STYLE_GLASS:"glass",STYLE_IMAGE:"image",STYLE_IMAGE_WIDTH:"imageWidth",STYLE_IMAGE_HEIGHT:"imageHeight",STYLE_IMAGE_BACKGROUND:"imageBackground",STYLE_IMAGE_BORDER:"imageBorder",STYLE_FLIPH:"flipH",STYLE_FLIPV:"flipV",STYLE_NOLABEL:"noLabel",STYLE_NOEDGESTYLE:"noEdgeStyle",STYLE_LABEL_BACKGROUNDCOLOR:"labelBackgroundColor",STYLE_LABEL_BORDERCOLOR:"labelBorderColor",STYLE_LABEL_PADDING:"labelPadding",STYLE_INDICATOR_SHAPE:"indicatorShape",STYLE_INDICATOR_IMAGE:"indicatorImage",STYLE_INDICATOR_COLOR:"indicatorColor",STYLE_INDICATOR_STROKECOLOR:"indicatorStrokeColor",STYLE_INDICATOR_GRADIENTCOLOR:"indicatorGradientColor",STYLE_INDICATOR_SPACING:"indicatorSpacing",STYLE_INDICATOR_WIDTH:"indicatorWidth",STYLE_INDICATOR_HEIGHT:"indicatorHeight",STYLE_INDICATOR_DIRECTION:"indicatorDirection",STYLE_SHADOW:"shadow",STYLE_SEGMENT:"segment",STYLE_ENDARROW:"endArrow",STYLE_STARTARROW:"startArrow",STYLE_ENDSIZE:"endSize",STYLE_STARTSIZE:"startSize",STYLE_SWIMLANE_LINE:"swimlaneLine",STYLE_ENDFILL:"endFill",STYLE_STARTFILL:"startFill",STYLE_DASHED:"dashed",STYLE_DASH_PATTERN:"dashPattern",STYLE_ROUNDED:"rounded",STYLE_CURVED:"curved",STYLE_ARCSIZE:"arcSize",STYLE_SMOOTH:"smooth",STYLE_SOURCE_PERIMETER_SPACING:"sourcePerimeterSpacing",STYLE_TARGET_PERIMETER_SPACING:"targetPerimeterSpacing",STYLE_PERIMETER_SPACING:"perimeterSpacing",STYLE_SPACING:"spacing",STYLE_SPACING_TOP:"spacingTop",STYLE_SPACING_LEFT:"spacingLeft",STYLE_SPACING_BOTTOM:"spacingBottom",STYLE_SPACING_RIGHT:"spacingRight",STYLE_HORIZONTAL:"horizontal",STYLE_DIRECTION:"direction",STYLE_ELBOW:"elbow",STYLE_FONTCOLOR:"fontColor",STYLE_FONTFAMILY:"fontFamily",STYLE_FONTSIZE:"fontSize",STYLE_FONTSTYLE:"fontStyle",STYLE_ASPECT:"aspect",STYLE_AUTOSIZE:"autosize",STYLE_FOLDABLE:"foldable",STYLE_EDITABLE:"editable",STYLE_BENDABLE:"bendable",STYLE_MOVABLE:"movable",STYLE_RESIZABLE:"resizable",STYLE_RESIZE_WIDTH:"resizeWidth",STYLE_RESIZE_HEIGHT:"resizeHeight",STYLE_ROTATABLE:"rotatable",STYLE_CLONEABLE:"cloneable",STYLE_DELETABLE:"deletable",STYLE_SHAPE:"shape",STYLE_EDGE:"edgeStyle",STYLE_JETTY_SIZE:"jettySize",STYLE_SOURCE_JETTY_SIZE:"sourceJettySize",STYLE_TARGET_JETTY_SIZE:"targetJettySize",STYLE_LOOP:"loopStyle",STYLE_ORTHOGONAL_LOOP:"orthogonalLoop",STYLE_ROUTING_CENTER_X:"routingCenterX",STYLE_ROUTING_CENTER_Y:"routingCenterY",FONT_BOLD:1,FONT_ITALIC:2,FONT_UNDERLINE:4,SHAPE_RECTANGLE:"rectangle",SHAPE_ELLIPSE:"ellipse",SHAPE_DOUBLE_ELLIPSE:"doubleEllipse",SHAPE_RHOMBUS:"rhombus",SHAPE_LINE:"line",SHAPE_IMAGE:"image",SHAPE_ARROW:"arrow",SHAPE_ARROW_CONNECTOR:"arrowConnector",SHAPE_LABEL:"label",SHAPE_CYLINDER:"cylinder",SHAPE_SWIMLANE:"swimlane",SHAPE_CONNECTOR:"connector",SHAPE_ACTOR:"actor",SHAPE_CLOUD:"cloud",SHAPE_TRIANGLE:"triangle",SHAPE_HEXAGON:"hexagon",ARROW_CLASSIC:"classic",ARROW_CLASSIC_THIN:"classicThin",ARROW_BLOCK:"block",ARROW_BLOCK_THIN:"blockThin",ARROW_OPEN:"open",ARROW_OPEN_THIN:"openThin",ARROW_OVAL:"oval",ARROW_DIAMOND:"diamond",ARROW_DIAMOND_THIN:"diamondThin",ALIGN_LEFT:"left",ALIGN_CENTER:"center",ALIGN_RIGHT:"right",ALIGN_TOP:"top",ALIGN_MIDDLE:"middle",ALIGN_BOTTOM:"bottom",DIRECTION_NORTH:"north",DIRECTION_SOUTH:"south",DIRECTION_EAST:"east",DIRECTION_WEST:"west",TEXT_DIRECTION_DEFAULT:"",TEXT_DIRECTION_AUTO:"auto",TEXT_DIRECTION_LTR:"ltr",TEXT_DIRECTION_RTL:"rtl",DIRECTION_MASK_NONE:0,DIRECTION_MASK_WEST:1,DIRECTION_MASK_NORTH:2,DIRECTION_MASK_SOUTH:4,DIRECTION_MASK_EAST:8,DIRECTION_MASK_ALL:15,ELBOW_VERTICAL:"vertical",ELBOW_HORIZONTAL:"horizontal",EDGESTYLE_ELBOW:"elbowEdgeStyle",EDGESTYLE_ENTITY_RELATION:"entityRelationEdgeStyle",EDGESTYLE_LOOP:"loopEdgeStyle",EDGESTYLE_SIDETOSIDE:"sideToSideEdgeStyle",EDGESTYLE_TOPTOBOTTOM:"topToBottomEdgeStyle",EDGESTYLE_ORTHOGONAL:"orthogonalEdgeStyle",EDGESTYLE_SEGMENT:"segmentEdgeStyle",PERIMETER_ELLIPSE:"ellipsePerimeter",PERIMETER_RECTANGLE:"rectanglePerimeter",PERIMETER_RHOMBUS:"rhombusPerimeter",PERIMETER_HEXAGON:"hexagonPerimeter",PERIMETER_TRIANGLE:"trianglePerimeter"};exports.mxConstants=mxConstants,mxEventObject.prototype.name=null,mxEventObject.prototype.properties=null,mxEventObject.prototype.consumed=!1,mxEventObject.prototype.getName=function(){return this.name},mxEventObject.prototype.getProperties=function(){return this.properties},mxEventObject.prototype.getProperty=function(e){return this.properties[e]},mxEventObject.prototype.isConsumed=function(){return this.consumed},mxEventObject.prototype.consume=function(){this.consumed=!0},exports.mxEventObject=mxEventObject,mxMouseEvent.prototype.consumed=!1,mxMouseEvent.prototype.evt=null,mxMouseEvent.prototype.graphX=null,mxMouseEvent.prototype.graphY=null,mxMouseEvent.prototype.state=null,mxMouseEvent.prototype.sourceState=null,mxMouseEvent.prototype.getEvent=function(){return this.evt},mxMouseEvent.prototype.getSource=function(){return mxEvent.getSource(this.evt)},mxMouseEvent.prototype.isSource=function(e){return null!=e&&mxUtils.isAncestorNode(e.node,this.getSource())},mxMouseEvent.prototype.getX=function(){return mxEvent.getClientX(this.getEvent())},mxMouseEvent.prototype.getY=function(){return mxEvent.getClientY(this.getEvent())},mxMouseEvent.prototype.getGraphX=function(){return this.graphX},mxMouseEvent.prototype.getGraphY=function(){return this.graphY},mxMouseEvent.prototype.getState=function(){return this.state},mxMouseEvent.prototype.getCell=function(){var e=this.getState();return null!=e?e.cell:null},mxMouseEvent.prototype.isPopupTrigger=function(){return mxEvent.isPopupTrigger(this.getEvent())},mxMouseEvent.prototype.isConsumed=function(){return this.consumed},mxMouseEvent.prototype.consume=function(e){(e=null==e||e)&&this.evt.preventDefault&&this.evt.preventDefault(),mxClient.IS_IE&&(this.evt.returnValue=!0),this.consumed=!0},exports.mxMouseEvent=mxMouseEvent,mxEventSource.prototype.eventListeners=null,mxEventSource.prototype.eventsEnabled=!0,mxEventSource.prototype.eventSource=null,mxEventSource.prototype.isEventsEnabled=function(){return this.eventsEnabled},mxEventSource.prototype.setEventsEnabled=function(e){this.eventsEnabled=e},mxEventSource.prototype.getEventSource=function(){return this.eventSource},mxEventSource.prototype.setEventSource=function(e){this.eventSource=e},mxEventSource.prototype.addListener=function(e,t){null==this.eventListeners&&(this.eventListeners=[]),this.eventListeners.push(e),this.eventListeners.push(t)},mxEventSource.prototype.removeListener=function(e){if(null!=this.eventListeners)for(var t=0;t<this.eventListeners.length;)this.eventListeners[t+1]==e?this.eventListeners.splice(t,2):t+=2},mxEventSource.prototype.fireEvent=function(e,t){if(null!=this.eventListeners&&this.isEventsEnabled()){null==e&&(e=new mxEventObject),null==t&&(t=this.getEventSource()),null==t&&(t=this);for(var n=[t,e],o=0;o<this.eventListeners.length;o+=2){var s=this.eventListeners[o];null!=s&&s!=e.getName()||this.eventListeners[o+1].apply(this,n)}}},exports.mxEventSource=mxEventSource;var mxEvent={objects:[],addListener:function(){var e=function(t,n,o){null==t.mxListenerList&&(t.mxListenerList=[],mxEvent.objects.push(t)),t.mxListenerList.push({name:n,f:o})};return window.addEventListener?function(t,n,o){t.addEventListener(n,o,!1),e(t,n,o)}:function(t,n,o){t.attachEvent("on"+n,o),e(t,n,o)}}(),removeListener:function(){var e=function(t,n,o){if(null!=t.mxListenerList){for(var s=t.mxListenerList.length,i=0;i<s;i++)if(t.mxListenerList[i].f==o){t.mxListenerList.splice(i,1);break}if(0==t.mxListenerList.length){t.mxListenerList=null;var l=mxUtils.indexOf(mxEvent.objects,t);l>=0&&mxEvent.objects.splice(l,1)}}};return window.removeEventListener?function(t,n,o){t.removeEventListener(n,o,!1),e(t,0,o)}:function(t,n,o){t.detachEvent("on"+n,o),e(t,0,o)}}(),removeAllListeners:function(e){var t=e.mxListenerList;if(null!=t)for(;t.length>0;){var n=t[0];mxEvent.removeListener(e,n.name,n.f)}},addGestureListeners:function(e,t,n,o){null!=t&&mxEvent.addListener(e,mxClient.IS_POINTER?"pointerdown":"mousedown",t),null!=n&&mxEvent.addListener(e,mxClient.IS_POINTER?"pointermove":"mousemove",n),null!=o&&mxEvent.addListener(e,mxClient.IS_POINTER?"pointerup":"mouseup",o),!mxClient.IS_POINTER&&mxClient.IS_TOUCH&&(null!=t&&mxEvent.addListener(e,"touchstart",t),null!=n&&mxEvent.addListener(e,"touchmove",n),null!=o&&mxEvent.addListener(e,"touchend",o))},removeGestureListeners:function(e,t,n,o){null!=t&&mxEvent.removeListener(e,mxClient.IS_POINTER?"pointerdown":"mousedown",t),null!=n&&mxEvent.removeListener(e,mxClient.IS_POINTER?"pointermove":"mousemove",n),null!=o&&mxEvent.removeListener(e,mxClient.IS_POINTER?"pointerup":"mouseup",o),!mxClient.IS_POINTER&&mxClient.IS_TOUCH&&(null!=t&&mxEvent.removeListener(e,"touchstart",t),null!=n&&mxEvent.removeListener(e,"touchmove",n),null!=o&&mxEvent.removeListener(e,"touchend",o))},redirectMouseEvents:function(e,t,n,o,s,i,a){var l=function(r){return"function"==typeof n?n(r):n};mxEvent.addGestureListeners(e,function(r){null!=o?o(r):mxEvent.isConsumed(r)||t.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(r,l(r)))},function(r){null!=s?s(r):mxEvent.isConsumed(r)||t.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(r,l(r)))},function(r){null!=i?i(r):mxEvent.isConsumed(r)||t.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(r,l(r)))}),mxEvent.addListener(e,"dblclick",function(r){if(null!=a)a(r);else if(!mxEvent.isConsumed(r)){var d=l(r);t.dblClick(r,null!=d?d.cell:null)}})},release:function(e){if(null!=e){mxEvent.removeAllListeners(e);var t=e.childNodes;if(null!=t)for(var n=t.length,o=0;o<n;o+=1)mxEvent.release(t[o])}},addMouseWheelListener:function(e){if(null!=e){var t=function(o){var s;null==o&&(o=window.event),0!=(s=mxClient.IS_FF?-o.detail/2:o.wheelDelta/120)&&e(o,s>0)};mxClient.IS_NS&&null==document.documentMode?mxEvent.addListener(window,mxClient.IS_SF||mxClient.IS_GC?"mousewheel":"DOMMouseScroll",t):mxEvent.addListener(document,"mousewheel",t)}},disableContextMenu:mxClient.IS_IE&&(void 0===document.documentMode||document.documentMode<9)?function(e){mxEvent.addListener(e,"contextmenu",function(){return!1})}:function(e){e.setAttribute("oncontextmenu","return false;")},getSource:function(e){return null!=e.srcElement?e.srcElement:e.target},isConsumed:function(e){return null!=e.isConsumed&&e.isConsumed},isTouchEvent:function(e){return null!=e.pointerType?"touch"==e.pointerType||e.pointerType===e.MSPOINTER_TYPE_TOUCH:null!=e.mozInputSource?5==e.mozInputSource:0==e.type.indexOf("touch")},isMultiTouchEvent:function(e){return null!=e.type&&0==e.type.indexOf("touch")&&null!=e.touches&&e.touches.length>1},isMouseEvent:function(e){return null!=e.pointerType?"mouse"==e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE:null!=e.mozInputSource?1==e.mozInputSource:0==e.type.indexOf("mouse")},isLeftMouseButton:function(e){return!("buttons"in e)||"mousedown"!=e.type&&"mousemove"!=e.type?"which"in e?1===e.which:1===e.button:1==e.buttons},isMiddleMouseButton:function(e){return"which"in e?2===e.which:4===e.button},isRightMouseButton:function(e){return"which"in e?3===e.which:2===e.button},isPopupTrigger:function(e){return mxEvent.isRightMouseButton(e)||mxClient.IS_MAC&&mxEvent.isControlDown(e)&&!mxEvent.isShiftDown(e)&&!mxEvent.isMetaDown(e)&&!mxEvent.isAltDown(e)},isShiftDown:function(e){return null!=e&&e.shiftKey},isAltDown:function(e){return null!=e&&e.altKey},isControlDown:function(e){return null!=e&&e.ctrlKey},isMetaDown:function(e){return null!=e&&e.metaKey},getMainEvent:function(e){return"touchstart"!=e.type&&"touchmove"!=e.type||null==e.touches||null==e.touches[0]?"touchend"==e.type&&null!=e.changedTouches&&null!=e.changedTouches[0]&&(e=e.changedTouches[0]):e=e.touches[0],e},getClientX:function(e){return mxEvent.getMainEvent(e).clientX},getClientY:function(e){return mxEvent.getMainEvent(e).clientY},consume:function(e,t,n){n=null==n||n,(t=null==t||t)&&(e.preventDefault?(n&&e.stopPropagation(),e.preventDefault()):n&&(e.cancelBubble=!0)),e.isConsumed=!0,e.preventDefault||(e.returnValue=!1)},LABEL_HANDLE:-1,ROTATION_HANDLE:-2,CUSTOM_HANDLE:-100,VIRTUAL_HANDLE:-1e5,MOUSE_DOWN:"mouseDown",MOUSE_MOVE:"mouseMove",MOUSE_UP:"mouseUp",ACTIVATE:"activate",RESIZE_START:"resizeStart",RESIZE:"resize",RESIZE_END:"resizeEnd",MOVE_START:"moveStart",MOVE:"move",MOVE_END:"moveEnd",PAN_START:"panStart",PAN:"pan",PAN_END:"panEnd",MINIMIZE:"minimize",NORMALIZE:"normalize",MAXIMIZE:"maximize",HIDE:"hide",SHOW:"show",CLOSE:"close",DESTROY:"destroy",REFRESH:"refresh",SIZE:"size",SELECT:"select",FIRED:"fired",FIRE_MOUSE_EVENT:"fireMouseEvent",GESTURE:"gesture",TAP_AND_HOLD:"tapAndHold",GET:"get",RECEIVE:"receive",CONNECT:"connect",DISCONNECT:"disconnect",SUSPEND:"suspend",RESUME:"resume",MARK:"mark",ROOT:"root",POST:"post",OPEN:"open",SAVE:"save",BEFORE_ADD_VERTEX:"beforeAddVertex",ADD_VERTEX:"addVertex",AFTER_ADD_VERTEX:"afterAddVertex",DONE:"done",EXECUTE:"execute",EXECUTED:"executed",BEGIN_UPDATE:"beginUpdate",START_EDIT:"startEdit",END_UPDATE:"endUpdate",END_EDIT:"endEdit",BEFORE_UNDO:"beforeUndo",UNDO:"undo",REDO:"redo",CHANGE:"change",NOTIFY:"notify",LAYOUT_CELLS:"layoutCells",CLICK:"click",SCALE:"scale",TRANSLATE:"translate",SCALE_AND_TRANSLATE:"scaleAndTranslate",UP:"up",DOWN:"down",ADD:"add",REMOVE:"remove",CLEAR:"clear",ADD_CELLS:"addCells",CELLS_ADDED:"cellsAdded",MOVE_CELLS:"moveCells",CELLS_MOVED:"cellsMoved",RESIZE_CELLS:"resizeCells",CELLS_RESIZED:"cellsResized",TOGGLE_CELLS:"toggleCells",CELLS_TOGGLED:"cellsToggled",ORDER_CELLS:"orderCells",CELLS_ORDERED:"cellsOrdered",REMOVE_CELLS:"removeCells",CELLS_REMOVED:"cellsRemoved",GROUP_CELLS:"groupCells",UNGROUP_CELLS:"ungroupCells",REMOVE_CELLS_FROM_PARENT:"removeCellsFromParent",FOLD_CELLS:"foldCells",CELLS_FOLDED:"cellsFolded",ALIGN_CELLS:"alignCells",LABEL_CHANGED:"labelChanged",CONNECT_CELL:"connectCell",CELL_CONNECTED:"cellConnected",SPLIT_EDGE:"splitEdge",FLIP_EDGE:"flipEdge",START_EDITING:"startEditing",EDITING_STARTED:"editingStarted",EDITING_STOPPED:"editingStopped",ADD_OVERLAY:"addOverlay",REMOVE_OVERLAY:"removeOverlay",UPDATE_CELL_SIZE:"updateCellSize",ESCAPE:"escape",CLICK:"click",DOUBLE_CLICK:"doubleClick",START:"start",RESET:"reset"};exports.mxEvent=mxEvent,mxXmlRequest.prototype.url=null,mxXmlRequest.prototype.params=null,mxXmlRequest.prototype.method=null,mxXmlRequest.prototype.async=null,mxXmlRequest.prototype.binary=!1,mxXmlRequest.prototype.withCredentials=!1,mxXmlRequest.prototype.username=null,mxXmlRequest.prototype.password=null,mxXmlRequest.prototype.request=null,mxXmlRequest.prototype.decodeSimulateValues=!1,mxXmlRequest.prototype.isBinary=function(){return this.binary},mxXmlRequest.prototype.setBinary=function(e){this.binary=e},mxXmlRequest.prototype.getText=function(){return this.request.responseText},mxXmlRequest.prototype.isReady=function(){return 4==this.request.readyState},mxXmlRequest.prototype.getDocumentElement=function(){var e=this.getXml();return null!=e?e.documentElement:null},mxXmlRequest.prototype.getXml=function(){var e=this.request.responseXML;return(document.documentMode>=9||null==e||null==e.documentElement)&&(e=mxUtils.parseXml(this.request.responseText)),e},mxXmlRequest.prototype.getText=function(){return this.request.responseText},mxXmlRequest.prototype.getStatus=function(){return this.request.status},mxXmlRequest.prototype.create=window.XMLHttpRequest?function(){var e=new XMLHttpRequest;return this.isBinary()&&e.overrideMimeType&&e.overrideMimeType("text/plain; charset=x-user-defined"),e}:"undefined"!=typeof ActiveXObject?function(){return new ActiveXObject("Microsoft.XMLHTTP")}:void 0,mxXmlRequest.prototype.send=function(e,t,n,o){this.request=this.create(),null!=this.request&&(null!=e&&(this.request.onreadystatechange=mxUtils.bind(this,function(){this.isReady()&&(e(this),this.onreadystatechaange=null)})),this.request.open(this.method,this.url,this.async,this.username,this.password),this.setRequestHeaders(this.request,this.params),window.XMLHttpRequest&&this.withCredentials&&(this.request.withCredentials="true"),!mxClient.IS_QUIRKS&&(null==document.documentMode||document.documentMode>9)&&window.XMLHttpRequest&&null!=n&&null!=o&&(this.request.timeout=n,this.request.ontimeout=o),this.request.send(this.params))},mxXmlRequest.prototype.setRequestHeaders=function(e,t){null!=t&&e.setRequestHeader("Content-Type","application/x-www-form-urlencoded")},mxXmlRequest.prototype.simulate=function(e,t){var n=null;(e=e||document)==document&&(n=window.onbeforeunload,window.onbeforeunload=null);var o=e.createElement("form");o.setAttribute("method",this.method),o.setAttribute("action",this.url),null!=t&&o.setAttribute("target",t),o.style.display="none",o.style.visibility="hidden";for(var s=this.params.indexOf("&")>0?this.params.split("&"):this.params.split(),i=0;i<s.length;i++){var a=s[i].indexOf("=");if(a>0){var l=s[i].substring(0,a),r=s[i].substring(a+1);this.decodeSimulateValues&&(r=decodeURIComponent(r));var d=e.createElement("textarea");d.setAttribute("name",l),mxUtils.write(d,r),o.appendChild(d)}}e.body.appendChild(o),o.submit(),e.body.removeChild(o),null!=n&&(window.onbeforeunload=n)},exports.mxXmlRequest=mxXmlRequest;var mxClipboard={STEPSIZE:10,insertCount:1,cells:null,setCells:function(e){mxClipboard.cells=e},getCells:function(){return mxClipboard.cells},isEmpty:function(){return null==mxClipboard.getCells()},cut:function(e,t){return t=mxClipboard.copy(e,t),mxClipboard.insertCount=0,mxClipboard.removeCells(e,t),t},removeCells:function(e,t){e.removeCells(t)},copy:function(e,t){t=t||e.getSelectionCells();var n=e.getExportableCells(e.model.getTopmostCells(t));return mxClipboard.insertCount=1,mxClipboard.setCells(e.cloneCells(n)),n},paste:function(e){var t=null;if(!mxClipboard.isEmpty()){t=e.getImportableCells(mxClipboard.getCells());var n=mxClipboard.insertCount*mxClipboard.STEPSIZE,o=e.getDefaultParent();t=e.importCells(t,n,n,o),mxClipboard.insertCount++,e.setSelectionCells(t)}return t}};exports.mxClipboard=mxClipboard,mxWindow.prototype=new mxEventSource,mxWindow.prototype.constructor=mxWindow,mxWindow.prototype.closeImage=mxClient.imageBasePath+"/close.gif",mxWindow.prototype.minimizeImage=mxClient.imageBasePath+"/minimize.gif",mxWindow.prototype.normalizeImage=mxClient.imageBasePath+"/normalize.gif",mxWindow.prototype.maximizeImage=mxClient.imageBasePath+"/maximize.gif",mxWindow.prototype.resizeImage=mxClient.imageBasePath+"/resize.gif",mxWindow.prototype.visible=!1,mxWindow.prototype.minimumSize=new mxRectangle(0,0,50,40),mxWindow.prototype.destroyOnClose=!0,mxWindow.prototype.contentHeightCorrection=8==document.documentMode||7==document.documentMode?6:2,mxWindow.prototype.title=null,mxWindow.prototype.content=null,mxWindow.prototype.init=function(e,t,n,o,s){s=null!=s?s:"mxWindow",this.div=document.createElement("div"),this.div.className=s,this.div.style.left=e+"px",this.div.style.top=t+"px",this.table=document.createElement("table"),this.table.className=s,mxClient.IS_POINTER&&(this.div.style.touchAction="none"),null!=n&&(mxClient.IS_QUIRKS||(this.div.style.width=n+"px"),this.table.style.width=n+"px"),null!=o&&(mxClient.IS_QUIRKS||(this.div.style.height=o+"px"),this.table.style.height=o+"px");var i=document.createElement("tbody"),a=document.createElement("tr");this.title=document.createElement("td"),this.title.className=s+"Title",a.appendChild(this.title),i.appendChild(a),a=document.createElement("tr"),this.td=document.createElement("td"),this.td.className=s+"Pane",7==document.documentMode&&(this.td.style.height="100%"),this.contentWrapper=document.createElement("div"),this.contentWrapper.className=s+"Pane",this.contentWrapper.style.width="100%",this.contentWrapper.appendChild(this.content),(mxClient.IS_QUIRKS||"DIV"!=this.content.nodeName.toUpperCase())&&(this.contentWrapper.style.height="100%"),this.td.appendChild(this.contentWrapper),a.appendChild(this.td),i.appendChild(a),this.table.appendChild(i),this.div.appendChild(this.table);var l=mxUtils.bind(this,function(r){this.activate()});mxEvent.addGestureListeners(this.title,l),mxEvent.addGestureListeners(this.table,l),this.hide()},mxWindow.prototype.setTitle=function(e){for(var t=this.title.firstChild;null!=t;){var n=t.nextSibling;t.nodeType==mxConstants.NODETYPE_TEXT&&t.parentNode.removeChild(t),t=n}mxUtils.write(this.title,e||"")},mxWindow.prototype.setScrollable=function(e){navigator.userAgent.indexOf("Presto/2.5")<0&&(this.contentWrapper.style.overflow=e?"auto":"hidden")},mxWindow.prototype.activate=function(){if(mxWindow.activeWindow!=this){var e=mxUtils.getCurrentStyle(this.getElement()),t=null!=e?e.zIndex:3;if(mxWindow.activeWindow){var n=mxWindow.activeWindow.getElement();null!=n&&null!=n.style&&(n.style.zIndex=t)}var o=mxWindow.activeWindow;this.getElement().style.zIndex=parseInt(t)+1,mxWindow.activeWindow=this,this.fireEvent(new mxEventObject(mxEvent.ACTIVATE,"previousWindow",o))}},mxWindow.prototype.getElement=function(){return this.div},mxWindow.prototype.fit=function(){mxUtils.fit(this.div)},mxWindow.prototype.isResizable=function(){return null!=this.resize&&"none"!=this.resize.style.display},mxWindow.prototype.setResizable=function(e){if(e)if(null==this.resize){this.resize=document.createElement("img"),this.resize.style.position="absolute",this.resize.style.bottom="2px",this.resize.style.right="2px",this.resize.setAttribute("src",mxClient.imageBasePath+"/resize.gif"),this.resize.style.cursor="nw-resize";var t=null,n=null,o=null,s=null,i=mxUtils.bind(this,function(r){this.activate(),t=mxEvent.getClientX(r),n=mxEvent.getClientY(r),o=this.div.offsetWidth,s=this.div.offsetHeight,mxEvent.addGestureListeners(document,null,a,l),this.fireEvent(new mxEventObject(mxEvent.RESIZE_START,"event",r)),mxEvent.consume(r)}),a=mxUtils.bind(this,function(r){if(null!=t&&null!=n){var d=mxEvent.getClientX(r)-t,u=mxEvent.getClientY(r)-n;this.setSize(o+d,s+u),this.fireEvent(new mxEventObject(mxEvent.RESIZE,"event",r)),mxEvent.consume(r)}}),l=mxUtils.bind(this,function(r){null!=t&&null!=n&&(t=null,n=null,mxEvent.removeGestureListeners(document,null,a,l),this.fireEvent(new mxEventObject(mxEvent.RESIZE_END,"event",r)),mxEvent.consume(r))});mxEvent.addGestureListeners(this.resize,i,a,l),this.div.appendChild(this.resize)}else this.resize.style.display="inline";else null!=this.resize&&(this.resize.style.display="none")},mxWindow.prototype.setSize=function(e,t){e=Math.max(this.minimumSize.width,e),t=Math.max(this.minimumSize.height,t),mxClient.IS_QUIRKS||(this.div.style.width=e+"px",this.div.style.height=t+"px"),this.table.style.width=e+"px",this.table.style.height=t+"px",mxClient.IS_QUIRKS||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px")},mxWindow.prototype.setMinimizable=function(e){this.minimize.style.display=e?"":"none"},mxWindow.prototype.getMinimumSize=function(){return new mxRectangle(0,0,0,this.title.offsetHeight)},mxWindow.prototype.installMinimizeHandler=function(){this.minimize=document.createElement("img"),this.minimize.setAttribute("src",this.minimizeImage),this.minimize.setAttribute("align","right"),this.minimize.setAttribute("title","Minimize"),this.minimize.style.cursor="pointer",this.minimize.style.marginRight="1px",this.minimize.style.display="none",this.title.appendChild(this.minimize);var e=!1,t=null,n=null,o=mxUtils.bind(this,function(s){if(this.activate(),e)e=!1,this.minimize.setAttribute("src",this.minimizeImage),this.minimize.setAttribute("title","Minimize"),this.contentWrapper.style.display="",this.maximize.style.display=t,mxClient.IS_QUIRKS||(this.div.style.height=n),this.table.style.height=n,null!=this.resize&&(this.resize.style.visibility=""),this.fireEvent(new mxEventObject(mxEvent.NORMALIZE,"event",s));else{e=!0,this.minimize.setAttribute("src",this.normalizeImage),this.minimize.setAttribute("title","Normalize"),this.contentWrapper.style.display="none",t=this.maximize.style.display,this.maximize.style.display="none",n=this.table.style.height;var i=this.getMinimumSize();i.height>0&&(mxClient.IS_QUIRKS||(this.div.style.height=i.height+"px"),this.table.style.height=i.height+"px"),i.width>0&&(mxClient.IS_QUIRKS||(this.div.style.width=i.width+"px"),this.table.style.width=i.width+"px"),null!=this.resize&&(this.resize.style.visibility="hidden"),this.fireEvent(new mxEventObject(mxEvent.MINIMIZE,"event",s))}mxEvent.consume(s)});mxEvent.addGestureListeners(this.minimize,o)},mxWindow.prototype.setMaximizable=function(e){this.maximize.style.display=e?"":"none"},mxWindow.prototype.installMaximizeHandler=function(){this.maximize=document.createElement("img"),this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("align","right"),this.maximize.setAttribute("title","Maximize"),this.maximize.style.cursor="default",this.maximize.style.marginLeft="1px",this.maximize.style.cursor="pointer",this.maximize.style.display="none",this.title.appendChild(this.maximize);var e=!1,t=null,n=null,o=null,s=null,i=mxUtils.bind(this,function(a){if(this.activate(),"none"!=this.maximize.style.display){if(e)e=!1,this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("title","Maximize"),this.contentWrapper.style.display="",this.minimize.style.visibility="",this.div.style.left=t+"px",this.div.style.top=n+"px",mxClient.IS_QUIRKS||(this.div.style.height=o,this.div.style.width=s,"auto"!=mxUtils.getCurrentStyle(this.contentWrapper).overflow&&null==this.resize||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px")),this.table.style.height=o,this.table.style.width=s,null!=this.resize&&(this.resize.style.visibility=""),this.fireEvent(new mxEventObject(mxEvent.NORMALIZE,"event",a));else{e=!0,this.maximize.setAttribute("src",this.normalizeImage),this.maximize.setAttribute("title","Normalize"),this.contentWrapper.style.display="",this.minimize.style.visibility="hidden",t=parseInt(this.div.style.left),n=parseInt(this.div.style.top),o=this.table.style.height,s=this.table.style.width,this.div.style.left="0px",this.div.style.top="0px";var r=Math.max(document.body.clientHeight||0,document.documentElement.clientHeight||0);mxClient.IS_QUIRKS||(this.div.style.width=document.body.clientWidth-2+"px",this.div.style.height=r-2+"px"),this.table.style.width=document.body.clientWidth-2+"px",this.table.style.height=r-2+"px",null!=this.resize&&(this.resize.style.visibility="hidden"),mxClient.IS_QUIRKS||"auto"!=mxUtils.getCurrentStyle(this.contentWrapper).overflow&&null==this.resize||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.fireEvent(new mxEventObject(mxEvent.MAXIMIZE,"event",a))}mxEvent.consume(a)}});mxEvent.addGestureListeners(this.maximize,i),mxEvent.addListener(this.title,"dblclick",i)},mxWindow.prototype.installMoveHandler=function(){this.title.style.cursor="move",mxEvent.addGestureListeners(this.title,mxUtils.bind(this,function(e){var t=mxEvent.getClientX(e),n=mxEvent.getClientY(e),o=this.getX(),s=this.getY(),i=mxUtils.bind(this,function(l){var r=mxEvent.getClientX(l)-t,d=mxEvent.getClientY(l)-n;this.setLocation(o+r,s+d),this.fireEvent(new mxEventObject(mxEvent.MOVE,"event",l)),mxEvent.consume(l)}),a=mxUtils.bind(this,function(l){mxEvent.removeGestureListeners(document,null,i,a),this.fireEvent(new mxEventObject(mxEvent.MOVE_END,"event",l)),mxEvent.consume(l)});mxEvent.addGestureListeners(document,null,i,a),this.fireEvent(new mxEventObject(mxEvent.MOVE_START,"event",e)),mxEvent.consume(e)})),mxClient.IS_POINTER&&(this.title.style.touchAction="none")},mxWindow.prototype.setLocation=function(e,t){this.div.style.left=e+"px",this.div.style.top=t+"px"},mxWindow.prototype.getX=function(){return parseInt(this.div.style.left)},mxWindow.prototype.getY=function(){return parseInt(this.div.style.top)},mxWindow.prototype.installCloseHandler=function(){this.closeImg=document.createElement("img"),this.closeImg.setAttribute("src",this.closeImage),this.closeImg.setAttribute("align","right"),this.closeImg.setAttribute("title","Close"),this.closeImg.style.marginLeft="2px",this.closeImg.style.cursor="pointer",this.closeImg.style.display="none",this.title.insertBefore(this.closeImg,this.title.firstChild),mxEvent.addGestureListeners(this.closeImg,mxUtils.bind(this,function(e){this.fireEvent(new mxEventObject(mxEvent.CLOSE,"event",e)),this.destroyOnClose?this.destroy():this.setVisible(!1),mxEvent.consume(e)}))},mxWindow.prototype.setImage=function(e){this.image=document.createElement("img"),this.image.setAttribute("src",e),this.image.setAttribute("align","left"),this.image.style.marginRight="4px",this.image.style.marginLeft="0px",this.image.style.marginTop="-2px",this.title.insertBefore(this.image,this.title.firstChild)},mxWindow.prototype.setClosable=function(e){this.closeImg.style.display=e?"":"none"},mxWindow.prototype.isVisible=function(){return null!=this.div&&"none"!=this.div.style.display},mxWindow.prototype.setVisible=function(e){null!=this.div&&this.isVisible()!=e&&(e?this.show():this.hide())},mxWindow.prototype.show=function(){this.div.style.display="",this.activate();var e=mxUtils.getCurrentStyle(this.contentWrapper);mxClient.IS_QUIRKS||"auto"!=e.overflow&&null==this.resize||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.fireEvent(new mxEventObject(mxEvent.SHOW))},mxWindow.prototype.hide=function(){this.div.style.display="none",this.fireEvent(new mxEventObject(mxEvent.HIDE))},mxWindow.prototype.destroy=function(){this.fireEvent(new mxEventObject(mxEvent.DESTROY)),null!=this.div&&(mxEvent.release(this.div),this.div.parentNode.removeChild(this.div),this.div=null),this.title=null,this.content=null,this.contentWrapper=null},exports.mxWindow=mxWindow,mxForm.prototype.table=null,mxForm.prototype.body=!1,mxForm.prototype.getTable=function(){return this.table},mxForm.prototype.addButtons=function(e,t){var n=document.createElement("tr"),o=document.createElement("td");n.appendChild(o),o=document.createElement("td");var s=document.createElement("button");mxUtils.write(s,mxResources.get("ok")||"OK"),o.appendChild(s),mxEvent.addListener(s,"click",function(){e()}),s=document.createElement("button"),mxUtils.write(s,mxResources.get("cancel")||"Cancel"),o.appendChild(s),mxEvent.addListener(s,"click",function(){t()}),n.appendChild(o),this.body.appendChild(n)},mxForm.prototype.addText=function(e,t){var n=document.createElement("input");return n.setAttribute("type","text"),n.value=t,this.addField(e,n)},mxForm.prototype.addCheckbox=function(e,t){var n=document.createElement("input");return n.setAttribute("type","checkbox"),this.addField(e,n),t&&(n.checked=!0),n},mxForm.prototype.addTextarea=function(e,t,n){var o=document.createElement("textarea");return mxClient.IS_NS&&n--,o.setAttribute("rows",n||2),o.value=t,this.addField(e,o)},mxForm.prototype.addCombo=function(e,t,n){var o=document.createElement("select");return null!=n&&o.setAttribute("size",n),t&&o.setAttribute("multiple","true"),this.addField(e,o)},mxForm.prototype.addOption=function(e,t,n,o){var s=document.createElement("option");mxUtils.writeln(s,t),s.setAttribute("value",n),o&&s.setAttribute("selected",o),e.appendChild(s)},mxForm.prototype.addField=function(e,t){var n=document.createElement("tr"),o=document.createElement("td");return mxUtils.write(o,e),n.appendChild(o),(o=document.createElement("td")).appendChild(t),n.appendChild(o),this.body.appendChild(n),t},exports.mxForm=mxForm,mxImage.prototype.src=null,mxImage.prototype.width=null,mxImage.prototype.height=null,exports.mxImage=mxImage,mxDivResizer.prototype.resizeWidth=!0,mxDivResizer.prototype.resizeHeight=!0,mxDivResizer.prototype.handlingResize=!1,mxDivResizer.prototype.resize=function(){var e=this.getDocumentWidth(),t=this.getDocumentHeight(),n=parseInt(this.div.style.left),o=parseInt(this.div.style.right),s=parseInt(this.div.style.top),i=parseInt(this.div.style.bottom);this.resizeWidth&&!isNaN(n)&&!isNaN(o)&&n>=0&&o>=0&&e-o-n>0&&(this.div.style.width=e-o-n+"px"),this.resizeHeight&&!isNaN(s)&&!isNaN(i)&&s>=0&&i>=0&&t-s-i>0&&(this.div.style.height=t-s-i+"px")},mxDivResizer.prototype.getDocumentWidth=function(){return document.body.clientWidth},mxDivResizer.prototype.getDocumentHeight=function(){return document.body.clientHeight},exports.mxDivResizer=mxDivResizer,mxDragSource.prototype.element=null,mxDragSource.prototype.dropHandler=null,mxDragSource.prototype.dragOffset=null,mxDragSource.prototype.dragElement=null,mxDragSource.prototype.previewElement=null,mxDragSource.prototype.enabled=!0,mxDragSource.prototype.currentGraph=null,mxDragSource.prototype.currentDropTarget=null,mxDragSource.prototype.currentPoint=null,mxDragSource.prototype.currentGuide=null,mxDragSource.prototype.currentHighlight=null,mxDragSource.prototype.autoscroll=!0,mxDragSource.prototype.guidesEnabled=!0,mxDragSource.prototype.gridEnabled=!0,mxDragSource.prototype.highlightDropTargets=!0,mxDragSource.prototype.dragElementZIndex=100,mxDragSource.prototype.dragElementOpacity=70,mxDragSource.prototype.isEnabled=function(){return this.enabled},mxDragSource.prototype.setEnabled=function(e){this.enabled=e},mxDragSource.prototype.isGuidesEnabled=function(){return this.guidesEnabled},mxDragSource.prototype.setGuidesEnabled=function(e){this.guidesEnabled=e},mxDragSource.prototype.isGridEnabled=function(){return this.gridEnabled},mxDragSource.prototype.setGridEnabled=function(e){this.gridEnabled=e},mxDragSource.prototype.getGraphForEvent=function(e){return null},mxDragSource.prototype.getDropTarget=function(e,t,n,o){return e.getCellAt(t,n)},mxDragSource.prototype.createDragElement=function(e){return this.element.cloneNode(!0)},mxDragSource.prototype.createPreviewElement=function(e){return null},mxDragSource.prototype.isActive=function(){return null!=this.mouseMoveHandler},mxDragSource.prototype.reset=function(){null!=this.currentGraph&&(this.dragExit(this.currentGraph),this.currentGraph=null),this.removeDragElement(),this.removeListeners(),this.stopDrag()},mxDragSource.prototype.mouseDown=function(e){this.enabled&&!mxEvent.isConsumed(e)&&null==this.mouseMoveHandler&&(this.startDrag(e),this.mouseMoveHandler=mxUtils.bind(this,this.mouseMove),this.mouseUpHandler=mxUtils.bind(this,this.mouseUp),mxEvent.addGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler),mxClient.IS_TOUCH&&!mxEvent.isMouseEvent(e)&&(this.eventSource=mxEvent.getSource(e),mxEvent.addGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler)))},mxDragSource.prototype.startDrag=function(e){this.dragElement=this.createDragElement(e),this.dragElement.style.position="absolute",this.dragElement.style.zIndex=this.dragElementZIndex,mxUtils.setOpacity(this.dragElement,this.dragElementOpacity)},mxDragSource.prototype.stopDrag=function(){this.removeDragElement()},mxDragSource.prototype.removeDragElement=function(){null!=this.dragElement&&(null!=this.dragElement.parentNode&&this.dragElement.parentNode.removeChild(this.dragElement),this.dragElement=null)},mxDragSource.prototype.graphContainsEvent=function(e,t){var n=mxEvent.getClientX(t),o=mxEvent.getClientY(t),s=mxUtils.getOffset(e.container),i=mxUtils.getScrollOrigin();return n>=s.x-i.x&&o>=s.y-i.y&&n<=s.x-i.x+e.container.offsetWidth&&o<=s.y-i.y+e.container.offsetHeight},mxDragSource.prototype.mouseMove=function(e){var t=this.getGraphForEvent(e);if(null==t||this.graphContainsEvent(t,e)||(t=null),t!=this.currentGraph&&(null!=this.currentGraph&&this.dragExit(this.currentGraph,e),this.currentGraph=t,null!=this.currentGraph&&this.dragEnter(this.currentGraph,e)),null!=this.currentGraph&&this.dragOver(this.currentGraph,e),null==this.dragElement||null!=this.previewElement&&"visible"==this.previewElement.style.visibility)null!=this.dragElement&&(this.dragElement.style.visibility="hidden");else{var n=mxEvent.getClientX(e),o=mxEvent.getClientY(e);null==this.dragElement.parentNode&&document.body.appendChild(this.dragElement),this.dragElement.style.visibility="visible",null!=this.dragOffset&&(n+=this.dragOffset.x,o+=this.dragOffset.y);var s=mxUtils.getDocumentScrollOrigin(document);this.dragElement.style.left=n+s.x+"px",this.dragElement.style.top=o+s.y+"px"}mxEvent.consume(e)},mxDragSource.prototype.mouseUp=function(e){if(null!=this.currentGraph){if(null!=this.currentPoint&&(null==this.previewElement||"hidden"!=this.previewElement.style.visibility)){var t=this.currentGraph.view.scale,n=this.currentGraph.view.translate;this.drop(this.currentGraph,e,this.currentDropTarget,this.currentPoint.x/t-n.x,this.currentPoint.y/t-n.y)}this.dragExit(this.currentGraph),this.currentGraph=null}this.stopDrag(),this.removeListeners(),mxEvent.consume(e)},mxDragSource.prototype.removeListeners=function(){null!=this.eventSource&&(mxEvent.removeGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler),this.eventSource=null),mxEvent.removeGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler),this.mouseMoveHandler=null,this.mouseUpHandler=null},mxDragSource.prototype.dragEnter=function(e,t){e.isMouseDown=!0,e.isMouseTrigger=mxEvent.isMouseEvent(t),this.previewElement=this.createPreviewElement(e),this.isGuidesEnabled()&&null!=this.previewElement&&(this.currentGuide=new mxGuide(e,e.graphHandler.getGuideStates())),this.highlightDropTargets&&(this.currentHighlight=new mxCellHighlight(e,mxConstants.DROP_TARGET_COLOR)),e.addListener(mxEvent.FIRE_MOUSE_EVENT,this.eventConsumer)},mxDragSource.prototype.dragExit=function(e,t){this.currentDropTarget=null,this.currentPoint=null,e.isMouseDown=!1,e.removeListener(this.eventConsumer),null!=this.previewElement&&(null!=this.previewElement.parentNode&&this.previewElement.parentNode.removeChild(this.previewElement),this.previewElement=null),null!=this.currentGuide&&(this.currentGuide.destroy(),this.currentGuide=null),null!=this.currentHighlight&&(this.currentHighlight.destroy(),this.currentHighlight=null)},mxDragSource.prototype.dragOver=function(e,t){var n=mxUtils.getOffset(e.container),o=mxUtils.getScrollOrigin(e.container),s=mxEvent.getClientX(t)-n.x+o.x-e.panDx,i=mxEvent.getClientY(t)-n.y+o.y-e.panDy;if(e.autoScroll&&(null==this.autoscroll||this.autoscroll)&&e.scrollPointToVisible(s,i,e.autoExtend),null!=this.currentHighlight&&e.isDropEnabled()){this.currentDropTarget=this.getDropTarget(e,s,i,t);var a=e.getView().getState(this.currentDropTarget);this.currentHighlight.highlight(a)}if(null!=this.previewElement){null==this.previewElement.parentNode&&(e.container.appendChild(this.previewElement),this.previewElement.style.zIndex="3",this.previewElement.style.position="absolute");var l=this.isGridEnabled()&&e.isGridEnabledEvent(t),r=!0;if(null!=this.currentGuide&&this.currentGuide.isEnabledForEvent(t)){var g=new mxRectangle(0,0,parseInt(this.previewElement.style.width),parseInt(this.previewElement.style.height)),f=new mxPoint(s,i);r=!1,s=(f=this.currentGuide.move(g,f,l)).x,i=f.y}else if(l){var v=e.view.scale,x=e.view.translate,z=e.gridSize/2;s=(e.snap(s/v-x.x-z)+x.x)*v,i=(e.snap(i/v-x.y-z)+x.y)*v}null!=this.currentGuide&&r&&this.currentGuide.hide(),null!=this.previewOffset&&(s+=this.previewOffset.x,i+=this.previewOffset.y),this.previewElement.style.left=Math.round(s)+"px",this.previewElement.style.top=Math.round(i)+"px",this.previewElement.style.visibility="visible"}this.currentPoint=new mxPoint(s,i)},mxDragSource.prototype.drop=function(e,t,n,o,s){this.dropHandler(e,t,n,o,s),"hidden"!=e.container.style.visibility&&e.container.focus()},exports.mxDragSource=mxDragSource,mxToolbar.prototype=new mxEventSource,mxToolbar.prototype.constructor=mxToolbar,mxToolbar.prototype.container=null,mxToolbar.prototype.enabled=!0,mxToolbar.prototype.noReset=!1,mxToolbar.prototype.updateDefaultMode=!0,mxToolbar.prototype.addItem=function(e,t,n,o,s,i){var a=document.createElement(null!=t?"img":"button"),l=s||(null!=i?"mxToolbarMode":"mxToolbarItem");a.className=l,a.setAttribute("src",t),null!=e&&(null!=t?a.setAttribute("title",e):mxUtils.write(a,e)),this.container.appendChild(a),null!=n&&(mxEvent.addListener(a,"click",n),mxClient.IS_TOUCH&&mxEvent.addListener(a,"touchend",n));var r=mxUtils.bind(this,function(d){null!=o?a.setAttribute("src",t):a.style.backgroundColor=""});return mxEvent.addGestureListeners(a,mxUtils.bind(this,function(d){if(null!=o?a.setAttribute("src",o):a.style.backgroundColor="gray",null!=i){null==this.menu&&(this.menu=new mxPopupMenu,this.menu.init());var u=this.currentImg;if(this.menu.isMenuShowing()&&this.menu.hideMenu(),u!=a){this.currentImg=a,this.menu.factoryMethod=i;var g=new mxPoint(a.offsetLeft,a.offsetTop+a.offsetHeight);this.menu.popup(g.x,g.y,null,d),this.menu.isMenuShowing()&&(a.className=l+"Selected",this.menu.hideMenu=function(){mxPopupMenu.prototype.hideMenu.apply(this),a.className=l,this.currentImg=null})}}}),null,r),mxEvent.addListener(a,"mouseout",r),a},mxToolbar.prototype.addCombo=function(e){var t=document.createElement("div");t.style.display="inline",t.className="mxToolbarComboContainer";var n=document.createElement("select");return n.className=e||"mxToolbarCombo",t.appendChild(n),this.container.appendChild(t),n},mxToolbar.prototype.addActionCombo=function(e,t){var n=document.createElement("select");return n.className=t||"mxToolbarCombo",this.addOption(n,e,null),mxEvent.addListener(n,"change",function(o){var s=n.options[n.selectedIndex];n.selectedIndex=0,null!=s.funct&&s.funct(o)}),this.container.appendChild(n),n},mxToolbar.prototype.addOption=function(e,t,n){var o=document.createElement("option");return mxUtils.writeln(o,t),"function"==typeof n?o.funct=n:o.setAttribute("value",n),e.appendChild(o),o},mxToolbar.prototype.addSwitchMode=function(e,t,n,o,s){var i=document.createElement("img");return i.initialClassName=s||"mxToolbarMode",i.className=i.initialClassName,i.setAttribute("src",t),i.altIcon=o,null!=e&&i.setAttribute("title",e),mxEvent.addListener(i,"click",mxUtils.bind(this,function(a){var l;null!=(l=this.selectedMode.altIcon)?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",l)):this.selectedMode.className=this.selectedMode.initialClassName,this.updateDefaultMode&&(this.defaultMode=i),this.selectedMode=i,null!=(l=i.altIcon)?(i.altIcon=i.getAttribute("src"),i.setAttribute("src",l)):i.className=i.initialClassName+"Selected",this.fireEvent(new mxEventObject(mxEvent.SELECT)),n()})),this.container.appendChild(i),null==this.defaultMode&&(this.defaultMode=i,this.selectMode(i),n()),i},mxToolbar.prototype.addMode=function(e,t,n,o,s,i){i=null==i||i;var a=document.createElement(null!=t?"img":"button");return a.initialClassName=s||"mxToolbarMode",a.className=a.initialClassName,a.setAttribute("src",t),a.altIcon=o,null!=e&&a.setAttribute("title",e),this.enabled&&i&&(mxEvent.addListener(a,"click",mxUtils.bind(this,function(l){this.selectMode(a,n),this.noReset=!1})),mxEvent.addListener(a,"dblclick",mxUtils.bind(this,function(l){this.selectMode(a,n),this.noReset=!0})),null==this.defaultMode&&(this.defaultMode=a,this.defaultFunction=n,this.selectMode(a,n))),this.container.appendChild(a),a},mxToolbar.prototype.selectMode=function(e,t){var n;this.selectedMode!=e&&(null!=this.selectedMode&&(null!=(n=this.selectedMode.altIcon)?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",n)):this.selectedMode.className=this.selectedMode.initialClassName),this.selectedMode=e,null!=(n=this.selectedMode.altIcon)?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",n)):this.selectedMode.className=this.selectedMode.initialClassName+"Selected",this.fireEvent(new mxEventObject(mxEvent.SELECT,"function",t)))},mxToolbar.prototype.resetMode=function(e){!e&&this.noReset||this.selectedMode==this.defaultMode||this.selectMode(this.defaultMode,this.defaultFunction)},mxToolbar.prototype.addSeparator=function(e){return this.addItem(null,e,null)},mxToolbar.prototype.addBreak=function(){mxUtils.br(this.container)},mxToolbar.prototype.addLine=function(){var e=document.createElement("hr");e.style.marginRight="6px",e.setAttribute("size","1"),this.container.appendChild(e)},mxToolbar.prototype.destroy=function(){mxEvent.release(this.container),this.container=null,this.defaultMode=null,this.defaultFunction=null,this.selectedMode=null,null!=this.menu&&this.menu.destroy()},exports.mxToolbar=mxToolbar,mxUndoableEdit.prototype.source=null,mxUndoableEdit.prototype.changes=null,mxUndoableEdit.prototype.significant=null,mxUndoableEdit.prototype.undone=!1,mxUndoableEdit.prototype.redone=!1,mxUndoableEdit.prototype.isEmpty=function(){return 0==this.changes.length},mxUndoableEdit.prototype.isSignificant=function(){return this.significant},mxUndoableEdit.prototype.add=function(e){this.changes.push(e)},mxUndoableEdit.prototype.notify=function(){},mxUndoableEdit.prototype.die=function(){},mxUndoableEdit.prototype.undo=function(){if(!this.undone){this.source.fireEvent(new mxEventObject(mxEvent.START_EDIT));for(var t=this.changes.length-1;t>=0;t--){var n=this.changes[t];null!=n.execute?n.execute():null!=n.undo&&n.undo(),this.source.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",n))}this.undone=!0,this.redone=!1,this.source.fireEvent(new mxEventObject(mxEvent.END_EDIT))}this.notify()},mxUndoableEdit.prototype.redo=function(){if(!this.redone){this.source.fireEvent(new mxEventObject(mxEvent.START_EDIT));for(var e=this.changes.length,t=0;t<e;t++){var n=this.changes[t];null!=n.execute?n.execute():null!=n.redo&&n.redo(),this.source.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",n))}this.undone=!1,this.redone=!0,this.source.fireEvent(new mxEventObject(mxEvent.END_EDIT))}this.notify()},exports.mxUndoableEdit=mxUndoableEdit,mxUndoManager.prototype=new mxEventSource,mxUndoManager.prototype.constructor=mxUndoManager,mxUndoManager.prototype.size=null,mxUndoManager.prototype.history=null,mxUndoManager.prototype.indexOfNextAdd=0,mxUndoManager.prototype.isEmpty=function(){return 0==this.history.length},mxUndoManager.prototype.clear=function(){this.history=[],this.indexOfNextAdd=0,this.fireEvent(new mxEventObject(mxEvent.CLEAR))},mxUndoManager.prototype.canUndo=function(){return this.indexOfNextAdd>0},mxUndoManager.prototype.undo=function(){for(;this.indexOfNextAdd>0;){var e=this.history[--this.indexOfNextAdd];if(e.undo(),e.isSignificant()){this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",e));break}}},mxUndoManager.prototype.canRedo=function(){return this.indexOfNextAdd<this.history.length},mxUndoManager.prototype.redo=function(){for(var e=this.history.length;this.indexOfNextAdd<e;){var t=this.history[this.indexOfNextAdd++];if(t.redo(),t.isSignificant()){this.fireEvent(new mxEventObject(mxEvent.REDO,"edit",t));break}}},mxUndoManager.prototype.undoableEditHappened=function(e){this.trim(),this.size>0&&this.size==this.history.length&&this.history.shift(),this.history.push(e),this.indexOfNextAdd=this.history.length,this.fireEvent(new mxEventObject(mxEvent.ADD,"edit",e))},mxUndoManager.prototype.trim=function(){if(this.history.length>this.indexOfNextAdd)for(var e=this.history.splice(this.indexOfNextAdd,this.history.length-this.indexOfNextAdd),t=0;t<e.length;t++)e[t].die()},exports.mxUndoManager=mxUndoManager;var mxUrlConverter=function(){};mxUrlConverter.prototype.enabled=!0,mxUrlConverter.prototype.baseUrl=null,mxUrlConverter.prototype.baseDomain=null,mxUrlConverter.prototype.updateBaseUrl=function(){this.baseDomain=location.protocol+"//"+location.host,this.baseUrl=this.baseDomain+location.pathname;var e=this.baseUrl.lastIndexOf("/");e>0&&(this.baseUrl=this.baseUrl.substring(0,e+1))},mxUrlConverter.prototype.isEnabled=function(){return this.enabled},mxUrlConverter.prototype.setEnabled=function(e){this.enabled=e},mxUrlConverter.prototype.getBaseUrl=function(){return this.baseUrl},mxUrlConverter.prototype.setBaseUrl=function(e){this.baseUrl=e},mxUrlConverter.prototype.getBaseDomain=function(){return this.baseDomain},mxUrlConverter.prototype.setBaseDomain=function(e){this.baseDomain=e},mxUrlConverter.prototype.isRelativeUrl=function(e){return"//"!=e.substring(0,2)&&"http://"!=e.substring(0,7)&&"https://"!=e.substring(0,8)&&"data:image"!=e.substring(0,10)},mxUrlConverter.prototype.convert=function(e){return this.isEnabled()&&this.isRelativeUrl(e)&&(null==this.getBaseUrl()&&this.updateBaseUrl(),e="/"==e.charAt(0)?this.getBaseDomain()+e:this.getBaseUrl()+e),e},exports.mxUrlConverter=mxUrlConverter,mxPanningManager.prototype.damper=1/6,mxPanningManager.prototype.delay=10,mxPanningManager.prototype.handleMouseOut=!0,mxPanningManager.prototype.border=0,exports.mxPanningManager=mxPanningManager,mxPopupMenu.prototype=new mxEventSource,mxPopupMenu.prototype.constructor=mxPopupMenu,mxPopupMenu.prototype.submenuImage=mxClient.imageBasePath+"/submenu.gif",mxPopupMenu.prototype.zIndex=10006,mxPopupMenu.prototype.factoryMethod=null,mxPopupMenu.prototype.useLeftButtonForPopup=!1,mxPopupMenu.prototype.enabled=!0,mxPopupMenu.prototype.itemCount=0,mxPopupMenu.prototype.autoExpand=!1,mxPopupMenu.prototype.smartSeparators=!1,mxPopupMenu.prototype.labels=!0,mxPopupMenu.prototype.init=function(){this.table=document.createElement("table"),this.table.className="mxPopupMenu",this.tbody=document.createElement("tbody"),this.table.appendChild(this.tbody),this.div=document.createElement("div"),this.div.className="mxPopupMenu",this.div.style.display="inline",this.div.style.zIndex=this.zIndex,this.div.appendChild(this.table),mxEvent.disableContextMenu(this.div)},mxPopupMenu.prototype.isEnabled=function(){return this.enabled},mxPopupMenu.prototype.setEnabled=function(e){this.enabled=e},mxPopupMenu.prototype.isPopupTrigger=function(e){return e.isPopupTrigger()||this.useLeftButtonForPopup&&mxEvent.isLeftMouseButton(e.getEvent())},mxPopupMenu.prototype.addItem=function(e,t,n,o,s,i,a){o=o||this,this.itemCount++,o.willAddSeparator&&(o.containsItems&&this.addSeparator(o,!0),o.willAddSeparator=!1),o.containsItems=!0;var l=document.createElement("tr");l.className="mxPopupMenuItem";var r=document.createElement("td");if(r.className="mxPopupMenuIcon",null!=t){var d=document.createElement("img");d.src=t,r.appendChild(d)}else if(null!=s){var u=document.createElement("div");u.className=s,r.appendChild(u)}if(l.appendChild(r),this.labels){var g=document.createElement("td");g.className="mxPopupMenuItem"+(null==i||i?"":" mxDisabled"),mxUtils.write(g,e),g.align="left",l.appendChild(g);var f=document.createElement("td");f.className="mxPopupMenuItem"+(null==i||i?"":" mxDisabled"),f.style.paddingRight="6px",f.style.textAlign="right",l.appendChild(f),null==o.div&&this.createSubmenu(o)}if(o.tbody.appendChild(l),0!=a&&0!=i){var v=null;mxEvent.addGestureListeners(l,mxUtils.bind(this,function(x){this.eventReceiver=l,o.activeRow!=l&&o.activeRow!=o&&(null!=o.activeRow&&null!=o.activeRow.div.parentNode&&this.hideSubmenu(o),null!=l.div&&(this.showSubmenu(o,l),o.activeRow=l)),(mxClient.IS_QUIRKS||8==document.documentMode)&&(v=document.selection.createRange()),mxEvent.consume(x)}),mxUtils.bind(this,function(x){o.activeRow!=l&&o.activeRow!=o&&(null!=o.activeRow&&null!=o.activeRow.div.parentNode&&this.hideSubmenu(o),this.autoExpand&&null!=l.div&&(this.showSubmenu(o,l),o.activeRow=l)),l.className="mxPopupMenuItemHover"}),mxUtils.bind(this,function(x){if(this.eventReceiver==l){if(o.activeRow!=l&&this.hideMenu(),null!=v){try{v.select()}catch(z){}v=null}null!=n&&n(x)}this.eventReceiver=null,mxEvent.consume(x)})),mxEvent.addListener(l,"mouseout",mxUtils.bind(this,function(x){l.className="mxPopupMenuItem"}))}return l},mxPopupMenu.prototype.addCheckmark=function(e,t){var n=e.firstChild.nextSibling;n.style.backgroundImage="url('"+t+"')",n.style.backgroundRepeat="no-repeat",n.style.backgroundPosition="2px 50%"},mxPopupMenu.prototype.createSubmenu=function(e){e.table=document.createElement("table"),e.table.className="mxPopupMenu",e.tbody=document.createElement("tbody"),e.table.appendChild(e.tbody),e.div=document.createElement("div"),e.div.className="mxPopupMenu",e.div.style.position="absolute",e.div.style.display="inline",e.div.style.zIndex=this.zIndex,e.div.appendChild(e.table);var t=document.createElement("img");t.setAttribute("src",this.submenuImage),td=e.firstChild.nextSibling.nextSibling,td.appendChild(t)},mxPopupMenu.prototype.showSubmenu=function(e,t){if(null!=t.div){t.div.style.left=e.div.offsetLeft+t.offsetLeft+t.offsetWidth-1+"px",t.div.style.top=e.div.offsetTop+t.offsetTop+"px",document.body.appendChild(t.div);var n=parseInt(t.div.offsetLeft),o=parseInt(t.div.offsetWidth),s=mxUtils.getDocumentScrollOrigin(document),i=document.body,a=document.documentElement;n+o>s.x+(i.clientWidth||a.clientWidth)&&(t.div.style.left=e.div.offsetLeft-o+(mxClient.IS_IE?6:-6)+"px"),mxUtils.fit(t.div)}},mxPopupMenu.prototype.addSeparator=function(e,t){if(e=e||this,this.smartSeparators&&!t)e.willAddSeparator=!0;else if(null!=e.tbody){e.willAddSeparator=!1;var n=document.createElement("tr"),o=document.createElement("td");o.className="mxPopupMenuIcon",o.style.padding="0 0 0 0px",n.appendChild(o);var s=document.createElement("td");s.style.padding="0 0 0 0px",s.setAttribute("colSpan","2");var i=document.createElement("hr");i.setAttribute("size","1"),s.appendChild(i),n.appendChild(s),e.tbody.appendChild(n)}},mxPopupMenu.prototype.popup=function(e,t,n,o){if(null!=this.div&&null!=this.tbody&&null!=this.factoryMethod){for(this.div.style.left=e+"px",this.div.style.top=t+"px";null!=this.tbody.firstChild;)mxEvent.release(this.tbody.firstChild),this.tbody.removeChild(this.tbody.firstChild);this.itemCount=0,this.factoryMethod(this,n,o),this.itemCount>0&&(this.showMenu(),this.fireEvent(new mxEventObject(mxEvent.SHOW)))}},mxPopupMenu.prototype.isMenuShowing=function(){return null!=this.div&&this.div.parentNode==document.body},mxPopupMenu.prototype.showMenu=function(){document.documentMode>=9&&(this.div.style.filter="none"),document.body.appendChild(this.div),mxUtils.fit(this.div)},mxPopupMenu.prototype.hideMenu=function(){null!=this.div&&(null!=this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.hideSubmenu(this),this.containsItems=!1,this.fireEvent(new mxEventObject(mxEvent.HIDE)))},mxPopupMenu.prototype.hideSubmenu=function(e){null!=e.activeRow&&(this.hideSubmenu(e.activeRow),null!=e.activeRow.div.parentNode&&e.activeRow.div.parentNode.removeChild(e.activeRow.div),e.activeRow=null)},mxPopupMenu.prototype.destroy=function(){null!=this.div&&(mxEvent.release(this.div),null!=this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.div=null)},exports.mxPopupMenu=mxPopupMenu,mxAutoSaveManager.prototype=new mxEventSource,mxAutoSaveManager.prototype.constructor=mxAutoSaveManager,mxAutoSaveManager.prototype.graph=null,mxAutoSaveManager.prototype.autoSaveDelay=10,mxAutoSaveManager.prototype.autoSaveThrottle=2,mxAutoSaveManager.prototype.autoSaveThreshold=5,mxAutoSaveManager.prototype.ignoredChanges=0,mxAutoSaveManager.prototype.lastSnapshot=0,mxAutoSaveManager.prototype.enabled=!0,mxAutoSaveManager.prototype.changeHandler=null,mxAutoSaveManager.prototype.isEnabled=function(){return this.enabled},mxAutoSaveManager.prototype.setEnabled=function(e){this.enabled=e},mxAutoSaveManager.prototype.setGraph=function(e){null!=this.graph&&this.graph.getModel().removeListener(this.changeHandler),this.graph=e,null!=this.graph&&this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler)},mxAutoSaveManager.prototype.save=function(){},mxAutoSaveManager.prototype.graphModelChanged=function(e){var n=((new Date).getTime()-this.lastSnapshot)/1e3;n>this.autoSaveDelay||this.ignoredChanges>=this.autoSaveThreshold&&n>this.autoSaveThrottle?(this.save(),this.reset()):this.ignoredChanges++},mxAutoSaveManager.prototype.reset=function(){this.lastSnapshot=(new Date).getTime(),this.ignoredChanges=0},mxAutoSaveManager.prototype.destroy=function(){this.setGraph(null)},exports.mxAutoSaveManager=mxAutoSaveManager,mxAnimation.prototype=new mxEventSource,mxAnimation.prototype.constructor=mxAnimation,mxAnimation.prototype.delay=null,mxAnimation.prototype.thread=null,mxAnimation.prototype.isRunning=function(){return null!=this.thread},mxAnimation.prototype.startAnimation=function(){null==this.thread&&(this.thread=window.setInterval(mxUtils.bind(this,this.updateAnimation),this.delay))},mxAnimation.prototype.updateAnimation=function(){this.fireEvent(new mxEventObject(mxEvent.EXECUTE))},mxAnimation.prototype.stopAnimation=function(){null!=this.thread&&(window.clearInterval(this.thread),this.thread=null,this.fireEvent(new mxEventObject(mxEvent.DONE)))},exports.mxAnimation=mxAnimation,mxMorphing.prototype=new mxAnimation,mxMorphing.prototype.constructor=mxMorphing,mxMorphing.prototype.graph=null,mxMorphing.prototype.steps=null,mxMorphing.prototype.step=0,mxMorphing.prototype.ease=null,mxMorphing.prototype.cells=null,mxMorphing.prototype.updateAnimation=function(){var e=new mxCellStatePreview(this.graph);if(null!=this.cells)for(var t=0;t<this.cells.length;t++)this.animateCell(this.cells[t],e,!1);else this.animateCell(this.graph.getModel().getRoot(),e,!0);this.show(e),(e.isEmpty()||this.step++>=this.steps)&&this.stopAnimation()},mxMorphing.prototype.show=function(e){e.show()},mxMorphing.prototype.animateCell=function(e,t,n){var o=this.graph.getView().getState(e),s=null;if(null!=o&&(s=this.getDelta(o),this.graph.getModel().isVertex(e)&&(0!=s.x||0!=s.y))){var i=this.graph.view.getTranslate(),a=this.graph.view.getScale();s.x+=i.x*a,s.y+=i.y*a,t.moveState(o,-s.x/this.ease,-s.y/this.ease)}if(n&&!this.stopRecursion(o,s))for(var l=this.graph.getModel().getChildCount(e),r=0;r<l;r++)this.animateCell(this.graph.getModel().getChildAt(e,r),t,n)},mxMorphing.prototype.stopRecursion=function(e,t){return null!=t&&(0!=t.x||0!=t.y)},mxMorphing.prototype.getDelta=function(e){var t=this.getOriginForCell(e.cell),n=this.graph.getView().getTranslate(),o=this.graph.getView().getScale();return new mxPoint((t.x-(e.x/o-n.x))*o,(t.y-(e.y/o-n.y))*o)},mxMorphing.prototype.getOriginForCell=function(e){var t=null;if(null!=e){var n=this.graph.getModel().getParent(e),o=this.graph.getCellGeometry(e);if(t=this.getOriginForCell(n),null!=o)if(o.relative){var s=this.graph.getCellGeometry(n);null!=s&&(t.x+=o.x*s.width,t.y+=o.y*s.height)}else t.x+=o.x,t.y+=o.y}if(null==t){var i=this.graph.view.getTranslate();t=new mxPoint(-i.x,-i.y)}return t},exports.mxMorphing=mxMorphing,mxImageBundle.prototype.images=null,mxImageBundle.prototype.images=null,mxImageBundle.prototype.putImage=function(e,t,n){this.images[e]={value:t,fallback:n}},mxImageBundle.prototype.getImage=function(e){var t=null;if(null!=e){var n=this.images[e];null!=n&&(t=this.alt?n.fallback:n.value)}return t},exports.mxImageBundle=mxImageBundle,mxImageExport.prototype.includeOverlays=!1,mxImageExport.prototype.drawState=function(e,t){null!=e&&(this.visitStatesRecursive(e,t,mxUtils.bind(this,function(){this.drawCellState.apply(this,arguments)})),this.includeOverlays&&this.visitStatesRecursive(e,t,mxUtils.bind(this,function(){this.drawOverlays.apply(this,arguments)})))},mxImageExport.prototype.visitStatesRecursive=function(e,t,n){if(null!=e){n(e,t);for(var o=e.view.graph,s=o.model.getChildCount(e.cell),i=0;i<s;i++){var a=o.view.getState(o.model.getChildAt(e.cell,i));this.visitStatesRecursive(a,t,n)}}},mxImageExport.prototype.getLinkForCellState=function(e,t){return null},mxImageExport.prototype.drawCellState=function(e,t){var n=this.getLinkForCellState(e,t);null!=n&&t.setLink(n),this.drawShape(e,t),this.drawText(e,t),null!=n&&t.setLink(null)},mxImageExport.prototype.drawShape=function(e,t){e.shape instanceof mxShape&&e.shape.checkBounds()&&(t.save(),e.shape.paint(t),t.restore())},mxImageExport.prototype.drawText=function(e,t){null!=e.text&&e.text.checkBounds()&&(t.save(),e.text.paint(t),t.restore())},mxImageExport.prototype.drawOverlays=function(e,t){null!=e.overlays&&e.overlays.visit(function(n,o){o instanceof mxShape&&o.paint(t)})},exports.mxImageExport=mxImageExport,mxAbstractCanvas2D.prototype.state=null,mxAbstractCanvas2D.prototype.states=null,mxAbstractCanvas2D.prototype.path=null,mxAbstractCanvas2D.prototype.rotateHtml=!0,mxAbstractCanvas2D.prototype.lastX=0,mxAbstractCanvas2D.prototype.lastY=0,mxAbstractCanvas2D.prototype.moveOp="M",mxAbstractCanvas2D.prototype.lineOp="L",mxAbstractCanvas2D.prototype.quadOp="Q",mxAbstractCanvas2D.prototype.curveOp="C",mxAbstractCanvas2D.prototype.closeOp="Z",mxAbstractCanvas2D.prototype.pointerEvents=!1,mxAbstractCanvas2D.prototype.createUrlConverter=function(){return new mxUrlConverter},mxAbstractCanvas2D.prototype.reset=function(){this.state=this.createState(),this.states=[]},mxAbstractCanvas2D.prototype.createState=function(){return{dx:0,dy:0,scale:1,alpha:1,fillAlpha:1,strokeAlpha:1,fillColor:null,gradientFillAlpha:1,gradientColor:null,gradientAlpha:1,gradientDirection:null,strokeColor:null,strokeWidth:1,dashed:!1,dashPattern:"3 3",lineCap:"flat",lineJoin:"miter",miterLimit:10,fontColor:"#000000",fontBackgroundColor:null,fontBorderColor:null,fontSize:mxConstants.DEFAULT_FONTSIZE,fontFamily:mxConstants.DEFAULT_FONTFAMILY,fontStyle:0,shadow:!1,shadowColor:mxConstants.SHADOWCOLOR,shadowAlpha:mxConstants.SHADOW_OPACITY,shadowDx:mxConstants.SHADOW_OFFSET_X,shadowDy:mxConstants.SHADOW_OFFSET_Y,rotation:0,rotationCx:0,rotationCy:0}},mxAbstractCanvas2D.prototype.format=function(e){return Math.round(parseFloat(e))},mxAbstractCanvas2D.prototype.addOp=function(){if(null!=this.path&&(this.path.push(arguments[0]),arguments.length>2))for(var e=this.state,t=2;t<arguments.length;t+=2)this.lastX=arguments[t-1],this.lastY=arguments[t],this.path.push(this.format((this.lastX+e.dx)*e.scale)),this.path.push(this.format((this.lastY+e.dy)*e.scale))},mxAbstractCanvas2D.prototype.rotatePoint=function(e,t,n,o,s){var i=n*(Math.PI/180);return mxUtils.getRotatedPoint(new mxPoint(e,t),Math.cos(i),Math.sin(i),new mxPoint(o,s))},mxAbstractCanvas2D.prototype.save=function(){this.states.push(this.state),this.state=mxUtils.clone(this.state)},mxAbstractCanvas2D.prototype.restore=function(){this.states.length>0&&(this.state=this.states.pop())},mxAbstractCanvas2D.prototype.setLink=function(e){},mxAbstractCanvas2D.prototype.scale=function(e){this.state.scale*=e,this.state.strokeWidth*=e},mxAbstractCanvas2D.prototype.translate=function(e,t){this.state.dx+=e,this.state.dy+=t},mxAbstractCanvas2D.prototype.rotate=function(e,t,n,o,s){},mxAbstractCanvas2D.prototype.setAlpha=function(e){this.state.alpha=e},mxAbstractCanvas2D.prototype.setFillAlpha=function(e){this.state.fillAlpha=e},mxAbstractCanvas2D.prototype.setStrokeAlpha=function(e){this.state.strokeAlpha=e},mxAbstractCanvas2D.prototype.setFillColor=function(e){e==mxConstants.NONE&&(e=null),this.state.fillColor=e,this.state.gradientColor=null},mxAbstractCanvas2D.prototype.setGradient=function(e,t,n,o,s,i,a,l,r){var d=this.state;d.fillColor=e,d.gradientFillAlpha=null!=l?l:1,d.gradientColor=t,d.gradientAlpha=null!=r?r:1,d.gradientDirection=a},mxAbstractCanvas2D.prototype.setStrokeColor=function(e){e==mxConstants.NONE&&(e=null),this.state.strokeColor=e},mxAbstractCanvas2D.prototype.setStrokeWidth=function(e){this.state.strokeWidth=e},mxAbstractCanvas2D.prototype.setDashed=function(e){this.state.dashed=e},mxAbstractCanvas2D.prototype.setDashPattern=function(e){this.state.dashPattern=e},mxAbstractCanvas2D.prototype.setLineCap=function(e){this.state.lineCap=e},mxAbstractCanvas2D.prototype.setLineJoin=function(e){this.state.lineJoin=e},mxAbstractCanvas2D.prototype.setMiterLimit=function(e){this.state.miterLimit=e},mxAbstractCanvas2D.prototype.setFontColor=function(e){e==mxConstants.NONE&&(e=null),this.state.fontColor=e},mxAbstractCanvas2D.prototype.setFontBackgroundColor=function(e){e==mxConstants.NONE&&(e=null),this.state.fontBackgroundColor=e},mxAbstractCanvas2D.prototype.setFontBorderColor=function(e){e==mxConstants.NONE&&(e=null),this.state.fontBorderColor=e},mxAbstractCanvas2D.prototype.setFontSize=function(e){this.state.fontSize=parseFloat(e)},mxAbstractCanvas2D.prototype.setFontFamily=function(e){this.state.fontFamily=e},mxAbstractCanvas2D.prototype.setFontStyle=function(e){null==e&&(e=0),this.state.fontStyle=e},mxAbstractCanvas2D.prototype.setShadow=function(e){this.state.shadow=e},mxAbstractCanvas2D.prototype.setShadowColor=function(e){e==mxConstants.NONE&&(e=null),this.state.shadowColor=e},mxAbstractCanvas2D.prototype.setShadowAlpha=function(e){this.state.shadowAlpha=e},mxAbstractCanvas2D.prototype.setShadowOffset=function(e,t){this.state.shadowDx=e,this.state.shadowDy=t},mxAbstractCanvas2D.prototype.begin=function(){this.lastX=0,this.lastY=0,this.path=[]},mxAbstractCanvas2D.prototype.moveTo=function(e,t){this.addOp(this.moveOp,e,t)},mxAbstractCanvas2D.prototype.lineTo=function(e,t){this.addOp(this.lineOp,e,t)},mxAbstractCanvas2D.prototype.quadTo=function(e,t,n,o){this.addOp(this.quadOp,e,t,n,o)},mxAbstractCanvas2D.prototype.curveTo=function(e,t,n,o,s,i){this.addOp(this.curveOp,e,t,n,o,s,i)},mxAbstractCanvas2D.prototype.arcTo=function(e,t,n,o,s,i,a){var l=mxUtils.arcToCurves(this.lastX,this.lastY,e,t,n,o,s,i,a);if(null!=l)for(var r=0;r<l.length;r+=6)this.curveTo(l[r],l[r+1],l[r+2],l[r+3],l[r+4],l[r+5])},mxAbstractCanvas2D.prototype.close=function(e,t,n,o,s,i){this.addOp(this.closeOp)},mxAbstractCanvas2D.prototype.end=function(){},exports.mxAbstractCanvas2D=mxAbstractCanvas2D,mxUtils.extend(mxXmlCanvas2D,mxAbstractCanvas2D),mxXmlCanvas2D.prototype.textEnabled=!0,mxXmlCanvas2D.prototype.compressed=!0,mxXmlCanvas2D.prototype.writeDefaults=function(){var e;(e=this.createElement("fontfamily")).setAttribute("family",mxConstants.DEFAULT_FONTFAMILY),this.root.appendChild(e),(e=this.createElement("fontsize")).setAttribute("size",mxConstants.DEFAULT_FONTSIZE),this.root.appendChild(e),(e=this.createElement("shadowcolor")).setAttribute("color",mxConstants.SHADOWCOLOR),this.root.appendChild(e),(e=this.createElement("shadowalpha")).setAttribute("alpha",mxConstants.SHADOW_OPACITY),this.root.appendChild(e),(e=this.createElement("shadowoffset")).setAttribute("dx",mxConstants.SHADOW_OFFSET_X),e.setAttribute("dy",mxConstants.SHADOW_OFFSET_Y),this.root.appendChild(e)},mxXmlCanvas2D.prototype.format=function(e){return parseFloat(parseFloat(e).toFixed(2))},mxXmlCanvas2D.prototype.createElement=function(e){return this.root.ownerDocument.createElement(e)},mxXmlCanvas2D.prototype.save=function(){this.compressed&&mxAbstractCanvas2D.prototype.save.apply(this,arguments),this.root.appendChild(this.createElement("save"))},mxXmlCanvas2D.prototype.restore=function(){this.compressed&&mxAbstractCanvas2D.prototype.restore.apply(this,arguments),this.root.appendChild(this.createElement("restore"))},mxXmlCanvas2D.prototype.scale=function(e){var t=this.createElement("scale");t.setAttribute("scale",e),this.root.appendChild(t)},mxXmlCanvas2D.prototype.translate=function(e,t){var n=this.createElement("translate");n.setAttribute("dx",this.format(e)),n.setAttribute("dy",this.format(t)),this.root.appendChild(n)},mxXmlCanvas2D.prototype.rotate=function(e,t,n,o,s){var i=this.createElement("rotate");(0!=e||t||n)&&(i.setAttribute("theta",this.format(e)),i.setAttribute("flipH",t?"1":"0"),i.setAttribute("flipV",n?"1":"0"),i.setAttribute("cx",this.format(o)),i.setAttribute("cy",this.format(s)),this.root.appendChild(i))},mxXmlCanvas2D.prototype.setAlpha=function(e){if(this.compressed){if(this.state.alpha==e)return;mxAbstractCanvas2D.prototype.setAlpha.apply(this,arguments)}var t=this.createElement("alpha");t.setAttribute("alpha",this.format(e)),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setFillAlpha=function(e){if(this.compressed){if(this.state.fillAlpha==e)return;mxAbstractCanvas2D.prototype.setFillAlpha.apply(this,arguments)}var t=this.createElement("fillalpha");t.setAttribute("alpha",this.format(e)),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setStrokeAlpha=function(e){if(this.compressed){if(this.state.strokeAlpha==e)return;mxAbstractCanvas2D.prototype.setStrokeAlpha.apply(this,arguments)}var t=this.createElement("strokealpha");t.setAttribute("alpha",this.format(e)),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setFillColor=function(e){if(e==mxConstants.NONE&&(e=null),this.compressed){if(this.state.fillColor==e)return;mxAbstractCanvas2D.prototype.setFillColor.apply(this,arguments)}var t=this.createElement("fillcolor");t.setAttribute("color",null!=e?e:mxConstants.NONE),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setGradient=function(e,t,n,o,s,i,a,l,r){if(null!=e&&null!=t){mxAbstractCanvas2D.prototype.setGradient.apply(this,arguments);var d=this.createElement("gradient");d.setAttribute("c1",e),d.setAttribute("c2",t),d.setAttribute("x",this.format(n)),d.setAttribute("y",this.format(o)),d.setAttribute("w",this.format(s)),d.setAttribute("h",this.format(i)),null!=a&&d.setAttribute("direction",a),null!=l&&d.setAttribute("alpha1",l),null!=r&&d.setAttribute("alpha2",r),this.root.appendChild(d)}},mxXmlCanvas2D.prototype.setStrokeColor=function(e){if(e==mxConstants.NONE&&(e=null),this.compressed){if(this.state.strokeColor==e)return;mxAbstractCanvas2D.prototype.setStrokeColor.apply(this,arguments)}var t=this.createElement("strokecolor");t.setAttribute("color",null!=e?e:mxConstants.NONE),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setStrokeWidth=function(e){if(this.compressed){if(this.state.strokeWidth==e)return;mxAbstractCanvas2D.prototype.setStrokeWidth.apply(this,arguments)}var t=this.createElement("strokewidth");t.setAttribute("width",this.format(e)),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setDashed=function(e){if(this.compressed){if(this.state.dashed==e)return;mxAbstractCanvas2D.prototype.setDashed.apply(this,arguments)}var t=this.createElement("dashed");t.setAttribute("dashed",e?"1":"0"),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setDashPattern=function(e){if(this.compressed){if(this.state.dashPattern==e)return;mxAbstractCanvas2D.prototype.setDashPattern.apply(this,arguments)}var t=this.createElement("dashpattern");t.setAttribute("pattern",e),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setLineCap=function(e){if(this.compressed){if(this.state.lineCap==e)return;mxAbstractCanvas2D.prototype.setLineCap.apply(this,arguments)}var t=this.createElement("linecap");t.setAttribute("cap",e),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setLineJoin=function(e){if(this.compressed){if(this.state.lineJoin==e)return;mxAbstractCanvas2D.prototype.setLineJoin.apply(this,arguments)}var t=this.createElement("linejoin");t.setAttribute("join",e),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setMiterLimit=function(e){if(this.compressed){if(this.state.miterLimit==e)return;mxAbstractCanvas2D.prototype.setMiterLimit.apply(this,arguments)}var t=this.createElement("miterlimit");t.setAttribute("limit",e),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setFontColor=function(e){if(this.textEnabled){if(e==mxConstants.NONE&&(e=null),this.compressed){if(this.state.fontColor==e)return;mxAbstractCanvas2D.prototype.setFontColor.apply(this,arguments)}var t=this.createElement("fontcolor");t.setAttribute("color",null!=e?e:mxConstants.NONE),this.root.appendChild(t)}},mxXmlCanvas2D.prototype.setFontBackgroundColor=function(e){if(this.textEnabled){if(e==mxConstants.NONE&&(e=null),this.compressed){if(this.state.fontBackgroundColor==e)return;mxAbstractCanvas2D.prototype.setFontBackgroundColor.apply(this,arguments)}var t=this.createElement("fontbackgroundcolor");t.setAttribute("color",null!=e?e:mxConstants.NONE),this.root.appendChild(t)}},mxXmlCanvas2D.prototype.setFontBorderColor=function(e){if(this.textEnabled){if(e==mxConstants.NONE&&(e=null),this.compressed){if(this.state.fontBorderColor==e)return;mxAbstractCanvas2D.prototype.setFontBorderColor.apply(this,arguments)}var t=this.createElement("fontbordercolor");t.setAttribute("color",null!=e?e:mxConstants.NONE),this.root.appendChild(t)}},mxXmlCanvas2D.prototype.setFontSize=function(e){if(this.textEnabled){if(this.compressed){if(this.state.fontSize==e)return;mxAbstractCanvas2D.prototype.setFontSize.apply(this,arguments)}var t=this.createElement("fontsize");t.setAttribute("size",e),this.root.appendChild(t)}},mxXmlCanvas2D.prototype.setFontFamily=function(e){if(this.textEnabled){if(this.compressed){if(this.state.fontFamily==e)return;mxAbstractCanvas2D.prototype.setFontFamily.apply(this,arguments)}var t=this.createElement("fontfamily");t.setAttribute("family",e),this.root.appendChild(t)}},mxXmlCanvas2D.prototype.setFontStyle=function(e){if(this.textEnabled){if(null==e&&(e=0),this.compressed){if(this.state.fontStyle==e)return;mxAbstractCanvas2D.prototype.setFontStyle.apply(this,arguments)}var t=this.createElement("fontstyle");t.setAttribute("style",e),this.root.appendChild(t)}},mxXmlCanvas2D.prototype.setShadow=function(e){if(this.compressed){if(this.state.shadow==e)return;mxAbstractCanvas2D.prototype.setShadow.apply(this,arguments)}var t=this.createElement("shadow");t.setAttribute("enabled",e?"1":"0"),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setShadowColor=function(e){if(this.compressed){if(e==mxConstants.NONE&&(e=null),this.state.shadowColor==e)return;mxAbstractCanvas2D.prototype.setShadowColor.apply(this,arguments)}var t=this.createElement("shadowcolor");t.setAttribute("color",null!=e?e:mxConstants.NONE),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setShadowAlpha=function(e){if(this.compressed){if(this.state.shadowAlpha==e)return;mxAbstractCanvas2D.prototype.setShadowAlpha.apply(this,arguments)}var t=this.createElement("shadowalpha");t.setAttribute("alpha",e),this.root.appendChild(t)},mxXmlCanvas2D.prototype.setShadowOffset=function(e,t){if(this.compressed){if(this.state.shadowDx==e&&this.state.shadowDy==t)return;mxAbstractCanvas2D.prototype.setShadowOffset.apply(this,arguments)}var n=this.createElement("shadowoffset");n.setAttribute("dx",e),n.setAttribute("dy",t),this.root.appendChild(n)},mxXmlCanvas2D.prototype.rect=function(e,t,n,o){var s=this.createElement("rect");s.setAttribute("x",this.format(e)),s.setAttribute("y",this.format(t)),s.setAttribute("w",this.format(n)),s.setAttribute("h",this.format(o)),this.root.appendChild(s)},mxXmlCanvas2D.prototype.roundrect=function(e,t,n,o,s,i){var a=this.createElement("roundrect");a.setAttribute("x",this.format(e)),a.setAttribute("y",this.format(t)),a.setAttribute("w",this.format(n)),a.setAttribute("h",this.format(o)),a.setAttribute("dx",this.format(s)),a.setAttribute("dy",this.format(i)),this.root.appendChild(a)},mxXmlCanvas2D.prototype.ellipse=function(e,t,n,o){var s=this.createElement("ellipse");s.setAttribute("x",this.format(e)),s.setAttribute("y",this.format(t)),s.setAttribute("w",this.format(n)),s.setAttribute("h",this.format(o)),this.root.appendChild(s)},mxXmlCanvas2D.prototype.image=function(e,t,n,o,s,i,a,l){s=this.converter.convert(s);var r=this.createElement("image");r.setAttribute("x",this.format(e)),r.setAttribute("y",this.format(t)),r.setAttribute("w",this.format(n)),r.setAttribute("h",this.format(o)),r.setAttribute("src",s),r.setAttribute("aspect",i?"1":"0"),r.setAttribute("flipH",a?"1":"0"),r.setAttribute("flipV",l?"1":"0"),this.root.appendChild(r)},mxXmlCanvas2D.prototype.begin=function(){this.root.appendChild(this.createElement("begin")),this.lastX=0,this.lastY=0},mxXmlCanvas2D.prototype.moveTo=function(e,t){var n=this.createElement("move");n.setAttribute("x",this.format(e)),n.setAttribute("y",this.format(t)),this.root.appendChild(n),this.lastX=e,this.lastY=t},mxXmlCanvas2D.prototype.lineTo=function(e,t){var n=this.createElement("line");n.setAttribute("x",this.format(e)),n.setAttribute("y",this.format(t)),this.root.appendChild(n),this.lastX=e,this.lastY=t},mxXmlCanvas2D.prototype.quadTo=function(e,t,n,o){var s=this.createElement("quad");s.setAttribute("x1",this.format(e)),s.setAttribute("y1",this.format(t)),s.setAttribute("x2",this.format(n)),s.setAttribute("y2",this.format(o)),this.root.appendChild(s),this.lastX=n,this.lastY=o},mxXmlCanvas2D.prototype.curveTo=function(e,t,n,o,s,i){var a=this.createElement("curve");a.setAttribute("x1",this.format(e)),a.setAttribute("y1",this.format(t)),a.setAttribute("x2",this.format(n)),a.setAttribute("y2",this.format(o)),a.setAttribute("x3",this.format(s)),a.setAttribute("y3",this.format(i)),this.root.appendChild(a),this.lastX=s,this.lastY=i},mxXmlCanvas2D.prototype.close=function(){this.root.appendChild(this.createElement("close"))},mxXmlCanvas2D.prototype.text=function(e,t,n,o,s,i,a,l,r,d,u,g,f){if(this.textEnabled&&null!=s){mxUtils.isNode(s)&&(s=mxUtils.getOuterHtml(s));var v=this.createElement("text");v.setAttribute("x",this.format(e)),v.setAttribute("y",this.format(t)),v.setAttribute("w",this.format(n)),v.setAttribute("h",this.format(o)),v.setAttribute("str",s),null!=i&&v.setAttribute("align",i),null!=a&&v.setAttribute("valign",a),v.setAttribute("wrap",l?"1":"0"),null==r&&(r=""),v.setAttribute("format",r),null!=d&&v.setAttribute("overflow",d),null!=u&&v.setAttribute("clip",u?"1":"0"),null!=g&&v.setAttribute("rotation",g),null!=f&&v.setAttribute("dir",f),this.root.appendChild(v)}},mxXmlCanvas2D.prototype.stroke=function(){this.root.appendChild(this.createElement("stroke"))},mxXmlCanvas2D.prototype.fill=function(){this.root.appendChild(this.createElement("fill"))},mxXmlCanvas2D.prototype.fillAndStroke=function(){this.root.appendChild(this.createElement("fillstroke"))},exports.mxXmlCanvas2D=mxXmlCanvas2D,mxUtils.extend(mxSvgCanvas2D,mxAbstractCanvas2D),function(){if(mxSvgCanvas2D.prototype.useDomParser=!mxClient.IS_IE&&"function"==typeof DOMParser&&"function"==typeof XMLSerializer,mxSvgCanvas2D.prototype.useDomParser)try{var e=(new DOMParser).parseFromString("test text","text/html");mxSvgCanvas2D.prototype.useDomParser=null!=e}catch(t){mxSvgCanvas2D.prototype.useDomParser=!1}}(),mxSvgCanvas2D.prototype.node=null,mxSvgCanvas2D.prototype.matchHtmlAlignment=!0,mxSvgCanvas2D.prototype.textEnabled=!0,mxSvgCanvas2D.prototype.foEnabled=!0,mxSvgCanvas2D.prototype.foAltText="[Object]",mxSvgCanvas2D.prototype.foOffset=0,mxSvgCanvas2D.prototype.textOffset=0,mxSvgCanvas2D.prototype.strokeTolerance=0,mxSvgCanvas2D.prototype.refCount=0,mxSvgCanvas2D.prototype.blockImagePointerEvents=!1,mxSvgCanvas2D.prototype.lineHeightCorrection=1,mxSvgCanvas2D.prototype.pointerEventsValue="all",mxSvgCanvas2D.prototype.fontMetricsPadding=10,mxSvgCanvas2D.prototype.cacheOffsetSize=!0,mxSvgCanvas2D.prototype.format=function(e){return parseFloat(parseFloat(e).toFixed(2))},mxSvgCanvas2D.prototype.getBaseUrl=function(){var e=window.location.href,t=e.lastIndexOf("#");return t>0&&(e=e.substring(0,t)),e},mxSvgCanvas2D.prototype.reset=function(){mxAbstractCanvas2D.prototype.reset.apply(this,arguments),this.gradients=[]},mxSvgCanvas2D.prototype.createStyle=function(e){var t=this.createElement("style");return t.setAttribute("type","text/css"),mxUtils.write(t,"svg{font-family:"+mxConstants.DEFAULT_FONTFAMILY+";font-size:"+mxConstants.DEFAULT_FONTSIZE+";fill:none;stroke-miterlimit:10}"),t},mxSvgCanvas2D.prototype.createElement=function(e,t){if(null!=this.root.ownerDocument.createElementNS)return this.root.ownerDocument.createElementNS(t||mxConstants.NS_SVG,e);var n=this.root.ownerDocument.createElement(e);return null!=t&&n.setAttribute("xmlns",t),n},mxSvgCanvas2D.prototype.createAlternateContent=function(e,t,n,o,s,i,a,l,r,d,u,g,f){if(null!=this.foAltText){var v=this.state,x=this.createElement("text");return x.setAttribute("x",Math.round(o/2)),x.setAttribute("y",Math.round((s+v.fontSize)/2)),x.setAttribute("fill",v.fontColor||"black"),x.setAttribute("text-anchor","middle"),x.setAttribute("font-size",v.fontSize+"px"),x.setAttribute("font-family",v.fontFamily),(v.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&x.setAttribute("font-weight","bold"),(v.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&x.setAttribute("font-style","italic"),(v.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&x.setAttribute("text-decoration","underline"),mxUtils.write(x,this.foAltText),x}return null},mxSvgCanvas2D.prototype.createGradientId=function(e,t,n,o,s){"#"==e.charAt(0)&&(e=e.substring(1)),"#"==t.charAt(0)&&(t=t.substring(1)),e=e.toLowerCase()+"-"+n,t=t.toLowerCase()+"-"+o;var i=null;if(null==s||s==mxConstants.DIRECTION_SOUTH)i="s";else if(s==mxConstants.DIRECTION_EAST)i="e";else{var a=e;e=t,t=a,s==mxConstants.DIRECTION_NORTH?i="s":s==mxConstants.DIRECTION_WEST&&(i="e")}return"mx-gradient-"+e+"-"+t+"-"+i},mxSvgCanvas2D.prototype.getSvgGradient=function(e,t,n,o,s){var i=this.createGradientId(e,t,n,o,s),a=this.gradients[i];if(null==a){var l=this.root.ownerSVGElement,r=0,d=i+"-"+r;if(null!=l)for(a=l.ownerDocument.getElementById(d);null!=a&&a.ownerSVGElement!=l;)d=i+"-"+r++,a=l.ownerDocument.getElementById(d);else d="id"+ ++this.refCount;null==a&&((a=this.createSvgGradient(e,t,n,o,s)).setAttribute("id",d),null!=this.defs?this.defs.appendChild(a):l.appendChild(a)),this.gradients[i]=a}return a.getAttribute("id")},mxSvgCanvas2D.prototype.createSvgGradient=function(e,t,n,o,s){var i=this.createElement("linearGradient");i.setAttribute("x1","0%"),i.setAttribute("y1","0%"),i.setAttribute("x2","0%"),i.setAttribute("y2","0%"),null==s||s==mxConstants.DIRECTION_SOUTH?i.setAttribute("y2","100%"):s==mxConstants.DIRECTION_EAST?i.setAttribute("x2","100%"):s==mxConstants.DIRECTION_NORTH?i.setAttribute("y1","100%"):s==mxConstants.DIRECTION_WEST&&i.setAttribute("x1","100%");var a=n<1?";stop-opacity:"+n:"",l=this.createElement("stop");return l.setAttribute("offset","0%"),l.setAttribute("style","stop-color:"+e+a),i.appendChild(l),a=o<1?";stop-opacity:"+o:"",(l=this.createElement("stop")).setAttribute("offset","100%"),l.setAttribute("style","stop-color:"+t+a),i.appendChild(l),i},mxSvgCanvas2D.prototype.addNode=function(e,t){var n=this.node,o=this.state;if(null!=n){if("path"==n.nodeName){if(!(null!=this.path&&this.path.length>0))return;n.setAttribute("d",this.path.join(" "))}e&&null!=o.fillColor?this.updateFill():this.styleEnabled||(n.setAttribute("fill","ellipse"==n.nodeName&&mxClient.IS_FF?"transparent":"none"),e=!1),t&&null!=o.strokeColor?this.updateStroke():this.styleEnabled||n.setAttribute("stroke","none"),null!=o.transform&&o.transform.length>0&&n.setAttribute("transform",o.transform),o.shadow&&this.root.appendChild(this.createShadow(n)),this.strokeTolerance>0&&!e&&this.root.appendChild(this.createTolerance(n)),!this.pointerEvents||"path"==n.nodeName&&this.path[this.path.length-1]!=this.closeOp?this.pointerEvents||null!=this.originalRoot||n.setAttribute("pointer-events","none"):n.setAttribute("pointer-events",this.pointerEventsValue),("rect"!=n.nodeName&&"path"!=n.nodeName&&"ellipse"!=n.nodeName||"none"!=n.getAttribute("fill")&&"transparent"!=n.getAttribute("fill")||"none"!=n.getAttribute("stroke")||"none"!=n.getAttribute("pointer-events"))&&this.root.appendChild(n),this.node=null}},mxSvgCanvas2D.prototype.updateFill=function(){var e=this.state;if((e.alpha<1||e.fillAlpha<1)&&this.node.setAttribute("fill-opacity",e.alpha*e.fillAlpha),null!=e.fillColor)if(null!=e.gradientColor){var t=this.getSvgGradient(e.fillColor,e.gradientColor,e.gradientFillAlpha,e.gradientAlpha,e.gradientDirection);if(mxClient.IS_CHROME_APP||mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_EDGE||this.root.ownerDocument!=document)this.node.setAttribute("fill","url(#"+t+")");else{var n=this.getBaseUrl().replace(/([\(\)])/g,"\\$1");this.node.setAttribute("fill","url("+n+"#"+t+")")}}else this.node.setAttribute("fill",e.fillColor.toLowerCase())},mxSvgCanvas2D.prototype.getCurrentStrokeWidth=function(){return Math.max(1,this.format(this.state.strokeWidth*this.state.scale))},mxSvgCanvas2D.prototype.updateStroke=function(){var e=this.state;this.node.setAttribute("stroke",e.strokeColor.toLowerCase()),(e.alpha<1||e.strokeAlpha<1)&&this.node.setAttribute("stroke-opacity",e.alpha*e.strokeAlpha);var t=this.getCurrentStrokeWidth();1!=t&&this.node.setAttribute("stroke-width",t),"path"==this.node.nodeName&&this.updateStrokeAttributes(),e.dashed&&this.node.setAttribute("stroke-dasharray",this.createDashPattern(e.strokeWidth*e.scale))},mxSvgCanvas2D.prototype.updateStrokeAttributes=function(){var e=this.state;if(null!=e.lineJoin&&"miter"!=e.lineJoin&&this.node.setAttribute("stroke-linejoin",e.lineJoin),null!=e.lineCap){var t=e.lineCap;"flat"==t&&(t="butt"),"butt"!=t&&this.node.setAttribute("stroke-linecap",t)}null==e.miterLimit||this.styleEnabled&&10==e.miterLimit||this.node.setAttribute("stroke-miterlimit",e.miterLimit)},mxSvgCanvas2D.prototype.createDashPattern=function(e){var t=[];if("string"==typeof this.state.dashPattern){var n=this.state.dashPattern.split(" ");if(n.length>0)for(var o=0;o<n.length;o++)t[o]=Number(n[o])*e}return t.join(" ")},mxSvgCanvas2D.prototype.createTolerance=function(e){var t=e.cloneNode(!0),n=parseFloat(t.getAttribute("stroke-width")||1)+this.strokeTolerance;return t.setAttribute("pointer-events","stroke"),t.setAttribute("visibility","hidden"),t.removeAttribute("stroke-dasharray"),t.setAttribute("stroke-width",n),t.setAttribute("fill","none"),t.setAttribute("stroke",mxClient.IS_OT?"none":"white"),t},mxSvgCanvas2D.prototype.createShadow=function(e){var t=e.cloneNode(!0),n=this.state;return"none"==t.getAttribute("fill")||mxClient.IS_FF&&"transparent"==t.getAttribute("fill")||t.setAttribute("fill",n.shadowColor),"none"!=t.getAttribute("stroke")&&t.setAttribute("stroke",n.shadowColor),t.setAttribute("transform","translate("+this.format(n.shadowDx*n.scale)+","+this.format(n.shadowDy*n.scale)+")"+(n.transform||"")),t.setAttribute("opacity",n.shadowAlpha),t},mxSvgCanvas2D.prototype.setLink=function(e){if(null==e)this.root=this.originalRoot;else{this.originalRoot=this.root;var t=this.createElement("a");null==t.setAttributeNS||this.root.ownerDocument!=document&&null==document.documentMode?t.setAttribute("xlink:href",e):t.setAttributeNS(mxConstants.NS_XLINK,"xlink:href",e),this.root.appendChild(t),this.root=t}},mxSvgCanvas2D.prototype.rotate=function(e,t,n,o,s){if(0!=e||t||n){var i=this.state;if(o+=i.dx,s+=i.dy,o*=i.scale,s*=i.scale,i.transform=i.transform||"",t&&n)e+=180;else if(t!=n){var a=t?o:0,l=t?-1:1,r=n?s:0,d=n?-1:1;i.transform+="translate("+this.format(a)+","+this.format(r)+")scale("+this.format(l)+","+this.format(d)+")translate("+this.format(-a)+","+this.format(-r)+")"}(t?!n:n)&&(e*=-1),0!=e&&(i.transform+="rotate("+this.format(e)+","+this.format(o)+","+this.format(s)+")"),i.rotation=i.rotation+e,i.rotationCx=o,i.rotationCy=s}},mxSvgCanvas2D.prototype.begin=function(){mxAbstractCanvas2D.prototype.begin.apply(this,arguments),this.node=this.createElement("path")},mxSvgCanvas2D.prototype.rect=function(e,t,n,o){var s=this.state,i=this.createElement("rect");i.setAttribute("x",this.format((e+s.dx)*s.scale)),i.setAttribute("y",this.format((t+s.dy)*s.scale)),i.setAttribute("width",this.format(n*s.scale)),i.setAttribute("height",this.format(o*s.scale)),this.node=i},mxSvgCanvas2D.prototype.roundrect=function(e,t,n,o,s,i){this.rect(e,t,n,o),s>0&&this.node.setAttribute("rx",this.format(s*this.state.scale)),i>0&&this.node.setAttribute("ry",this.format(i*this.state.scale))},mxSvgCanvas2D.prototype.ellipse=function(e,t,n,o){var s=this.state,i=this.createElement("ellipse");i.setAttribute("cx",Math.round((e+n/2+s.dx)*s.scale)),i.setAttribute("cy",Math.round((t+o/2+s.dy)*s.scale)),i.setAttribute("rx",n/2*s.scale),i.setAttribute("ry",o/2*s.scale),this.node=i},mxSvgCanvas2D.prototype.image=function(e,t,n,o,s,i,a,l){s=this.converter.convert(s),i=null==i||i,a=null!=a&&a,l=null!=l&&l;var r=this.state;e+=r.dx,t+=r.dy;var d=this.createElement("image");d.setAttribute("x",this.format(e*r.scale)),d.setAttribute("y",this.format(t*r.scale)),d.setAttribute("width",this.format(n*r.scale)),d.setAttribute("height",this.format(o*r.scale)),null==d.setAttributeNS?d.setAttribute("xlink:href",s):d.setAttributeNS(mxConstants.NS_XLINK,"xlink:href",s),i||d.setAttribute("preserveAspectRatio","none"),(r.alpha<1||r.fillAlpha<1)&&d.setAttribute("opacity",r.alpha*r.fillAlpha);var u=this.state.transform||"";if(a||l){var g=1,f=1,v=0,x=0;a&&(g=-1,v=-n-2*e),l&&(f=-1,x=-o-2*t),u+="scale("+g+","+f+")translate("+v*r.scale+","+x*r.scale+")"}u.length>0&&d.setAttribute("transform",u),this.pointerEvents||d.setAttribute("pointer-events","none"),this.root.appendChild(d),this.blockImagePointerEvents&&(d.setAttribute("style","pointer-events:none"),(d=this.createElement("rect")).setAttribute("visibility","hidden"),d.setAttribute("pointer-events","fill"),d.setAttribute("x",this.format(e*r.scale)),d.setAttribute("y",this.format(t*r.scale)),d.setAttribute("width",this.format(n*r.scale)),d.setAttribute("height",this.format(o*r.scale)),this.root.appendChild(d))},mxSvgCanvas2D.prototype.convertHtml=function(e){if(this.useDomParser){var t=(new DOMParser).parseFromString(e,"text/html");null!=t&&("<body"==(e=(new XMLSerializer).serializeToString(t.body)).substring(0,5)&&(e=e.substring(e.indexOf(">",5)+1)),"</body>"==e.substring(e.length-7,e.length)&&(e=e.substring(0,e.length-7)))}else{if(null!=document.implementation&&null!=document.implementation.createDocument){var n=document.implementation.createDocument("http://www.w3.org/1999/xhtml","html",null),o=n.createElement("body");n.documentElement.appendChild(o);var s=document.createElement("div");s.innerHTML=e;for(var i=s.firstChild;null!=i;){var a=i.nextSibling;o.appendChild(n.adoptNode(i)),i=a}return o.innerHTML}var l=document.createElement("textarea");l.innerHTML=e.replace(/&amp;/g,"&amp;amp;").replace(/&#60;/g,"&amp;lt;").replace(/&#62;/g,"&amp;gt;").replace(/&lt;/g,"&amp;lt;").replace(/&gt;/g,"&amp;gt;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=l.value.replace(/&/g,"&amp;").replace(/&amp;lt;/g,"&lt;").replace(/&amp;gt;/g,"&gt;").replace(/&amp;amp;/g,"&amp;").replace(/<br>/g,"<br />").replace(/<hr>/g,"<hr />").replace(/(<img[^>]+)>/gm,"$1 />")}return e},mxSvgCanvas2D.prototype.createDiv=function(e,t,n,o,s){var i=this.state;o="display:inline-block;font-size:"+i.fontSize+"px;font-family:"+i.fontFamily+";color:"+i.fontColor+";line-height:"+(mxConstants.ABSOLUTE_LINE_HEIGHT?i.fontSize*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT*this.lineHeightCorrection)+";"+o,(i.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(o+="font-weight:bold;"),(i.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(o+="font-style:italic;"),(i.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&(o+="text-decoration:underline;"),t==mxConstants.ALIGN_CENTER?o+="text-align:center;":t==mxConstants.ALIGN_RIGHT&&(o+="text-align:right;");var l="";null!=i.fontBackgroundColor&&(l+="background-color:"+i.fontBackgroundColor+";"),null!=i.fontBorderColor&&(l+="border:1px solid "+i.fontBorderColor+";");var r=e;if(mxUtils.isNode(r)||(r=this.convertHtml(r),"fill"!=s&&"width"!=s?r='<div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;'+l+'">'+r+"</div>":o+=l),!mxClient.IS_IE&&document.createElementNS){var d=document.createElementNS("http://www.w3.org/1999/xhtml","div");return d.setAttribute("style",o),mxUtils.isNode(r)?this.root.ownerDocument!=document?d.appendChild(r.cloneNode(!0)):d.appendChild(r):d.innerHTML=r,d}return mxUtils.isNode(r)&&this.root.ownerDocument!=document&&(r=r.outerHTML),mxUtils.parseXml('<div xmlns="http://www.w3.org/1999/xhtml" style="'+o+'">'+r+"</div>").documentElement},mxSvgCanvas2D.prototype.invalidateCachedOffsetSize=function(e){delete e.firstChild.mxCachedOffsetWidth,delete e.firstChild.mxCachedFinalOffsetWidth,delete e.firstChild.mxCachedFinalOffsetHeight},mxSvgCanvas2D.prototype.updateText=function(e,t,n,o,s,i,a,l,r,d,u){if(null!=u&&null!=u.firstChild&&null!=u.firstChild.firstChild&&null!=u.firstChild.firstChild.firstChild){var g=u.firstChild,f=g.firstChild,v=f.firstChild;d=null!=d?d:0;var x=this.state;e+=x.dx,t+=x.dy,r?(v.style.maxHeight=Math.round(o)+"px",v.style.maxWidth=Math.round(n)+"px"):"fill"==l?(v.style.width=Math.round(n+1)+"px",v.style.height=Math.round(o+1)+"px"):"width"==l&&(v.style.width=Math.round(n+1)+"px",o>0&&(v.style.maxHeight=Math.round(o)+"px")),a&&n>0&&(v.style.width=Math.round(n+1)+"px");var z=0,b=0,H=v;null!=H.firstChild&&"DIV"==H.firstChild.nodeName&&(H=H.firstChild),z=(null!=g.mxCachedOffsetWidth?g.mxCachedOffsetWidth:H.offsetWidth)+2,a&&"fill"!=l&&(r&&(z=Math.min(z,n)),v.style.width=z+"px"),z=(null!=g.mxCachedFinalOffsetWidth?g.mxCachedFinalOffsetWidth:H.offsetWidth)+2,b=(null!=g.mxCachedFinalOffsetHeight?g.mxCachedFinalOffsetHeight:H.offsetHeight)-2,r&&(b=Math.min(b,o),z=Math.min(z,n)),"width"==l?o=b:"fill"!=l&&(n=z,o=b);var L=0,V=0;s==mxConstants.ALIGN_CENTER?L-=n/2:s==mxConstants.ALIGN_RIGHT&&(L-=n),e+=L,i==mxConstants.ALIGN_MIDDLE?V-=o/2:i==mxConstants.ALIGN_BOTTOM&&(V-=o),"fill"!=l&&mxClient.IS_FF&&mxClient.IS_WIN&&(V-=2),t+=V;var Y=1!=x.scale?"scale("+x.scale+")":"";if(0!=x.rotation&&this.rotateHtml){Y+="rotate("+x.rotation+","+n/2+","+o/2+")";var J=this.rotatePoint((e+n/2)*x.scale,(t+o/2)*x.scale,x.rotation,x.rotationCx,x.rotationCy);e=J.x-n*x.scale/2,t=J.y-o*x.scale/2}else e*=x.scale,t*=x.scale;0!=d&&(Y+="rotate("+d+","+-L+","+-V+")"),g.setAttribute("transform","translate("+Math.round(e)+","+Math.round(t)+")"+Y),f.setAttribute("width",Math.round(Math.max(1,n))),f.setAttribute("height",Math.round(Math.max(1,o)))}},mxSvgCanvas2D.prototype.text=function(e,t,n,o,s,i,a,l,r,d,u,g,f){if(this.textEnabled&&null!=s){g=null!=g?g:0;var v=this.state;if(e+=v.dx,t+=v.dy,this.foEnabled&&"html"==r){var x="vertical-align:top;";u?x+="overflow:hidden;max-height:"+Math.round(o)+"px;max-width:"+Math.round(n)+"px;":"fill"==d?x+="width:"+Math.round(n+1)+"px;height:"+Math.round(o+1)+"px;overflow:hidden;":"width"==d&&(x+="width:"+Math.round(n+1)+"px;",o>0&&(x+="max-height:"+Math.round(o)+"px;overflow:hidden;")),x+=l&&n>0?"width:"+Math.round(n+1)+"px;white-space:normal;word-wrap:"+mxConstants.WORD_WRAP+";":"white-space:nowrap;";var z=this.createElement("g");v.alpha<1&&z.setAttribute("opacity",v.alpha);var b=this.createElement("foreignObject");b.setAttribute("style","overflow:visible;"),b.setAttribute("pointer-events","all");var _=this.createDiv(s,i,a,x,d);if(null==_)return;null!=f&&_.setAttribute("dir",f),z.appendChild(b),this.root.appendChild(z);var H=0,T=0,L=2,V=2;if(!mxClient.IS_IE||9!=document.documentMode&&mxClient.IS_SVG){this.root.ownerDocument!=document?(_.style.visibility="hidden",document.body.appendChild(_)):b.appendChild(_);var Y=_;if(null!=Y.firstChild&&"DIV"==Y.firstChild.nodeName&&(Y=Y.firstChild,l&&"break-word"==_.style.wordWrap&&(Y.style.width="100%")),0==(J=Y.offsetWidth)&&_.parentNode==b&&(_.style.visibility="hidden",document.body.appendChild(_),J=Y.offsetWidth),this.cacheOffsetSize&&(z.mxCachedOffsetWidth=J),!u&&l&&n>0&&this.root.ownerDocument!=document&&"fill"!=d&&"width"!=d){var K=_.style.whiteSpace;_.style.whiteSpace="nowrap",J<Y.offsetWidth&&(_.style.whiteSpace=K)}H=J+L-1,l&&"fill"!=d&&"width"!=d&&(u&&(H=Math.min(H,n)),_.style.width=H+"px"),H=Y.offsetWidth,T=Y.offsetHeight,this.cacheOffsetSize&&(z.mxCachedFinalOffsetWidth=H,z.mxCachedFinalOffsetHeight=T),T-=V,_.parentNode!=b&&(b.appendChild(_),_.style.visibility="")}else{var re=document.createElement("div");re.style.cssText=_.getAttribute("style"),re.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",re.style.position="absolute",re.style.visibility="hidden";var X=document.createElement("div");if(X.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",X.style.wordWrap=mxConstants.WORD_WRAP,X.innerHTML=mxUtils.isNode(s)?s.outerHTML:s,re.appendChild(X),document.body.appendChild(re),8!=document.documentMode&&9!=document.documentMode&&null!=v.fontBorderColor&&(L+=2,V+=2),l&&n>0){var J=X.offsetWidth;!u&&l&&n>0&&this.root.ownerDocument!=document&&"fill"!=d&&(K=re.style.whiteSpace,X.style.whiteSpace="nowrap",J<X.offsetWidth&&(re.style.whiteSpace=K)),u&&(J=Math.min(J,n)),re.style.width=J+"px",H=X.offsetWidth+L+0,T=X.offsetHeight+V,re.style.display="inline-block",re.style.position="",re.style.visibility="",re.style.width=H+"px",_.setAttribute("style",re.style.cssText)}else H=X.offsetWidth+L,T=X.offsetHeight+V;re.parentNode.removeChild(re),b.appendChild(_)}u&&(T=Math.min(T,o),H=Math.min(H,n)),"width"==d?o=T:"fill"!=d&&(n=H,o=T),v.alpha<1&&z.setAttribute("opacity",v.alpha);var he=0,Q=0;i==mxConstants.ALIGN_CENTER?he-=n/2:i==mxConstants.ALIGN_RIGHT&&(he-=n),e+=he,a==mxConstants.ALIGN_MIDDLE?Q-=o/2:a==mxConstants.ALIGN_BOTTOM&&(Q-=o),"fill"!=d&&mxClient.IS_FF&&mxClient.IS_WIN&&(Q-=2),t+=Q;var ye=1!=v.scale?"scale("+v.scale+")":"";if(0!=v.rotation&&this.rotateHtml){ye+="rotate("+v.rotation+","+n/2+","+o/2+")";var Le=this.rotatePoint((e+n/2)*v.scale,(t+o/2)*v.scale,v.rotation,v.rotationCx,v.rotationCy);e=Le.x-n*v.scale/2,t=Le.y-o*v.scale/2}else e*=v.scale,t*=v.scale;if(0!=g&&(ye+="rotate("+g+","+-he+","+-Q+")"),z.setAttribute("transform","translate("+(Math.round(e)+this.foOffset)+","+(Math.round(t)+this.foOffset)+")"+ye),b.setAttribute("width",Math.round(Math.max(1,n))),b.setAttribute("height",Math.round(Math.max(1,o))),this.root.ownerDocument!=document){var lt=this.createAlternateContent(b,e,t,n,o,s,i,a,l,r,d,u,g);if(null!=lt){b.setAttribute("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility");var Me=this.createElement("switch");Me.appendChild(b),Me.appendChild(lt),z.appendChild(Me)}}}else this.plainText(e,t,n,o,s,i,a,l,d,u,g,f)}},mxSvgCanvas2D.prototype.createClip=function(e,t,n,o){for(var s="mx-clip-"+(e=Math.round(e))+"-"+(t=Math.round(t))+"-"+(n=Math.round(n))+"-"+(o=Math.round(o)),i=0,a=s+"-"+i;null!=document.getElementById(a);)a=s+"-"+ ++i;clip=this.createElement("clipPath"),clip.setAttribute("id",a);var l=this.createElement("rect");return l.setAttribute("x",e),l.setAttribute("y",t),l.setAttribute("width",n),l.setAttribute("height",o),clip.appendChild(l),clip},mxSvgCanvas2D.prototype.plainText=function(e,t,n,o,s,i,a,l,r,d,u,g){u=null!=u?u:0;var f=this.state,v=f.fontSize,x=this.createElement("g"),z=f.transform||"";if(this.updateFont(x),0!=u&&(z+="rotate("+u+","+this.format(e*f.scale)+","+this.format(t*f.scale)+")"),null!=g&&x.setAttribute("direction",g),d&&n>0&&o>0){var b=e,J=t;i==mxConstants.ALIGN_CENTER?b-=n/2:i==mxConstants.ALIGN_RIGHT&&(b-=n),"fill"!=r&&(a==mxConstants.ALIGN_MIDDLE?J-=o/2:a==mxConstants.ALIGN_BOTTOM&&(J-=o));var _=this.createClip(b*f.scale-2,J*f.scale-2,n*f.scale+4,o*f.scale+4);if(null!=this.defs?this.defs.appendChild(_):this.root.appendChild(_),mxClient.IS_CHROME_APP||mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_EDGE||this.root.ownerDocument!=document)x.setAttribute("clip-path","url(#"+_.getAttribute("id")+")");else{var H=this.getBaseUrl().replace(/([\(\)])/g,"\\$1");x.setAttribute("clip-path","url("+H+"#"+_.getAttribute("id")+")")}}var T=i==mxConstants.ALIGN_RIGHT?"end":i==mxConstants.ALIGN_CENTER?"middle":"start";"start"!=T&&x.setAttribute("text-anchor",T),this.styleEnabled&&v==mxConstants.DEFAULT_FONTSIZE||x.setAttribute("font-size",v*f.scale+"px"),z.length>0&&x.setAttribute("transform",z),f.alpha<1&&x.setAttribute("opacity",f.alpha);var L=s.split("\n"),V=Math.round(v*mxConstants.LINE_HEIGHT),Y=v+(L.length-1)*V;J=t+v-1,a==mxConstants.ALIGN_MIDDLE?J-="fill"==r?o/2:(this.matchHtmlAlignment&&d&&o>0?Math.min(Y,o):Y)/2+1:a==mxConstants.ALIGN_BOTTOM&&(J-="fill"==r?o:(this.matchHtmlAlignment&&d&&o>0?Math.min(Y,o):Y)+2);for(var re=0;re<L.length;re++){if(L[re].length>0&&mxUtils.trim(L[re]).length>0){var X=this.createElement("text");X.setAttribute("x",this.format(e*f.scale)+this.textOffset),X.setAttribute("y",this.format(J*f.scale)+this.textOffset),mxUtils.write(X,L[re]),x.appendChild(X)}J+=V}this.root.appendChild(x),this.addTextBackground(x,s,e,t,n,"fill"==r?o:Y,i,a,r)},mxSvgCanvas2D.prototype.updateFont=function(e){var t=this.state;e.setAttribute("fill",t.fontColor),this.styleEnabled&&t.fontFamily==mxConstants.DEFAULT_FONTFAMILY||e.setAttribute("font-family",t.fontFamily),(t.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&e.setAttribute("font-weight","bold"),(t.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&e.setAttribute("font-style","italic"),(t.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&e.setAttribute("text-decoration","underline")},mxSvgCanvas2D.prototype.addTextBackground=function(e,t,n,o,s,i,a,l,r){var d=this.state;if(null!=d.fontBackgroundColor||null!=d.fontBorderColor){var u=null;if("fill"==r||"width"==r)a==mxConstants.ALIGN_CENTER?n-=s/2:a==mxConstants.ALIGN_RIGHT&&(n-=s),l==mxConstants.ALIGN_MIDDLE?o-=i/2:l==mxConstants.ALIGN_BOTTOM&&(o-=i),u=new mxRectangle((n+1)*d.scale,o*d.scale,(s-2)*d.scale,(i+2)*d.scale);else if(null!=e.getBBox&&this.root.ownerDocument==document)try{u=e.getBBox();var g=mxClient.IS_IE&&mxClient.IS_SVG;u=new mxRectangle(u.x,u.y+(g?0:1),u.width,u.height+(g?1:0))}catch(z){}else{var f=document.createElement("div");f.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?d.fontSize*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT,f.style.fontSize=d.fontSize+"px",f.style.fontFamily=d.fontFamily,f.style.whiteSpace="nowrap",f.style.position="absolute",f.style.visibility="hidden",f.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",f.style.zoom="1",(d.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(f.style.fontWeight="bold"),(d.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(f.style.fontStyle="italic"),t=mxUtils.htmlEntities(t,!1),f.innerHTML=t.replace(/\n/g,"<br/>"),document.body.appendChild(f),s=f.offsetWidth,i=f.offsetHeight,f.parentNode.removeChild(f),a==mxConstants.ALIGN_CENTER?n-=s/2:a==mxConstants.ALIGN_RIGHT&&(n-=s),l==mxConstants.ALIGN_MIDDLE?o-=i/2:l==mxConstants.ALIGN_BOTTOM&&(o-=i),u=new mxRectangle((n+1)*d.scale,(o+2)*d.scale,s*d.scale,(i+1)*d.scale)}if(null!=u){var v=this.createElement("rect");v.setAttribute("fill",d.fontBackgroundColor||"none"),v.setAttribute("stroke",d.fontBorderColor||"none"),v.setAttribute("x",Math.floor(u.x-1)),v.setAttribute("y",Math.floor(u.y-1)),v.setAttribute("width",Math.ceil(u.width+2)),v.setAttribute("height",Math.ceil(u.height));var x=null!=d.fontBorderColor?Math.max(1,this.format(d.scale)):0;v.setAttribute("stroke-width",x),this.root.ownerDocument==document&&1==mxUtils.mod(x,2)&&v.setAttribute("transform","translate(0.5, 0.5)"),e.insertBefore(v,e.firstChild)}}},mxSvgCanvas2D.prototype.stroke=function(){this.addNode(!1,!0)},mxSvgCanvas2D.prototype.fill=function(){this.addNode(!0,!1)},mxSvgCanvas2D.prototype.fillAndStroke=function(){this.addNode(!0,!0)},exports.mxSvgCanvas2D=mxSvgCanvas2D;var mxVmlCanvas2D=function(e){mxAbstractCanvas2D.call(this),this.root=e};mxUtils.extend(mxVmlCanvas2D,mxAbstractCanvas2D),mxVmlCanvas2D.prototype.node=null,mxVmlCanvas2D.prototype.textEnabled=!0,mxVmlCanvas2D.prototype.moveOp="m",mxVmlCanvas2D.prototype.lineOp="l",mxVmlCanvas2D.prototype.curveOp="c",mxVmlCanvas2D.prototype.closeOp="x",mxVmlCanvas2D.prototype.rotatedHtmlBackground="",mxVmlCanvas2D.prototype.vmlScale=1,mxVmlCanvas2D.prototype.createElement=function(e){return document.createElement(e)},mxVmlCanvas2D.prototype.createVmlElement=function(e){return this.createElement(mxClient.VML_PREFIX+":"+e)},mxVmlCanvas2D.prototype.addNode=function(e,t){var n=this.node,o=this.state;if(null!=n){if("shape"==n.nodeName){if(!(null!=this.path&&this.path.length>0))return;n.path=this.path.join(" ")+" e",n.style.width=this.root.style.width,n.style.height=this.root.style.height,n.coordsize=parseInt(n.style.width)+" "+parseInt(n.style.height)}n.strokeweight=this.format(Math.max(1,o.strokeWidth*o.scale/this.vmlScale))+"px",o.shadow&&this.root.appendChild(this.createShadow(n,e&&null!=o.fillColor,t&&null!=o.strokeColor)),t&&null!=o.strokeColor?(n.stroked="true",n.strokecolor=o.strokeColor):n.stroked="false",n.appendChild(this.createStroke()),e&&null!=o.fillColor?n.appendChild(this.createFill()):!this.pointerEvents||"shape"==n.nodeName&&this.path[this.path.length-1]!=this.closeOp?n.filled="false":n.appendChild(this.createTransparentFill()),this.root.appendChild(n)}},mxVmlCanvas2D.prototype.createTransparentFill=function(){var e=this.createVmlElement("fill");return e.src=mxClient.imageBasePath+"/transparent.gif",e.type="tile",e},mxVmlCanvas2D.prototype.createFill=function(){var e=this.state,t=this.createVmlElement("fill");if(t.color=e.fillColor,null!=e.gradientColor){t.type="gradient",t.method="none",t.color2=e.gradientColor;var n=180-e.rotation;e.gradientDirection==mxConstants.DIRECTION_WEST?n-=90+("x"==this.root.style.flip?180:0):e.gradientDirection==mxConstants.DIRECTION_EAST?n+=90+("x"==this.root.style.flip?180:0):e.gradientDirection==mxConstants.DIRECTION_NORTH?n-=180+("y"==this.root.style.flip?-180:0):n+="y"==this.root.style.flip?-180:0,"x"!=this.root.style.flip&&"y"!=this.root.style.flip||(n*=-1),t.angle=mxUtils.mod(n,360),t.opacity=e.alpha*e.gradientFillAlpha*100+"%",t.setAttribute(mxClient.OFFICE_PREFIX+":opacity2",e.alpha*e.gradientAlpha*100+"%")}else(e.alpha<1||e.fillAlpha<1)&&(t.opacity=e.alpha*e.fillAlpha*100+"%");return t},mxVmlCanvas2D.prototype.createStroke=function(){var e=this.state,t=this.createVmlElement("stroke");return t.endcap=e.lineCap||"flat",t.joinstyle=e.lineJoin||"miter",t.miterlimit=e.miterLimit||"10",(e.alpha<1||e.strokeAlpha<1)&&(t.opacity=e.alpha*e.strokeAlpha*100+"%"),e.dashed&&(t.dashstyle=this.getVmlDashStyle()),t},mxVmlCanvas2D.prototype.getVmlDashStyle=function(){var e="dash";if("string"==typeof this.state.dashPattern){var t=this.state.dashPattern.split(" ");t.length>0&&1==t[0]&&(e="0 2")}return e},mxVmlCanvas2D.prototype.createShadow=function(e,t,n){var o=this.state,s=-o.rotation*(Math.PI/180),i=Math.cos(s),a=Math.sin(s),l=o.shadowDx*o.scale,r=o.shadowDy*o.scale;"x"==this.root.style.flip?l*=-1:"y"==this.root.style.flip&&(r*=-1);var d=e.cloneNode(!0);return d.style.marginLeft=Math.round(l*i-r*a)+"px",d.style.marginTop=Math.round(l*a+r*i)+"px",8==document.documentMode&&(d.strokeweight=e.strokeweight,"shape"==e.nodeName&&(d.path=this.path.join(" ")+" e",d.style.width=this.root.style.width,d.style.height=this.root.style.height,d.coordsize=parseInt(e.style.width)+" "+parseInt(e.style.height))),n?(d.strokecolor=o.shadowColor,d.appendChild(this.createShadowStroke())):d.stroked="false",t?d.appendChild(this.createShadowFill()):d.filled="false",d},mxVmlCanvas2D.prototype.createShadowFill=function(){var e=this.createVmlElement("fill");return e.color=this.state.shadowColor,e.opacity=this.state.alpha*this.state.shadowAlpha*100+"%",e},mxVmlCanvas2D.prototype.createShadowStroke=function(){var e=this.createStroke();return e.opacity=this.state.alpha*this.state.shadowAlpha*100+"%",e},mxVmlCanvas2D.prototype.rotate=function(e,t,n,o,s){t&&n?e+=180:t?this.root.style.flip="x":n&&(this.root.style.flip="y"),(t?!n:n)&&(e*=-1),this.root.style.rotation=e,this.state.rotation=this.state.rotation+e,this.state.rotationCx=o,this.state.rotationCy=s},mxVmlCanvas2D.prototype.begin=function(){mxAbstractCanvas2D.prototype.begin.apply(this,arguments),this.node=this.createVmlElement("shape"),this.node.style.position="absolute"},mxVmlCanvas2D.prototype.quadTo=function(e,t,n,o){var s=this.state,i=(this.lastX+s.dx)*s.scale,a=(this.lastY+s.dy)*s.scale,l=(e+s.dx)*s.scale,r=(t+s.dy)*s.scale,d=(n+s.dx)*s.scale,u=(o+s.dy)*s.scale,f=a+2/3*(r-a),v=d+2/3*(l-d),x=u+2/3*(r-u);this.path.push("c "+this.format(i+2/3*(l-i))+" "+this.format(f)+" "+this.format(v)+" "+this.format(x)+" "+this.format(d)+" "+this.format(u)),this.lastX=d/s.scale-s.dx,this.lastY=u/s.scale-s.dy},mxVmlCanvas2D.prototype.createRect=function(e,t,n,o,s){var i=this.state,a=this.createVmlElement(e);return a.style.position="absolute",a.style.left=this.format((t+i.dx)*i.scale)+"px",a.style.top=this.format((n+i.dy)*i.scale)+"px",a.style.width=this.format(o*i.scale)+"px",a.style.height=this.format(s*i.scale)+"px",a},mxVmlCanvas2D.prototype.rect=function(e,t,n,o){this.node=this.createRect("rect",e,t,n,o)},mxVmlCanvas2D.prototype.roundrect=function(e,t,n,o,s,i){this.node=this.createRect("roundrect",e,t,n,o),this.node.setAttribute("arcsize",Math.max(100*s/n,100*i/o)+"%")},mxVmlCanvas2D.prototype.ellipse=function(e,t,n,o){this.node=this.createRect("oval",e,t,n,o)},mxVmlCanvas2D.prototype.image=function(e,t,n,o,s,i,a,l){var r=null;if(i){(r=this.createRect("rect",e,t,n,o)).stroked="false";var d=this.createVmlElement("fill");d.aspect=i?"atmost":"ignore",d.rotate="true",d.type="frame",d.src=s,r.appendChild(d)}else(r=this.createRect("image",e,t,n,o)).src=s;a&&l?r.style.rotation="180":a?r.style.flip="x":l&&(r.style.flip="y"),(this.state.alpha<1||this.state.fillAlpha<1)&&(r.style.filter+="alpha(opacity="+this.state.alpha*this.state.fillAlpha*100+")"),this.root.appendChild(r)},mxVmlCanvas2D.prototype.createDiv=function(e,t,n,o){var s=this.createElement("div"),i=this.state,a="";if(null!=i.fontBackgroundColor&&(a+="background-color:"+i.fontBackgroundColor+";"),null!=i.fontBorderColor&&(a+="border:1px solid "+i.fontBorderColor+";"),mxUtils.isNode(e))s.appendChild(e);else if("fill"!=o&&"width"!=o){var l=this.createElement("div");l.style.cssText=a,l.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",l.style.zoom="1",l.style.textDecoration="inherit",l.innerHTML=e,s.appendChild(l)}else s.style.cssText=a,s.innerHTML=e;var r=s.style;return r.fontSize=i.fontSize/this.vmlScale+"px",r.fontFamily=i.fontFamily,r.color=i.fontColor,r.verticalAlign="top",r.textAlign=t||"left",r.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?i.fontSize*mxConstants.LINE_HEIGHT/this.vmlScale+"px":mxConstants.LINE_HEIGHT,(i.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(r.fontWeight="bold"),(i.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(r.fontStyle="italic"),(i.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&(r.textDecoration="underline"),s},mxVmlCanvas2D.prototype.text=function(e,t,n,o,s,i,a,l,r,d,u,g,f){if(this.textEnabled&&null!=s){var v=this.state;if("html"==r){if(null!=v.rotation){var x=this.rotatePoint(e,t,v.rotation,v.rotationCx,v.rotationCy);e=x.x,t=x.y}8!=document.documentMode||mxClient.IS_EM?(e*=v.scale,t*=v.scale):(e+=v.dx,t+=v.dy,"fill"!=d&&a==mxConstants.ALIGN_TOP&&(t-=1));var z=8!=document.documentMode||mxClient.IS_EM?this.createElement("div"):this.createVmlElement("group");z.style.position="absolute",z.style.display="inline",z.style.left=this.format(e)+"px",z.style.top=this.format(t)+"px",z.style.zoom=v.scale;var b=this.createElement("div");b.style.position="relative",b.style.display="inline";var _=mxUtils.getAlignmentAsPoint(i,a),H=_.x,T=_.y,L=this.createDiv(s,i,a,d),V=this.createElement("div");null!=f&&L.setAttribute("dir",f),l&&n>0?(u||(L.style.width=Math.round(n)+"px"),L.style.wordWrap=mxConstants.WORD_WRAP,L.style.whiteSpace="normal","break-word"==L.style.wordWrap&&null!=(Y=L).firstChild&&"DIV"==Y.firstChild.nodeName&&(Y.firstChild.style.width="100%")):L.style.whiteSpace="nowrap";var J=v.rotation+(g||0);if(this.rotateHtml&&0!=J?(V.style.display="inline",V.style.zoom="1",V.appendChild(L),8!=document.documentMode||mxClient.IS_EM||"DIV"==this.root.nodeName?z.appendChild(V):(b.appendChild(V),z.appendChild(b))):8!=document.documentMode||mxClient.IS_EM?(L.style.display="inline",z.appendChild(L)):(b.appendChild(L),z.appendChild(b)),"DIV"!=this.root.nodeName){var K=this.createVmlElement("rect");K.stroked="false",K.filled="false",K.appendChild(z),this.root.appendChild(K)}else this.root.appendChild(z);if(u?(L.style.overflow="hidden",L.style.width=Math.round(n)+"px",mxClient.IS_QUIRKS||(L.style.maxHeight=Math.round(o)+"px")):"fill"==d?(L.style.overflow="hidden",L.style.width=Math.max(0,n)+1+"px",L.style.height=Math.max(0,o)+1+"px"):"width"==d&&(L.style.overflow="hidden",L.style.width=Math.max(0,n)+1+"px",L.style.maxHeight=Math.max(0,o)+1+"px"),this.rotateHtml&&0!=J){var re=J*(Math.PI/180),X=parseFloat(parseFloat(Math.cos(re)).toFixed(8)),ne=parseFloat(parseFloat(Math.sin(-re)).toFixed(8));(re%=2*Math.PI)<0&&(re+=2*Math.PI),(re%=Math.PI)>Math.PI/2&&(re=Math.PI-re);var he=Math.cos(re),Q=Math.sin(re);8!=document.documentMode||mxClient.IS_EM||(L.style.display="inline-block",V.style.display="inline-block",b.style.display="inline-block"),L.style.visibility="hidden",L.style.position="absolute",document.body.appendChild(L);var ye=L;null!=ye.firstChild&&"DIV"==ye.firstChild.nodeName&&(ye=ye.firstChild);var Y=ye.offsetWidth+3,Le=ye.offsetHeight;u?(n=Math.min(n,Y),Le=Math.min(Le,o)):n=Y,l&&(L.style.width=n+"px"),mxClient.IS_QUIRKS&&(u||"width"==d)&&Le>o&&(L.style.height=(Le=o)+"px");var lt=((o=Le)-o*he+n*-Q)/2-ne*n*(H+.5)+X*o*(T+.5),Me=(n-n*he+o*-Q)/2+X*n*(H+.5)+ne*o*(T+.5);if("group"==z.nodeName&&"DIV"==this.root.nodeName){var De=this.createElement("div");De.style.display="inline-block",De.style.position="absolute",De.style.left=this.format(e+(Me-n/2)*v.scale)+"px",De.style.top=this.format(t+(lt-o/2)*v.scale)+"px",z.parentNode.appendChild(De),De.appendChild(z)}else{var xe=8!=document.documentMode||mxClient.IS_EM?v.scale:1;z.style.left=this.format(e+(Me-n/2)*xe)+"px",z.style.top=this.format(t+(lt-o/2)*xe)+"px"}V.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+X+", M12="+ne+", M21="+-ne+", M22="+X+", sizingMethod='auto expand')",V.style.backgroundColor=this.rotatedHtmlBackground,this.state.alpha<1&&(V.style.filter+="alpha(opacity="+100*this.state.alpha+")"),V.appendChild(L),L.style.position="",L.style.visibility=""}else if(8!=document.documentMode||mxClient.IS_EM){L.style.verticalAlign="top",this.state.alpha<1&&(z.style.filter="alpha(opacity="+100*this.state.alpha+")");var Oe=L.parentNode;L.style.visibility="hidden",document.body.appendChild(L),n=L.offsetWidth,Le=L.offsetHeight,mxClient.IS_QUIRKS&&u&&Le>o&&(L.style.height=(Le=o)+"px"),o=Le,L.style.visibility="",Oe.appendChild(L),z.style.left=this.format(e+n*H*this.state.scale)+"px",z.style.top=this.format(t+o*T*this.state.scale)+"px"}else this.state.alpha<1&&(L.style.filter="alpha(opacity="+100*this.state.alpha+")"),b.style.left=100*H+"%",b.style.top=100*T+"%"}else this.plainText(e,t,n,o,mxUtils.htmlEntities(s,!1),i,a,l,r,d,u,g,f)}},mxVmlCanvas2D.prototype.plainText=function(e,t,n,o,s,i,a,l,r,d,u,g,f){var v=this.state;e=(e+v.dx)*v.scale,t=(t+v.dy)*v.scale;var x=this.createVmlElement("shape");x.style.width="1px",x.style.height="1px",x.stroked="false";var z=this.createVmlElement("fill");z.color=v.fontColor,z.opacity=100*v.alpha+"%",x.appendChild(z);var b=this.createVmlElement("path");b.textpathok="true",b.v="m "+this.format(0)+" "+this.format(0)+" l "+this.format(1)+" "+this.format(0),x.appendChild(b);var _=this.createVmlElement("textpath");_.style.cssText="v-text-align:"+i,_.style.align=i,_.style.fontFamily=v.fontFamily,_.string=s,_.on="true";var H=v.fontSize*v.scale/this.vmlScale;_.style.fontSize=H+"px",(v.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(_.style.fontWeight="bold"),(v.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(_.style.fontStyle="italic"),(v.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&(_.style.textDecoration="underline");var L=H+(s.split("\n").length-1)*H*mxConstants.LINE_HEIGHT,V=0,Y=0;if(a==mxConstants.ALIGN_BOTTOM?Y=-L/2:a!=mxConstants.ALIGN_MIDDLE&&(Y=L/2),null!=g){x.style.rotation=g;var J=g*(Math.PI/180);V=Math.sin(J)*Y,Y=Math.cos(J)*Y}x.appendChild(_),x.style.left=this.format(e-V)+"px",x.style.top=this.format(t+Y)+"px",this.root.appendChild(x)},mxVmlCanvas2D.prototype.stroke=function(){this.addNode(!1,!0)},mxVmlCanvas2D.prototype.fill=function(){this.addNode(!0,!1)},mxVmlCanvas2D.prototype.fillAndStroke=function(){this.addNode(!0,!0)},exports.mxVmlCanvas2D=mxVmlCanvas2D,mxGuide.prototype.graph=null,mxGuide.prototype.states=null,mxGuide.prototype.horizontal=!0,mxGuide.prototype.vertical=!0,mxGuide.prototype.guideX=null,mxGuide.prototype.guideY=null,mxGuide.prototype.setStates=function(e){this.states=e},mxGuide.prototype.isEnabledForEvent=function(e){return!0},mxGuide.prototype.getGuideTolerance=function(){return this.graph.gridSize/2},mxGuide.prototype.createGuideShape=function(e){var t=new mxPolyline([],mxConstants.GUIDE_COLOR,mxConstants.GUIDE_STROKEWIDTH);return t.isDashed=!0,t},mxGuide.prototype.move=function(e,t,n){function o(ye,Le){ye+=this.graph.panDx;var lt=!1;Math.abs(ye-V)<b?(l=ye-e.getCenterX(),b=Math.abs(ye-V),lt=!0):Math.abs(ye-T)<b?(l=ye-e.x,b=Math.abs(ye-T),lt=!0):Math.abs(ye-L)<b&&(l=ye-e.x-e.width,b=Math.abs(ye-L),lt=!0),lt&&(u=Le,g=Math.round(ye-this.graph.panDx),null==this.guideX&&(this.guideX=this.createGuideShape(!0),this.guideX.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.guideX.pointerEvents=!1,this.guideX.init(this.graph.getView().getOverlayPane()))),d=d||lt}function s(ye){ye+=this.graph.panDy;var Le=!1;Math.abs(ye-K)<_?(r=ye-e.getCenterY(),_=Math.abs(ye-K),Le=!0):Math.abs(ye-Y)<_?(r=ye-e.y,_=Math.abs(ye-Y),Le=!0):Math.abs(ye-J)<_&&(r=ye-e.y-e.height,_=Math.abs(ye-J),Le=!0),Le&&(v=X,x=Math.round(ye-this.graph.panDy),null==this.guideY&&(this.guideY=this.createGuideShape(!1),this.guideY.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.guideY.pointerEvents=!1,this.guideY.init(this.graph.getView().getOverlayPane()))),f=f||Le}if(null!=this.states&&(this.horizontal||this.vertical)&&null!=e&&null!=t){var i=this.graph.getView().translate,a=this.graph.getView().scale,l=t.x,r=t.y,d=!1,u=null,g=null,f=!1,v=null,x=null,z=this.getGuideTolerance(),b=z,_=z,H=e.clone();H.x+=t.x,H.y+=t.y;for(var T=H.x,L=H.x+H.width,V=H.getCenterX(),Y=H.y,J=H.y+H.height,K=H.getCenterY(),re=0;re<this.states.length;re++){var X=this.states[re];null!=X&&(this.horizontal&&(o.call(this,X.getCenterX(),X),o.call(this,X.x,X),o.call(this,X.x+X.width,X)),this.vertical&&(s.call(this,X.getCenterY(),X),s.call(this,X.y,X),s.call(this,X.y+X.height,X)))}if(n){if(!d){var ne=e.x-(this.graph.snap(e.x/a-i.x)+i.x)*a;l=this.graph.snap(l/a)*a-ne}if(!f){var he=e.y-(this.graph.snap(e.y/a-i.y)+i.y)*a;r=this.graph.snap(r/a)*a-he}}var Q=this.graph.container;d||null==this.guideX?null!=this.guideX&&(null!=u&&null!=e&&(minY=Math.min(e.y+r-this.graph.panDy,u.y),maxY=Math.max(e.y+e.height+r-this.graph.panDy,u.y+u.height)),this.guideX.points=null!=minY&&null!=maxY?[new mxPoint(g,minY),new mxPoint(g,maxY)]:[new mxPoint(g,-this.graph.panDy),new mxPoint(g,Q.scrollHeight-3-this.graph.panDy)],this.guideX.stroke=this.getGuideColor(u,!0),this.guideX.node.style.visibility="visible",this.guideX.redraw()):this.guideX.node.style.visibility="hidden",f||null==this.guideY?null!=this.guideY&&(null!=v&&null!=e&&(minX=Math.min(e.x+l-this.graph.panDx,v.x),maxX=Math.max(e.x+e.width+l-this.graph.panDx,v.x+v.width)),this.guideY.points=null!=minX&&null!=maxX?[new mxPoint(minX,x),new mxPoint(maxX,x)]:[new mxPoint(-this.graph.panDx,x),new mxPoint(Q.scrollWidth-3-this.graph.panDx,x)],this.guideY.stroke=this.getGuideColor(v,!1),this.guideY.node.style.visibility="visible",this.guideY.redraw()):this.guideY.node.style.visibility="hidden",t=new mxPoint(l,r)}return t},mxGuide.prototype.getGuideColor=function(e,t){return mxConstants.GUIDE_COLOR},mxGuide.prototype.hide=function(){this.setVisible(!1)},mxGuide.prototype.setVisible=function(e){null!=this.guideX&&(this.guideX.node.style.visibility=e?"visible":"hidden"),null!=this.guideY&&(this.guideY.node.style.visibility=e?"visible":"hidden")},mxGuide.prototype.destroy=function(){null!=this.guideX&&(this.guideX.destroy(),this.guideX=null),null!=this.guideY&&(this.guideY.destroy(),this.guideY=null)},exports.mxGuide=mxGuide,mxStencil.defaultLocalized=!1,mxStencil.allowEval=!1,mxStencil.prototype.desc=null,mxStencil.prototype.constraints=null,mxStencil.prototype.aspect=null,mxStencil.prototype.w0=null,mxStencil.prototype.h0=null,mxStencil.prototype.bgNode=null,mxStencil.prototype.fgNode=null,mxStencil.prototype.strokewidth=null,mxStencil.prototype.parseDescription=function(){this.fgNode=this.desc.getElementsByTagName("foreground")[0],this.bgNode=this.desc.getElementsByTagName("background")[0],this.w0=Number(this.desc.getAttribute("w")||100),this.h0=Number(this.desc.getAttribute("h")||100);var e=this.desc.getAttribute("aspect");this.aspect=null!=e?e:"variable";var t=this.desc.getAttribute("strokewidth");this.strokewidth=null!=t?t:"1"},mxStencil.prototype.parseConstraints=function(){var e=this.desc.getElementsByTagName("connections")[0];if(null!=e){var t=mxUtils.getChildNodes(e);if(null!=t&&t.length>0){this.constraints=[];for(var n=0;n<t.length;n++)this.constraints.push(this.parseConstraint(t[n]))}}},mxStencil.prototype.parseConstraint=function(e){var t=Number(e.getAttribute("x")),n=Number(e.getAttribute("y")),o="1"==e.getAttribute("perimeter");return new mxConnectionConstraint(new mxPoint(t,n),o)},mxStencil.prototype.evaluateTextAttribute=function(e,t,n){var o=this.evaluateAttribute(e,t,n),s=e.getAttribute("localized");return(mxStencil.defaultLocalized&&null==s||"1"==s)&&(o=mxResources.get(o)),o},mxStencil.prototype.evaluateAttribute=function(e,t,n){var o=e.getAttribute(t);if(null==o){var s=mxUtils.getTextContent(e);if(null!=s&&mxStencil.allowEval){var i=mxUtils.eval(s);"function"==typeof i&&(o=i(n))}}return o},mxStencil.prototype.drawShape=function(e,t,n,o,s,i){var a=mxUtils.getValue(t.style,mxConstants.STYLE_DIRECTION,null),l=this.computeAspect(t.style,n,o,s,i,a),r=Math.min(l.width,l.height),d="inherit"==this.strokewidth?Number(mxUtils.getNumber(t.style,mxConstants.STYLE_STROKEWIDTH,1)):Number(this.strokewidth)*r;e.setStrokeWidth(d),this.drawChildren(e,t,n,o,s,i,this.bgNode,l,!1),this.drawChildren(e,t,n,o,s,i,this.fgNode,l,!0)},mxStencil.prototype.drawChildren=function(e,t,n,o,s,i,a,l,r){if(null!=a&&s>0&&i>0)for(var d=a.firstChild;null!=d;)d.nodeType==mxConstants.NODETYPE_ELEMENT&&this.drawNode(e,t,d,l,r),d=d.nextSibling},mxStencil.prototype.computeAspect=function(e,t,n,o,s,i){var a=t,l=n,r=o/this.w0,d=s/this.h0,u=i==mxConstants.DIRECTION_NORTH||i==mxConstants.DIRECTION_SOUTH;if(u){d=o/this.h0,r=s/this.w0;var g=(o-s)/2;a+=g,l-=g}return"fixed"==this.aspect&&(r=d=Math.min(r,d),u?(a+=(s-this.w0*r)/2,l+=(o-this.h0*d)/2):(a+=(o-this.w0*r)/2,l+=(s-this.h0*d)/2)),new mxRectangle(a,l,r,d)},mxStencil.prototype.drawNode=function(e,t,n,o,s){var i=n.nodeName,a=o.x,l=o.y,r=o.width,d=o.height,u=Math.min(r,d);if("save"==i)e.save();else if("restore"==i)e.restore();else if("path"==i){e.begin();for(var g=n.firstChild;null!=g;)g.nodeType==mxConstants.NODETYPE_ELEMENT&&this.drawNode(e,t,g,o,s),g=g.nextSibling}else if("close"==i)e.close();else if("move"==i)e.moveTo(a+Number(n.getAttribute("x"))*r,l+Number(n.getAttribute("y"))*d);else if("line"==i)e.lineTo(a+Number(n.getAttribute("x"))*r,l+Number(n.getAttribute("y"))*d);else if("quad"==i)e.quadTo(a+Number(n.getAttribute("x1"))*r,l+Number(n.getAttribute("y1"))*d,a+Number(n.getAttribute("x2"))*r,l+Number(n.getAttribute("y2"))*d);else if("curve"==i)e.curveTo(a+Number(n.getAttribute("x1"))*r,l+Number(n.getAttribute("y1"))*d,a+Number(n.getAttribute("x2"))*r,l+Number(n.getAttribute("y2"))*d,a+Number(n.getAttribute("x3"))*r,l+Number(n.getAttribute("y3"))*d);else if("arc"==i)e.arcTo(Number(n.getAttribute("rx"))*r,Number(n.getAttribute("ry"))*d,Number(n.getAttribute("x-axis-rotation")),Number(n.getAttribute("large-arc-flag")),Number(n.getAttribute("sweep-flag")),a+Number(n.getAttribute("x"))*r,l+Number(n.getAttribute("y"))*d);else if("rect"==i)e.rect(a+Number(n.getAttribute("x"))*r,l+Number(n.getAttribute("y"))*d,Number(n.getAttribute("w"))*r,Number(n.getAttribute("h"))*d);else if("roundrect"==i){var f=Number(n.getAttribute("arcsize"));0==f&&(f=100*mxConstants.RECTANGLE_ROUNDING_FACTOR);var v=Number(n.getAttribute("w"))*r,x=Number(n.getAttribute("h"))*d,z=Number(f)/100,b=Math.min(v*z,x*z);e.roundrect(a+Number(n.getAttribute("x"))*r,l+Number(n.getAttribute("y"))*d,v,x,b,b)}else if("ellipse"==i)e.ellipse(a+Number(n.getAttribute("x"))*r,l+Number(n.getAttribute("y"))*d,Number(n.getAttribute("w"))*r,Number(n.getAttribute("h"))*d);else if("image"==i){if(!t.outline){var _=this.evaluateAttribute(n,"src",t);e.image(a+Number(n.getAttribute("x"))*r,l+Number(n.getAttribute("y"))*d,Number(n.getAttribute("w"))*r,Number(n.getAttribute("h"))*d,_,!1,"1"==n.getAttribute("flipH"),"1"==n.getAttribute("flipV"))}}else if("text"==i){if(!t.outline){var H=this.evaluateTextAttribute(n,"str",t),T="1"==n.getAttribute("vertical")?-90:0;if("0"==n.getAttribute("align-shape")){var L=t.rotation,V=1==mxUtils.getValue(t.style,mxConstants.STYLE_FLIPH,0),Y=1==mxUtils.getValue(t.style,mxConstants.STYLE_FLIPV,0);V&&Y?T-=L:V||Y?T+=L:T-=L}T-=n.getAttribute("rotation"),e.text(a+Number(n.getAttribute("x"))*r,l+Number(n.getAttribute("y"))*d,0,0,H,n.getAttribute("align")||"left",n.getAttribute("valign")||"top",!1,"",null,!1,T)}}else if("include-shape"==i){var J=mxStencilRegistry.getStencil(n.getAttribute("name"));if(null!=J){var K=a+Number(n.getAttribute("x"))*r,re=l+Number(n.getAttribute("y"))*d;v=Number(n.getAttribute("w"))*r,x=Number(n.getAttribute("h"))*d,J.drawShape(e,t,K,re,v,x)}}else if("fillstroke"==i)e.fillAndStroke();else if("fill"==i)e.fill();else if("stroke"==i)e.stroke();else if("strokewidth"==i){var X="1"==n.getAttribute("fixed")?1:u;e.setStrokeWidth(Number(n.getAttribute("width"))*X)}else if("dashed"==i)e.setDashed("1"==n.getAttribute("dashed"));else if("dashpattern"==i){var ne=n.getAttribute("pattern");if(null!=ne){for(var he=ne.split(" "),Q=[],ye=0;ye<he.length;ye++)he[ye].length>0&&Q.push(Number(he[ye])*u);ne=Q.join(" "),e.setDashPattern(ne)}}else"strokecolor"==i?e.setStrokeColor(n.getAttribute("color")):"linecap"==i?e.setLineCap(n.getAttribute("cap")):"linejoin"==i?e.setLineJoin(n.getAttribute("join")):"miterlimit"==i?e.setMiterLimit(Number(n.getAttribute("limit"))):"fillcolor"==i?e.setFillColor(n.getAttribute("color")):"alpha"==i?e.setAlpha(n.getAttribute("alpha")):"fontcolor"==i?e.setFontColor(n.getAttribute("color")):"fontstyle"==i?e.setFontStyle(n.getAttribute("style")):"fontfamily"==i?e.setFontFamily(n.getAttribute("family")):"fontsize"==i&&e.setFontSize(Number(n.getAttribute("size"))*u);!s||"fillstroke"!=i&&"fill"!=i&&"stroke"!=i||(s=!1,e.setShadow(!1))},exports.mxStencil=mxStencil,mxShape.prototype.dialect=null,mxShape.prototype.scale=1,mxShape.prototype.antiAlias=!0,mxShape.prototype.bounds=null,mxShape.prototype.points=null,mxShape.prototype.node=null,mxShape.prototype.state=null,mxShape.prototype.style=null,mxShape.prototype.boundingBox=null,mxShape.prototype.stencil=null,mxShape.prototype.svgStrokeTolerance=8,mxShape.prototype.pointerEvents=!0,mxShape.prototype.svgPointerEvents="all",mxShape.prototype.shapePointerEvents=!1,mxShape.prototype.stencilPointerEvents=!1,mxShape.prototype.vmlScale=1,mxShape.prototype.outline=!1,mxShape.prototype.visible=!0,mxShape.prototype.useSvgBoundingBox=!1,mxShape.prototype.init=function(e){null==this.node&&(this.node=this.create(e),null!=e&&e.appendChild(this.node))},mxShape.prototype.initStyles=function(e){this.strokewidth=1,this.rotation=0,this.opacity=100,this.fillOpacity=100,this.strokeOpacity=100,this.flipH=!1,this.flipV=!1},mxShape.prototype.isParseVml=function(){return!0},mxShape.prototype.isHtmlAllowed=function(){return!1},mxShape.prototype.getSvgScreenOffset=function(){var e=this.stencil&&"inherit"!=this.stencil.strokewidth?Number(this.stencil.strokewidth):this.strokewidth;return 1==mxUtils.mod(Math.max(1,Math.round(e*this.scale)),2)?.5:0},mxShape.prototype.create=function(e){return null!=e&&null!=e.ownerSVGElement?this.createSvg(e):8==document.documentMode||!mxClient.IS_VML||this.dialect!=mxConstants.DIALECT_VML&&this.isHtmlAllowed()?this.createHtml(e):this.createVml(e)},mxShape.prototype.createSvg=function(){return document.createElementNS(mxConstants.NS_SVG,"g")},mxShape.prototype.createVml=function(){var e=document.createElement(mxClient.VML_PREFIX+":group");return e.style.position="absolute",e},mxShape.prototype.createHtml=function(){var e=document.createElement("div");return e.style.position="absolute",e},mxShape.prototype.reconfigure=function(){this.redraw()},mxShape.prototype.redraw=function(){this.updateBoundsFromPoints(),this.visible&&this.checkBounds()?(this.node.style.visibility="visible",this.clear(),"DIV"!=this.node.nodeName||!this.isHtmlAllowed()&&mxClient.IS_VML?this.redrawShape():this.redrawHtmlShape(),this.updateBoundingBox()):(this.node.style.visibility="hidden",this.boundingBox=null)},mxShape.prototype.clear=function(){if(null!=this.node.ownerSVGElement)for(;null!=this.node.lastChild;)this.node.removeChild(this.node.lastChild);else this.node.style.cssText="position:absolute;"+(null!=this.cursor?"cursor:"+this.cursor+";":""),this.node.innerHTML=""},mxShape.prototype.updateBoundsFromPoints=function(){var e=this.points;if(null!=e&&e.length>0&&null!=e[0]){this.bounds=new mxRectangle(Number(e[0].x),Number(e[0].y),1,1);for(var t=1;t<this.points.length;t++)null!=e[t]&&this.bounds.add(new mxRectangle(Number(e[t].x),Number(e[t].y),1,1))}},mxShape.prototype.getLabelBounds=function(e){return e},mxShape.prototype.checkBounds=function(){return!isNaN(this.scale)&&isFinite(this.scale)&&this.scale>0&&null!=this.bounds&&!isNaN(this.bounds.x)&&!isNaN(this.bounds.y)&&!isNaN(this.bounds.width)&&!isNaN(this.bounds.height)&&this.bounds.width>0&&this.bounds.height>0},mxShape.prototype.createVmlGroup=function(){var e=document.createElement(mxClient.VML_PREFIX+":group");return e.style.position="absolute",e.style.width=this.node.style.width,e.style.height=this.node.style.height,e},mxShape.prototype.redrawShape=function(){var e=this.createCanvas();null!=e&&(e.pointerEvents=this.pointerEvents,this.paint(e),this.node!=e.root&&this.node.insertAdjacentHTML("beforeend",e.root.outerHTML),"DIV"==this.node.nodeName&&8==document.documentMode&&(this.node.style.filter="",mxUtils.addTransparentBackgroundFilter(this.node)),this.destroyCanvas(e))},mxShape.prototype.createCanvas=function(){var e=null;return null!=this.node.ownerSVGElement?e=this.createSvgCanvas():mxClient.IS_VML&&(this.updateVmlContainer(),e=this.createVmlCanvas()),this.outline&&(e.setStrokeWidth(this.strokewidth),e.setStrokeColor(this.stroke),null!=this.isDashed&&e.setDashed(this.isDashed),e.setStrokeWidth=function(){},e.setStrokeColor=function(){},e.setFillColor=function(){},e.setGradient=function(){},e.setDashed=function(){}),e},mxShape.prototype.createSvgCanvas=function(){var e=new mxSvgCanvas2D(this.node,!1);e.strokeTolerance=this.pointerEvents?this.svgStrokeTolerance:0,e.pointerEventsValue=this.svgPointerEvents,e.blockImagePointerEvents=mxClient.IS_FF;var t=this.getSvgScreenOffset();return 0!=t?this.node.setAttribute("transform","translate("+t+","+t+")"):this.node.removeAttribute("transform"),this.antiAlias||(e.format=function(n){return Math.round(parseFloat(n))}),e},mxShape.prototype.createVmlCanvas=function(){var e=8==document.documentMode&&this.isParseVml()?this.createVmlGroup():this.node,t=new mxVmlCanvas2D(e,!1);if(""!=e.tagUrn){var n=Math.max(1,Math.round(this.bounds.width)),o=Math.max(1,Math.round(this.bounds.height));e.coordsize=n*this.vmlScale+","+o*this.vmlScale,t.scale(this.vmlScale),t.vmlScale=this.vmlScale}var s=this.scale;return t.translate(-Math.round(this.bounds.x/s),-Math.round(this.bounds.y/s)),t},mxShape.prototype.updateVmlContainer=function(){this.node.style.left=Math.round(this.bounds.x)+"px",this.node.style.top=Math.round(this.bounds.y)+"px";var e=Math.max(1,Math.round(this.bounds.width)),t=Math.max(1,Math.round(this.bounds.height));this.node.style.width=e+"px",this.node.style.height=t+"px",this.node.style.overflow="visible"},mxShape.prototype.redrawHtmlShape=function(){this.updateHtmlBounds(this.node),this.updateHtmlFilters(this.node),this.updateHtmlColors(this.node)},mxShape.prototype.updateHtmlFilters=function(e){var t="";if(this.opacity<100&&(t+="alpha(opacity="+this.opacity+")"),this.isShadow&&(t+="progid:DXImageTransform.Microsoft.dropShadow (OffX='"+Math.round(mxConstants.SHADOW_OFFSET_X*this.scale)+"', OffY='"+Math.round(mxConstants.SHADOW_OFFSET_Y*this.scale)+"', Color='"+mxConstants.VML_SHADOWCOLOR+"')"),null!=this.fill&&this.fill!=mxConstants.NONE&&this.gradient&&this.gradient!=mxConstants.NONE){var n=this.fill,o=this.gradient,s="0",i={east:0,south:1,west:2,north:3},a=null!=this.direction?i[this.direction]:0;if(null!=this.gradientDirection&&(a=mxUtils.mod(a+i[this.gradientDirection]-1,4)),1==a){s="1";var l=n;n=o,o=l}else 2==a?(l=n,n=o,o=l):3==a&&(s="1");t+="progid:DXImageTransform.Microsoft.gradient(startColorStr='"+n+"', endColorStr='"+o+"', gradientType='"+s+"')"}e.style.filter=t},mxShape.prototype.updateHtmlColors=function(e){var t=this.stroke;null!=t&&t!=mxConstants.NONE?(e.style.borderColor=t,this.isDashed?e.style.borderStyle="dashed":this.strokewidth>0&&(e.style.borderStyle="solid"),e.style.borderWidth=Math.max(1,Math.ceil(this.strokewidth*this.scale))+"px"):e.style.borderWidth="0px",null!=(t=this.outline?null:this.fill)&&t!=mxConstants.NONE?(e.style.backgroundColor=t,e.style.backgroundImage="none"):this.pointerEvents?e.style.backgroundColor="transparent":8==document.documentMode?mxUtils.addTransparentBackgroundFilter(e):this.setTransparentBackgroundImage(e)},mxShape.prototype.updateHtmlBounds=function(e){var t=document.documentMode>=9?0:Math.ceil(this.strokewidth*this.scale);e.style.borderWidth=Math.max(1,t)+"px",e.style.overflow="hidden",e.style.left=Math.round(this.bounds.x-t/2)+"px",e.style.top=Math.round(this.bounds.y-t/2)+"px","CSS1Compat"==document.compatMode&&(t=-t),e.style.width=Math.round(Math.max(0,this.bounds.width+t))+"px",e.style.height=Math.round(Math.max(0,this.bounds.height+t))+"px"},mxShape.prototype.destroyCanvas=function(e){if(e instanceof mxSvgCanvas2D){for(var t in e.gradients){var n=e.gradients[t];null!=n&&(n.mxRefCount=(n.mxRefCount||0)+1)}this.releaseSvgGradients(this.oldGradients),this.oldGradients=e.gradients}},mxShape.prototype.paint=function(e){var t=this.scale,n=this.bounds.x/t,o=this.bounds.y/t,s=this.bounds.width/t,i=this.bounds.height/t;if(this.isPaintBoundsInverted()){var a=(s-i)/2;n+=a,o-=a;var l=s;s=i,i=l}this.updateTransform(e,n,o,s,i),this.configureCanvas(e,n,o,s,i);var r=null;if(null==this.stencil&&null==this.points&&this.shapePointerEvents||null!=this.stencil&&this.stencilPointerEvents){var d=this.createBoundingBox();if(this.dialect==mxConstants.DIALECT_SVG)r=this.createTransparentSvgRectangle(d.x,d.y,d.width,d.height),this.node.appendChild(r);else{var u=e.createRect("rect",d.x/t,d.y/t,d.width/t,d.height/t);u.appendChild(e.createTransparentFill()),u.stroked="false",e.root.appendChild(u)}}if(null!=this.stencil)this.stencil.drawShape(e,this,n,o,s,i);else if(e.setStrokeWidth(this.strokewidth),null!=this.points){for(var g=[],f=0;f<this.points.length;f++)null!=this.points[f]&&g.push(new mxPoint(this.points[f].x/t,this.points[f].y/t));this.paintEdgeShape(e,g)}else this.paintVertexShape(e,n,o,s,i);null!=r&&null!=e.state&&null!=e.state.transform&&r.setAttribute("transform",e.state.transform)},mxShape.prototype.configureCanvas=function(e,t,n,o,s){var i=null;if(null!=this.style&&(i=this.style.dashPattern),e.setAlpha(this.opacity/100),e.setFillAlpha(this.fillOpacity/100),e.setStrokeAlpha(this.strokeOpacity/100),null!=this.isShadow&&e.setShadow(this.isShadow),null!=this.isDashed&&e.setDashed(this.isDashed),null!=i&&e.setDashPattern(i),null!=this.fill&&this.fill!=mxConstants.NONE&&this.gradient&&this.gradient!=mxConstants.NONE){var a=this.getGradientBounds(e,t,n,o,s);e.setGradient(this.fill,this.gradient,a.x,a.y,a.width,a.height,this.gradientDirection)}else e.setFillColor(this.fill);e.setStrokeColor(this.stroke)},mxShape.prototype.getGradientBounds=function(e,t,n,o,s){return new mxRectangle(t,n,o,s)},mxShape.prototype.updateTransform=function(e,t,n,o,s){e.scale(this.scale),e.rotate(this.getShapeRotation(),this.flipH,this.flipV,t+o/2,n+s/2)},mxShape.prototype.paintVertexShape=function(e,t,n,o,s){this.paintBackground(e,t,n,o,s),e.setShadow(!1),this.paintForeground(e,t,n,o,s)},mxShape.prototype.paintBackground=function(e,t,n,o,s){},mxShape.prototype.paintForeground=function(e,t,n,o,s){},mxShape.prototype.paintEdgeShape=function(e,t){},mxShape.prototype.getArcSize=function(e,t){var n=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100;return Math.min(e*n,t*n)},mxShape.prototype.paintGlassEffect=function(e,t,n,o,s,i){var a=Math.ceil(this.strokewidth/2),l=.4;e.setGradient("#ffffff","#ffffff",t,n,o,.6*s,"south",.9,.1),e.begin(),i+=2*a,this.isRounded?(e.moveTo(t-a+i,n-a),e.quadTo(t-a,n-a,t-a,n-a+i),e.lineTo(t-a,n+s*l),e.quadTo(t+.5*o,n+.7*s,t+o+a,n+s*l),e.lineTo(t+o+a,n-a+i),e.quadTo(t+o+a,n-a,t+o+a-i,n-a)):(e.moveTo(t-a,n-a),e.lineTo(t-a,n+s*l),e.quadTo(t+.5*o,n+.7*s,t+o+a,n+s*l),e.lineTo(t+o+a,n-a)),e.close(),e.fill()},mxShape.prototype.addPoints=function(e,t,n,o,s){var i=t[t.length-1];if(s&&n){var a=(t=t.slice())[0],l=new mxPoint(i.x+(a.x-i.x)/2,i.y+(a.y-i.y)/2);t.splice(0,0,l)}var r=t[0],d=1;for(e.moveTo(r.x,r.y);d<(s?t.length:t.length-1);){var u=t[mxUtils.mod(d,t.length)],g=r.x-u.x,f=r.y-u.y;if(!n||0==g&&0==f)e.lineTo(u.x,u.y);else{var v=Math.sqrt(g*g+f*f),x=g*Math.min(o,v/2)/v,z=f*Math.min(o,v/2)/v;e.lineTo(u.x+x,u.y+z);for(var H=t[mxUtils.mod(d+1,t.length)];d<t.length-2&&0==Math.round(H.x-u.x)&&0==Math.round(H.y-u.y);)H=t[mxUtils.mod(d+2,t.length)],d++;g=H.x-u.x,f=H.y-u.y,v=Math.max(1,Math.sqrt(g*g+f*f));var T=g*Math.min(o,v/2)/v,L=f*Math.min(o,v/2)/v,V=u.x+T,Y=u.y+L;e.quadTo(u.x,u.y,V,Y),u=new mxPoint(V,Y)}r=u,d++}s?e.close():e.lineTo(i.x,i.y)},mxShape.prototype.resetStyles=function(){this.initStyles(),this.spacing=0,delete this.fill,delete this.gradient,delete this.gradientDirection,delete this.stroke,delete this.startSize,delete this.endSize,delete this.startArrow,delete this.endArrow,delete this.direction,delete this.isShadow,delete this.isDashed,delete this.isRounded,delete this.glass},mxShape.prototype.apply=function(e){if(this.state=e,this.style=e.style,null!=this.style){if(this.fill=mxUtils.getValue(this.style,mxConstants.STYLE_FILLCOLOR,this.fill),this.gradient=mxUtils.getValue(this.style,mxConstants.STYLE_GRADIENTCOLOR,this.gradient),this.gradientDirection=mxUtils.getValue(this.style,mxConstants.STYLE_GRADIENT_DIRECTION,this.gradientDirection),this.opacity=mxUtils.getValue(this.style,mxConstants.STYLE_OPACITY,this.opacity),this.fillOpacity=mxUtils.getValue(this.style,mxConstants.STYLE_FILL_OPACITY,this.fillOpacity),this.strokeOpacity=mxUtils.getValue(this.style,mxConstants.STYLE_STROKE_OPACITY,this.strokeOpacity),this.stroke=mxUtils.getValue(this.style,mxConstants.STYLE_STROKECOLOR,this.stroke),this.strokewidth=mxUtils.getNumber(this.style,mxConstants.STYLE_STROKEWIDTH,this.strokewidth),this.arrowStrokewidth=mxUtils.getNumber(this.style,mxConstants.STYLE_STROKEWIDTH,this.strokewidth),this.spacing=mxUtils.getValue(this.style,mxConstants.STYLE_SPACING,this.spacing),this.startSize=mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,this.startSize),this.endSize=mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,this.endSize),this.startArrow=mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,this.startArrow),this.endArrow=mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,this.endArrow),this.rotation=mxUtils.getValue(this.style,mxConstants.STYLE_ROTATION,this.rotation),this.direction=mxUtils.getValue(this.style,mxConstants.STYLE_DIRECTION,this.direction),this.flipH=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPH,0),this.flipV=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPV,0),null!=this.stencil&&(this.flipH=1==mxUtils.getValue(this.style,"stencilFlipH",0)||this.flipH,this.flipV=1==mxUtils.getValue(this.style,"stencilFlipV",0)||this.flipV),this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH){var t=this.flipH;this.flipH=this.flipV,this.flipV=t}this.isShadow=1==mxUtils.getValue(this.style,mxConstants.STYLE_SHADOW,this.isShadow),this.isDashed=1==mxUtils.getValue(this.style,mxConstants.STYLE_DASHED,this.isDashed),this.isRounded=1==mxUtils.getValue(this.style,mxConstants.STYLE_ROUNDED,this.isRounded),this.glass=1==mxUtils.getValue(this.style,mxConstants.STYLE_GLASS,this.glass),this.fill==mxConstants.NONE&&(this.fill=null),this.gradient==mxConstants.NONE&&(this.gradient=null),this.stroke==mxConstants.NONE&&(this.stroke=null)}},mxShape.prototype.setCursor=function(e){null==e&&(e=""),this.cursor=e,null!=this.node&&(this.node.style.cursor=e)},mxShape.prototype.getCursor=function(){return this.cursor},mxShape.prototype.updateBoundingBox=function(){if(this.useSvgBoundingBox&&null!=this.node&&null!=this.node.ownerSVGElement)try{var e=this.node.getBBox();if(e.width>0&&e.height>0)return this.boundingBox=new mxRectangle(e.x,e.y,e.width,e.height),void this.boundingBox.grow(this.strokewidth*this.scale/2)}catch(o){}if(null!=this.bounds){var t=this.createBoundingBox();if(null!=t){this.augmentBoundingBox(t);var n=this.getShapeRotation();0!=n&&(t=mxUtils.getBoundingBox(t,n))}this.boundingBox=t}},mxShape.prototype.createBoundingBox=function(){var e=this.bounds.clone();return(null!=this.stencil&&(this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH)||this.isPaintBoundsInverted())&&e.rotate90(),e},mxShape.prototype.augmentBoundingBox=function(e){this.isShadow&&(e.width+=Math.ceil(mxConstants.SHADOW_OFFSET_X*this.scale),e.height+=Math.ceil(mxConstants.SHADOW_OFFSET_Y*this.scale)),e.grow(this.strokewidth*this.scale/2)},mxShape.prototype.isPaintBoundsInverted=function(){return null==this.stencil&&(this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH)},mxShape.prototype.getRotation=function(){return null!=this.rotation?this.rotation:0},mxShape.prototype.getTextRotation=function(){var e=this.getRotation();return 1!=mxUtils.getValue(this.style,mxConstants.STYLE_HORIZONTAL,1)&&(e+=mxText.prototype.verticalTextRotation),e},mxShape.prototype.getShapeRotation=function(){var e=this.getRotation();return null!=this.direction&&(this.direction==mxConstants.DIRECTION_NORTH?e+=270:this.direction==mxConstants.DIRECTION_WEST?e+=180:this.direction==mxConstants.DIRECTION_SOUTH&&(e+=90)),e},mxShape.prototype.createTransparentSvgRectangle=function(e,t,n,o){var s=document.createElementNS(mxConstants.NS_SVG,"rect");return s.setAttribute("x",e),s.setAttribute("y",t),s.setAttribute("width",n),s.setAttribute("height",o),s.setAttribute("fill","none"),s.setAttribute("stroke","none"),s.setAttribute("pointer-events","all"),s},mxShape.prototype.setTransparentBackgroundImage=function(e){e.style.backgroundImage="url('"+mxClient.imageBasePath+"/transparent.gif')"},mxShape.prototype.releaseSvgGradients=function(e){if(null!=e)for(var t in e){var n=e[t];null!=n&&(n.mxRefCount=(n.mxRefCount||0)-1,0==n.mxRefCount&&null!=n.parentNode&&n.parentNode.removeChild(n))}},mxShape.prototype.destroy=function(){null!=this.node&&(mxEvent.release(this.node),null!=this.node.parentNode&&this.node.parentNode.removeChild(this.node),this.node=null),this.releaseSvgGradients(this.oldGradients),this.oldGradients=null},exports.mxShape=mxShape;var mxStencilRegistry={stencils:{},addStencil:function(e,t){mxStencilRegistry.stencils[e]=t},getStencil:function(e){return mxStencilRegistry.stencils[e]}};exports.mxStencilRegistry=mxStencilRegistry;var mxMarker={markers:[],addMarker:function(e,t){mxMarker.markers[e]=t},createMarker:function(e,t,n,o,s,i,a,l,r,d){var u=mxMarker.markers[n];return null!=u?u(e,t,n,o,s,i,a,l,r,d):null}};(function(){function e(o){return o=null!=o?o:2,function(s,i,a,l,r,d,u,g,f,v){var x=r*f*1.118,z=d*f*1.118;r*=u+f,d*=u+f;var b=l.clone();b.x-=x,b.y-=z;var _=a!=mxConstants.ARROW_CLASSIC&&a!=mxConstants.ARROW_CLASSIC_THIN?1:.75;return l.x+=-r*_-x,l.y+=-d*_-z,function(){s.begin(),s.moveTo(b.x,b.y),s.lineTo(b.x-r-d/o,b.y-d+r/o),a!=mxConstants.ARROW_CLASSIC&&a!=mxConstants.ARROW_CLASSIC_THIN||s.lineTo(b.x-3*r/4,b.y-3*d/4),s.lineTo(b.x+d/o-r,b.y-d-r/o),s.close(),v?s.fillAndStroke():s.stroke()}}}function t(o){return o=null!=o?o:2,function(s,i,a,l,r,d,u,g,f,v){var x=r*f*1.118,z=d*f*1.118;r*=u+f,d*=u+f;var b=l.clone();return b.x-=x,b.y-=z,l.x+=2*-x,l.y+=2*-z,function(){s.begin(),s.moveTo(b.x-r-d/o,b.y-d+r/o),s.lineTo(b.x,b.y),s.lineTo(b.x+d/o-r,b.y-d-r/o),s.stroke()}}}function n(o,s,i,a,l,r,d,u,g,f){var v=i==mxConstants.ARROW_DIAMOND?.7071:.9862,x=l*g*v,z=r*g*v;l*=d+g,r*=d+g;var b=a.clone();b.x-=x,b.y-=z,a.x+=-l-x,a.y+=-r-z;var _=i==mxConstants.ARROW_DIAMOND?2:3.4;return function(){o.begin(),o.moveTo(b.x,b.y),o.lineTo(b.x-l/2-r/_,b.y+l/_-r/2),o.lineTo(b.x-l,b.y-r),o.lineTo(b.x-l/2+r/_,b.y-r/2-l/_),o.close(),f?o.fillAndStroke():o.stroke()}}mxMarker.addMarker("classic",e(2)),mxMarker.addMarker("classicThin",e(3)),mxMarker.addMarker("block",e(2)),mxMarker.addMarker("blockThin",e(3)),mxMarker.addMarker("open",t(2)),mxMarker.addMarker("openThin",t(3)),mxMarker.addMarker("oval",function(o,s,i,a,l,r,d,u,g,f){var v=d/2,x=a.clone();return a.x-=l*v,a.y-=r*v,function(){o.ellipse(x.x-v,x.y-v,d,d),f?o.fillAndStroke():o.stroke()}}),mxMarker.addMarker("diamond",n),mxMarker.addMarker("diamondThin",n)})(),exports.mxMarker=mxMarker,mxUtils.extend(mxActor,mxShape),mxActor.prototype.paintVertexShape=function(e,t,n,o,s){e.translate(t,n),e.begin(),this.redrawPath(e,t,n,o,s),e.fillAndStroke()},mxActor.prototype.redrawPath=function(e,t,n,o,s){var i=o/3;e.moveTo(0,s),e.curveTo(0,3*s/5,0,2*s/5,o/2,2*s/5),e.curveTo(o/2-i,2*s/5,o/2-i,0,o/2,0),e.curveTo(o/2+i,0,o/2+i,2*s/5,o/2,2*s/5),e.curveTo(o,2*s/5,o,3*s/5,o,s),e.close()},exports.mxActor=mxActor,mxUtils.extend(mxCloud,mxActor),mxCloud.prototype.redrawPath=function(e,t,n,o,s){e.moveTo(.25*o,.25*s),e.curveTo(.05*o,.25*s,0,.5*s,.16*o,.55*s),e.curveTo(0,.66*s,.18*o,.9*s,.31*o,.8*s),e.curveTo(.4*o,s,.7*o,s,.8*o,.8*s),e.curveTo(o,.8*s,o,.6*s,.875*o,.5*s),e.curveTo(o,.3*s,.8*o,.1*s,.625*o,.2*s),e.curveTo(.5*o,.05*s,.3*o,.05*s,.25*o,.25*s),e.close()},exports.mxCloud=mxCloud,mxUtils.extend(mxRectangleShape,mxShape),mxRectangleShape.prototype.isHtmlAllowed=function(){var e=!0;return null!=this.style&&(e="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")),!this.isRounded&&!this.glass&&0==this.rotation&&(e||null!=this.fill&&this.fill!=mxConstants.NONE)},mxRectangleShape.prototype.paintBackground=function(e,t,n,o,s){var i=!0;if(null!=this.style&&(i="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")),i||null!=this.fill&&this.fill!=mxConstants.NONE||null!=this.stroke&&this.stroke!=mxConstants.NONE){if(i||null!=this.fill&&this.fill!=mxConstants.NONE||(e.pointerEvents=!1),this.isRounded){var a=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,l=Math.min(o*a,s*a);e.roundrect(t,n,o,s,l,l)}else e.rect(t,n,o,s);e.fillAndStroke()}},mxRectangleShape.prototype.paintForeground=function(e,t,n,o,s){this.glass&&!this.outline&&null!=this.fill&&this.fill!=mxConstants.NONE&&this.paintGlassEffect(e,t,n,o,s,this.getArcSize(o+this.strokewidth,s+this.strokewidth))},exports.mxRectangleShape=mxRectangleShape,mxUtils.extend(mxEllipse,mxShape),mxEllipse.prototype.paintVertexShape=function(e,t,n,o,s){e.ellipse(t,n,o,s),e.fillAndStroke()},exports.mxEllipse=mxEllipse,mxUtils.extend(mxDoubleEllipse,mxShape),mxDoubleEllipse.prototype.vmlScale=10,mxDoubleEllipse.prototype.paintBackground=function(e,t,n,o,s){e.ellipse(t,n,o,s),e.fillAndStroke()},mxDoubleEllipse.prototype.paintForeground=function(e,t,n,o,s){if(!this.outline){var i=mxUtils.getValue(this.style,mxConstants.STYLE_MARGIN,Math.min(3+this.strokewidth,Math.min(o/5,s/5)));s-=2*i,(o-=2*i)>0&&s>0&&e.ellipse(t+=i,n+=i,o,s),e.stroke()}},mxDoubleEllipse.prototype.getLabelBounds=function(e){var t=mxUtils.getValue(this.style,mxConstants.STYLE_MARGIN,Math.min(3+this.strokewidth,Math.min(e.width/5/this.scale,e.height/5/this.scale)))*this.scale;return new mxRectangle(e.x+t,e.y+t,e.width-2*t,e.height-2*t)},exports.mxDoubleEllipse=mxDoubleEllipse,mxUtils.extend(mxRhombus,mxShape),mxRhombus.prototype.paintVertexShape=function(e,t,n,o,s){var i=o/2,a=s/2,l=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;e.begin(),this.addPoints(e,[new mxPoint(t+i,n),new mxPoint(t+o,n+a),new mxPoint(t+i,n+s),new mxPoint(t,n+a)],this.isRounded,l,!0),e.fillAndStroke()},exports.mxRhombus=mxRhombus,mxUtils.extend(mxPolyline,mxShape),mxPolyline.prototype.getRotation=function(){return 0},mxPolyline.prototype.getShapeRotation=function(){return 0},mxPolyline.prototype.isPaintBoundsInverted=function(){return!1},mxPolyline.prototype.paintEdgeShape=function(e,t){null==this.style||1!=this.style[mxConstants.STYLE_CURVED]?this.paintLine(e,t,this.isRounded):this.paintCurvedLine(e,t)},mxPolyline.prototype.paintLine=function(e,t,n){var o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;e.begin(),this.addPoints(e,t,n,o,!1),e.stroke()},mxPolyline.prototype.paintCurvedLine=function(e,t){e.begin();var n=t[0],o=t.length;e.moveTo(n.x,n.y);for(var s=1;s<o-2;s++){var l,r;e.quadTo((l=t[s]).x,l.y,(l.x+(r=t[s+1]).x)/2,(l.y+r.y)/2)}e.quadTo((l=t[o-2]).x,l.y,(r=t[o-1]).x,r.y),e.stroke()},exports.mxPolyline=mxPolyline,mxUtils.extend(mxArrow,mxShape),mxArrow.prototype.augmentBoundingBox=function(e){mxShape.prototype.augmentBoundingBox.apply(this,arguments);var t=Math.max(this.arrowWidth,this.endSize);e.grow((t/2+this.strokewidth)*this.scale)},mxArrow.prototype.paintEdgeShape=function(e,t){var n=mxConstants.ARROW_SPACING,o=mxConstants.ARROW_WIDTH,s=mxConstants.ARROW_SIZE,i=t[0],a=t[t.length-1],l=a.x-i.x,r=a.y-i.y,d=Math.sqrt(l*l+r*r),u=d-2*n-s,g=l/d,f=r/d,z=o*f/3,b=-o*g/3,_=i.x-z/2+n*g,H=i.y-b/2+n*f,T=_+z,L=H+b,V=T+u*g,Y=L+u*f,J=V+z,K=Y+b,re=J-3*z,X=K-3*b;e.begin(),e.moveTo(_,H),e.lineTo(T,L),e.lineTo(V,Y),e.lineTo(J,K),e.lineTo(a.x-n*g,a.y-n*f),e.lineTo(re,X),e.lineTo(re+z,X+b),e.close(),e.fillAndStroke()},exports.mxArrow=mxArrow,mxUtils.extend(mxArrowConnector,mxShape),mxArrowConnector.prototype.useSvgBoundingBox=!0,mxArrowConnector.prototype.resetStyles=function(){mxShape.prototype.resetStyles.apply(this,arguments),this.arrowSpacing=mxConstants.ARROW_SPACING},mxArrowConnector.prototype.apply=function(e){mxShape.prototype.apply.apply(this,arguments),null!=this.style&&(this.startSize=3*mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.ARROW_SIZE/5),this.endSize=3*mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,mxConstants.ARROW_SIZE/5))},mxArrowConnector.prototype.augmentBoundingBox=function(e){mxShape.prototype.augmentBoundingBox.apply(this,arguments);var t=this.getEdgeWidth();this.isMarkerStart()&&(t=Math.max(t,this.getStartArrowWidth())),this.isMarkerEnd()&&(t=Math.max(t,this.getEndArrowWidth())),e.grow((t/2+this.strokewidth)*this.scale)},mxArrowConnector.prototype.paintEdgeShape=function(e,t){var n=this.strokewidth;this.outline&&(n=Math.max(1,mxUtils.getNumber(this.style,mxConstants.STYLE_STROKEWIDTH,this.strokewidth)));for(var o=this.getStartArrowWidth()+n,s=this.getEndArrowWidth()+n,i=this.outline?this.getEdgeWidth()+n:this.getEdgeWidth(),a=this.isOpenEnded(),l=this.isMarkerStart(),r=this.isMarkerEnd(),d=a?0:this.arrowSpacing+n/2,u=this.startSize+n,g=this.endSize+n,f=this.isArrowRounded(),v=t[t.length-1],x=1;x<t.length-1&&t[x].x==t[0].x&&t[x].y==t[0].y;)x++;var z=t[x].x-t[0].x,b=t[x].y-t[0].y,_=Math.sqrt(z*z+b*b);if(0!=_){var H,T,L=z/_,V=L,Y=b/_,J=Y,K=i*Y,re=-i*L,X=[];f?e.setLineJoin("round"):t.length>2&&e.setMiterLimit(1.42),e.begin();var ne=L,he=Y;if(l&&!a)this.paintMarker(e,t[0].x,t[0].y,L,Y,u,o,i,d,!0);else{var Q=t[0].x+K/2+d*L,ye=t[0].y+re/2+d*Y,Le=t[0].x-K/2+d*L,lt=t[0].y-re/2+d*Y;a?(e.moveTo(Q,ye),X.push(function(){e.lineTo(Le,lt)})):(e.moveTo(Le,lt),e.lineTo(Q,ye))}for(var Me=0,De=0,xe=0,Oe=0;Oe<t.length-2;Oe++){var k=mxUtils.relativeCcw(t[Oe].x,t[Oe].y,t[Oe+1].x,t[Oe+1].y,t[Oe+2].x,t[Oe+2].y);if(Me=t[Oe+2].x-t[Oe+1].x,De=t[Oe+2].y-t[Oe+1].y,0!=(xe=Math.sqrt(Me*Me+De*De))){V=Me/xe,J=De/xe,tmp=Math.max(Math.sqrt((L*V+Y*J+1)/2),.04),H=L+V,T=Y+J;var nt=Math.sqrt(H*H+T*T);if(0!=nt){H/=nt,T/=nt;var St=Math.max(tmp,Math.min(this.strokewidth/200+.04,.35)),zt=0!=k&&f?Math.max(.1,St):Math.max(tmp,.06),et=t[Oe+1].x+T*i/2/zt,ot=t[Oe+1].y-H*i/2/zt,gt=t[Oe+1].x-T*i/2/zt,ut=t[Oe+1].y+H*i/2/zt;if(0!=k&&f)if(-1==k){var Ze=gt+J*i,ke=ut-V*i;e.lineTo(gt+Y*i,ut-L*i),e.quadTo(et,ot,Ze,ke),function(_t,rt){X.push(function(){e.lineTo(_t,rt)})}(gt,ut)}else e.lineTo(et,ot),function(_t,rt){var At=et-Y*i,$e=ot+L*i,yt=et-J*i,Bt=ot+V*i;X.push(function(){e.quadTo(_t,rt,At,$e)}),X.push(function(){e.lineTo(yt,Bt)})}(gt,ut);else e.lineTo(et,ot),function(_t,rt){X.push(function(){e.lineTo(_t,rt)})}(gt,ut);L=V,Y=J}}}if(K=i*J,re=-i*V,r&&!a)this.paintMarker(e,v.x,v.y,-L,-Y,g,s,i,d,!1);else{e.lineTo(v.x-d*V+K/2,v.y-d*J+re/2);var vt=v.x-d*V-K/2,st=v.y-d*J-re/2;a?(e.moveTo(vt,st),X.splice(0,0,function(){e.moveTo(vt,st)})):e.lineTo(vt,st)}for(Oe=X.length-1;Oe>=0;Oe--)X[Oe]();a?(e.end(),e.stroke()):(e.close(),e.fillAndStroke()),e.setShadow(!1),e.setMiterLimit(4),f&&e.setLineJoin("flat"),t.length>2&&(e.setMiterLimit(4),l&&!a&&(e.begin(),this.paintMarker(e,t[0].x,t[0].y,ne,he,u,o,i,d,!0),e.stroke(),e.end()),r&&!a&&(e.begin(),this.paintMarker(e,v.x,v.y,-L,-Y,g,s,i,d,!0),e.stroke(),e.end()))}},mxArrowConnector.prototype.paintMarker=function(e,t,n,o,s,i,a,l,r,d){var u=l/a,g=l*s/2,f=-l*o/2,v=(r+i)*o,x=(r+i)*s;d?e.moveTo(t-g+v,n-f+x):e.lineTo(t-g+v,n-f+x),e.lineTo(t-g/u+v,n-f/u+x),e.lineTo(t+r*o,n+r*s),e.lineTo(t+g/u+v,n+f/u+x),e.lineTo(t+g+v,n+f+x)},mxArrowConnector.prototype.isArrowRounded=function(){return this.isRounded},mxArrowConnector.prototype.getStartArrowWidth=function(){return mxConstants.ARROW_WIDTH},mxArrowConnector.prototype.getEndArrowWidth=function(){return mxConstants.ARROW_WIDTH},mxArrowConnector.prototype.getEdgeWidth=function(){return mxConstants.ARROW_WIDTH/3},mxArrowConnector.prototype.isOpenEnded=function(){return!1},mxArrowConnector.prototype.isMarkerStart=function(){return mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,mxConstants.NONE)!=mxConstants.NONE},mxArrowConnector.prototype.isMarkerEnd=function(){return mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE},exports.mxArrowConnector=mxArrowConnector,mxUtils.extend(mxText,mxShape),mxText.prototype.baseSpacingTop=0,mxText.prototype.baseSpacingBottom=0,mxText.prototype.baseSpacingLeft=0,mxText.prototype.baseSpacingRight=0,mxText.prototype.replaceLinefeeds=!0,mxText.prototype.verticalTextRotation=-90,mxText.prototype.ignoreClippedStringSize=!0,mxText.prototype.ignoreStringSize=!1,mxText.prototype.textWidthPadding=8!=document.documentMode||mxClient.IS_EM?3:4,mxText.prototype.lastValue=null,mxText.prototype.cacheEnabled=!0,mxText.prototype.isParseVml=function(){return!1},mxText.prototype.isHtmlAllowed=function(){return 8!=document.documentMode||mxClient.IS_EM},mxText.prototype.getSvgScreenOffset=function(){return 0},mxText.prototype.checkBounds=function(){return!isNaN(this.scale)&&isFinite(this.scale)&&this.scale>0&&null!=this.bounds&&!isNaN(this.bounds.x)&&!isNaN(this.bounds.y)&&!isNaN(this.bounds.width)&&!isNaN(this.bounds.height)},mxText.prototype.paint=function(e,t){var n=this.scale,o=this.bounds.x/n,s=this.bounds.y/n,i=this.bounds.width/n,a=this.bounds.height/n;if(this.updateTransform(e,o,s,i,a),this.configureCanvas(e,o,s,i,a),t)null!=this.node.firstChild&&this.lastUnscaledWidth!=(null!=this.state?this.state.unscaledWidth:null)&&e.invalidateCachedOffsetSize(this.node),e.updateText(o,s,i,a,this.align,this.valign,this.wrap,this.overflow,this.clipped,this.getTextRotation(),this.node);else{var r=mxUtils.isNode(this.value)||this.dialect==mxConstants.DIALECT_STRICTHTML,d=r||e instanceof mxVmlCanvas2D?"html":"",u=this.value;r||"html"!=d||(u=mxUtils.htmlEntities(u,!1)),"html"!=d||mxUtils.isNode(this.value)||(u=mxUtils.replaceTrailingNewlines(u,"<div><br></div>")),u=!mxUtils.isNode(this.value)&&this.replaceLinefeeds&&"html"==d?u.replace(/\n/g,"<br/>"):u;var g=this.textDirection;g!=mxConstants.TEXT_DIRECTION_AUTO||r||(g=this.getAutoDirection()),g!=mxConstants.TEXT_DIRECTION_LTR&&g!=mxConstants.TEXT_DIRECTION_RTL&&(g=null),e.text(o,s,i,a,u,this.align,this.valign,this.wrap,d,this.overflow,this.clipped,this.getTextRotation(),g)}this.lastUnscaledWidth=null!=this.state?this.state.unscaledWidth:null},mxText.prototype.redraw=function(){if(this.visible&&this.checkBounds()&&this.cacheEnabled&&this.lastValue==this.value&&(mxUtils.isNode(this.value)||this.dialect==mxConstants.DIALECT_STRICTHTML))if("DIV"!=this.node.nodeName||!this.isHtmlAllowed()&&mxClient.IS_VML){var e=this.createCanvas();null!=e&&null!=e.updateText&&null!=e.invalidateCachedOffsetSize?(this.paint(e,!0),this.destroyCanvas(e),this.updateBoundingBox()):mxShape.prototype.redraw.apply(this,arguments)}else this.updateSize(this.node,null==this.state||null==this.state.view.textDiv),mxClient.IS_IE&&(null==document.documentMode||document.documentMode<=8)?this.updateHtmlFilter():this.updateHtmlTransform(),this.updateBoundingBox();else mxShape.prototype.redraw.apply(this,arguments),this.lastValue=mxUtils.isNode(this.value)||this.dialect==mxConstants.DIALECT_STRICTHTML?this.value:null},mxText.prototype.resetStyles=function(){mxShape.prototype.resetStyles.apply(this,arguments),this.color="black",this.align="",this.valign="",this.family=mxConstants.DEFAULT_FONTFAMILY,this.size=mxConstants.DEFAULT_FONTSIZE,this.fontStyle=mxConstants.DEFAULT_FONTSTYLE,this.spacing=2,this.spacingTop=0,this.spacingRight=0,this.spacingBottom=0,this.spacingLeft=0,this.horizontal=!0,delete this.background,delete this.border,this.textDirection=mxConstants.DEFAULT_TEXT_DIRECTION,delete this.margin},mxText.prototype.apply=function(e){mxShape.prototype.apply.apply(this,arguments),null!=this.style&&(this.fontStyle=mxUtils.getValue(this.style,mxConstants.STYLE_FONTSTYLE,this.fontStyle),this.family=mxUtils.getValue(this.style,mxConstants.STYLE_FONTFAMILY,this.family),this.size=mxUtils.getValue(this.style,mxConstants.STYLE_FONTSIZE,this.size),this.color=mxUtils.getValue(this.style,mxConstants.STYLE_FONTCOLOR,this.color),this.align=mxUtils.getValue(this.style,mxConstants.STYLE_ALIGN,this.align),this.valign=mxUtils.getValue(this.style,mxConstants.STYLE_VERTICAL_ALIGN,this.valign),this.spacing=mxUtils.getValue(this.style,mxConstants.STYLE_SPACING,this.spacing),this.spacingTop=mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_TOP,this.spacingTop)+this.spacing,this.spacingRight=mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_RIGHT,this.spacingRight)+this.spacing,this.spacingBottom=mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_BOTTOM,this.spacingBottom)+this.spacing,this.spacingLeft=mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_LEFT,this.spacingLeft)+this.spacing,this.horizontal=mxUtils.getValue(this.style,mxConstants.STYLE_HORIZONTAL,this.horizontal),this.background=mxUtils.getValue(this.style,mxConstants.STYLE_LABEL_BACKGROUNDCOLOR,this.background),this.border=mxUtils.getValue(this.style,mxConstants.STYLE_LABEL_BORDERCOLOR,this.border),this.textDirection=mxUtils.getValue(this.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION),this.updateMargin()),this.flipV=null,this.flipH=null},mxText.prototype.getAutoDirection=function(){var e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(this.value);return null!=e&&e.length>0&&e[0]>"z"?mxConstants.TEXT_DIRECTION_RTL:mxConstants.TEXT_DIRECTION_LTR},mxText.prototype.updateBoundingBox=function(){var e=this.node;this.boundingBox=this.bounds.clone();var t=this.getTextRotation(),n=null!=this.style?mxUtils.getValue(this.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER):null,o=null!=this.style?mxUtils.getValue(this.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE):null;if(this.ignoreStringSize||null==e||"fill"==this.overflow||this.clipped&&this.ignoreClippedStringSize&&n==mxConstants.ALIGN_CENTER&&o==mxConstants.ALIGN_MIDDLE)this.boundingBox.x+=this.margin.x*this.boundingBox.width,this.boundingBox.y+=this.margin.y*this.boundingBox.height;else{var s=null,i=null;if(null!=e.ownerSVGElement)if(null!=e.firstChild&&null!=e.firstChild.firstChild&&"foreignObject"==e.firstChild.firstChild.nodeName)e=e.firstChild.firstChild,s=parseInt(e.getAttribute("width"))*this.scale,i=parseInt(e.getAttribute("height"))*this.scale;else try{var a=e.getBBox();if("string"==typeof this.value&&0==mxUtils.trim(this.value))return void(this.boundingBox=null);if(0==a.width&&0==a.height)return void(this.boundingBox=null);this.boundingBox=new mxRectangle(a.x,a.y,a.width,a.height),t=0}catch(x){}else{var l=null!=this.state?this.state.view.textDiv:null;if(null!=this.offsetWidth&&null!=this.offsetHeight)s=this.offsetWidth*this.scale,i=this.offsetHeight*this.scale;else{null!=l&&(this.updateFont(l),this.updateSize(l,!1),this.updateInnerHtml(l),e=l);var r=e;if(8!=document.documentMode||mxClient.IS_EM)null!=r.firstChild&&"DIV"==r.firstChild.nodeName&&(r=r.firstChild);else{var d=Math.round(this.bounds.width/this.scale);if(this.wrap&&d>0){if(e.style.wordWrap=mxConstants.WORD_WRAP,e.style.whiteSpace="normal","break-word"!=e.style.wordWrap){var u=r.getElementsByTagName("div");u.length>0&&(r=u[u.length-1]),s=r.offsetWidth+2,u=this.node.getElementsByTagName("div"),this.clipped&&(s=Math.min(d,s)),u.length>1&&(u[u.length-2].style.width=s+"px")}}else e.style.whiteSpace="nowrap"}this.offsetWidth=r.offsetWidth+this.textWidthPadding,this.offsetHeight=r.offsetHeight,s=this.offsetWidth*this.scale,i=this.offsetHeight*this.scale}}null!=s&&null!=i&&(this.boundingBox=new mxRectangle(this.bounds.x+this.margin.x*s,this.bounds.y+this.margin.y*i,s,i))}if(null!=this.boundingBox)if(0!=t){this.unrotatedBoundingBox=mxRectangle.fromRectangle(this.boundingBox);var v=mxUtils.getBoundingBox(this.boundingBox,t);this.boundingBox.x=v.x,this.boundingBox.y=v.y,mxClient.IS_QUIRKS||(this.boundingBox.width=v.width,this.boundingBox.height=v.height)}else this.unrotatedBoundingBox=null},mxText.prototype.getShapeRotation=function(){return 0},mxText.prototype.getTextRotation=function(){return null!=this.state&&null!=this.state.shape?this.state.shape.getTextRotation():0},mxText.prototype.isPaintBoundsInverted=function(){return!this.horizontal&&null!=this.state&&this.state.view.graph.model.isVertex(this.state.cell)},mxText.prototype.configureCanvas=function(e,t,n,o,s){mxShape.prototype.configureCanvas.apply(this,arguments),e.setFontColor(this.color),e.setFontBackgroundColor(this.background),e.setFontBorderColor(this.border),e.setFontFamily(this.family),e.setFontSize(this.size),e.setFontStyle(this.fontStyle)},mxText.prototype.updateVmlContainer=function(){this.node.style.left=Math.round(this.bounds.x)+"px",this.node.style.top=Math.round(this.bounds.y)+"px",this.node.style.width="1px",this.node.style.height="1px",this.node.style.overflow="visible"},mxText.prototype.redrawHtmlShape=function(){var e=this.node.style;e.whiteSpace="normal",e.overflow="",e.width="",e.height="",this.updateValue(),this.updateFont(this.node),this.updateSize(this.node,null==this.state||null==this.state.view.textDiv),this.offsetWidth=null,this.offsetHeight=null,mxClient.IS_IE&&(null==document.documentMode||document.documentMode<=8)?this.updateHtmlFilter():this.updateHtmlTransform()},mxText.prototype.updateHtmlTransform=function(){var e=this.getTextRotation(),t=this.node.style,n=this.margin.x,o=this.margin.y;0!=e?(mxUtils.setPrefixedStyle(t,"transformOrigin",100*-n+"% "+100*-o+"%"),mxUtils.setPrefixedStyle(t,"transform","translate("+100*n+"%,"+100*o+"%)scale("+this.scale+") rotate("+e+"deg)")):(mxUtils.setPrefixedStyle(t,"transformOrigin","0% 0%"),mxUtils.setPrefixedStyle(t,"transform","scale("+this.scale+")translate("+100*n+"%,"+100*o+"%)")),t.left=Math.round(this.bounds.x-Math.ceil(n*("fill"!=this.overflow&&"width"!=this.overflow?3:1)))+"px",t.top=Math.round(this.bounds.y-o*("fill"!=this.overflow?3:1))+"px",t.opacity=this.opacity<100?this.opacity/100:""},mxText.prototype.updateInnerHtml=function(e){if(mxUtils.isNode(this.value))e.innerHTML=this.value.outerHTML;else{var t=this.value;this.dialect!=mxConstants.DIALECT_STRICTHTML&&(t=mxUtils.htmlEntities(t,!1)),t=mxUtils.replaceTrailingNewlines(t,"<div>&nbsp;</div>"),t=this.replaceLinefeeds?t.replace(/\n/g,"<br/>"):t,e.innerHTML=t='<div style="display:inline-block;_display:inline;">'+t+"</div>"}},mxText.prototype.updateHtmlFilter=function(){var e=this.node.style,t=this.margin.x,n=this.margin.y,o=this.scale;mxUtils.setOpacity(this.node,this.opacity);var s=0,i=0,a=null!=this.state?this.state.view.textDiv:null,l=this.node;if(null!=a){a.style.overflow="",a.style.height="",a.style.width="",this.updateFont(a),this.updateSize(a,!1),this.updateInnerHtml(a);var r=Math.round(this.bounds.width/this.scale);this.wrap&&r>0?(a.style.whiteSpace="normal",a.style.wordWrap=mxConstants.WORD_WRAP,s=r,this.clipped&&(s=Math.min(s,this.bounds.width)),a.style.width=s+"px"):a.style.whiteSpace="nowrap",null!=(l=a).firstChild&&"DIV"==l.firstChild.nodeName&&(l=l.firstChild,this.wrap&&"break-word"==a.style.wordWrap&&(l.style.width="100%")),!this.clipped&&this.wrap&&r>0&&(a.style.width=(s=l.offsetWidth+this.textWidthPadding)+"px"),i=l.offsetHeight+2,mxClient.IS_QUIRKS&&null!=this.border&&this.border!=mxConstants.NONE&&(i+=3)}else null!=l.firstChild&&"DIV"==l.firstChild.nodeName&&(i=(l=l.firstChild).offsetHeight);s=l.offsetWidth+this.textWidthPadding,this.clipped&&(i=Math.min(i,this.bounds.height)),r=this.bounds.width/o;var d=this.bounds.height/o;"fill"==this.overflow?(i=d,s=r):"width"==this.overflow&&(i=l.scrollHeight,s=r),this.offsetWidth=s,this.offsetHeight=i,mxClient.IS_QUIRKS&&(this.clipped||"width"==this.overflow&&d>0)?(d=Math.min(d,i),e.height=Math.round(d)+"px"):d=i,"fill"!=this.overflow&&"width"!=this.overflow&&(this.clipped&&(s=Math.min(r,s)),r=s,(mxClient.IS_QUIRKS&&this.clipped||this.wrap)&&(e.width=Math.round(r)+"px")),d*=o,r*=o;var u=this.getTextRotation()*(Math.PI/180),g=parseFloat(parseFloat(Math.cos(u)).toFixed(8)),f=parseFloat(parseFloat(Math.sin(-u)).toFixed(8));(u%=2*Math.PI)<0&&(u+=2*Math.PI),(u%=Math.PI)>Math.PI/2&&(u=Math.PI-u);var v=Math.cos(u),x=Math.sin(-u),z=r*-(t+.5),b=d*-(n+.5),_=(d-d*v+r*x)/2+f*z-g*b,H=(r-r*v+d*x)/2-g*z-f*b;if(0!=u){var T="progid:DXImageTransform.Microsoft.Matrix(M11="+g+", M12="+f+", M21="+-f+", M22="+g+", sizingMethod='auto expand')";null!=e.filter&&e.filter.length>0?e.filter+=" "+T:e.filter=T}n=0,"fill"!=this.overflow&&mxClient.IS_QUIRKS&&(this.valign==mxConstants.ALIGN_TOP?n-=1:n+=this.valign==mxConstants.ALIGN_BOTTOM?2:1),e.zoom=o,e.left=Math.round(this.bounds.x+H-r/2)+"px",e.top=Math.round(this.bounds.y+_-d/2+n)+"px"},mxText.prototype.updateValue=function(){if(mxUtils.isNode(this.value))this.node.innerHTML="",this.node.appendChild(this.value);else{var e=this.value;this.dialect!=mxConstants.DIALECT_STRICTHTML&&(e=mxUtils.htmlEntities(e,!1)),e=mxUtils.replaceTrailingNewlines(e,"<div><br></div>"),e=this.replaceLinefeeds?e.replace(/\n/g,"<br/>"):e;var t=null!=this.background&&this.background!=mxConstants.NONE?this.background:null,n=null!=this.border&&this.border!=mxConstants.NONE?this.border:null;if("fill"==this.overflow||"width"==this.overflow)null!=t&&(this.node.style.backgroundColor=t),null!=n&&(this.node.style.border="1px solid "+n);else{var o="";null!=t&&(o+="background-color:"+t+";"),null!=n&&(o+="border:1px solid "+n+";"),e='<div style="zoom:1;'+o+"display:inline-block;_display:inline;text-decoration:inherit;padding-bottom:1px;padding-right:1px;line-height:"+(mxConstants.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT)+'">'+e+"</div>"}this.node.innerHTML=e;var i=this.node.getElementsByTagName("div");if(i.length>0){var a=this.textDirection;a==mxConstants.TEXT_DIRECTION_AUTO&&this.dialect!=mxConstants.DIALECT_STRICTHTML&&(a=this.getAutoDirection()),a==mxConstants.TEXT_DIRECTION_LTR||a==mxConstants.TEXT_DIRECTION_RTL?i[i.length-1].setAttribute("dir",a):i[i.length-1].removeAttribute("dir")}}},mxText.prototype.updateFont=function(e){var t=e.style;t.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT,t.fontSize=this.size+"px",t.fontFamily=this.family,t.verticalAlign="top",t.color=this.color,t.fontWeight=(this.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD?"bold":"",t.fontStyle=(this.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC?"italic":"",t.textDecoration=(this.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE?"underline":"",t.textAlign=this.align==mxConstants.ALIGN_CENTER?"center":this.align==mxConstants.ALIGN_RIGHT?"right":"left"},mxText.prototype.updateSize=function(e,t){var n=Math.max(0,Math.round(this.bounds.width/this.scale)),o=Math.max(0,Math.round(this.bounds.height/this.scale)),s=e.style;if(this.clipped?(s.overflow="hidden",mxClient.IS_QUIRKS?s.width=n+"px":(s.maxHeight=o+"px",s.maxWidth=n+"px")):"fill"==this.overflow?(s.width=n+1+"px",s.height=o+1+"px",s.overflow="hidden"):"width"==this.overflow&&(s.width=n+1+"px",s.maxHeight=o+1+"px",s.overflow="hidden"),this.wrap&&n>0){if(s.wordWrap=mxConstants.WORD_WRAP,s.whiteSpace="normal",s.width=n+"px",t&&"fill"!=this.overflow&&"width"!=this.overflow){var i=e;null!=i.firstChild&&"DIV"==i.firstChild.nodeName&&(i=i.firstChild,"break-word"==e.style.wordWrap&&(i.style.width="100%"));var a=i.offsetWidth;if(0==a){var l=e.parentNode;e.style.visibility="hidden",document.body.appendChild(e),a=i.offsetWidth,e.style.visibility="",l.appendChild(e)}a+=3,this.clipped&&(a=Math.min(a,n)),s.width=a+"px"}}else s.whiteSpace="nowrap"},mxText.prototype.updateMargin=function(){this.margin=mxUtils.getAlignmentAsPoint(this.align,this.valign)},mxText.prototype.getSpacing=function(){return new mxPoint(this.align==mxConstants.ALIGN_CENTER?(this.spacingLeft-this.spacingRight)/2:this.align==mxConstants.ALIGN_RIGHT?-this.spacingRight-this.baseSpacingRight:this.spacingLeft+this.baseSpacingLeft,this.valign==mxConstants.ALIGN_MIDDLE?(this.spacingTop-this.spacingBottom)/2:this.valign==mxConstants.ALIGN_BOTTOM?-this.spacingBottom-this.baseSpacingBottom:this.spacingTop+this.baseSpacingTop)},exports.mxText=mxText,mxUtils.extend(mxTriangle,mxActor),mxTriangle.prototype.redrawPath=function(e,t,n,o,s){var i=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(e,[new mxPoint(0,0),new mxPoint(o,.5*s),new mxPoint(0,s)],this.isRounded,i,!0)},exports.mxTriangle=mxTriangle,mxUtils.extend(mxHexagon,mxActor),mxHexagon.prototype.redrawPath=function(e,t,n,o,s){var i=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(e,[new mxPoint(.25*o,0),new mxPoint(.75*o,0),new mxPoint(o,.5*s),new mxPoint(.75*o,s),new mxPoint(.25*o,s),new mxPoint(0,.5*s)],this.isRounded,i,!0)},exports.mxHexagon=mxHexagon,mxUtils.extend(mxLine,mxShape),mxLine.prototype.paintVertexShape=function(e,t,n,o,s){var i=n+s/2;e.begin(),e.moveTo(t,i),e.lineTo(t+o,i),e.stroke()},exports.mxLine=mxLine,mxUtils.extend(mxImageShape,mxRectangleShape),mxImageShape.prototype.preserveImageAspect=!0,mxImageShape.prototype.getSvgScreenOffset=function(){return 0},mxImageShape.prototype.apply=function(e){mxShape.prototype.apply.apply(this,arguments),this.fill=null,this.stroke=null,this.gradient=null,null!=this.style&&(this.preserveImageAspect=1==mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_ASPECT,1),this.flipH=this.flipH||1==mxUtils.getValue(this.style,"imageFlipH",0),this.flipV=this.flipV||1==mxUtils.getValue(this.style,"imageFlipV",0))},mxImageShape.prototype.isHtmlAllowed=function(){return!this.preserveImageAspect},mxImageShape.prototype.createHtml=function(){var e=document.createElement("div");return e.style.position="absolute",e},mxImageShape.prototype.paintVertexShape=function(e,t,n,o,s){if(null!=this.image){var i=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BACKGROUND,null),a=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,null);null!=i&&(e.setFillColor(i),e.setStrokeColor(a),e.rect(t,n,o,s),e.fillAndStroke()),e.image(t,n,o,s,this.image,this.preserveImageAspect,!1,!1),null!=(a=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,null))&&(e.setShadow(!1),e.setStrokeColor(a),e.rect(t,n,o,s),e.stroke())}else mxRectangleShape.prototype.paintBackground.apply(this,arguments)},mxImageShape.prototype.redrawHtmlShape=function(){if(this.node.style.left=Math.round(this.bounds.x)+"px",this.node.style.top=Math.round(this.bounds.y)+"px",this.node.style.width=Math.max(0,Math.round(this.bounds.width))+"px",this.node.style.height=Math.max(0,Math.round(this.bounds.height))+"px",this.node.innerHTML="",null!=this.image){var e=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BACKGROUND,""),t=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,"");this.node.style.backgroundColor=e,this.node.style.borderColor=t;var n=mxClient.IS_IE6||(null==document.documentMode||document.documentMode<=8)&&0!=this.rotation,o=document.createElement(n?mxClient.VML_PREFIX+":image":"img");o.setAttribute("border","0"),o.style.position="absolute",o.src=this.image;var s=this.opacity<100?"alpha(opacity="+this.opacity+")":"";this.node.style.filter=s,this.flipH&&this.flipV?s+="progid:DXImageTransform.Microsoft.BasicImage(rotation=2)":this.flipH?s+="progid:DXImageTransform.Microsoft.BasicImage(mirror=1)":this.flipV&&(s+="progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)"),o.style.filter!=s&&(o.style.filter=s),"image"==o.nodeName?o.style.rotation=this.rotation:mxUtils.setPrefixedStyle(o.style,"transform",0!=this.rotation?"rotate("+this.rotation+"deg)":""),o.style.width=this.node.style.width,o.style.height=this.node.style.height,this.node.style.backgroundImage="",this.node.appendChild(o)}else this.setTransparentBackgroundImage(this.node)},exports.mxImageShape=mxImageShape,mxUtils.extend(mxLabel,mxRectangleShape),mxLabel.prototype.imageSize=mxConstants.DEFAULT_IMAGESIZE,mxLabel.prototype.spacing=2,mxLabel.prototype.indicatorSize=10,mxLabel.prototype.indicatorSpacing=2,mxLabel.prototype.init=function(e){mxShape.prototype.init.apply(this,arguments),null!=this.indicatorShape&&(this.indicator=new this.indicatorShape,this.indicator.dialect=this.dialect,this.indicator.init(this.node))},mxLabel.prototype.redraw=function(){null!=this.indicator&&(this.indicator.fill=this.indicatorColor,this.indicator.stroke=this.indicatorStrokeColor,this.indicator.gradient=this.indicatorGradientColor,this.indicator.direction=this.indicatorDirection),mxShape.prototype.redraw.apply(this,arguments)},mxLabel.prototype.isHtmlAllowed=function(){return mxRectangleShape.prototype.isHtmlAllowed.apply(this,arguments)&&null==this.indicatorColor&&null==this.indicatorShape},mxLabel.prototype.paintForeground=function(e,t,n,o,s){this.paintImage(e,t,n,o,s),this.paintIndicator(e,t,n,o,s),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxLabel.prototype.paintImage=function(e,t,n,o,s){if(null!=this.image){var i=this.getImageBounds(t,n,o,s);e.image(i.x,i.y,i.width,i.height,this.image,!1,!1,!1)}},mxLabel.prototype.getImageBounds=function(e,t,n,o){var s=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_ALIGN,mxConstants.ALIGN_LEFT),i=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE),a=mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_WIDTH,mxConstants.DEFAULT_IMAGESIZE),l=mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_HEIGHT,mxConstants.DEFAULT_IMAGESIZE),r=mxUtils.getNumber(this.style,mxConstants.STYLE_SPACING,this.spacing)+5;return new mxRectangle(e+=s==mxConstants.ALIGN_CENTER?(n-a)/2:s==mxConstants.ALIGN_RIGHT?n-a-r:r,t+=i==mxConstants.ALIGN_TOP?r:i==mxConstants.ALIGN_BOTTOM?o-l-r:(o-l)/2,a,l)},mxLabel.prototype.paintIndicator=function(e,t,n,o,s){if(null!=this.indicator)this.indicator.bounds=this.getIndicatorBounds(t,n,o,s),this.indicator.paint(e);else if(null!=this.indicatorImage){var i=this.getIndicatorBounds(t,n,o,s);e.image(i.x,i.y,i.width,i.height,this.indicatorImage,!1,!1,!1)}},mxLabel.prototype.getIndicatorBounds=function(e,t,n,o){var s=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_ALIGN,mxConstants.ALIGN_LEFT),i=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE),a=mxUtils.getNumber(this.style,mxConstants.STYLE_INDICATOR_WIDTH,this.indicatorSize),l=mxUtils.getNumber(this.style,mxConstants.STYLE_INDICATOR_HEIGHT,this.indicatorSize),r=this.spacing+5;return new mxRectangle(e+=s==mxConstants.ALIGN_RIGHT?n-a-r:s==mxConstants.ALIGN_CENTER?(n-a)/2:r,t+=i==mxConstants.ALIGN_BOTTOM?o-l-r:i==mxConstants.ALIGN_TOP?r:(o-l)/2,a,l)},mxLabel.prototype.redrawHtmlShape=function(){for(mxRectangleShape.prototype.redrawHtmlShape.apply(this,arguments);this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);if(null!=this.image){var e=document.createElement("img");e.style.position="relative",e.setAttribute("border","0");var t=this.getImageBounds(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height);t.x-=this.bounds.x,t.y-=this.bounds.y,e.style.left=Math.round(t.x)+"px",e.style.top=Math.round(t.y)+"px",e.style.width=Math.round(t.width)+"px",e.style.height=Math.round(t.height)+"px",e.src=this.image,this.node.appendChild(e)}},exports.mxLabel=mxLabel,mxUtils.extend(mxCylinder,mxShape),mxCylinder.prototype.maxHeight=40,mxCylinder.prototype.svgStrokeTolerance=0,mxCylinder.prototype.paintVertexShape=function(e,t,n,o,s){e.translate(t,n),e.begin(),this.redrawPath(e,t,n,o,s,!1),e.fillAndStroke(),e.setShadow(!1),e.begin(),this.redrawPath(e,t,n,o,s,!0),e.stroke()},mxCylinder.prototype.redrawPath=function(e,t,n,o,s,i){var a=Math.min(this.maxHeight,Math.round(s/5));(i&&null!=this.fill||!i&&null==this.fill)&&(e.moveTo(0,a),e.curveTo(0,2*a,o,2*a,o,a),i||(e.stroke(),e.begin())),i||(e.moveTo(0,a),e.curveTo(0,-a/3,o,-a/3,o,a),e.lineTo(o,s-a),e.curveTo(o,s+a/3,0,s+a/3,0,s-a),e.close())},exports.mxCylinder=mxCylinder,mxUtils.extend(mxConnector,mxPolyline),mxConnector.prototype.updateBoundingBox=function(){this.useSvgBoundingBox=null!=this.style&&1==this.style[mxConstants.STYLE_CURVED],mxShape.prototype.updateBoundingBox.apply(this,arguments)},mxConnector.prototype.paintEdgeShape=function(e,t){var n=this.createMarker(e,t,!0),o=this.createMarker(e,t,!1);mxPolyline.prototype.paintEdgeShape.apply(this,arguments),e.setFillColor(this.stroke),e.setShadow(!1),e.setDashed(!1),null!=n&&n(),null!=o&&o()},mxConnector.prototype.createMarker=function(e,t,n){var o=null,s=t.length,i=mxUtils.getValue(this.style,n?mxConstants.STYLE_STARTARROW:mxConstants.STYLE_ENDARROW),a=n?t[1]:t[s-2],l=n?t[0]:t[s-1];if(null!=i&&null!=a&&null!=l){for(var r=1;r<s-1&&0==Math.round(a.x-l.x)&&0==Math.round(a.y-l.y);)a=n?t[1+r]:t[s-2-r],r++;var d=l.x-a.x,u=l.y-a.y,g=Math.max(1,Math.sqrt(d*d+u*u)),f=d/g,v=u/g,x=mxUtils.getNumber(this.style,n?mxConstants.STYLE_STARTSIZE:mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE);o=mxMarker.createMarker(e,this,i,l,f,v,x,n,this.arrowStrokewidth,0!=this.style[n?mxConstants.STYLE_STARTFILL:mxConstants.STYLE_ENDFILL])}return o},mxConnector.prototype.augmentBoundingBox=function(e){mxShape.prototype.augmentBoundingBox.apply(this,arguments);var t=0;mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,mxConstants.NONE)!=mxConstants.NONE&&(t=mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_MARKERSIZE)+1),mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE&&(t=Math.max(t,mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE))+1),e.grow(t*this.scale)},exports.mxConnector=mxConnector,mxUtils.extend(mxSwimlane,mxShape),mxSwimlane.prototype.imageSize=16,mxSwimlane.prototype.getTitleSize=function(){return Math.max(0,mxUtils.getValue(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE))},mxSwimlane.prototype.getLabelBounds=function(e){var t=this.getTitleSize(),n=new mxRectangle(e.x,e.y,e.width,e.height),o=this.isHorizontal(),s=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPH,0),i=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPV,0),a=this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH,l=o==!a,r=!l&&s!=(this.direction==mxConstants.DIRECTION_SOUTH||this.direction==mxConstants.DIRECTION_WEST),d=l&&i!=(this.direction==mxConstants.DIRECTION_SOUTH||this.direction==mxConstants.DIRECTION_WEST);if(a){var u=Math.min(n.width,t*this.scale);(r||d)&&(n.x+=n.width-u),n.width=u}else u=Math.min(n.height,t*this.scale),(r||d)&&(n.y+=n.height-u),n.height=u;return n},mxSwimlane.prototype.getGradientBounds=function(e,t,n,o,s){var i=this.getTitleSize();return this.isHorizontal()?new mxRectangle(t,n,o,i=Math.min(i,s)):new mxRectangle(t,n,i=Math.min(i,o),s)},mxSwimlane.prototype.getArcSize=function(e,t,n){return n*(mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100)*3},mxSwimlane.prototype.isHorizontal=function(){return 1==mxUtils.getValue(this.style,mxConstants.STYLE_HORIZONTAL,1)},mxSwimlane.prototype.paintVertexShape=function(e,t,n,o,s){var i=this.getTitleSize(),a=mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_FILLCOLOR,mxConstants.NONE),l=1==mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_LINE,1),r=0;i=this.isHorizontal()?Math.min(i,s):Math.min(i,o),e.translate(t,n),this.isRounded?(r=this.getArcSize(o,s,i),this.paintRoundedSwimlane(e,t,n,o,s,i,r,a,l)):this.paintSwimlane(e,t,n,o,s,i,a,l);var d=mxUtils.getValue(this.style,mxConstants.STYLE_SEPARATORCOLOR,mxConstants.NONE);if(this.paintSeparator(e,t,n,o,s,i,d),null!=this.image){var u=this.getImageBounds(t,n,o,s);e.image(u.x-t,u.y-n,u.width,u.height,this.image,!1,!1,!1)}this.glass&&(e.setShadow(!1),this.paintGlassEffect(e,0,0,o,i,r))},mxSwimlane.prototype.paintSwimlane=function(e,t,n,o,s,i,a,l){a!=mxConstants.NONE&&(e.save(),e.setFillColor(a),e.rect(0,0,o,s),e.fillAndStroke(),e.restore(),e.setShadow(!1)),e.begin(),this.isHorizontal()?(e.moveTo(0,i),e.lineTo(0,0),e.lineTo(o,0),e.lineTo(o,i),(l||i>=s)&&e.close(),e.fillAndStroke(),i<s&&a==mxConstants.NONE&&(e.pointerEvents=!1,e.begin(),e.moveTo(0,i),e.lineTo(0,s),e.lineTo(o,s),e.lineTo(o,i),e.stroke())):(e.moveTo(i,0),e.lineTo(0,0),e.lineTo(0,s),e.lineTo(i,s),(l||i>=o)&&e.close(),e.fillAndStroke(),i<o&&a==mxConstants.NONE&&(e.pointerEvents=!1,e.begin(),e.moveTo(i,0),e.lineTo(o,0),e.lineTo(o,s),e.lineTo(i,s),e.stroke()))},mxSwimlane.prototype.paintRoundedSwimlane=function(e,t,n,o,s,i,a,l,r){l!=mxConstants.NONE&&(e.save(),e.setFillColor(l),e.roundrect(0,0,o,s,a,a),e.fillAndStroke(),e.restore(),e.setShadow(!1)),e.begin(),this.isHorizontal()?(e.moveTo(o,i),e.lineTo(o,a),e.quadTo(o,0,o-Math.min(o/2,a),0),e.lineTo(Math.min(o/2,a),0),e.quadTo(0,0,0,a),e.lineTo(0,i),(r||i>=s)&&e.close(),e.fillAndStroke(),i<s&&l==mxConstants.NONE&&(e.pointerEvents=!1,e.begin(),e.moveTo(0,i),e.lineTo(0,s-a),e.quadTo(0,s,Math.min(o/2,a),s),e.lineTo(o-Math.min(o/2,a),s),e.quadTo(o,s,o,s-a),e.lineTo(o,i),e.stroke())):(e.moveTo(i,0),e.lineTo(a,0),e.quadTo(0,0,0,Math.min(s/2,a)),e.lineTo(0,s-Math.min(s/2,a)),e.quadTo(0,s,a,s),e.lineTo(i,s),(r||i>=o)&&e.close(),e.fillAndStroke(),i<o&&l==mxConstants.NONE&&(e.pointerEvents=!1,e.begin(),e.moveTo(i,s),e.lineTo(o-a,s),e.quadTo(o,s,o,s-Math.min(s/2,a)),e.lineTo(o,Math.min(s/2,a)),e.quadTo(o,0,o-a,0),e.lineTo(i,0),e.stroke()))},mxSwimlane.prototype.paintSeparator=function(e,t,n,o,s,i,a){a!=mxConstants.NONE&&(e.setStrokeColor(a),e.setDashed(!0),e.begin(),this.isHorizontal()?(e.moveTo(o,i),e.lineTo(o,s)):(e.moveTo(i,0),e.lineTo(o,0)),e.stroke(),e.setDashed(!1))},mxSwimlane.prototype.getImageBounds=function(e,t,n,o){return this.isHorizontal()?new mxRectangle(e+n-this.imageSize,t,this.imageSize,this.imageSize):new mxRectangle(e,t,this.imageSize,this.imageSize)},exports.mxSwimlane=mxSwimlane,mxGraphLayout.prototype.graph=null,mxGraphLayout.prototype.useBoundingBox=!0,mxGraphLayout.prototype.parent=null,mxGraphLayout.prototype.moveCell=function(e,t,n){},mxGraphLayout.prototype.execute=function(e){},mxGraphLayout.prototype.getGraph=function(){return this.graph},mxGraphLayout.prototype.getConstraint=function(e,t,n,o){var s=this.graph.view.getState(t),i=null!=s?s.style:this.graph.getCellStyle(t);return null!=i?i[e]:null},mxGraphLayout.traverse=function(e,t,n,o,s){if(null!=n&&null!=e&&(t=null==t||t,!(s=s||new mxDictionary).get(e))){s.put(e,!0);var i=n(e,o);if(null==i||i){var a=this.graph.model.getEdgeCount(e);if(a>0)for(var l=0;l<a;l++){var r=this.graph.model.getEdgeAt(e,l),d=this.graph.model.getTerminal(r,!0)==e;if(!t||d){var u=this.graph.view.getVisibleTerminal(r,!d);this.traverse(u,t,n,r,s)}}}}},mxGraphLayout.prototype.isVertexMovable=function(e){return this.graph.isCellMovable(e)},mxGraphLayout.prototype.isVertexIgnored=function(e){return!this.graph.getModel().isVertex(e)||!this.graph.isCellVisible(e)},mxGraphLayout.prototype.isEdgeIgnored=function(e){var t=this.graph.getModel();return!t.isEdge(e)||!this.graph.isCellVisible(e)||null==t.getTerminal(e,!0)||null==t.getTerminal(e,!1)},mxGraphLayout.prototype.setEdgeStyleEnabled=function(e,t){this.graph.setCellStyles(mxConstants.STYLE_NOEDGESTYLE,t?"0":"1",[e])},mxGraphLayout.prototype.setOrthogonalEdge=function(e,t){this.graph.setCellStyles(mxConstants.STYLE_ORTHOGONAL,t?"1":"0",[e])},mxGraphLayout.prototype.getParentOffset=function(e){var t=new mxPoint;if(null!=e&&e!=this.parent){var n=this.graph.getModel();if(n.isAncestor(this.parent,e))for(var o=n.getGeometry(e);e!=this.parent;)t.x=t.x+o.x,t.y=t.y+o.y,e=n.getParent(e),o=n.getGeometry(e)}return t},mxGraphLayout.prototype.setEdgePoints=function(e,t){if(null!=e){var n=this.graph.model,o=n.getGeometry(e);if(null==o?(o=new mxGeometry).setRelative(!0):o=o.clone(),null!=this.parent&&null!=t)for(var s=n.getParent(e),i=this.getParentOffset(s),a=0;a<t.length;a++)t[a].x=t[a].x-i.x,t[a].y=t[a].y-i.y;o.points=t,n.setGeometry(e,o)}},mxGraphLayout.prototype.setVertexLocation=function(e,t,n){var o=this.graph.getModel(),s=o.getGeometry(e),i=null;if(null!=s){if(i=new mxRectangle(t,n,s.width,s.height),this.useBoundingBox){var a=this.graph.getView().getState(e);if(null!=a&&null!=a.text&&null!=a.text.boundingBox){var l=this.graph.getView().scale,r=a.text.boundingBox;a.text.boundingBox.x<a.x&&(t+=(a.x-r.x)/l,i.width=r.width),a.text.boundingBox.y<a.y&&(n+=(a.y-r.y)/l,i.height=r.height)}}if(null!=this.parent){var d=o.getParent(e);if(null!=d&&d!=this.parent){var u=this.getParentOffset(d);t-=u.x,n-=u.y}}s.x==t&&s.y==n||((s=s.clone()).x=t,s.y=n,o.setGeometry(e,s))}return i},mxGraphLayout.prototype.getVertexBounds=function(e){var t=this.graph.getModel().getGeometry(e);if(this.useBoundingBox){var n=this.graph.getView().getState(e);if(null!=n&&null!=n.text&&null!=n.text.boundingBox){var o=this.graph.getView().scale,s=n.text.boundingBox,i=Math.max(n.x-s.x,0)/o,a=Math.max(n.y-s.y,0)/o,l=Math.max(s.x+s.width-(n.x+n.width),0)/o,r=Math.max(s.y+s.height-(n.y+n.height),0)/o;t=new mxRectangle(t.x-i,t.y-a,t.width+i+l,t.height+a+r)}}if(null!=this.parent){var d=this.graph.getModel().getParent(e);if(t=t.clone(),null!=d&&d!=this.parent){var u=this.getParentOffset(d);t.x=t.x+u.x,t.y=t.y+u.y}}return new mxRectangle(t.x,t.y,t.width,t.height)},mxGraphLayout.prototype.arrangeGroups=function(e,t,n,o,s,i){return this.graph.updateGroupBounds(e,t,!0,n,o,s,i)},exports.mxGraphLayout=mxGraphLayout,mxStackLayout.prototype=new mxGraphLayout,mxStackLayout.prototype.constructor=mxStackLayout,mxStackLayout.prototype.horizontal=null,mxStackLayout.prototype.spacing=null,mxStackLayout.prototype.x0=null,mxStackLayout.prototype.y0=null,mxStackLayout.prototype.border=0,mxStackLayout.prototype.marginTop=0,mxStackLayout.prototype.marginLeft=0,mxStackLayout.prototype.marginRight=0,mxStackLayout.prototype.marginBottom=0,mxStackLayout.prototype.keepFirstLocation=!1,mxStackLayout.prototype.fill=!1,mxStackLayout.prototype.resizeParent=!1,mxStackLayout.prototype.resizeParentMax=!1,mxStackLayout.prototype.resizeLast=!1,mxStackLayout.prototype.wrap=null,mxStackLayout.prototype.borderCollapse=!0,mxStackLayout.prototype.isHorizontal=function(){return this.horizontal},mxStackLayout.prototype.moveCell=function(e,t,n){var o=this.graph.getModel(),s=o.getParent(e),i=this.isHorizontal();if(null!=e&&null!=s){var a=0,l=0,r=o.getChildCount(s),d=i?t:n,u=this.graph.getView().getState(s);for(null!=u&&(d-=i?u.x:u.y),d/=this.graph.view.scale,a=0;a<r;a++){var g=o.getChildAt(s,a);if(g!=e){var f=o.getGeometry(g);if(null!=f){var v=i?f.x+f.width/2:f.y+f.height/2;if(l<=d&&v>d)break;l=v}}}var x=s.getIndex(e);x=Math.max(0,a-(a>x?1:0)),o.add(s,e,x)}},mxStackLayout.prototype.getParentSize=function(e){var t=this.graph.getModel(),n=t.getGeometry(e);return null!=this.graph.container&&(null==n&&t.isLayer(e)||e==this.graph.getView().currentRoot)&&(n=new mxRectangle(0,0,this.graph.container.offsetWidth-1,this.graph.container.offsetHeight-1)),n},mxStackLayout.prototype.execute=function(e){if(null!=e){var t=this.getParentSize(e),n=this.isHorizontal(),o=this.graph.getModel(),s=null;null!=t&&(s=n?t.height-this.marginTop-this.marginBottom:t.width-this.marginLeft-this.marginRight),s-=2*this.spacing+2*this.border;var i=this.x0+this.border+this.marginLeft,a=this.y0+this.border+this.marginTop;if(this.graph.isSwimlane(e)){var l=this.graph.getCellStyle(e),r=mxUtils.getNumber(l,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE),d=1==mxUtils.getValue(l,mxConstants.STYLE_HORIZONTAL,!0);null!=t&&(r=d?Math.min(r,t.height):Math.min(r,t.width)),n==d&&(s-=r),d?a+=r:i+=r}o.beginUpdate();try{for(var u=0,g=null,f=0,v=null,x=o.getChildCount(e),z=0;z<x;z++){var b=o.getChildAt(e,z);if(!this.isVertexIgnored(b)&&this.isVertexMovable(b)){var _=o.getGeometry(b);if(null!=_){_=_.clone(),null!=this.wrap&&null!=g&&(n&&g.x+g.width+_.width+2*this.spacing>this.wrap||!n&&g.y+g.height+_.height+2*this.spacing>this.wrap)&&(g=null,n?a+=u+this.spacing:i+=u+this.spacing,u=0),u=Math.max(u,n?_.height:_.width);var H=0;if(!this.borderCollapse){var T=this.graph.getCellStyle(b);H=mxUtils.getNumber(T,mxConstants.STYLE_STROKEWIDTH,1)}null!=g?n?_.x=f+this.spacing+Math.floor(H/2):_.y=f+this.spacing+Math.floor(H/2):this.keepFirstLocation||(n?_.x=i:_.y=a),n?_.y=a:_.x=i,this.fill&&null!=s&&(n?_.height=s:_.width=s),this.setChildGeometry(b,_),v=b,g=_,f=n?g.x+g.width+Math.floor(H/2):g.y+g.height+Math.floor(H/2)}}}this.resizeParent&&null!=t&&null!=g&&!this.graph.isCellCollapsed(e)?this.updateParentGeometry(e,t,g):this.resizeLast&&null!=t&&null!=g&&null!=v&&(n?g.width=t.width-g.x-this.spacing-this.marginRight-this.marginLeft:g.height=t.height-g.y-this.spacing-this.marginBottom,this.setChildGeometry(v,g))}finally{o.endUpdate()}}},mxStackLayout.prototype.setChildGeometry=function(e,t){var n=this.graph.getCellGeometry(e);null!=n&&t.x==n.x&&t.y==n.y&&t.width==n.width&&t.height==n.height||this.graph.getModel().setGeometry(e,t)},mxStackLayout.prototype.updateParentGeometry=function(e,t,n){var o=this.isHorizontal(),s=this.graph.getModel(),i=t.clone();if(o){var a=n.x+n.width+this.spacing+this.marginRight;i.width=this.resizeParentMax?Math.max(i.width,a):a}else a=n.y+n.height+this.spacing+this.marginBottom,i.height=this.resizeParentMax?Math.max(i.height,a):a;t.x==i.x&&t.y==i.y&&t.width==i.width&&t.height==i.height||s.setGeometry(e,i)},exports.mxStackLayout=mxStackLayout,mxPartitionLayout.prototype=new mxGraphLayout,mxPartitionLayout.prototype.constructor=mxPartitionLayout,mxPartitionLayout.prototype.horizontal=null,mxPartitionLayout.prototype.spacing=null,mxPartitionLayout.prototype.border=null,mxPartitionLayout.prototype.resizeVertices=!0,mxPartitionLayout.prototype.isHorizontal=function(){return this.horizontal},mxPartitionLayout.prototype.moveCell=function(e,t,n){var o=this.graph.getModel(),s=o.getParent(e);if(null!=e&&null!=s){var i=0,a=0,l=o.getChildCount(s);for(i=0;i<l;i++){var r=o.getChildAt(s,i),d=this.getVertexBounds(r);if(null!=d){var u=d.x+d.width/2;if(a<t&&u>t)break;a=u}}var g=s.getIndex(e);g=Math.max(0,i-(i>g?1:0)),o.add(s,e,g)}},mxPartitionLayout.prototype.execute=function(e){var t=this.isHorizontal(),n=this.graph.getModel(),o=n.getGeometry(e);if(null!=this.graph.container&&(null==o&&n.isLayer(e)||e==this.graph.getView().currentRoot)&&(o=new mxRectangle(0,0,this.graph.container.offsetWidth-1,this.graph.container.offsetHeight-1)),null!=o){for(var a=[],l=n.getChildCount(e),r=0;r<l;r++){var d=n.getChildAt(e,r);!this.isVertexIgnored(d)&&this.isVertexMovable(d)&&a.push(d)}var u=a.length;if(u>0){var g=this.border,f=this.border,v=t?o.height:o.width;v-=2*this.border;var x=this.graph.isSwimlane(e)?this.graph.getStartSize(e):new mxRectangle;v-=t?x.height:x.width,g+=x.width,f+=x.height;var z=this.border+(u-1)*this.spacing,b=t?(o.width-g-z)/u:(o.height-f-z)/u;if(b>0){n.beginUpdate();try{for(r=0;r<u;r++){var _=n.getGeometry(d=a[r]);null!=_&&((_=_.clone()).x=g,_.y=f,t?(this.resizeVertices&&(_.width=b,_.height=v),g+=b+this.spacing):(this.resizeVertices&&(_.height=b,_.width=v),f+=b+this.spacing),n.setGeometry(d,_))}}finally{n.endUpdate()}}}}},exports.mxPartitionLayout=mxPartitionLayout,mxCompactTreeLayout.prototype=new mxGraphLayout,mxCompactTreeLayout.prototype.constructor=mxCompactTreeLayout,mxCompactTreeLayout.prototype.horizontal=null,mxCompactTreeLayout.prototype.invert=null,mxCompactTreeLayout.prototype.resizeParent=!0,mxCompactTreeLayout.prototype.maintainParentLocation=!1,mxCompactTreeLayout.prototype.groupPadding=10,mxCompactTreeLayout.prototype.groupPaddingTop=0,mxCompactTreeLayout.prototype.groupPaddingRight=0,mxCompactTreeLayout.prototype.groupPaddingBottom=0,mxCompactTreeLayout.prototype.groupPaddingLeft=0,mxCompactTreeLayout.prototype.parentsChanged=null,mxCompactTreeLayout.prototype.moveTree=!1,mxCompactTreeLayout.prototype.visited=null,mxCompactTreeLayout.prototype.levelDistance=10,mxCompactTreeLayout.prototype.nodeDistance=20,mxCompactTreeLayout.prototype.resetEdges=!0,mxCompactTreeLayout.prototype.prefHozEdgeSep=5,mxCompactTreeLayout.prototype.prefVertEdgeOff=4,mxCompactTreeLayout.prototype.minEdgeJetty=8,mxCompactTreeLayout.prototype.channelBuffer=4,mxCompactTreeLayout.prototype.edgeRouting=!0,mxCompactTreeLayout.prototype.sortEdges=!1,mxCompactTreeLayout.prototype.alignRanks=!1,mxCompactTreeLayout.prototype.maxRankHeight=null,mxCompactTreeLayout.prototype.root=null,mxCompactTreeLayout.prototype.node=null,mxCompactTreeLayout.prototype.isVertexIgnored=function(e){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||0==this.graph.getConnections(e).length},mxCompactTreeLayout.prototype.isHorizontal=function(){return this.horizontal},mxCompactTreeLayout.prototype.execute=function(e,t){this.parent=e;var n=this.graph.getModel();if(null==t)if(this.graph.getEdges(e,n.getParent(e),this.invert,!this.invert,!1).length>0)this.root=e;else{var o=this.graph.findTreeRoots(e,!0,this.invert);if(o.length>0)for(var s=0;s<o.length;s++)if(!this.isVertexIgnored(o[s])&&this.graph.getEdges(o[s],null,this.invert,!this.invert,!1).length>0){this.root=o[s];break}}else this.root=t;if(null!=this.root){this.parentsChanged=this.resizeParent?new Object:null,this.parentX=null,this.parentY=null,e!=this.root&&null!=n.isVertex(e)&&this.maintainParentLocation&&null!=(i=this.graph.getCellGeometry(e))&&(this.parentX=i.x,this.parentY=i.y),n.beginUpdate();try{if(this.visited=new Object,this.node=this.dfs(this.root,e),this.alignRanks&&(this.maxRankHeight=[],this.findRankHeights(this.node,0),this.setCellHeights(this.node,0)),null!=this.node){this.layout(this.node);var d,i,a=this.graph.gridSize,l=a;if(!this.moveTree){var r=this.getVertexBounds(this.root);null!=r&&(a=r.x,l=r.y)}if(null!=(d=this.isHorizontal()?this.horizontalLayout(this.node,a,l):this.verticalLayout(this.node,null,a,l))){var u=0,g=0;d.x<0&&(u=Math.abs(a-d.x)),d.y<0&&(g=Math.abs(l-d.y)),0==u&&0==g||this.moveNode(this.node,u,g),this.resizeParent&&this.adjustParents(),this.edgeRouting&&this.localEdgeProcessing(this.node)}null!=this.parentX&&null!=this.parentY&&null!=(i=this.graph.getCellGeometry(e))&&((i=i.clone()).x=this.parentX,i.y=this.parentY,n.setGeometry(e,i))}}finally{n.endUpdate()}}},mxCompactTreeLayout.prototype.moveNode=function(e,t,n){e.x+=t,e.y+=n,this.apply(e);for(var o=e.child;null!=o;)this.moveNode(o,t,n),o=o.next},mxCompactTreeLayout.prototype.sortOutgoingEdges=function(e,t){var n=new mxDictionary;t.sort(function(o,s){var i=o.getTerminal(o.getTerminal(!1)==e),a=n.get(i);null==a&&(a=mxCellPath.create(i).split(mxCellPath.PATH_SEPARATOR),n.put(i,a));var l=s.getTerminal(s.getTerminal(!1)==e),r=n.get(l);return null==r&&(r=mxCellPath.create(l).split(mxCellPath.PATH_SEPARATOR),n.put(l,r)),mxCellPath.compare(a,r)})},mxCompactTreeLayout.prototype.findRankHeights=function(e,t){(null==this.maxRankHeight[t]||this.maxRankHeight[t]<e.height)&&(this.maxRankHeight[t]=e.height);for(var n=e.child;null!=n;)this.findRankHeights(n,t+1),n=n.next},mxCompactTreeLayout.prototype.setCellHeights=function(e,t){null!=this.maxRankHeight[t]&&this.maxRankHeight[t]>e.height&&(e.height=this.maxRankHeight[t]);for(var n=e.child;null!=n;)this.setCellHeights(n,t+1),n=n.next},mxCompactTreeLayout.prototype.dfs=function(e,t){var n=mxCellPath.create(e),o=null;if(null!=e&&null==this.visited[n]&&!this.isVertexIgnored(e)){this.visited[n]=e,o=this.createNode(e);var s=this.graph.getModel(),i=null,a=this.graph.getEdges(e,t,this.invert,!this.invert,!1,!0),l=this.graph.getView();this.sortEdges&&this.sortOutgoingEdges(e,a);for(var r=0;r<a.length;r++){var d=a[r];if(!this.isEdgeIgnored(d)){this.resetEdges&&this.setEdgePoints(d,null),this.edgeRouting&&(this.setEdgeStyleEnabled(d,!1),this.setEdgePoints(d,null));var u=l.getState(d),g=null!=u?u.getVisibleTerminal(this.invert):l.getVisibleTerminal(d,this.invert),f=this.dfs(g,t);null!=f&&null!=s.getGeometry(g)&&(null==i?o.child=f:i.next=f,i=f)}}}return o},mxCompactTreeLayout.prototype.layout=function(e){if(null!=e){for(var t=e.child;null!=t;)this.layout(t),t=t.next;null!=e.child?this.attachParent(e,this.join(e)):this.layoutLeaf(e)}},mxCompactTreeLayout.prototype.horizontalLayout=function(e,t,n,o){e.x+=t+e.offsetX,e.y+=n+e.offsetY,o=this.apply(e,o);var s=e.child;if(null!=s){o=this.horizontalLayout(s,e.x,e.y,o);for(var i=e.y+s.offsetY,a=s.next;null!=a;)o=this.horizontalLayout(a,e.x+s.offsetX,i,o),i+=a.offsetY,a=a.next}return o},mxCompactTreeLayout.prototype.verticalLayout=function(e,t,n,o,s){e.x+=n+e.offsetY,e.y+=o+e.offsetX,s=this.apply(e,s);var i=e.child;if(null!=i){s=this.verticalLayout(i,e,e.x,e.y,s);for(var a=e.x+i.offsetY,l=i.next;null!=l;)s=this.verticalLayout(l,e,a,e.y+i.offsetX,s),a+=l.offsetY,l=l.next}return s},mxCompactTreeLayout.prototype.attachParent=function(e,t){var n=this.nodeDistance+this.levelDistance,o=(t-e.width)/2-this.nodeDistance,s=o+e.width+2*this.nodeDistance-t;e.child.offsetX=n+e.height,e.child.offsetY=s,e.contour.upperHead=this.createLine(e.height,0,this.createLine(n,s,e.contour.upperHead)),e.contour.lowerHead=this.createLine(e.height,0,this.createLine(n,o,e.contour.lowerHead))},mxCompactTreeLayout.prototype.layoutLeaf=function(e){var t=2*this.nodeDistance;e.contour.upperTail=this.createLine(e.height+t,0),e.contour.upperHead=e.contour.upperTail,e.contour.lowerTail=this.createLine(0,-e.width-t),e.contour.lowerHead=this.createLine(e.height+t,0,e.contour.lowerTail)},mxCompactTreeLayout.prototype.join=function(e){var t=2*this.nodeDistance,n=e.child;e.contour=n.contour;var o=n.width+t,s=o;for(n=n.next;null!=n;){var i=this.merge(e.contour,n.contour);n.offsetY=i+o,n.offsetX=0,s+=i+(o=n.width+t),n=n.next}return s},mxCompactTreeLayout.prototype.merge=function(e,t){for(var n=0,o=0,s=0,i=e.lowerHead,a=t.upperHead;null!=a&&null!=i;){var l=this.offset(n,o,a.dx,a.dy,i.dx,i.dy);o+=l,s+=l,n+a.dx<=i.dx?(n+=a.dx,o+=a.dy,a=a.next):(n-=i.dx,o-=i.dy,i=i.next)}if(null!=a){var r=this.bridge(e.upperTail,0,0,a,n,o);e.upperTail=null!=r.next?t.upperTail:r,e.lowerTail=t.lowerTail}else null==(r=this.bridge(t.lowerTail,n,o,i,0,0)).next&&(e.lowerTail=r);return e.lowerHead=t.lowerHead,s},mxCompactTreeLayout.prototype.offset=function(e,t,n,o,s,i){var a=0;return s<=e||e+n<=0?0:(a=s*o-n*i>0?e<0?e*o/n-t:e>0?e*i/s-t:-t:s<e+n?i-(t+(s-e)*o/n):s>e+n?(n+e)*i/s-(t+o):i-(t+o))>0?a:0},mxCompactTreeLayout.prototype.bridge=function(e,t,n,o,s,i){var l,a=s+o.dx-t,d=this.createLine(a,l=0==o.dx?o.dy:a*o.dy/o.dx,o.next);return e.next=this.createLine(0,i+o.dy-l-n,d),d},mxCompactTreeLayout.prototype.createNode=function(e){var t=new Object;t.cell=e,t.x=0,t.y=0,t.width=0,t.height=0;var n=this.getVertexBounds(e);return null!=n&&(this.isHorizontal()?(t.width=n.height,t.height=n.width):(t.width=n.width,t.height=n.height)),t.offsetX=0,t.offsetY=0,t.contour=new Object,t},mxCompactTreeLayout.prototype.apply=function(e,t){var n=this.graph.getModel(),o=e.cell,s=n.getGeometry(o);if(null!=o&&null!=s){if(this.isVertexMovable(o)&&(s=this.setVertexLocation(o,e.x,e.y),this.resizeParent)){var i=n.getParent(o),a=mxCellPath.create(i);null==this.parentsChanged[a]&&(this.parentsChanged[a]=i)}t=null==t?new mxRectangle(s.x,s.y,s.width,s.height):new mxRectangle(Math.min(t.x,s.x),Math.min(t.y,s.y),Math.max(t.x+t.width,s.x+s.width),Math.max(t.y+t.height,s.y+s.height))}return t},mxCompactTreeLayout.prototype.createLine=function(e,t,n){var o=new Object;return o.dx=e,o.dy=t,o.next=n,o},mxCompactTreeLayout.prototype.adjustParents=function(){var e=[];for(var t in this.parentsChanged)e.push(this.parentsChanged[t]);this.arrangeGroups(mxUtils.sortCells(e,!0),this.groupPadding,this.groupPaddingTop,this.groupPaddingRight,this.groupPaddingBottom,this.groupPaddingLeft)},mxCompactTreeLayout.prototype.localEdgeProcessing=function(e){this.processNodeOutgoing(e);for(var t=e.child;null!=t;)this.localEdgeProcessing(t),t=t.next},mxCompactTreeLayout.prototype.processNodeOutgoing=function(e){for(var t=e.child,n=e.cell,o=0,s=[];null!=t;){o++;var i=t.x;this.horizontal&&(i=t.y),s.push(new WeightedCellSorter(t,i)),t=t.next}s.sort(WeightedCellSorter.prototype.compare);var a=e.width,l=(o+1)*this.prefHozEdgeSep;a>l+2*this.prefHozEdgeSep&&(a-=2*this.prefHozEdgeSep);var r=a/o,d=r/2;a>l+2*this.prefHozEdgeSep&&(d+=this.prefHozEdgeSep);var u=this.minEdgeJetty-this.prefVertEdgeOff,g=0,f=this.getVertexBounds(n);t=e.child;for(var v=0;v<s.length;v++){for(var x=s[v].cell.cell,z=this.getVertexBounds(x),b=this.graph.getEdgesBetween(n,x,!1),_=[],H=0,T=0,L=0;L<b.length;L++)this.horizontal?(_.push(new mxPoint(H=f.x+f.width,T=f.y+d)),_.push(new mxPoint(H=f.x+f.width+u,T)),_.push(new mxPoint(H,T=z.y+z.height/2)),this.setEdgePoints(b[L],_)):(_.push(new mxPoint(H=f.x+d,T=f.y+f.height)),_.push(new mxPoint(H,T=f.y+f.height+u)),_.push(new mxPoint(H=z.x+z.width/2,T)),this.setEdgePoints(b[L],_));v<o/2?u+=this.prefVertEdgeOff:v>o/2&&(u-=this.prefVertEdgeOff),d+=r,g=Math.max(g,u)}},WeightedCellSorter.prototype.weightedValue=0,WeightedCellSorter.prototype.nudge=!1,WeightedCellSorter.prototype.visited=!1,WeightedCellSorter.prototype.rankIndex=null,WeightedCellSorter.prototype.cell=null,WeightedCellSorter.prototype.compare=function(e,t){return null!=e&&null!=t?t.weightedValue>e.weightedValue?1:t.weightedValue<e.weightedValue?-1:t.nudge?1:-1:0},exports.mxCompactTreeLayout=mxCompactTreeLayout,mxUtils.extend(mxRadialTreeLayout,mxCompactTreeLayout),mxRadialTreeLayout.prototype.angleOffset=.5,mxRadialTreeLayout.prototype.rootx=0,mxRadialTreeLayout.prototype.rooty=0,mxRadialTreeLayout.prototype.levelDistance=120,mxRadialTreeLayout.prototype.nodeDistance=10,mxRadialTreeLayout.prototype.autoRadius=!1,mxRadialTreeLayout.prototype.sortEdges=!1,mxRadialTreeLayout.prototype.rowMinX=[],mxRadialTreeLayout.prototype.rowMaxX=[],mxRadialTreeLayout.prototype.rowMinCenX=[],mxRadialTreeLayout.prototype.rowMaxCenX=[],mxRadialTreeLayout.prototype.rowRadi=[],mxRadialTreeLayout.prototype.row=[],mxRadialTreeLayout.prototype.isVertexIgnored=function(e){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||0==this.graph.getConnections(e).length},mxRadialTreeLayout.prototype.execute=function(e,t){this.parent=e,this.useBoundingBox=!1,this.edgeRouting=!1,mxCompactTreeLayout.prototype.execute.apply(this,arguments);var n=null,o=this.getVertexBounds(this.root);for(var s in this.centerX=o.x+o.width/2,this.centerY=o.y+o.height/2,this.visited){var i=this.getVertexBounds(this.visited[s]);(n=null!=n?n:i.clone()).add(i)}this.calcRowDims([this.node],0);for(var a=0,l=0,r=0;r<this.row.length;r++){var d=(this.centerX-this.rowMinX[r]-this.nodeDistance)/this.rowRadi[r],u=(this.rowMaxX[r]-this.centerX-this.nodeDistance)/this.rowRadi[r];a=Math.max(a,d),l=Math.max(l,u)}for(r=0;r<this.row.length;r++)for(var g=this.centerX-this.nodeDistance-a*this.rowRadi[r],f=this.centerX+this.nodeDistance+l*this.rowRadi[r],v=f-g,x=0;x<this.row[r].length;x++){var _=((i=this.getVertexBounds((b=(z=this.row[r])[x]).cell)).x+i.width/2-g)/v,H=2*Math.PI*_;b.theta=H}for(r=this.row.length-2;r>=0;r--){var z=this.row[r];for(x=0;x<z.length;x++){for(var T=(b=z[x]).child,L=0,V=0;null!=T;)V+=T.theta,L++,T=T.next;if(L>0){var Y=V/L;if(Y>b.theta&&x<z.length-1){var J=z[x+1].theta;b.theta=Math.min(Y,J-Math.PI/10)}else if(Y<b.theta&&x>0){var K=z[x-1].theta;b.theta=Math.max(Y,K+Math.PI/10)}}}}for(r=0;r<this.row.length;r++)for(x=0;x<this.row[r].length;x++){var b;i=this.getVertexBounds((b=(z=this.row[r])[x]).cell),this.setVertexLocation(b.cell,this.centerX-i.width/2+this.rowRadi[r]*Math.cos(b.theta),this.centerY-i.height/2+this.rowRadi[r]*Math.sin(b.theta))}},mxRadialTreeLayout.prototype.calcRowDims=function(e,t){if(null!=e&&0!=e.length){this.rowMinX[t]=this.centerX,this.rowMaxX[t]=this.centerX,this.rowMinCenX[t]=this.centerX,this.rowMaxCenX[t]=this.centerX,this.row[t]=[];for(var n=!1,o=0;o<e.length;o++)for(var s=e[o].child;null!=s;)vertexBounds=this.getVertexBounds(s.cell),this.rowMinX[t]=Math.min(vertexBounds.x,this.rowMinX[t]),this.rowMaxX[t]=Math.max(vertexBounds.x+vertexBounds.width,this.rowMaxX[t]),this.rowMinCenX[t]=Math.min(vertexBounds.x+vertexBounds.width/2,this.rowMinCenX[t]),this.rowMaxCenX[t]=Math.max(vertexBounds.x+vertexBounds.width/2,this.rowMaxCenX[t]),this.rowRadi[t]=vertexBounds.y-this.getVertexBounds(this.root).y,null!=s.child&&(n=!0),this.row[t].push(s),s=s.next;n&&this.calcRowDims(this.row[t],t+1)}},exports.mxRadialTreeLayout=mxRadialTreeLayout,mxFastOrganicLayout.prototype=new mxGraphLayout,mxFastOrganicLayout.prototype.constructor=mxFastOrganicLayout,mxFastOrganicLayout.prototype.useInputOrigin=!0,mxFastOrganicLayout.prototype.resetEdges=!0,mxFastOrganicLayout.prototype.disableEdgeStyle=!0,mxFastOrganicLayout.prototype.forceConstant=50,mxFastOrganicLayout.prototype.forceConstantSquared=0,mxFastOrganicLayout.prototype.minDistanceLimit=2,mxFastOrganicLayout.prototype.maxDistanceLimit=500,mxFastOrganicLayout.prototype.minDistanceLimitSquared=4,mxFastOrganicLayout.prototype.initialTemp=200,mxFastOrganicLayout.prototype.temperature=0,mxFastOrganicLayout.prototype.maxIterations=0,mxFastOrganicLayout.prototype.iteration=0,mxFastOrganicLayout.prototype.allowedToRun=!0,mxFastOrganicLayout.prototype.isVertexIgnored=function(e){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||0==this.graph.getConnections(e).length},mxFastOrganicLayout.prototype.execute=function(e){var t=this.graph.getModel();this.vertexArray=[];for(var n=this.graph.getChildVertices(e),o=0;o<n.length;o++)this.isVertexIgnored(n[o])||this.vertexArray.push(n[o]);var s=this.useInputOrigin?this.graph.getBoundingBoxFromGeometry(this.vertexArray):null,i=this.vertexArray.length;for(this.indices=[],this.dispX=[],this.dispY=[],this.cellLocation=[],this.isMoveable=[],this.neighbours=[],this.radius=[],this.radiusSquared=[],this.forceConstant<.001&&(this.forceConstant=.001),this.forceConstantSquared=this.forceConstant*this.forceConstant,o=0;o<this.vertexArray.length;o++){var a=this.vertexArray[o];this.cellLocation[o]=[];var l=mxObjectIdentity.get(a);this.indices[l]=o;var d=(r=this.getVertexBounds(a)).width,u=r.height,f=r.y;this.cellLocation[o][0]=(g=r.x)+d/2,this.cellLocation[o][1]=f+u/2,this.radius[o]=Math.min(d,u),this.radiusSquared[o]=this.radius[o]*this.radius[o]}t.beginUpdate();try{for(o=0;o<i;o++){this.dispX[o]=0,this.dispY[o]=0,this.isMoveable[o]=this.isVertexMovable(this.vertexArray[o]);var v=this.graph.getConnections(this.vertexArray[o],e);n=this.graph.getOpposites(v,this.vertexArray[o]),this.neighbours[o]=[];for(var x=0;x<n.length;x++){this.resetEdges&&this.graph.resetEdge(v[x]),this.disableEdgeStyle&&this.setEdgeStyleEnabled(v[x],!1),l=mxObjectIdentity.get(n[x]);var z=this.indices[l];this.neighbours[o][x]=null!=z?z:o}}for(this.temperature=this.initialTemp,0==this.maxIterations&&(this.maxIterations=20*Math.sqrt(i)),this.iteration=0;this.iteration<this.maxIterations;this.iteration++){if(!this.allowedToRun)return;this.calcRepulsion(),this.calcAttraction(),this.calcPositions(),this.reduceTemperature()}var b=null,_=null;for(o=0;o<this.vertexArray.length;o++){var r;if(this.isVertexMovable(a=this.vertexArray[o])&&null!=(r=this.getVertexBounds(a))){this.cellLocation[o][0]-=r.width/2,this.cellLocation[o][1]-=r.height/2;var g=this.graph.snap(this.cellLocation[o][0]);f=this.graph.snap(this.cellLocation[o][1]),this.setVertexLocation(a,g,f),b=null==b?g:Math.min(b,g),_=null==_?f:Math.min(_,f)}}var H=1-(b||0),T=1-(_||0);null!=s&&(H+=s.x,T+=s.y),this.graph.moveCells(this.vertexArray,H,T)}finally{t.endUpdate()}},mxFastOrganicLayout.prototype.calcPositions=function(){for(var e=0;e<this.vertexArray.length;e++)if(this.isMoveable[e]){var t=Math.sqrt(this.dispX[e]*this.dispX[e]+this.dispY[e]*this.dispY[e]);t<.001&&(t=.001);var n=this.dispX[e]/t*Math.min(t,this.temperature),o=this.dispY[e]/t*Math.min(t,this.temperature);this.dispX[e]=0,this.dispY[e]=0,this.cellLocation[e][0]+=n,this.cellLocation[e][1]+=o}},mxFastOrganicLayout.prototype.calcAttraction=function(){for(var e=0;e<this.vertexArray.length;e++)for(var t=0;t<this.neighbours[e].length;t++){var n=this.neighbours[e][t];if(e!=n&&this.isMoveable[e]&&this.isMoveable[n]){var o=this.cellLocation[e][0]-this.cellLocation[n][0],s=this.cellLocation[e][1]-this.cellLocation[n][1],i=o*o+s*s-this.radiusSquared[e]-this.radiusSquared[n];i<this.minDistanceLimitSquared&&(i=this.minDistanceLimitSquared);var a=Math.sqrt(i),l=i/this.forceConstant,r=o/a*l,d=s/a*l;this.dispX[e]-=r,this.dispY[e]-=d,this.dispX[n]+=r,this.dispY[n]+=d}}},mxFastOrganicLayout.prototype.calcRepulsion=function(){for(var e=this.vertexArray.length,t=0;t<e;t++)for(var n=t;n<e;n++){if(!this.allowedToRun)return;if(n!=t&&this.isMoveable[t]&&this.isMoveable[n]){var o=this.cellLocation[t][0]-this.cellLocation[n][0],s=this.cellLocation[t][1]-this.cellLocation[n][1];0==o&&(o=.01+Math.random()),0==s&&(s=.01+Math.random());var i=Math.sqrt(o*o+s*s),a=i-this.radius[t]-this.radius[n];if(a>this.maxDistanceLimit)continue;a<this.minDistanceLimit&&(a=this.minDistanceLimit);var l=this.forceConstantSquared/a,r=o/i*l,d=s/i*l;this.dispX[t]+=r,this.dispY[t]+=d,this.dispX[n]-=r,this.dispY[n]-=d}}},mxFastOrganicLayout.prototype.reduceTemperature=function(){this.temperature=this.initialTemp*(1-this.iteration/this.maxIterations)},exports.mxFastOrganicLayout=mxFastOrganicLayout,mxCircleLayout.prototype=new mxGraphLayout,mxCircleLayout.prototype.constructor=mxCircleLayout,mxCircleLayout.prototype.radius=null,mxCircleLayout.prototype.moveCircle=!1,mxCircleLayout.prototype.x0=0,mxCircleLayout.prototype.y0=0,mxCircleLayout.prototype.resetEdges=!0,mxCircleLayout.prototype.disableEdgeStyle=!0,mxCircleLayout.prototype.execute=function(e){var t=this.graph.getModel();t.beginUpdate();try{for(var n=0,o=null,s=null,i=[],a=t.getChildCount(e),l=0;l<a;l++){var r=t.getChildAt(e,l);if(this.isVertexIgnored(r))this.isEdgeIgnored(r)||(this.resetEdges&&this.graph.resetEdge(r),this.disableEdgeStyle&&this.setEdgeStyleEnabled(r,!1));else{i.push(r);var d=this.getVertexBounds(r);o=null==o?d.y:Math.min(o,d.y),s=null==s?d.x:Math.min(s,d.x),n=Math.max(n,Math.max(d.width,d.height))}}var u=this.getRadius(i.length,n);this.moveCircle&&(s=this.x0,o=this.y0),this.circle(i,u,s,o)}finally{t.endUpdate()}},mxCircleLayout.prototype.getRadius=function(e,t){return Math.max(e*t/Math.PI,this.radius)},mxCircleLayout.prototype.circle=function(e,t,n,o){for(var s=e.length,i=2*Math.PI/s,a=0;a<s;a++)this.isVertexMovable(e[a])&&this.setVertexLocation(e[a],n+t+t*Math.sin(a*i),o+t+t*Math.cos(a*i))},exports.mxCircleLayout=mxCircleLayout,mxParallelEdgeLayout.prototype=new mxGraphLayout,mxParallelEdgeLayout.prototype.constructor=mxParallelEdgeLayout,mxParallelEdgeLayout.prototype.spacing=20,mxParallelEdgeLayout.prototype.execute=function(e){var t=this.findParallels(e);this.graph.model.beginUpdate();try{for(var n in t){var o=t[n];o.length>1&&this.layout(o)}}finally{this.graph.model.endUpdate()}},mxParallelEdgeLayout.prototype.findParallels=function(e){for(var t=this.graph.getModel(),n=[],o=t.getChildCount(e),s=0;s<o;s++){var i=t.getChildAt(e,s);if(!this.isEdgeIgnored(i)){var a=this.getEdgeId(i);null!=a&&(null==n[a]&&(n[a]=[]),n[a].push(i))}}return n},mxParallelEdgeLayout.prototype.getEdgeId=function(e){var t=this.graph.getView(),n=t.getVisibleTerminal(e,!0),o=t.getVisibleTerminal(e,!1);return null!=n&&null!=o?(n=mxObjectIdentity.get(n))>(o=mxObjectIdentity.get(o))?o+"-"+n:n+"-"+o:null},mxParallelEdgeLayout.prototype.layout=function(e){var t=e[0],n=this.graph.getView(),o=this.graph.getModel(),s=o.getGeometry(n.getVisibleTerminal(t,!0)),i=o.getGeometry(n.getVisibleTerminal(t,!1));if(s==i)for(var a=s.x+s.width+this.spacing,l=s.y+s.height/2,r=0;r<e.length;r++)this.route(e[r],a,l),a+=this.spacing;else if(null!=s&&null!=i){var d=s.x+s.width/2,u=s.y+s.height/2,v=i.x+i.width/2-d,x=i.y+i.height/2-u,z=Math.sqrt(v*v+x*x);if(z>0){a=d+v/2,l=u+x/2;var b=x*this.spacing/z,_=v*this.spacing/z;for(a+=b*(e.length-1)/2,l-=_*(e.length-1)/2,r=0;r<e.length;r++)this.route(e[r],a,l),a-=b,l+=_}}},mxParallelEdgeLayout.prototype.route=function(e,t,n){this.graph.isCellMovable(e)&&this.setEdgePoints(e,[new mxPoint(t,n)])},exports.mxParallelEdgeLayout=mxParallelEdgeLayout,mxCompositeLayout.prototype=new mxGraphLayout,mxCompositeLayout.prototype.constructor=mxCompositeLayout,mxCompositeLayout.prototype.layouts=null,mxCompositeLayout.prototype.master=null,mxCompositeLayout.prototype.moveCell=function(e,t,n){null!=this.master?this.master.move.apply(this.master,arguments):this.layouts[0].move.apply(this.layouts[0],arguments)},mxCompositeLayout.prototype.execute=function(e){var t=this.graph.getModel();t.beginUpdate();try{for(var n=0;n<this.layouts.length;n++)this.layouts[n].execute.apply(this.layouts[n],arguments)}finally{t.endUpdate()}},exports.mxCompositeLayout=mxCompositeLayout,mxEdgeLabelLayout.prototype=new mxGraphLayout,mxEdgeLabelLayout.prototype.constructor=mxEdgeLabelLayout,mxEdgeLabelLayout.prototype.execute=function(e){for(var t=this.graph.view,n=this.graph.getModel(),o=[],s=[],i=n.getChildCount(e),a=0;a<i;a++){var l=n.getChildAt(e,a),r=t.getState(l);null!=r&&(this.isVertexIgnored(l)?this.isEdgeIgnored(l)||o.push(r):s.push(r))}this.placeLabels(s,o)},mxEdgeLabelLayout.prototype.placeLabels=function(e,t){var n=this.graph.getModel();n.beginUpdate();try{for(var o=0;o<t.length;o++){var s=t[o];if(null!=s&&null!=s.text&&null!=s.text.boundingBox)for(var i=0;i<e.length;i++){var a=e[i];null!=a&&this.avoid(s,a)}}}finally{n.endUpdate()}},mxEdgeLabelLayout.prototype.avoid=function(e,t){var n=this.graph.getModel(),o=e.text.boundingBox;if(mxUtils.intersects(o,t)){var s=-o.y-o.height+t.y,i=-o.y+t.y+t.height,a=Math.abs(s)<Math.abs(i)?s:i,l=-o.x-o.width+t.x,r=-o.x+t.x+t.width,d=Math.abs(l)<Math.abs(r)?l:r;Math.abs(d)<Math.abs(a)?a=0:d=0;var u=n.getGeometry(e.cell);null!=u&&(null!=(u=u.clone()).offset?(u.offset.x+=d,u.offset.y+=a):u.offset=new mxPoint(d,a),n.setGeometry(e.cell,u))}},exports.mxEdgeLabelLayout=mxEdgeLabelLayout,mxGraphAbstractHierarchyCell.prototype.maxRank=-1,mxGraphAbstractHierarchyCell.prototype.minRank=-1,mxGraphAbstractHierarchyCell.prototype.x=null,mxGraphAbstractHierarchyCell.prototype.y=null,mxGraphAbstractHierarchyCell.prototype.width=0,mxGraphAbstractHierarchyCell.prototype.height=0,mxGraphAbstractHierarchyCell.prototype.nextLayerConnectedCells=null,mxGraphAbstractHierarchyCell.prototype.previousLayerConnectedCells=null,mxGraphAbstractHierarchyCell.prototype.temp=null,mxGraphAbstractHierarchyCell.prototype.getNextLayerConnectedCells=function(e){return null},mxGraphAbstractHierarchyCell.prototype.getPreviousLayerConnectedCells=function(e){return null},mxGraphAbstractHierarchyCell.prototype.isEdge=function(){return!1},mxGraphAbstractHierarchyCell.prototype.isVertex=function(){return!1},mxGraphAbstractHierarchyCell.prototype.getGeneralPurposeVariable=function(e){return null},mxGraphAbstractHierarchyCell.prototype.setGeneralPurposeVariable=function(e,t){return null},mxGraphAbstractHierarchyCell.prototype.setX=function(e,t){this.isVertex()?this.x[0]=t:this.isEdge()&&(this.x[e-this.minRank-1]=t)},mxGraphAbstractHierarchyCell.prototype.getX=function(e){return this.isVertex()?this.x[0]:this.isEdge()?this.x[e-this.minRank-1]:0},mxGraphAbstractHierarchyCell.prototype.setY=function(e,t){this.isVertex()?this.y[0]=t:this.isEdge()&&(this.y[e-this.minRank-1]=t)},exports.mxGraphAbstractHierarchyCell=mxGraphAbstractHierarchyCell,mxGraphHierarchyNode.prototype=new mxGraphAbstractHierarchyCell,mxGraphHierarchyNode.prototype.constructor=mxGraphHierarchyNode,mxGraphHierarchyNode.prototype.cell=null,mxGraphHierarchyNode.prototype.id=null,mxGraphHierarchyNode.prototype.connectsAsTarget=null,mxGraphHierarchyNode.prototype.connectsAsSource=null,mxGraphHierarchyNode.prototype.hashCode=!1,mxGraphHierarchyNode.prototype.getRankValue=function(e){return this.maxRank},mxGraphHierarchyNode.prototype.getNextLayerConnectedCells=function(e){if(null==this.nextLayerConnectedCells){this.nextLayerConnectedCells=[],this.nextLayerConnectedCells[0]=[];for(var t=0;t<this.connectsAsTarget.length;t++){var n=this.connectsAsTarget[t];this.nextLayerConnectedCells[0].push(-1==n.maxRank||n.maxRank==e+1?n.source:n)}}return this.nextLayerConnectedCells[0]},mxGraphHierarchyNode.prototype.getPreviousLayerConnectedCells=function(e){if(null==this.previousLayerConnectedCells){this.previousLayerConnectedCells=[],this.previousLayerConnectedCells[0]=[];for(var t=0;t<this.connectsAsSource.length;t++){var n=this.connectsAsSource[t];this.previousLayerConnectedCells[0].push(-1==n.minRank||n.minRank==e-1?n.target:n)}}return this.previousLayerConnectedCells[0]},mxGraphHierarchyNode.prototype.isVertex=function(){return!0},mxGraphHierarchyNode.prototype.getGeneralPurposeVariable=function(e){return this.temp[0]},mxGraphHierarchyNode.prototype.setGeneralPurposeVariable=function(e,t){this.temp[0]=t},mxGraphHierarchyNode.prototype.isAncestor=function(e){if(null!=e&&null!=this.hashCode&&null!=e.hashCode&&this.hashCode.length<e.hashCode.length){if(this.hashCode==e.hashCode)return!0;if(null==this.hashCode||null==this.hashCode)return!1;for(var t=0;t<this.hashCode.length;t++)if(this.hashCode[t]!=e.hashCode[t])return!1;return!0}return!1},mxGraphHierarchyNode.prototype.getCoreCell=function(){return this.cell},exports.mxGraphHierarchyNode=mxGraphHierarchyNode,mxGraphHierarchyEdge.prototype=new mxGraphAbstractHierarchyCell,mxGraphHierarchyEdge.prototype.constructor=mxGraphHierarchyEdge,mxGraphHierarchyEdge.prototype.edges=null,mxGraphHierarchyEdge.prototype.ids=null,mxGraphHierarchyEdge.prototype.source=null,mxGraphHierarchyEdge.prototype.target=null,mxGraphHierarchyEdge.prototype.isReversed=!1,mxGraphHierarchyEdge.prototype.invert=function(e){var t=this.source;this.source=this.target,this.target=t,this.isReversed=!this.isReversed},mxGraphHierarchyEdge.prototype.getNextLayerConnectedCells=function(e){if(null==this.nextLayerConnectedCells){this.nextLayerConnectedCells=[];for(var t=0;t<this.temp.length;t++)this.nextLayerConnectedCells[t]=[],this.nextLayerConnectedCells[t].push(t==this.temp.length-1?this.source:this)}return this.nextLayerConnectedCells[e-this.minRank-1]},mxGraphHierarchyEdge.prototype.getPreviousLayerConnectedCells=function(e){if(null==this.previousLayerConnectedCells){this.previousLayerConnectedCells=[];for(var t=0;t<this.temp.length;t++)this.previousLayerConnectedCells[t]=[],this.previousLayerConnectedCells[t].push(0==t?this.target:this)}return this.previousLayerConnectedCells[e-this.minRank-1]},mxGraphHierarchyEdge.prototype.isEdge=function(){return!0},mxGraphHierarchyEdge.prototype.getGeneralPurposeVariable=function(e){return this.temp[e-this.minRank-1]},mxGraphHierarchyEdge.prototype.setGeneralPurposeVariable=function(e,t){this.temp[e-this.minRank-1]=t},mxGraphHierarchyEdge.prototype.getCoreCell=function(){return null!=this.edges&&this.edges.length>0?this.edges[0]:null},exports.mxGraphHierarchyEdge=mxGraphHierarchyEdge,mxGraphHierarchyModel.prototype.maxRank=null,mxGraphHierarchyModel.prototype.vertexMapper=null,mxGraphHierarchyModel.prototype.edgeMapper=null,mxGraphHierarchyModel.prototype.ranks=null,mxGraphHierarchyModel.prototype.roots=null,mxGraphHierarchyModel.prototype.parent=null,mxGraphHierarchyModel.prototype.dfsCount=0,mxGraphHierarchyModel.prototype.SOURCESCANSTARTRANK=1e8,mxGraphHierarchyModel.prototype.tightenToSource=!1,mxGraphHierarchyModel.prototype.createInternalCells=function(e,t,n){for(var o=e.getGraph(),s=0;s<t.length;s++){n[s]=new mxGraphHierarchyNode(t[s]),this.vertexMapper.put(t[s],n[s]);var i=e.getEdges(t[s]);n[s].connectsAsSource=[];for(var a=0;a<i.length;a++){var l=e.getVisibleTerminal(i[a],!1);if(l!=t[s]&&e.graph.model.isVertex(l)&&!e.isVertexIgnored(l)){var r=e.getEdgesBetween(t[s],l,!1),d=e.getEdgesBetween(t[s],l,!0);if(null!=r&&r.length>0&&null==this.edgeMapper.get(r[0])&&2*d.length>=r.length){for(var u=new mxGraphHierarchyEdge(r),g=0;g<r.length;g++){var f=r[g];this.edgeMapper.put(f,u),o.resetEdge(f),e.disableEdgeStyle&&(e.setEdgeStyleEnabled(f,!1),e.setOrthogonalEdge(f,!0))}u.source=n[s],mxUtils.indexOf(n[s].connectsAsSource,u)<0&&n[s].connectsAsSource.push(u)}}}n[s].temp[0]=0}},mxGraphHierarchyModel.prototype.initialRank=function(){var e=[];if(null!=this.roots)for(var t=0;t<this.roots.length;t++)null!=(n=this.vertexMapper.get(this.roots[t]))&&e.push(n);var o=this.vertexMapper.getValues();for(t=0;t<o.length;t++)o[t].temp[0]=-1;for(var s=e.slice();e.length>0;){var a;i=(n=e[0]).connectsAsTarget,a=n.connectsAsSource;var l=!0,r=this.SOURCESCANSTARTRANK;for(t=0;t<i.length;t++){if(5270620!=(d=i[t]).temp[0]){l=!1;break}var u=d.source;r=Math.min(r,u.temp[0]-1)}if(l){if(n.temp[0]=r,this.maxRank=Math.min(this.maxRank,r),null!=a)for(t=0;t<a.length;t++)(d=a[t]).temp[0]=5270620,-1==(u=d.target).temp[0]&&(e.push(u),u.temp[0]=-2);e.shift()}else{var g=e.shift();if(e.push(n),g==n&&1==e.length)break}}for(t=0;t<o.length;t++)o[t].temp[0]-=this.maxRank;for(t=0;t<s.length;t++)for(var n,f=0,i=(n=s[t]).connectsAsSource,v=0;v<i.length;v++){var d;u=(d=i[v]).target,n.temp[0]=Math.max(f,u.temp[0]+1),f=n.temp[0]}this.maxRank=this.SOURCESCANSTARTRANK-this.maxRank},mxGraphHierarchyModel.prototype.fixRanks=function(){var e=[];this.ranks=[];for(var t=0;t<this.maxRank+1;t++)e[t]=[],this.ranks[t]=e[t];var n=null;if(null!=this.roots){var o=this.roots;for(n=[],t=0;t<o.length;t++){var i=this.vertexMapper.get(o[t]);n[t]=i}}this.visit(function(a,l,r,d,u){if(0==u&&l.maxRank<0&&l.minRank<0&&(e[l.temp[0]].push(l),l.maxRank=l.temp[0],l.minRank=l.temp[0],l.temp[0]=e[l.maxRank].length-1),null!=a&&null!=r&&a.maxRank-l.maxRank>1){r.maxRank=a.maxRank,r.minRank=l.maxRank,r.temp=[],r.x=[],r.y=[];for(var f=r.minRank+1;f<r.maxRank;f++)e[f].push(r),r.setGeneralPurposeVariable(f,e[f].length-1)}},n,!1,null)},mxGraphHierarchyModel.prototype.visit=function(e,t,n,o){if(null!=t){for(var s=0;s<t.length;s++){var i=t[s];null!=i&&(null==o&&(o=new Object),n?(i.hashCode=[],i.hashCode[0]=this.dfsCount,i.hashCode[1]=s,this.extendedDfs(null,i,null,e,o,i.hashCode,s,0)):this.dfs(null,i,null,e,o,0))}this.dfsCount++}},mxGraphHierarchyModel.prototype.dfs=function(e,t,n,o,s,i){if(null!=t){var a=t.id;if(null==s[a]){s[a]=t,o(e,t,n,i,0);for(var l=t.connectsAsSource.slice(),r=0;r<l.length;r++){var d=l[r];this.dfs(t,d.target,d,o,s,i+1)}}else o(e,t,n,i,1)}},mxGraphHierarchyModel.prototype.extendedDfs=function(e,t,n,o,s,i,a,l){if(null!=t){if(null!=e&&(null==t.hashCode||t.hashCode[0]!=e.hashCode[0])){var r=e.hashCode.length+1;t.hashCode=e.hashCode.slice(),t.hashCode[r-1]=a}var d=t.id;if(null==s[d]){s[d]=t,o(e,t,n,l,0);for(var u=t.connectsAsSource.slice(),g=0;g<u.length;g++){var f=u[g];this.extendedDfs(t,f.target,f,o,s,t.hashCode,g,l+1)}}else o(e,t,n,l,1)}},exports.mxGraphHierarchyModel=mxGraphHierarchyModel,mxSwimlaneModel.prototype.maxRank=null,mxSwimlaneModel.prototype.vertexMapper=null,mxSwimlaneModel.prototype.edgeMapper=null,mxSwimlaneModel.prototype.ranks=null,mxSwimlaneModel.prototype.roots=null,mxSwimlaneModel.prototype.parent=null,mxSwimlaneModel.prototype.dfsCount=0,mxSwimlaneModel.prototype.SOURCESCANSTARTRANK=1e8,mxGraphHierarchyModel.prototype.tightenToSource=!1,mxSwimlaneModel.prototype.ranksPerGroup=null,mxSwimlaneModel.prototype.createInternalCells=function(e,t,n){for(var o=e.getGraph(),s=e.swimlanes,i=0;i<t.length;i++){n[i]=new mxGraphHierarchyNode(t[i]),this.vertexMapper.put(t[i],n[i]),n[i].swimlaneIndex=-1;for(var a=0;a<s.length;a++)if(o.model.getParent(t[i])==s[a]){n[i].swimlaneIndex=a;break}var l=e.getEdges(t[i]);n[i].connectsAsSource=[];for(var r=0;r<l.length;r++){var d=e.getVisibleTerminal(l[r],!1);if(d!=t[i]&&e.graph.model.isVertex(d)&&!e.isVertexIgnored(d)){var u=e.getEdgesBetween(t[i],d,!1),g=e.getEdgesBetween(t[i],d,!0);if(null!=u&&u.length>0&&null==this.edgeMapper.get(u[0])&&2*g.length>=u.length){for(var f=new mxGraphHierarchyEdge(u),v=0;v<u.length;v++){var x=u[v];this.edgeMapper.put(x,f),o.resetEdge(x),e.disableEdgeStyle&&(e.setEdgeStyleEnabled(x,!1),e.setOrthogonalEdge(x,!0))}f.source=n[i],mxUtils.indexOf(n[i].connectsAsSource,f)<0&&n[i].connectsAsSource.push(f)}}}n[i].temp[0]=0}},mxSwimlaneModel.prototype.initialRank=function(){this.ranksPerGroup=[];var e=[],t=new Object;if(null!=this.roots)for(var n=0;n<this.roots.length;n++){var o=this.vertexMapper.get(this.roots[n]);this.maxChainDfs(null,o,null,t,0),null!=o&&e.push(o)}var s=[],i=[];for(n=this.ranksPerGroup.length-1;n>=0;n--)s[n]=n==this.ranksPerGroup.length-1?0:i[n+1]+1,i[n]=s[n]+this.ranksPerGroup[n];this.maxRank=i[0];var a=this.vertexMapper.getValues();for(n=0;n<a.length;n++)a[n].temp[0]=-1;for(e.slice();e.length>0;){var l,r;l=(o=e[0]).connectsAsTarget,r=o.connectsAsSource;var d=!0,u=i[0];for(n=0;n<l.length;n++){if(5270620!=(g=l[n]).temp[0]){d=!1;break}var f=g.source;u=Math.min(u,f.temp[0]-1)}if(d){if(u>i[o.swimlaneIndex]&&(u=i[o.swimlaneIndex]),o.temp[0]=u,null!=r)for(n=0;n<r.length;n++){var g;(g=r[n]).temp[0]=5270620,-1==(f=g.target).temp[0]&&(e.push(f),f.temp[0]=-2)}e.shift()}else{var v=e.shift();if(e.push(o),v==o&&1==e.length)break}}},mxSwimlaneModel.prototype.maxChainDfs=function(e,t,n,o,s){if(null!=t){var i=mxCellPath.create(t.cell);if(null==o[i]){o[i]=t;var a=t.swimlaneIndex;(null==this.ranksPerGroup[a]||this.ranksPerGroup[a]<s)&&(this.ranksPerGroup[a]=s);for(var l=t.connectsAsSource.slice(),r=0;r<l.length;r++){var d=l[r],u=d.target;t.swimlaneIndex<u.swimlaneIndex?this.maxChainDfs(t,u,d,mxUtils.clone(o,null,!0),0):t.swimlaneIndex==u.swimlaneIndex&&this.maxChainDfs(t,u,d,mxUtils.clone(o,null,!0),s+1)}}}},mxSwimlaneModel.prototype.fixRanks=function(){var e=[];this.ranks=[];for(var t=0;t<this.maxRank+1;t++)e[t]=[],this.ranks[t]=e[t];var n=null;if(null!=this.roots){var o=this.roots;for(n=[],t=0;t<o.length;t++){var i=this.vertexMapper.get(o[t]);n[t]=i}}this.visit(function(a,l,r,d,u){if(0==u&&l.maxRank<0&&l.minRank<0&&(e[l.temp[0]].push(l),l.maxRank=l.temp[0],l.minRank=l.temp[0],l.temp[0]=e[l.maxRank].length-1),null!=a&&null!=r&&a.maxRank-l.maxRank>1){r.maxRank=a.maxRank,r.minRank=l.maxRank,r.temp=[],r.x=[],r.y=[];for(var f=r.minRank+1;f<r.maxRank;f++)e[f].push(r),r.setGeneralPurposeVariable(f,e[f].length-1)}},n,!1,null)},mxSwimlaneModel.prototype.visit=function(e,t,n,o){if(null!=t){for(var s=0;s<t.length;s++){var i=t[s];null!=i&&(null==o&&(o=new Object),n?(i.hashCode=[],i.hashCode[0]=this.dfsCount,i.hashCode[1]=s,this.extendedDfs(null,i,null,e,o,i.hashCode,s,0)):this.dfs(null,i,null,e,o,0))}this.dfsCount++}},mxSwimlaneModel.prototype.dfs=function(e,t,n,o,s,i){if(null!=t){var a=t.id;if(null==s[a]){s[a]=t,o(e,t,n,i,0);for(var l=t.connectsAsSource.slice(),r=0;r<l.length;r++){var d=l[r];this.dfs(t,d.target,d,o,s,i+1)}}else o(e,t,n,i,1)}},mxSwimlaneModel.prototype.extendedDfs=function(e,t,n,o,s,i,a,l){if(null!=t){if(null!=e&&(null==t.hashCode||t.hashCode[0]!=e.hashCode[0])){var r=e.hashCode.length+1;t.hashCode=e.hashCode.slice(),t.hashCode[r-1]=a}var d=t.id;if(null==s[d]){s[d]=t,o(e,t,n,l,0);for(var u=t.connectsAsSource.slice(),g=t.connectsAsTarget.slice(),f=0;f<u.length;f++)t.swimlaneIndex<=(x=(v=u[f]).target).swimlaneIndex&&this.extendedDfs(t,x,v,o,s,t.hashCode,f,l+1);for(f=0;f<g.length;f++){var v,x;t.swimlaneIndex<(x=(v=g[f]).source).swimlaneIndex&&this.extendedDfs(t,x,v,o,s,t.hashCode,f,l+1)}}else o(e,t,n,l,1)}},exports.mxSwimlaneModel=mxSwimlaneModel,mxHierarchicalLayoutStage.prototype.execute=function(e){},exports.mxHierarchicalLayoutStage=mxHierarchicalLayoutStage,mxMedianHybridCrossingReduction.prototype=new mxHierarchicalLayoutStage,mxMedianHybridCrossingReduction.prototype.constructor=mxMedianHybridCrossingReduction,mxMedianHybridCrossingReduction.prototype.layout=null,mxMedianHybridCrossingReduction.prototype.maxIterations=24,mxMedianHybridCrossingReduction.prototype.nestedBestRanks=null,mxMedianHybridCrossingReduction.prototype.currentBestCrossings=0,mxMedianHybridCrossingReduction.prototype.iterationsWithoutImprovement=0,mxMedianHybridCrossingReduction.prototype.maxNoImprovementIterations=2,mxMedianHybridCrossingReduction.prototype.execute=function(e){var t=this.layout.getModel();this.nestedBestRanks=[];for(var n=0;n<t.ranks.length;n++)this.nestedBestRanks[n]=t.ranks[n].slice();var o=0,s=this.calculateCrossings(t);for(n=0;n<this.maxIterations&&o<this.maxNoImprovementIterations;n++){this.weightedMedian(n,t),this.transpose(n,t);var i=this.calculateCrossings(t);if(i<s){s=i,o=0;for(var a=0;a<this.nestedBestRanks.length;a++)for(var l=t.ranks[a],r=0;r<l.length;r++)this.nestedBestRanks[a][(d=l[r]).getGeneralPurposeVariable(a)]=d}else for(o++,a=0;a<this.nestedBestRanks.length;a++)for(l=t.ranks[a],r=0;r<l.length;r++){var d;(d=l[r]).setGeneralPurposeVariable(a,r)}if(0==s)break}var u=[],g=[];for(n=0;n<t.maxRank+1;n++)g[n]=[],u[n]=g[n];for(n=0;n<this.nestedBestRanks.length;n++)for(a=0;a<this.nestedBestRanks[n].length;a++)g[n].push(this.nestedBestRanks[n][a]);t.ranks=u},mxMedianHybridCrossingReduction.prototype.calculateCrossings=function(e){for(var t=e.ranks.length,n=0,o=1;o<t;o++)n+=this.calculateRankCrossing(o,e);return n},mxMedianHybridCrossingReduction.prototype.calculateRankCrossing=function(e,t){for(var n=0,o=t.ranks[e],s=t.ranks[e-1],i=[],a=0;a<o.length;a++){for(var l=o[a],r=l.getGeneralPurposeVariable(e),d=l.getPreviousLayerConnectedCells(e),u=[],g=0;g<d.length;g++){var v=d[g].getGeneralPurposeVariable(e-1);u.push(v)}u.sort(function(L,V){return L-V}),i[r]=u}var x=[];for(a=0;a<i.length;a++)x=x.concat(i[a]);for(var z=1;z<s.length;)z<<=1;var b=2*z-1;z-=1;var _=[];for(a=0;a<b;++a)_[a]=0;for(a=0;a<x.length;a++){var T=x[a]+z;for(++_[T];T>0;)T%2&&(n+=_[T+1]),++_[T=T-1>>1]}return n},mxMedianHybridCrossingReduction.prototype.transpose=function(e,t){for(var n=!0,o=0;n&&o++<10;){var i=e%2==1&&o%2==1;n=!1;for(var a=0;a<t.ranks.length;a++){for(var l=t.ranks[a],r=[],d=0;d<l.length;d++){var u=l[d],g=u.getGeneralPurposeVariable(a);g<0&&(g=d),r[g]=u}var f=null,v=null,x=null,z=null,b=null,_=null,H=null,T=null,L=null,V=null;for(d=0;d<l.length-1;d++){if(0==d){f=(L=r[d]).getNextLayerConnectedCells(a),v=L.getPreviousLayerConnectedCells(a),b=[],_=[];for(var Y=0;Y<f.length;Y++)b[Y]=f[Y].getGeneralPurposeVariable(a+1);for(Y=0;Y<v.length;Y++)_[Y]=v[Y].getGeneralPurposeVariable(a-1)}else f=x,v=z,b=H,_=T,L=V;for(x=(V=r[d+1]).getNextLayerConnectedCells(a),z=V.getPreviousLayerConnectedCells(a),H=[],T=[],Y=0;Y<x.length;Y++)H[Y]=x[Y].getGeneralPurposeVariable(a+1);for(Y=0;Y<z.length;Y++)T[Y]=z[Y].getGeneralPurposeVariable(a-1);var J=0,K=0;for(Y=0;Y<b.length;Y++)for(var re=0;re<H.length;re++)b[Y]>H[re]&&J++,b[Y]<H[re]&&K++;for(Y=0;Y<_.length;Y++)for(re=0;re<T.length;re++)_[Y]>T[re]&&J++,_[Y]<T[re]&&K++;if(K<J||K==J&&i){var X=L.getGeneralPurposeVariable(a);L.setGeneralPurposeVariable(a,V.getGeneralPurposeVariable(a)),V.setGeneralPurposeVariable(a,X),x=f,z=v,H=b,T=_,V=L,i||(n=!0)}}}}},mxMedianHybridCrossingReduction.prototype.weightedMedian=function(e,t){var n=e%2==0;if(n)for(var o=t.maxRank-1;o>=0;o--)this.medianRank(o,n);else for(o=1;o<t.maxRank;o++)this.medianRank(o,n)},mxMedianHybridCrossingReduction.prototype.medianRank=function(e,t){for(var n=this.nestedBestRanks[e].length,o=[],s=[],i=0;i<n;i++){var r,a=this.nestedBestRanks[e][i],l=new MedianCellSorter;l.cell=a,null!=(r=t?a.getNextLayerConnectedCells(e):a.getPreviousLayerConnectedCells(e))&&0!=r.length?(l.medianValue=this.medianValue(r,t?e+1:e-1),o.push(l)):s[a.getGeneralPurposeVariable(e)]=!0}for(o.sort(MedianCellSorter.prototype.compare),i=0;i<n;i++)null==s[i]&&(a=o.shift().cell).setGeneralPurposeVariable(e,i)},mxMedianHybridCrossingReduction.prototype.medianValue=function(e,t){for(var n=[],o=0,s=0;s<e.length;s++)n[o++]=e[s].getGeneralPurposeVariable(t);if(n.sort(function(d,u){return d-u}),o%2==1)return n[Math.floor(o/2)];if(2==o)return(n[0]+n[1])/2;var a=o/2,l=n[a-1]-n[0],r=n[o-1]-n[a];return(n[a-1]*r+n[a]*l)/(l+r)},MedianCellSorter.prototype.medianValue=0,MedianCellSorter.prototype.cell=!1,MedianCellSorter.prototype.compare=function(e,t){return null!=e&&null!=t?t.medianValue>e.medianValue?-1:t.medianValue<e.medianValue?1:0:0},exports.mxMedianHybridCrossingReduction=mxMedianHybridCrossingReduction,mxMinimumCycleRemover.prototype=new mxHierarchicalLayoutStage,mxMinimumCycleRemover.prototype.constructor=mxMinimumCycleRemover,mxMinimumCycleRemover.prototype.layout=null,mxMinimumCycleRemover.prototype.execute=function(e){for(var t=this.layout.getModel(),n=new Object,o=t.vertexMapper.getValues(),s=new Object,i=0;i<o.length;i++)s[o[i].id]=o[i];var a=null;if(null!=t.roots){var l=t.roots;for(a=[],i=0;i<l.length;i++)a[i]=t.vertexMapper.get(l[i])}t.visit(function(d,u,g,f,v){u.isAncestor(d)&&(g.invert(),mxUtils.remove(g,d.connectsAsSource),d.connectsAsTarget.push(g),mxUtils.remove(g,u.connectsAsTarget),u.connectsAsSource.push(g)),n[u.id]=u,delete s[u.id]},a,!0,null);var r=mxUtils.clone(n,null,!0);t.visit(function(d,u,g,f,v){u.isAncestor(d)&&(g.invert(),mxUtils.remove(g,d.connectsAsSource),u.connectsAsSource.push(g),d.connectsAsTarget.push(g),mxUtils.remove(g,u.connectsAsTarget)),n[u.id]=u,delete s[u.id]},s,!0,r)},exports.mxMinimumCycleRemover=mxMinimumCycleRemover,mxCoordinateAssignment.prototype=new mxHierarchicalLayoutStage,mxCoordinateAssignment.prototype.constructor=mxCoordinateAssignment,mxCoordinateAssignment.prototype.layout=null,mxCoordinateAssignment.prototype.intraCellSpacing=30,mxCoordinateAssignment.prototype.interRankCellSpacing=100,mxCoordinateAssignment.prototype.parallelEdgeSpacing=10,mxCoordinateAssignment.prototype.maxIterations=8,mxCoordinateAssignment.prototype.prefHozEdgeSep=5,mxCoordinateAssignment.prototype.prefVertEdgeOff=2,mxCoordinateAssignment.prototype.minEdgeJetty=12,mxCoordinateAssignment.prototype.channelBuffer=4,mxCoordinateAssignment.prototype.jettyPositions=null,mxCoordinateAssignment.prototype.orientation=mxConstants.DIRECTION_NORTH,mxCoordinateAssignment.prototype.initialX=null,mxCoordinateAssignment.prototype.limitX=null,mxCoordinateAssignment.prototype.currentXDelta=null,mxCoordinateAssignment.prototype.widestRank=null,mxCoordinateAssignment.prototype.rankTopY=null,mxCoordinateAssignment.prototype.rankBottomY=null,mxCoordinateAssignment.prototype.widestRankValue=null,mxCoordinateAssignment.prototype.rankWidths=null,mxCoordinateAssignment.prototype.rankY=null,mxCoordinateAssignment.prototype.fineTuning=!0,mxCoordinateAssignment.prototype.nextLayerConnectedCache=null,mxCoordinateAssignment.prototype.previousLayerConnectedCache=null,mxCoordinateAssignment.prototype.groupPadding=10,mxCoordinateAssignment.prototype.printStatus=function(){var e=this.layout.getModel();mxLog.show(),mxLog.writeln("======Coord assignment debug=======");for(var t=0;t<e.ranks.length;t++){mxLog.write("Rank ",t," : ");for(var n=e.ranks[t],o=0;o<n.length;o++)mxLog.write(n[o].getGeneralPurposeVariable(t),"  ");mxLog.writeln()}mxLog.writeln("====================================")},mxCoordinateAssignment.prototype.execute=function(e){this.jettyPositions=Object();var t=this.layout.getModel();this.currentXDelta=0,this.initialCoords(this.layout.getGraph(),t),this.fineTuning&&this.minNode(t);var n=1e8;if(this.fineTuning)for(var o=0;o<this.maxIterations;o++){if(0!=o&&(this.medianPos(o,t),this.minNode(t)),this.currentXDelta<n){for(var s=0;s<t.ranks.length;s++)for(var i=t.ranks[s],a=0;a<i.length;a++)(l=i[a]).setX(s,l.getGeneralPurposeVariable(s));n=this.currentXDelta}else for(s=0;s<t.ranks.length;s++)for(i=t.ranks[s],a=0;a<i.length;a++){var l;(l=i[a]).setGeneralPurposeVariable(s,l.getX(s))}this.minPath(this.layout.getGraph(),t),this.currentXDelta=0}this.setCellLocations(this.layout.getGraph(),t)},mxCoordinateAssignment.prototype.minNode=function(e){for(var t=[],n=new mxDictionary,o=[],s=0;s<=e.maxRank;s++){o[s]=e.ranks[s];for(var i=0;i<o[s].length;i++){var a=o[s][i],l=new WeightedCellSorter(a,s);l.rankIndex=i,l.visited=!0,t.push(l),n.put(a,l)}}for(var r=10*t.length,d=0;t.length>0&&d<=r;){var g=t.shift(),f=g.cell,v=g.weightedValue,x=parseInt(g.rankIndex),z=f.getNextLayerConnectedCells(v),b=f.getPreviousLayerConnectedCells(v),_=z.length,H=b.length,T=this.medianXValue(z,v+1),L=this.medianXValue(b,v-1),V=_+H,Y=f.getGeneralPurposeVariable(v),J=Y;V>0&&(J=(T*_+L*H)/V);var K=!1;if(J<Y-1)if(0==x)f.setGeneralPurposeVariable(v,J),K=!0;else{var re=o[v][x-1],X=re.getGeneralPurposeVariable(v);(X=X+re.width/2+this.intraCellSpacing+f.width/2)<J?(f.setGeneralPurposeVariable(v,J),K=!0):X<f.getGeneralPurposeVariable(v)-1&&(f.setGeneralPurposeVariable(v,X),K=!0)}else if(J>Y+1)if(x==o[v].length-1)f.setGeneralPurposeVariable(v,J),K=!0;else{var he=o[v][x+1],Q=he.getGeneralPurposeVariable(v);(Q=Q-he.width/2-this.intraCellSpacing-f.width/2)>J?(f.setGeneralPurposeVariable(v,J),K=!0):Q>f.getGeneralPurposeVariable(v)+1&&(f.setGeneralPurposeVariable(v,Q),K=!0)}if(K){for(s=0;s<z.length;s++)null!=(Le=n.get(z[s]))&&0==Le.visited&&(Le.visited=!0,t.push(Le));for(s=0;s<b.length;s++){var Le;null!=(Le=n.get(b[s]))&&0==Le.visited&&(Le.visited=!0,t.push(Le))}}g.visited=!1,d++}},mxCoordinateAssignment.prototype.medianPos=function(e,t){if(e%2==0)for(var o=t.maxRank;o>0;o--)this.rankMedianPosition(o-1,t,o);else for(o=0;o<t.maxRank-1;o++)this.rankMedianPosition(o+1,t,o)},mxCoordinateAssignment.prototype.rankMedianPosition=function(e,t,n){for(var o=t.ranks[e],s=[],i=new Object,a=0;a<o.length;a++){var l=o[a];s[a]=new WeightedCellSorter,s[a].cell=l,s[a].rankIndex=a,i[l.id]=s[a];var r=null;r=n<e?l.getPreviousLayerConnectedCells(e):l.getNextLayerConnectedCells(e),s[a].weightedValue=this.calculatedWeightedValue(l,r)}for(s.sort(WeightedCellSorter.prototype.compare),a=0;a<s.length;a++){var u=s[a].cell,g=(r=null,0);null!=(r=n<e?u.getPreviousLayerConnectedCells(e).slice():u.getNextLayerConnectedCells(e).slice())&&(g=r.length>0?this.medianXValue(r,n):u.getGeneralPurposeVariable(e));for(var f=0,v=-1e8,x=s[a].rankIndex-1;x>=0;)if(null!=(z=i[o[x].id])){var b=z.cell;z.visited?(v=b.getGeneralPurposeVariable(e)+b.width/2+this.intraCellSpacing+f+u.width/2,x=-1):(f+=b.width+this.intraCellSpacing,x--)}var _=0,H=1e8;for(x=s[a].rankIndex+1;x<s.length;){var z;if(null!=(z=i[o[x].id])){var T=z.cell;z.visited?(H=T.getGeneralPurposeVariable(e)-T.width/2-this.intraCellSpacing-_-u.width/2,x=s.length):(_+=T.width+this.intraCellSpacing,x++)}}g>=v&&g<=H?u.setGeneralPurposeVariable(e,g):g<v?(u.setGeneralPurposeVariable(e,v),this.currentXDelta+=v-g):g>H&&(u.setGeneralPurposeVariable(e,H),this.currentXDelta+=g-H),s[a].visited=!0}},mxCoordinateAssignment.prototype.calculatedWeightedValue=function(e,t){for(var n=0,o=0;o<t.length;o++){var s=t[o];e.isVertex()&&s.isVertex()?n++:n+=e.isEdge()&&s.isEdge()?8:2}return n},mxCoordinateAssignment.prototype.medianXValue=function(e,t){if(0==e.length)return 0;for(var n=[],o=0;o<e.length;o++)n[o]=e[o].getGeneralPurposeVariable(t);if(n.sort(function(l,r){return l-r}),e.length%2==1)return n[Math.floor(e.length/2)];var s=e.length/2;return(n[s-1]+n[s])/2},mxCoordinateAssignment.prototype.initialCoords=function(e,t){this.calculateWidestRank(e,t);for(var n=this.widestRank;n>=0;n--)n<t.maxRank&&this.rankCoordinates(n,e,t);for(n=this.widestRank+1;n<=t.maxRank;n++)n>0&&this.rankCoordinates(n,e,t)},mxCoordinateAssignment.prototype.rankCoordinates=function(e,t,n){for(var o=n.ranks[e],s=0,i=this.initialX+(this.widestRankValue-this.rankWidths[e])/2,a=!1,l=0;l<o.length;l++){var r=o[l];if(r.isVertex()){var d=this.layout.getVertexBounds(r.cell);null!=d?this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(r.width=d.width,r.height=d.height):(r.width=d.height,r.height=d.width):a=!0,s=Math.max(s,r.height)}else if(r.isEdge()){var u=1;null!=r.edges?u=r.edges.length:mxLog.warn("edge.edges is null"),r.width=(u-1)*this.parallelEdgeSpacing}r.setX(e,i+=r.width/2),r.setGeneralPurposeVariable(e,i),i+=r.width/2,i+=this.intraCellSpacing}1==a&&mxLog.warn("At least one cell has no bounds")},mxCoordinateAssignment.prototype.calculateWidestRank=function(e,t){var n=-this.interRankCellSpacing,o=0;this.rankWidths=[],this.rankY=[];for(var s=t.maxRank;s>=0;s--){for(var i=0,a=t.ranks[s],l=this.initialX,r=!1,d=0;d<a.length;d++){var u=a[d];if(u.isVertex()){var g=this.layout.getVertexBounds(u.cell);null!=g?this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(u.width=g.width,u.height=g.height):(u.width=g.height,u.height=g.width):r=!0,i=Math.max(i,u.height)}else if(u.isEdge()){var f=1;null!=u.edges?f=u.edges.length:mxLog.warn("edge.edges is null"),u.width=(f-1)*this.parallelEdgeSpacing}u.setX(s,l+=u.width/2),u.setGeneralPurposeVariable(s,l),l+=u.width/2,(l+=this.intraCellSpacing)>this.widestRankValue&&(this.widestRankValue=l,this.widestRank=s),this.rankWidths[s]=l}1==r&&mxLog.warn("At least one cell has no bounds"),this.rankY[s]=n;var v=i/2+o/2+this.interRankCellSpacing;for(o=i,this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_WEST?n+=v:n-=v,d=0;d<a.length;d++)a[d].setY(s,n)}},mxCoordinateAssignment.prototype.minPath=function(e,t){for(var n=t.edgeMapper.getValues(),o=0;o<n.length;o++){var s=n[o];if(!(s.maxRank-s.minRank-1<1)){for(var i=s.getGeneralPurposeVariable(s.minRank+1),a=!0,l=0,r=s.minRank+2;r<s.maxRank;r++){var d=s.getGeneralPurposeVariable(r);i!=d?(a=!1,i=d):l++}if(!a){var u=0,g=0,f=[],v=[],x=s.getGeneralPurposeVariable(s.minRank+1);for(r=s.minRank+1;r<s.maxRank-1;r++)x==(z=s.getX(r+1))||this.repositionValid(t,s,r+1,x)?(f[r-s.minRank-1]=x,u++):(f[r-s.minRank-1]=z,x=z);for(x=s.getX(r),r=s.maxRank-1;r>s.minRank+1;r--){var z;x==(z=s.getX(r-1))||this.repositionValid(t,s,r-1,x)?(v[r-s.minRank-2]=x,g++):(v[r-s.minRank-2]=s.getX(r-1),x=z)}if(g>l||u>l)if(g>=u)for(r=s.maxRank-2;r>s.minRank;r--)s.setX(r,v[r-s.minRank-1]);else if(u>g)for(r=s.minRank+2;r<s.maxRank;r++)s.setX(r,f[r-s.minRank-2])}}}},mxCoordinateAssignment.prototype.repositionValid=function(e,t,n,o){for(var s=e.ranks[n],i=-1,a=0;a<s.length;a++)if(t==s[a]){i=a;break}if(i<0)return!1;var l=t.getGeneralPurposeVariable(n);if(o<l){if(0==i)return!0;var r=s[i-1],d=r.getGeneralPurposeVariable(n);return(d=d+r.width/2+this.intraCellSpacing+t.width/2)<=o}if(o>l){if(i==s.length-1)return!0;var u=s[i+1],g=u.getGeneralPurposeVariable(n);return(g=g-u.width/2-this.intraCellSpacing-t.width/2)>=o}return!0},mxCoordinateAssignment.prototype.setCellLocations=function(e,t){this.rankTopY=[],this.rankBottomY=[];for(var n=0;n<t.ranks.length;n++)this.rankTopY[n]=Number.MAX_VALUE,this.rankBottomY[n]=-Number.MAX_VALUE;var o=t.vertexMapper.getValues();for(n=0;n<o.length;n++)this.setVertexLocation(o[n]);this.layout.edgeStyle!=mxHierarchicalEdgeStyle.ORTHOGONAL&&this.layout.edgeStyle!=mxHierarchicalEdgeStyle.POLYLINE&&this.layout.edgeStyle!=mxHierarchicalEdgeStyle.CURVE||this.localEdgeProcessing(t);var s=t.edgeMapper.getValues();for(n=0;n<s.length;n++)this.setEdgePosition(s[n])},mxCoordinateAssignment.prototype.localEdgeProcessing=function(e){for(var t=0;t<e.ranks.length;t++)for(var n=e.ranks[t],o=0;o<n.length;o++){var s=n[o];if(s.isVertex())for(var i=s.getPreviousLayerConnectedCells(t),a=t-1,l=0;l<2;l++){if(a>-1&&a<e.ranks.length&&null!=i&&i.length>0){for(var r=[],d=0;d<i.length;d++){var u=new WeightedCellSorter(i[d],i[d].getX(a));r.push(u)}r.sort(WeightedCellSorter.prototype.compare);var g=s.x[0]-s.width/2,f=g+s.width,v=0,z=[];for(d=0;d<r.length;d++){var b,_=r[d].cell;if(_.isVertex()){b=0==l?s.connectsAsSource:s.connectsAsTarget;for(var H=0;H<b.length;H++)b[H].source!=_&&b[H].target!=_||(v+=b[H].edges.length,z.push(b[H]))}else v+=_.edges.length,z.push(_)}s.width>(v+1)*this.prefHozEdgeSep+2*this.prefHozEdgeSep&&(g+=this.prefHozEdgeSep,f-=this.prefHozEdgeSep);var V=(f-g)/v,Y=g+V/2,J=this.minEdgeJetty-this.prefVertEdgeOff,K=0;for(d=0;d<z.length;d++){var re=z[d].edges.length,X=this.jettyPositions[z[d].ids[0]];null==X&&(this.jettyPositions[z[d].ids[0]]=X=[]),d<v/2?J+=this.prefVertEdgeOff:d>v/2&&(J-=this.prefVertEdgeOff);for(var ne=0;ne<re;ne++)X[4*ne+2*l]=Y,Y+=V,X[4*ne+2*l+1]=J;K=Math.max(K,J)}}i=s.getNextLayerConnectedCells(t),a=t+1}}},mxCoordinateAssignment.prototype.setEdgePosition=function(e){var t=0;if(101207!=e.temp[0]){var n=e.maxRank,o=e.minRank;n==o&&(n=e.source.maxRank,o=e.target.minRank);for(var s=0,i=this.jettyPositions[e.ids[0]],a=e.isReversed?e.target.cell:e.source.cell,l=this.layout.graph,r=this.orientation==mxConstants.DIRECTION_EAST||this.orientation==mxConstants.DIRECTION_SOUTH,d=0;d<e.edges.length;d++){var u=e.edges[d],g=this.layout.getVisibleTerminal(u,!0),f=[],v=e.isReversed;if(g!=a&&(v=!v),null!=i){var z=v?r?this.rankBottomY[o]:this.rankTopY[o]:r?this.rankTopY[n]:this.rankBottomY[n],b=i[4*s+1+(x=v?2:0)];v!=r&&(b=-b),z+=b;var _=i[4*s+x],H=l.model.getTerminal(u,!0);this.layout.isPort(H)&&l.model.getParent(H)==g&&(_=null!=(T=l.view.getState(H))?T.x:g.geometry.x+e.source.width*H.geometry.x),this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(f.push(new mxPoint(_,z)),this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&f.push(new mxPoint(_,z+b))):(f.push(new mxPoint(z,_)),this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&f.push(new mxPoint(z+b,_)))}var L=e.x.length-1,V=-1,Y=-1,J=e.maxRank-1;v&&(L=0,V=e.x.length,Y=1,J=e.minRank+1);for(var K=L;e.maxRank!=e.minRank&&K!=V;K+=Y){var re=e.x[K]+t,X=(this.rankTopY[J]+this.rankBottomY[J+1])/2,ne=(this.rankTopY[J-1]+this.rankBottomY[J])/2;if(v){var he=X;X=ne,ne=he}this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(f.push(new mxPoint(re,X)),f.push(new mxPoint(re,ne))):(f.push(new mxPoint(X,re)),f.push(new mxPoint(ne,re))),this.limitX=Math.max(this.limitX,re),J+=Y}if(null!=i){var x;b=i[4*s+3-(x=v?2:0)],v!=r&&(b=-b),z=(v?r?this.rankTopY[n]:this.rankBottomY[n]:r?this.rankBottomY[o]:this.rankTopY[o])-b,_=i[4*s+2-x];var T,ye=l.model.getTerminal(u,!1),Le=this.layout.getVisibleTerminal(u,!1);this.layout.isPort(ye)&&l.model.getParent(ye)==Le&&(_=null!=(T=l.view.getState(ye))?T.x:Le.geometry.x+e.target.width*ye.geometry.x),this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&f.push(new mxPoint(_,z-b)),f.push(new mxPoint(_,z))):(this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&f.push(new mxPoint(z-b,_)),f.push(new mxPoint(z,_)))}e.isReversed&&this.processReversedEdge(e,u),this.layout.setEdgePoints(u,f),t=0==t?this.parallelEdgeSpacing:t>0?-t:-t+this.parallelEdgeSpacing,s++}e.temp[0]=101207}},mxCoordinateAssignment.prototype.setVertexLocation=function(e){var t=e.cell,n=e.x[0]-e.width/2,o=e.y[0]-e.height/2;this.rankTopY[e.minRank]=Math.min(this.rankTopY[e.minRank],o),this.rankBottomY[e.minRank]=Math.max(this.rankBottomY[e.minRank],o+e.height),this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?this.layout.setVertexLocation(t,n,o):this.layout.setVertexLocation(t,o,n),this.limitX=Math.max(this.limitX,n+e.width)},mxCoordinateAssignment.prototype.processReversedEdge=function(e,t){},WeightedCellSorter.prototype.weightedValue=0,WeightedCellSorter.prototype.nudge=!1,WeightedCellSorter.prototype.visited=!1,WeightedCellSorter.prototype.rankIndex=null,WeightedCellSorter.prototype.cell=null,WeightedCellSorter.prototype.compare=function(e,t){return null!=e&&null!=t?t.weightedValue>e.weightedValue?-1:t.weightedValue<e.weightedValue?1:t.nudge?-1:1:0},exports.mxCoordinateAssignment=mxCoordinateAssignment,mxSwimlaneOrdering.prototype=new mxHierarchicalLayoutStage,mxSwimlaneOrdering.prototype.constructor=mxSwimlaneOrdering,mxSwimlaneOrdering.prototype.layout=null,mxSwimlaneOrdering.prototype.execute=function(e){var t=this.layout.getModel(),n=new Object,o=mxUtils.clone(t.vertexMapper,null,!0),s=null;if(null!=t.roots){var i=t.roots;s=[];for(var a=0;a<i.length;a++)mxCellPath.create(i[a]),s[a]=t.vertexMapper.get(i[a])}t.visit(function(l,r,d,u,g){var f=null!=l&&l.swimlaneIndex==r.swimlaneIndex&&r.isAncestor(l),v=null!=l&&null!=d&&l.swimlaneIndex<r.swimlaneIndex&&d.source==r;f?(d.invert(),mxUtils.remove(d,l.connectsAsSource),r.connectsAsSource.push(d),l.connectsAsTarget.push(d),mxUtils.remove(d,r.connectsAsTarget)):v&&(d.invert(),mxUtils.remove(d,l.connectsAsTarget),r.connectsAsTarget.push(d),l.connectsAsSource.push(d),mxUtils.remove(d,r.connectsAsSource));var x=mxCellPath.create(r.cell);n[x]=r,delete o[x]},s,!0,null)},exports.mxSwimlaneOrdering=mxSwimlaneOrdering;var mxHierarchicalEdgeStyle={ORTHOGONAL:1,POLYLINE:2,STRAIGHT:3,CURVE:4};mxHierarchicalLayout.prototype=new mxGraphLayout,mxHierarchicalLayout.prototype.constructor=mxHierarchicalLayout,mxHierarchicalLayout.prototype.roots=null,mxHierarchicalLayout.prototype.resizeParent=!1,mxHierarchicalLayout.prototype.maintainParentLocation=!1,mxHierarchicalLayout.prototype.moveParent=!1,mxHierarchicalLayout.prototype.parentBorder=0,mxHierarchicalLayout.prototype.intraCellSpacing=30,mxHierarchicalLayout.prototype.interRankCellSpacing=100,mxHierarchicalLayout.prototype.interHierarchySpacing=60,mxHierarchicalLayout.prototype.parallelEdgeSpacing=10,mxHierarchicalLayout.prototype.orientation=mxConstants.DIRECTION_NORTH,mxHierarchicalLayout.prototype.fineTuning=!0,mxHierarchicalLayout.prototype.tightenToSource=!0,mxHierarchicalLayout.prototype.disableEdgeStyle=!0,mxHierarchicalLayout.prototype.traverseAncestors=!0,mxHierarchicalLayout.prototype.model=null,mxHierarchicalLayout.prototype.edgesCache=null,mxHierarchicalLayout.prototype.edgeSourceTermCache=null,mxHierarchicalLayout.prototype.edgesTargetTermCache=null,mxHierarchicalLayout.prototype.edgeStyle=mxHierarchicalEdgeStyle.POLYLINE,mxHierarchicalLayout.prototype.getModel=function(){return this.model},mxHierarchicalLayout.prototype.execute=function(e,t){this.parent=e;var n=this.graph.model;if(this.edgesCache=new mxDictionary,this.edgeSourceTermCache=new mxDictionary,this.edgesTargetTermCache=new mxDictionary,null==t||t instanceof Array||(t=[t]),null!=t||null!=e){if(this.parentX=null,this.parentY=null,e!=this.root&&null!=n.isVertex(e)&&this.maintainParentLocation&&null!=(o=this.graph.getCellGeometry(e))&&(this.parentX=o.x,this.parentY=o.y),null!=t){for(var s=[],i=0;i<t.length;i++)(null==e||n.isAncestor(e,t[i]))&&n.isVertex(t[i])&&s.push(t[i]);this.roots=s}n.beginUpdate();try{var o;this.run(e),this.resizeParent&&!this.graph.isCellCollapsed(e)&&this.graph.updateGroupBounds([e],this.parentBorder,this.moveParent),null!=this.parentX&&null!=this.parentY&&null!=(o=this.graph.getCellGeometry(e))&&((o=o.clone()).x=this.parentX,o.y=this.parentY,n.setGeometry(e,o))}finally{n.endUpdate()}}},mxHierarchicalLayout.prototype.findRoots=function(e,t){var n=[];if(null!=e&&null!=t){var o=this.graph.model,s=null,i=-1e5;for(var a in t){var l=t[a];if(o.isVertex(l)&&this.graph.isCellVisible(l)){for(var r=this.getEdges(l),d=0,u=0,g=0;g<r.length;g++)this.getVisibleTerminal(r[g],!0)==l?d++:u++;0==u&&d>0&&n.push(l);var v=d-u;v>i&&(i=v,s=l)}}0==n.length&&null!=s&&n.push(s)}return n},mxHierarchicalLayout.prototype.getEdges=function(e){var t=this.edgesCache.get(e);if(null!=t)return t;for(var n=this.graph.model,o=[],s=this.graph.isCellCollapsed(e),i=n.getChildCount(e),a=0;a<i;a++){var l=n.getChildAt(e,a);this.isPort(l)?o=o.concat(n.getEdges(l,!0,!0)):!s&&this.graph.isCellVisible(l)||(o=o.concat(n.getEdges(l,!0,!0)))}o=o.concat(n.getEdges(e,!0,!0));var r=[];for(a=0;a<o.length;a++){var d=this.getVisibleTerminal(o[a],!0),u=this.getVisibleTerminal(o[a],!1);(d==u||d!=u&&(u==e&&(null==this.parent||this.graph.isValidAncestor(d,this.parent,this.traverseAncestors))||d==e&&(null==this.parent||this.graph.isValidAncestor(u,this.parent,this.traverseAncestors))))&&r.push(o[a])}return this.edgesCache.put(e,r),r},mxHierarchicalLayout.prototype.getVisibleTerminal=function(e,t){var n=this.edgesTargetTermCache;t&&(n=this.edgeSourceTermCache);var o=n.get(e);if(null!=o)return o;var s=this.graph.view.getState(e),i=null!=s?s.getVisibleTerminal(t):this.graph.view.getVisibleTerminal(e,t);return null==i&&(i=null!=s?s.getVisibleTerminal(t):this.graph.view.getVisibleTerminal(e,t)),null!=i&&(this.isPort(i)&&(i=this.graph.model.getParent(i)),n.put(e,i)),i},mxHierarchicalLayout.prototype.run=function(e){var t=[],n=[];if(null==this.roots&&null!=e){var o=Object();this.filterDescendants(e,o),this.roots=[];var s=!0;for(var i in o)if(null!=o[i]){s=!1;break}for(;!s;){for(var a=this.findRoots(e,o),l=0;l<a.length;l++){var r=Object();t.push(r),this.traverse(a[l],!0,null,n,r,t,o)}for(l=0;l<a.length;l++)this.roots.push(a[l]);for(var i in s=!0,o)if(null!=o[i]){s=!1;break}}}else for(l=0;l<this.roots.length;l++)r=Object(),t.push(r),this.traverse(this.roots[l],!0,null,n,r,t,null);var d=0;for(l=0;l<t.length;l++){r=t[l];var u=[];for(var i in r)u.push(r[i]);this.model=new mxGraphHierarchyModel(this,u,this.roots,e,this.tightenToSource),this.cycleStage(e),this.layeringStage(),this.crossingStage(e),d=this.placementStage(d,e)}},mxHierarchicalLayout.prototype.filterDescendants=function(e,t){var n=this.graph.model;if(n.isVertex(e)&&e!=this.parent&&this.graph.isCellVisible(e)&&(t[mxObjectIdentity.get(e)]=e),this.traverseAncestors||e==this.parent&&this.graph.isCellVisible(e))for(var o=n.getChildCount(e),s=0;s<o;s++){var i=n.getChildAt(e,s);this.isPort(i)||this.filterDescendants(i,t)}},mxHierarchicalLayout.prototype.isPort=function(e){return!!e.geometry.relative},mxHierarchicalLayout.prototype.getEdgesBetween=function(e,t,n){n=null!=n&&n;for(var o=this.getEdges(e),s=[],i=0;i<o.length;i++){var a=this.getVisibleTerminal(o[i],!0),l=this.getVisibleTerminal(o[i],!1);(a==e&&l==t||!n&&a==t&&l==e)&&s.push(o[i])}return s},mxHierarchicalLayout.prototype.traverse=function(e,t,n,o,s,i,a){if(null!=e&&null!=o){var l=mxObjectIdentity.get(e);if(null!=o[l]||null!=a&&null==a[l]){if(null==s[l])for(var r=0;r<i.length;r++){var d=i[r];if(null!=d[l]){for(var u in d)s[u]=d[u];return i.splice(r,1),s}}}else{null==s[l]&&(s[l]=e),null==o[l]&&(o[l]=e),null!==a&&delete a[l];var g=this.getEdges(e),f=[];for(r=0;r<g.length;r++)f[r]=this.getVisibleTerminal(g[r],!0)==e;for(r=0;r<g.length;r++)if(!t||f[r]){for(var v=this.getVisibleTerminal(g[r],!f[r]),x=1,z=0;z<g.length;z++)if(z!=r){var b=f[z];this.getVisibleTerminal(g[z],!b)==v&&(b?x++:x--)}x>=0&&(s=this.traverse(v,t,g[r],o,s,i,a))}}}return s},mxHierarchicalLayout.prototype.cycleStage=function(e){new mxMinimumCycleRemover(this).execute(e)},mxHierarchicalLayout.prototype.layeringStage=function(){this.model.initialRank(),this.model.fixRanks()},mxHierarchicalLayout.prototype.crossingStage=function(e){new mxMedianHybridCrossingReduction(this).execute(e)},mxHierarchicalLayout.prototype.placementStage=function(e,t){var n=new mxCoordinateAssignment(this,this.intraCellSpacing,this.interRankCellSpacing,this.orientation,e,this.parallelEdgeSpacing);return n.fineTuning=this.fineTuning,n.execute(t),n.limitX+this.interHierarchySpacing},exports.mxHierarchicalLayout=mxHierarchicalLayout,mxSwimlaneLayout.prototype=new mxGraphLayout,mxSwimlaneLayout.prototype.constructor=mxSwimlaneLayout,mxSwimlaneLayout.prototype.roots=null,mxSwimlaneLayout.prototype.swimlanes=null,mxSwimlaneLayout.prototype.dummyVertices=null,mxSwimlaneLayout.prototype.dummyVertexWidth=50,mxSwimlaneLayout.prototype.resizeParent=!1,mxSwimlaneLayout.prototype.maintainParentLocation=!1,mxSwimlaneLayout.prototype.moveParent=!1,mxSwimlaneLayout.prototype.parentBorder=30,mxSwimlaneLayout.prototype.intraCellSpacing=30,mxSwimlaneLayout.prototype.interRankCellSpacing=100,mxSwimlaneLayout.prototype.interHierarchySpacing=60,mxSwimlaneLayout.prototype.parallelEdgeSpacing=10,mxSwimlaneLayout.prototype.orientation=mxConstants.DIRECTION_NORTH,mxSwimlaneLayout.prototype.fineTuning=!0,mxSwimlaneLayout.prototype.tightenToSource=!0,mxSwimlaneLayout.prototype.disableEdgeStyle=!0,mxSwimlaneLayout.prototype.traverseAncestors=!0,mxSwimlaneLayout.prototype.model=null,mxSwimlaneLayout.prototype.edgesCache=null,mxHierarchicalLayout.prototype.edgeSourceTermCache=null,mxHierarchicalLayout.prototype.edgesTargetTermCache=null,mxHierarchicalLayout.prototype.edgeStyle=mxHierarchicalEdgeStyle.POLYLINE,mxSwimlaneLayout.prototype.getModel=function(){return this.model},mxSwimlaneLayout.prototype.execute=function(e,t){this.parent=e;var n=this.graph.model;if(this.edgesCache=new mxDictionary,this.edgeSourceTermCache=new mxDictionary,this.edgesTargetTermCache=new mxDictionary,!(null==t||t.length<1)){null==e&&(e=n.getParent(t[0])),this.parentX=null,this.parentY=null,e!=this.root&&null!=n.isVertex(e)&&this.maintainParentLocation&&null!=(o=this.graph.getCellGeometry(e))&&(this.parentX=o.x,this.parentY=o.y),this.swimlanes=t,this.dummyVertices=[];for(var s=0;s<t.length;s++){var i=this.graph.getChildCells(t[s]);if(null==i||0==i.length){var a=this.graph.insertVertex(t[s],null,null,0,0,this.dummyVertexWidth,0);this.dummyVertices.push(a)}}n.beginUpdate();try{var o;this.run(e),this.resizeParent&&!this.graph.isCellCollapsed(e)&&this.graph.updateGroupBounds([e],this.parentBorder,this.moveParent),null!=this.parentX&&null!=this.parentY&&null!=(o=this.graph.getCellGeometry(e))&&((o=o.clone()).x=this.parentX,o.y=this.parentY,n.setGeometry(e,o)),this.graph.removeCells(this.dummyVertices)}finally{n.endUpdate()}}},mxSwimlaneLayout.prototype.updateGroupBounds=function(){var e=[],t=this.model;for(var n in t.edgeMapper)for(var o=t.edgeMapper[n],s=0;s<o.edges.length;s++)e.push(o.edges[s]);var i=this.graph.getBoundingBoxFromGeometry(e,!0),a=[];for(s=0;s<this.swimlanes.length;s++)if(null!=(r=this.graph.getCellGeometry(l=this.swimlanes[s]))){var d=this.graph.getChildCells(l),u=this.graph.isSwimlane(l)?this.graph.getStartSize(l):new mxRectangle,g=this.graph.getBoundingBoxFromGeometry(d);a[s]=g;var f=g.y+r.y-u.height-this.parentBorder,v=g.y+r.y+g.height;if(null==i)i=new mxRectangle(0,f,0,v-f);else{i.y=Math.min(i.y,f);var x=Math.max(i.y+i.height,v);i.height=x-i.y}}for(s=0;s<this.swimlanes.length;s++){var l,r;if(null!=(r=this.graph.getCellGeometry(l=this.swimlanes[s]))){d=this.graph.getChildCells(l),u=this.graph.isSwimlane(l)?this.graph.getStartSize(l):new mxRectangle;var z=r.clone(),b=0==s?this.parentBorder:this.interRankCellSpacing/2;z.x+=a[s].x-u.width-b,z.y=z.y+i.y-r.y-this.parentBorder,z.width=a[s].width+u.width+this.interRankCellSpacing/2+b,z.height=i.height+u.height+2*this.parentBorder,this.graph.model.setGeometry(l,z),this.graph.moveCells(d,-a[s].x+u.width+b,r.y-i.y+this.parentBorder)}}},mxSwimlaneLayout.prototype.findRoots=function(e,t){var n=[];if(null!=e&&null!=t){var o=this.graph.model,s=null,i=-1e5;for(var a in t){var l=t[a];if(null!=l&&o.isVertex(l)&&this.graph.isCellVisible(l)&&o.isAncestor(e,l)){for(var r=this.getEdges(l),d=0,u=0,g=0;g<r.length;g++){var f=this.getVisibleTerminal(r[g],!0);if(f==l){var v=this.getVisibleTerminal(r[g],!1);o.isAncestor(e,v)&&d++}else o.isAncestor(e,f)&&u++}0==u&&d>0&&n.push(l);var x=d-u;x>i&&(i=x,s=l)}}0==n.length&&null!=s&&n.push(s)}return n},mxSwimlaneLayout.prototype.getEdges=function(e){var t=this.edgesCache.get(e);if(null!=t)return t;for(var n=this.graph.model,o=[],s=this.graph.isCellCollapsed(e),i=n.getChildCount(e),a=0;a<i;a++){var l=n.getChildAt(e,a);this.isPort(l)?o=o.concat(n.getEdges(l,!0,!0)):!s&&this.graph.isCellVisible(l)||(o=o.concat(n.getEdges(l,!0,!0)))}o=o.concat(n.getEdges(e,!0,!0));var r=[];for(a=0;a<o.length;a++){var d=this.getVisibleTerminal(o[a],!0),u=this.getVisibleTerminal(o[a],!1);(d==u||d!=u&&(u==e&&(null==this.parent||this.graph.isValidAncestor(d,this.parent,this.traverseAncestors))||d==e&&(null==this.parent||this.graph.isValidAncestor(u,this.parent,this.traverseAncestors))))&&r.push(o[a])}return this.edgesCache.put(e,r),r},mxSwimlaneLayout.prototype.getVisibleTerminal=function(e,t){var n=this.edgesTargetTermCache;t&&(n=this.edgeSourceTermCache);var o=n.get(e);if(null!=o)return o;var s=this.graph.view.getState(e),i=null!=s?s.getVisibleTerminal(t):this.graph.view.getVisibleTerminal(e,t);return null==i&&(i=null!=s?s.getVisibleTerminal(t):this.graph.view.getVisibleTerminal(e,t)),null!=i&&(this.isPort(i)&&(i=this.graph.model.getParent(i)),n.put(e,i)),i},mxSwimlaneLayout.prototype.run=function(e){var t=[],n=[];if(null!=this.swimlanes&&this.swimlanes.length>0&&null!=e){for(var o=Object(),s=0;s<this.swimlanes.length;s++)this.filterDescendants(this.swimlanes[s],o);this.roots=[];var i=!0;for(var a in o)if(null!=o[a]){i=!1;break}for(var l=0;!i&&l<this.swimlanes.length;){var r=this.findRoots(this.swimlanes[l],o);if(0!=r.length){for(s=0;s<r.length;s++){var d=Object();t.push(d),this.traverse(r[s],!0,null,n,d,t,o,l)}for(s=0;s<r.length;s++)this.roots.push(r[s]);for(var a in i=!0,o)if(null!=o[a]){i=!1;break}}else l++}}else for(s=0;s<this.roots.length;s++)d=Object(),t.push(d),this.traverse(this.roots[s],!0,null,n,d,t,null);var u=[];for(var a in n)u.push(n[a]);this.model=new mxSwimlaneModel(this,u,this.roots,e,this.tightenToSource),this.cycleStage(e),this.layeringStage(),this.crossingStage(e),initialX=this.placementStage(0,e)},mxSwimlaneLayout.prototype.filterDescendants=function(e,t){var n=this.graph.model;if(n.isVertex(e)&&e!=this.parent&&n.getParent(e)!=this.parent&&this.graph.isCellVisible(e)&&(t[mxObjectIdentity.get(e)]=e),this.traverseAncestors||e==this.parent&&this.graph.isCellVisible(e))for(var o=n.getChildCount(e),s=0;s<o;s++){var i=n.getChildAt(e,s);this.isPort(i)||this.filterDescendants(i,t)}},mxSwimlaneLayout.prototype.isPort=function(e){return!!e.geometry.relative},mxSwimlaneLayout.prototype.getEdgesBetween=function(e,t,n){n=null!=n&&n;for(var o=this.getEdges(e),s=[],i=0;i<o.length;i++){var a=this.getVisibleTerminal(o[i],!0),l=this.getVisibleTerminal(o[i],!1);(a==e&&l==t||!n&&a==t&&l==e)&&s.push(o[i])}return s},mxSwimlaneLayout.prototype.traverse=function(e,t,n,o,s,i,a,l){if(null!=e&&null!=o){var r=mxObjectIdentity.get(e);if(null!=o[r]||null!=a&&null==a[r]){if(null==s[r])for(var d=0;d<i.length;d++){var u=i[d];if(null!=u[r]){for(var g in u)s[g]=u[g];return i.splice(d,1),s}}}else{null==s[r]&&(s[r]=e),null==o[r]&&(o[r]=e),null!==a&&delete a[r];var f=this.getEdges(e),v=this.graph.model;for(d=0;d<f.length;d++){var x=this.getVisibleTerminal(f[d],!0),z=x==e;z&&(x=this.getVisibleTerminal(f[d],!1));var b=0;for(b=0;b<this.swimlanes.length&&!v.isAncestor(this.swimlanes[b],x);b++);b>=this.swimlanes.length||(b>l||(!t||z)&&b==l)&&(s=this.traverse(x,t,f[d],o,s,i,a,b))}}}return s},mxSwimlaneLayout.prototype.cycleStage=function(e){new mxSwimlaneOrdering(this).execute(e)},mxSwimlaneLayout.prototype.layeringStage=function(){this.model.initialRank(),this.model.fixRanks()},mxSwimlaneLayout.prototype.crossingStage=function(e){new mxMedianHybridCrossingReduction(this).execute(e)},mxSwimlaneLayout.prototype.placementStage=function(e,t){var n=new mxCoordinateAssignment(this,this.intraCellSpacing,this.interRankCellSpacing,this.orientation,e,this.parallelEdgeSpacing);return n.fineTuning=this.fineTuning,n.execute(t),n.limitX+this.interHierarchySpacing},exports.mxSwimlaneLayout=mxSwimlaneLayout,mxGraphModel.prototype=new mxEventSource,mxGraphModel.prototype.constructor=mxGraphModel,mxGraphModel.prototype.root=null,mxGraphModel.prototype.cells=null,mxGraphModel.prototype.maintainEdgeParent=!0,mxGraphModel.prototype.ignoreRelativeEdgeParent=!0,mxGraphModel.prototype.createIds=!0,mxGraphModel.prototype.prefix="",mxGraphModel.prototype.postfix="",mxGraphModel.prototype.nextId=0,mxGraphModel.prototype.currentEdit=null,mxGraphModel.prototype.updateLevel=0,mxGraphModel.prototype.endingUpdate=!1,mxGraphModel.prototype.clear=function(){this.setRoot(this.createRoot())},mxGraphModel.prototype.isCreateIds=function(){return this.createIds},mxGraphModel.prototype.setCreateIds=function(e){this.createIds=e},mxGraphModel.prototype.createRoot=function(){var e=new mxCell;return e.insert(new mxCell),e},mxGraphModel.prototype.getCell=function(e){return null!=this.cells?this.cells[e]:null},mxGraphModel.prototype.filterCells=function(e,t){var n=null;if(null!=e){n=[];for(var o=0;o<e.length;o++)t(e[o])&&n.push(e[o])}return n},mxGraphModel.prototype.getDescendants=function(e){return this.filterDescendants(null,e)},mxGraphModel.prototype.filterDescendants=function(e,t){var n=[];t=t||this.getRoot(),(null==e||e(t))&&n.push(t);for(var o=this.getChildCount(t),s=0;s<o;s++){var i=this.getChildAt(t,s);n=n.concat(this.filterDescendants(e,i))}return n},mxGraphModel.prototype.getRoot=function(e){var t=e||this.root;if(null!=e)for(;null!=e;)t=e,e=this.getParent(e);return t},mxGraphModel.prototype.setRoot=function(e){return this.execute(new mxRootChange(this,e)),e},mxGraphModel.prototype.rootChanged=function(e){var t=this.root;return this.root=e,this.nextId=0,this.cells=null,this.cellAdded(e),t},mxGraphModel.prototype.isRoot=function(e){return null!=e&&this.root==e},mxGraphModel.prototype.isLayer=function(e){return this.isRoot(this.getParent(e))},mxGraphModel.prototype.isAncestor=function(e,t){for(;null!=t&&t!=e;)t=this.getParent(t);return t==e},mxGraphModel.prototype.contains=function(e){return this.isAncestor(this.root,e)},mxGraphModel.prototype.getParent=function(e){return null!=e?e.getParent():null},mxGraphModel.prototype.add=function(e,t,n){if(t!=e&&null!=e&&null!=t){null==n&&(n=this.getChildCount(e));var o=e!=this.getParent(t);this.execute(new mxChildChange(this,e,t,n)),this.maintainEdgeParent&&o&&this.updateEdgeParents(t)}return t},mxGraphModel.prototype.cellAdded=function(e){if(null!=e){if(null==e.getId()&&this.createIds&&e.setId(this.createId(e)),null!=e.getId()){var t=this.getCell(e.getId());if(t!=e){for(;null!=t;)e.setId(this.createId(e)),t=this.getCell(e.getId());null==this.cells&&(this.cells=new Object),this.cells[e.getId()]=e}}mxUtils.isNumeric(e.getId())&&(this.nextId=Math.max(this.nextId,e.getId()));for(var n=this.getChildCount(e),o=0;o<n;o++)this.cellAdded(this.getChildAt(e,o))}},mxGraphModel.prototype.createId=function(e){var t=this.nextId;return this.nextId++,this.prefix+t+this.postfix},mxGraphModel.prototype.updateEdgeParents=function(e,t){t=t||this.getRoot(e);for(var n=this.getChildCount(e),o=0;o<n;o++){var s=this.getChildAt(e,o);this.updateEdgeParents(s,t)}var i=this.getEdgeCount(e),a=[];for(o=0;o<i;o++)a.push(this.getEdgeAt(e,o));for(o=0;o<a.length;o++){var l=a[o];this.isAncestor(t,l)&&this.updateEdgeParent(l,t)}},mxGraphModel.prototype.updateEdgeParent=function(e,t){for(var n=this.getTerminal(e,!0),o=this.getTerminal(e,!1),s=null;null!=n&&!this.isEdge(n)&&null!=n.geometry&&n.geometry.relative;)n=this.getParent(n);for(;null!=o&&this.ignoreRelativeEdgeParent&&!this.isEdge(o)&&null!=o.geometry&&o.geometry.relative;)o=this.getParent(o);if(this.isAncestor(t,n)&&this.isAncestor(t,o)&&null!=(s=n==o?this.getParent(n):this.getNearestCommonAncestor(n,o))&&(this.getParent(s)!=this.root||this.isAncestor(s,e))&&this.getParent(e)!=s){var i=this.getGeometry(e);if(null!=i){var a=this.getOrigin(this.getParent(e)),l=this.getOrigin(s),r=l.x-a.x,d=l.y-a.y;(i=i.clone()).translate(-r,-d),this.setGeometry(e,i)}this.add(s,e,this.getChildCount(s))}},mxGraphModel.prototype.getOrigin=function(e){var t=null;if(null!=e){if(t=this.getOrigin(this.getParent(e)),!this.isEdge(e)){var n=this.getGeometry(e);null!=n&&(t.x+=n.x,t.y+=n.y)}}else t=new mxPoint;return t},mxGraphModel.prototype.getNearestCommonAncestor=function(e,t){if(null!=e&&null!=t){var n=mxCellPath.create(t);if(null!=n&&n.length>0){var o=e,s=mxCellPath.create(o);if(n.length<s.length){o=t;var i=s;s=n,n=i}for(;null!=o;){var a=this.getParent(o);if(0==n.indexOf(s+mxCellPath.PATH_SEPARATOR)&&null!=a)return o;s=mxCellPath.getParentPath(s),o=a}}}return null},mxGraphModel.prototype.remove=function(e){return e==this.root?this.setRoot(null):null!=this.getParent(e)&&this.execute(new mxChildChange(this,null,e)),e},mxGraphModel.prototype.cellRemoved=function(e){if(null!=e&&null!=this.cells){for(var n=this.getChildCount(e)-1;n>=0;n--)this.cellRemoved(this.getChildAt(e,n));null!=this.cells&&null!=e.getId()&&delete this.cells[e.getId()]}},mxGraphModel.prototype.parentForCellChanged=function(e,t,n){var o=this.getParent(e);if(null!=t)t==o&&o.getIndex(e)==n||t.insert(e,n);else if(null!=o){var s=o.getIndex(e);o.remove(s)}return this.contains(o)||null==t?null==t&&this.cellRemoved(e):this.cellAdded(e),o},mxGraphModel.prototype.getChildCount=function(e){return null!=e?e.getChildCount():0},mxGraphModel.prototype.getChildAt=function(e,t){return null!=e?e.getChildAt(t):null},mxGraphModel.prototype.getChildren=function(e){return null!=e?e.children:null},mxGraphModel.prototype.getChildVertices=function(e){return this.getChildCells(e,!0,!1)},mxGraphModel.prototype.getChildEdges=function(e){return this.getChildCells(e,!1,!0)},mxGraphModel.prototype.getChildCells=function(e,t,n){t=null!=t&&t,n=null!=n&&n;for(var o=this.getChildCount(e),s=[],i=0;i<o;i++){var a=this.getChildAt(e,i);(!n&&!t||n&&this.isEdge(a)||t&&this.isVertex(a))&&s.push(a)}return s},mxGraphModel.prototype.getTerminal=function(e,t){return null!=e?e.getTerminal(t):null},mxGraphModel.prototype.setTerminal=function(e,t,n){var o=t!=this.getTerminal(e,n);return this.execute(new mxTerminalChange(this,e,t,n)),this.maintainEdgeParent&&o&&this.updateEdgeParent(e,this.getRoot()),t},mxGraphModel.prototype.setTerminals=function(e,t,n){this.beginUpdate();try{this.setTerminal(e,t,!0),this.setTerminal(e,n,!1)}finally{this.endUpdate()}},mxGraphModel.prototype.terminalForCellChanged=function(e,t,n){var o=this.getTerminal(e,n);return null!=t?t.insertEdge(e,n):null!=o&&o.removeEdge(e,n),o},mxGraphModel.prototype.getEdgeCount=function(e){return null!=e?e.getEdgeCount():0},mxGraphModel.prototype.getEdgeAt=function(e,t){return null!=e?e.getEdgeAt(t):null},mxGraphModel.prototype.getDirectedEdgeCount=function(e,t,n){for(var o=0,s=this.getEdgeCount(e),i=0;i<s;i++){var a=this.getEdgeAt(e,i);a!=n&&this.getTerminal(a,t)==e&&o++}return o},mxGraphModel.prototype.getConnections=function(e){return this.getEdges(e,!0,!0,!1)},mxGraphModel.prototype.getIncomingEdges=function(e){return this.getEdges(e,!0,!1,!1)},mxGraphModel.prototype.getOutgoingEdges=function(e){return this.getEdges(e,!1,!0,!1)},mxGraphModel.prototype.getEdges=function(e,t,n,o){t=null==t||t,n=null==n||n,o=null==o||o;for(var s=this.getEdgeCount(e),i=[],a=0;a<s;a++){var l=this.getEdgeAt(e,a),r=this.getTerminal(l,!0),d=this.getTerminal(l,!1);(o&&r==d||r!=d&&(t&&d==e||n&&r==e))&&i.push(l)}return i},mxGraphModel.prototype.getEdgesBetween=function(e,t,n){n=null!=n&&n;var o=this.getEdgeCount(e),s=this.getEdgeCount(t),i=e,a=o;s<o&&(a=s,i=t);for(var l=[],r=0;r<a;r++){var d=this.getEdgeAt(i,r),u=this.getTerminal(d,!0),g=this.getTerminal(d,!1);(u==e&&g==t||!n&&g==e&&u==t)&&l.push(d)}return l},mxGraphModel.prototype.getOpposites=function(e,t,n,o){n=null==n||n,o=null==o||o;var s=[];if(null!=e)for(var i=0;i<e.length;i++){var a=this.getTerminal(e[i],!0),l=this.getTerminal(e[i],!1);a==t&&null!=l&&l!=t&&o?s.push(l):l==t&&null!=a&&a!=t&&n&&s.push(a)}return s},mxGraphModel.prototype.getTopmostCells=function(e){for(var t=new mxDictionary,n=[],o=0;o<e.length;o++)t.put(e[o],!0);for(o=0;o<e.length;o++){for(var s=e[o],i=!0,a=this.getParent(s);null!=a;){if(t.get(a)){i=!1;break}a=this.getParent(a)}i&&n.push(s)}return n},mxGraphModel.prototype.isVertex=function(e){return null!=e&&e.isVertex()},mxGraphModel.prototype.isEdge=function(e){return null!=e&&e.isEdge()},mxGraphModel.prototype.isConnectable=function(e){return null!=e&&e.isConnectable()},mxGraphModel.prototype.getValue=function(e){return null!=e?e.getValue():null},mxGraphModel.prototype.setValue=function(e,t){return this.execute(new mxValueChange(this,e,t)),t},mxGraphModel.prototype.valueForCellChanged=function(e,t){return e.valueChanged(t)},mxGraphModel.prototype.getGeometry=function(e){return null!=e?e.getGeometry():null},mxGraphModel.prototype.setGeometry=function(e,t){return t!=this.getGeometry(e)&&this.execute(new mxGeometryChange(this,e,t)),t},mxGraphModel.prototype.geometryForCellChanged=function(e,t){var n=this.getGeometry(e);return e.setGeometry(t),n},mxGraphModel.prototype.getStyle=function(e){return null!=e?e.getStyle():null},mxGraphModel.prototype.setStyle=function(e,t){return t!=this.getStyle(e)&&this.execute(new mxStyleChange(this,e,t)),t},mxGraphModel.prototype.styleForCellChanged=function(e,t){var n=this.getStyle(e);return e.setStyle(t),n},mxGraphModel.prototype.isCollapsed=function(e){return null!=e&&e.isCollapsed()},mxGraphModel.prototype.setCollapsed=function(e,t){return t!=this.isCollapsed(e)&&this.execute(new mxCollapseChange(this,e,t)),t},mxGraphModel.prototype.collapsedStateForCellChanged=function(e,t){var n=this.isCollapsed(e);return e.setCollapsed(t),n},mxGraphModel.prototype.isVisible=function(e){return null!=e&&e.isVisible()},mxGraphModel.prototype.setVisible=function(e,t){return t!=this.isVisible(e)&&this.execute(new mxVisibleChange(this,e,t)),t},mxGraphModel.prototype.visibleStateForCellChanged=function(e,t){var n=this.isVisible(e);return e.setVisible(t),n},mxGraphModel.prototype.execute=function(e){e.execute(),this.beginUpdate(),this.currentEdit.add(e),this.fireEvent(new mxEventObject(mxEvent.EXECUTE,"change",e)),this.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",e)),this.endUpdate()},mxGraphModel.prototype.beginUpdate=function(){this.updateLevel++,this.fireEvent(new mxEventObject(mxEvent.BEGIN_UPDATE)),1==this.updateLevel&&this.fireEvent(new mxEventObject(mxEvent.START_EDIT))},mxGraphModel.prototype.endUpdate=function(){if(this.updateLevel--,0==this.updateLevel&&this.fireEvent(new mxEventObject(mxEvent.END_EDIT)),!this.endingUpdate){this.endingUpdate=0==this.updateLevel,this.fireEvent(new mxEventObject(mxEvent.END_UPDATE,"edit",this.currentEdit));try{if(this.endingUpdate&&!this.currentEdit.isEmpty()){this.fireEvent(new mxEventObject(mxEvent.BEFORE_UNDO,"edit",this.currentEdit));var e=this.currentEdit;this.currentEdit=this.createUndoableEdit(),e.notify(),this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",e))}}finally{this.endingUpdate=!1}}},mxGraphModel.prototype.createUndoableEdit=function(){var e=new mxUndoableEdit(this,!0);return e.notify=function(){e.source.fireEvent(new mxEventObject(mxEvent.CHANGE,"edit",e,"changes",e.changes)),e.source.fireEvent(new mxEventObject(mxEvent.NOTIFY,"edit",e,"changes",e.changes))},e},mxGraphModel.prototype.mergeChildren=function(e,t,n){n=null==n||n,this.beginUpdate();try{var o=new Object;for(var s in this.mergeChildrenImpl(e,t,n,o),o){var i=o[s],a=this.getTerminal(i,!0);null!=a&&(a=o[mxCellPath.create(a)],this.setTerminal(i,a,!0)),null!=(a=this.getTerminal(i,!1))&&(a=o[mxCellPath.create(a)],this.setTerminal(i,a,!1))}}finally{this.endUpdate()}},mxGraphModel.prototype.mergeChildrenImpl=function(e,t,n,o){this.beginUpdate();try{for(var s=e.getChildCount(),i=0;i<s;i++){var a=e.getChildAt(i);if("function"==typeof a.getId){var l=a.getId(),r=null==l||this.isEdge(a)&&n?null:this.getCell(l);if(null==r){var d=a.clone();d.setId(l),d.setTerminal(a.getTerminal(!0),!0),d.setTerminal(a.getTerminal(!1),!1),r=t.insert(d),this.cellAdded(r)}o[mxCellPath.create(a)]=r,this.mergeChildrenImpl(a,r,n,o)}}}finally{this.endUpdate()}},mxGraphModel.prototype.getParents=function(e){var t=[];if(null!=e)for(var n=new mxDictionary,o=0;o<e.length;o++){var s=this.getParent(e[o]);null==s||n.get(s)||(n.put(s,!0),t.push(s))}return t},mxGraphModel.prototype.cloneCell=function(e){return null!=e?this.cloneCells([e],!0)[0]:null},mxGraphModel.prototype.cloneCells=function(e,t,n){n=null!=n?n:new Object;for(var o=[],s=0;s<e.length;s++)o.push(null!=e[s]?this.cloneCellImpl(e[s],n,t):null);for(s=0;s<o.length;s++)null!=o[s]&&this.restoreClone(o[s],e[s],n);return o},mxGraphModel.prototype.cloneCellImpl=function(e,t,n){var o=this.cellCloned(e);if(t[mxObjectIdentity.get(e)]=o,n)for(var s=this.getChildCount(e),i=0;i<s;i++){var a=this.cloneCellImpl(this.getChildAt(e,i),t,!0);o.insert(a)}return o},mxGraphModel.prototype.cellCloned=function(e){return e.clone()},mxGraphModel.prototype.restoreClone=function(e,t,n){var o=this.getTerminal(t,!0);null!=o&&null!=(s=n[mxObjectIdentity.get(o)])&&s.insertEdge(e,!0);var s,i=this.getTerminal(t,!1);null!=i&&null!=(s=n[mxObjectIdentity.get(i)])&&s.insertEdge(e,!1);for(var a=this.getChildCount(e),l=0;l<a;l++)this.restoreClone(this.getChildAt(e,l),this.getChildAt(t,l),n)},mxRootChange.prototype.execute=function(){this.root=this.previous,this.previous=this.model.rootChanged(this.previous)},mxChildChange.prototype.execute=function(){var e=this.model.getParent(this.child),t=null!=e?e.getIndex(this.child):0;null==this.previous&&this.connect(this.child,!1),e=this.model.parentForCellChanged(this.child,this.previous,this.previousIndex),null!=this.previous&&this.connect(this.child,!0),this.parent=this.previous,this.previous=e,this.index=this.previousIndex,this.previousIndex=t},mxChildChange.prototype.connect=function(e,t){t=null==t||t;var n=e.getTerminal(!0),o=e.getTerminal(!1);null!=n&&this.model.terminalForCellChanged(e,t?n:null,!0),null!=o&&this.model.terminalForCellChanged(e,t?o:null,!1),e.setTerminal(n,!0),e.setTerminal(o,!1);for(var s=this.model.getChildCount(e),i=0;i<s;i++)this.connect(this.model.getChildAt(e,i),t)},mxTerminalChange.prototype.execute=function(){this.terminal=this.previous,this.previous=this.model.terminalForCellChanged(this.cell,this.previous,this.source)},mxValueChange.prototype.execute=function(){this.value=this.previous,this.previous=this.model.valueForCellChanged(this.cell,this.previous)},mxStyleChange.prototype.execute=function(){this.style=this.previous,this.previous=this.model.styleForCellChanged(this.cell,this.previous)},mxGeometryChange.prototype.execute=function(){this.geometry=this.previous,this.previous=this.model.geometryForCellChanged(this.cell,this.previous)},mxCollapseChange.prototype.execute=function(){this.collapsed=this.previous,this.previous=this.model.collapsedStateForCellChanged(this.cell,this.previous)},mxVisibleChange.prototype.execute=function(){this.visible=this.previous,this.previous=this.model.visibleStateForCellChanged(this.cell,this.previous)},mxCellAttributeChange.prototype.execute=function(){var e=this.cell.getAttribute(this.attribute);null==this.previous?this.cell.value.removeAttribute(this.attribute):this.cell.setAttribute(this.attribute,this.previous),this.previous=e},exports.mxGraphModel=mxGraphModel,mxCell.prototype.id=null,mxCell.prototype.value=null,mxCell.prototype.geometry=null,mxCell.prototype.style=null,mxCell.prototype.vertex=!1,mxCell.prototype.edge=!1,mxCell.prototype.connectable=!0,mxCell.prototype.visible=!0,mxCell.prototype.collapsed=!1,mxCell.prototype.parent=null,mxCell.prototype.source=null,mxCell.prototype.target=null,mxCell.prototype.children=null,mxCell.prototype.edges=null,mxCell.prototype.mxTransient=["id","value","parent","source","target","children","edges"],mxCell.prototype.getId=function(){return this.id},mxCell.prototype.setId=function(e){this.id=e},mxCell.prototype.getValue=function(){return this.value},mxCell.prototype.setValue=function(e){this.value=e},mxCell.prototype.valueChanged=function(e){var t=this.getValue();return this.setValue(e),t},mxCell.prototype.getGeometry=function(){return this.geometry},mxCell.prototype.setGeometry=function(e){this.geometry=e},mxCell.prototype.getStyle=function(){return this.style},mxCell.prototype.setStyle=function(e){this.style=e},mxCell.prototype.isVertex=function(){return 0!=this.vertex},mxCell.prototype.setVertex=function(e){this.vertex=e},mxCell.prototype.isEdge=function(){return 0!=this.edge},mxCell.prototype.setEdge=function(e){this.edge=e},mxCell.prototype.isConnectable=function(){return 0!=this.connectable},mxCell.prototype.setConnectable=function(e){this.connectable=e},mxCell.prototype.isVisible=function(){return 0!=this.visible},mxCell.prototype.setVisible=function(e){this.visible=e},mxCell.prototype.isCollapsed=function(){return 0!=this.collapsed},mxCell.prototype.setCollapsed=function(e){this.collapsed=e},mxCell.prototype.getParent=function(){return this.parent},mxCell.prototype.setParent=function(e){this.parent=e},mxCell.prototype.getTerminal=function(e){return e?this.source:this.target},mxCell.prototype.setTerminal=function(e,t){return t?this.source=e:this.target=e,e},mxCell.prototype.getChildCount=function(){return null==this.children?0:this.children.length},mxCell.prototype.getIndex=function(e){return mxUtils.indexOf(this.children,e)},mxCell.prototype.getChildAt=function(e){return null==this.children?null:this.children[e]},mxCell.prototype.insert=function(e,t){return null!=e&&(null==t&&(t=this.getChildCount(),e.getParent()==this&&t--),e.removeFromParent(),e.setParent(this),null==this.children?(this.children=[],this.children.push(e)):this.children.splice(t,0,e)),e},mxCell.prototype.remove=function(e){var t=null;return null!=this.children&&e>=0&&null!=(t=this.getChildAt(e))&&(this.children.splice(e,1),t.setParent(null)),t},mxCell.prototype.removeFromParent=function(){if(null!=this.parent){var e=this.parent.getIndex(this);this.parent.remove(e)}},mxCell.prototype.getEdgeCount=function(){return null==this.edges?0:this.edges.length},mxCell.prototype.getEdgeIndex=function(e){return mxUtils.indexOf(this.edges,e)},mxCell.prototype.getEdgeAt=function(e){return null==this.edges?null:this.edges[e]},mxCell.prototype.insertEdge=function(e,t){return null!=e&&(e.removeFromTerminal(t),e.setTerminal(this,t),(null==this.edges||e.getTerminal(!t)!=this||mxUtils.indexOf(this.edges,e)<0)&&(null==this.edges&&(this.edges=[]),this.edges.push(e))),e},mxCell.prototype.removeEdge=function(e,t){if(null!=e){if(e.getTerminal(!t)!=this&&null!=this.edges){var n=this.getEdgeIndex(e);n>=0&&this.edges.splice(n,1)}e.setTerminal(null,t)}return e},mxCell.prototype.removeFromTerminal=function(e){var t=this.getTerminal(e);null!=t&&t.removeEdge(this,e)},mxCell.prototype.getAttribute=function(e,t){var n=this.getValue();return(null!=n&&n.nodeType==mxConstants.NODETYPE_ELEMENT?n.getAttribute(e):null)||t},mxCell.prototype.setAttribute=function(e,t){var n=this.getValue();null!=n&&n.nodeType==mxConstants.NODETYPE_ELEMENT&&n.setAttribute(e,t)},mxCell.prototype.clone=function(){var e=mxUtils.clone(this,this.mxTransient);return e.setValue(this.cloneValue()),e},mxCell.prototype.cloneValue=function(){var e=this.getValue();return null!=e&&("function"==typeof e.clone?e=e.clone():isNaN(e.nodeType)||(e=e.cloneNode(!0))),e},exports.mxCell=mxCell,mxGeometry.prototype=new mxRectangle,mxGeometry.prototype.constructor=mxGeometry,mxGeometry.prototype.TRANSLATE_CONTROL_POINTS=!0,mxGeometry.prototype.alternateBounds=null,mxGeometry.prototype.sourcePoint=null,mxGeometry.prototype.targetPoint=null,mxGeometry.prototype.points=null,mxGeometry.prototype.offset=null,mxGeometry.prototype.relative=!1,mxGeometry.prototype.swap=function(){if(null!=this.alternateBounds){var e=new mxRectangle(this.x,this.y,this.width,this.height);this.x=this.alternateBounds.x,this.y=this.alternateBounds.y,this.width=this.alternateBounds.width,this.height=this.alternateBounds.height,this.alternateBounds=e}},mxGeometry.prototype.getTerminalPoint=function(e){return e?this.sourcePoint:this.targetPoint},mxGeometry.prototype.setTerminalPoint=function(e,t){return t?this.sourcePoint=e:this.targetPoint=e,e},mxGeometry.prototype.rotate=function(e,t){var n=mxUtils.toRadians(e),o=Math.cos(n),s=Math.sin(n);if(!this.relative){var i=new mxPoint(this.getCenterX(),this.getCenterY()),a=mxUtils.getRotatedPoint(i,o,s,t);this.x=Math.round(a.x-this.width/2),this.y=Math.round(a.y-this.height/2)}if(null!=this.sourcePoint&&(a=mxUtils.getRotatedPoint(this.sourcePoint,o,s,t),this.sourcePoint.x=Math.round(a.x),this.sourcePoint.y=Math.round(a.y)),null!=this.targetPoint&&(a=mxUtils.getRotatedPoint(this.targetPoint,o,s,t),this.targetPoint.x=Math.round(a.x),this.targetPoint.y=Math.round(a.y)),null!=this.points)for(var l=0;l<this.points.length;l++)null!=this.points[l]&&(a=mxUtils.getRotatedPoint(this.points[l],o,s,t),this.points[l].x=Math.round(a.x),this.points[l].y=Math.round(a.y))},mxGeometry.prototype.translate=function(e,t){if(e=parseFloat(e),t=parseFloat(t),this.relative||(this.x=parseFloat(this.x)+e,this.y=parseFloat(this.y)+t),null!=this.sourcePoint&&(this.sourcePoint.x=parseFloat(this.sourcePoint.x)+e,this.sourcePoint.y=parseFloat(this.sourcePoint.y)+t),null!=this.targetPoint&&(this.targetPoint.x=parseFloat(this.targetPoint.x)+e,this.targetPoint.y=parseFloat(this.targetPoint.y)+t),this.TRANSLATE_CONTROL_POINTS&&null!=this.points)for(var n=0;n<this.points.length;n++)null!=this.points[n]&&(this.points[n].x=parseFloat(this.points[n].x)+e,this.points[n].y=parseFloat(this.points[n].y)+t)},mxGeometry.prototype.scale=function(e,t,n){if(e=parseFloat(e),t=parseFloat(t),null!=this.sourcePoint&&(this.sourcePoint.x=parseFloat(this.sourcePoint.x)*e,this.sourcePoint.y=parseFloat(this.sourcePoint.y)*t),null!=this.targetPoint&&(this.targetPoint.x=parseFloat(this.targetPoint.x)*e,this.targetPoint.y=parseFloat(this.targetPoint.y)*t),null!=this.points)for(var o=0;o<this.points.length;o++)null!=this.points[o]&&(this.points[o].x=parseFloat(this.points[o].x)*e,this.points[o].y=parseFloat(this.points[o].y)*t);this.relative||(this.x=parseFloat(this.x)*e,this.y=parseFloat(this.y)*t,n&&(t=e=Math.min(e,t)),this.width=parseFloat(this.width)*e,this.height=parseFloat(this.height)*t)},mxGeometry.prototype.equals=function(e){return mxRectangle.prototype.equals.apply(this,arguments)&&this.relative==e.relative&&(null==this.sourcePoint&&null==e.sourcePoint||null!=this.sourcePoint&&this.sourcePoint.equals(e.sourcePoint))&&(null==this.targetPoint&&null==e.targetPoint||null!=this.targetPoint&&this.targetPoint.equals(e.targetPoint))&&(null==this.points&&null==e.points||null!=this.points&&mxUtils.equalPoints(this.points,e.points))&&(null==this.alternateBounds&&null==e.alternateBounds||null!=this.alternateBounds&&this.alternateBounds.equals(e.alternateBounds))&&(null==this.offset&&null==e.offset||null!=this.offset&&this.offset.equals(e.offset))},exports.mxGeometry=mxGeometry;var mxCellPath={PATH_SEPARATOR:".",create:function(e){var t="";if(null!=e)for(var n=e.getParent();null!=n;)t=n.getIndex(e)+mxCellPath.PATH_SEPARATOR+t,n=(e=n).getParent();var s=t.length;return s>1&&(t=t.substring(0,s-1)),t},getParentPath:function(e){if(null!=e){var t=e.lastIndexOf(mxCellPath.PATH_SEPARATOR);if(t>=0)return e.substring(0,t);if(e.length>0)return""}return null},resolve:function(e,t){var n=e;if(null!=t)for(var o=t.split(mxCellPath.PATH_SEPARATOR),s=0;s<o.length;s++)n=n.getChildAt(parseInt(o[s]));return n},compare:function(e,t){for(var n=Math.min(e.length,t.length),o=0,s=0;s<n;s++)if(e[s]!=t[s]){o=0==e[s].length||0==t[s].length?e[s]==t[s]?0:e[s]>t[s]?1:-1:(i=parseInt(e[s]))==(a=parseInt(t[s]))?0:i>a?1:-1;break}var i,a;return 0==o&&(i=e.length)!=(a=t.length)&&(o=i>a?1:-1),o}};exports.mxCellPath=mxCellPath;var mxPerimeter={RectanglePerimeter:function(e,t,n,o){var s=e.getCenterX(),i=e.getCenterY(),r=Math.atan2(n.y-i,n.x-s),d=new mxPoint(0,0),u=Math.PI,f=Math.PI/2-r,v=Math.atan2(e.height,e.width);return r<-u+v||r>u-v?(d.x=e.x,d.y=i-e.width*Math.tan(r)/2):r<-v?(d.y=e.y,d.x=s-e.height*Math.tan(f)/2):r<v?(d.x=e.x+e.width,d.y=i+e.width*Math.tan(r)/2):(d.y=e.y+e.height,d.x=s+e.height*Math.tan(f)/2),o&&(n.x>=e.x&&n.x<=e.x+e.width?d.x=n.x:n.y>=e.y&&n.y<=e.y+e.height&&(d.y=n.y),n.x<e.x?d.x=e.x:n.x>e.x+e.width&&(d.x=e.x+e.width),n.y<e.y?d.y=e.y:n.y>e.y+e.height&&(d.y=e.y+e.height)),d},EllipsePerimeter:function(e,t,n,o){var s=e.x,i=e.y,a=e.width/2,l=e.height/2,r=s+a,d=i+l,u=n.x,g=n.y,f=parseInt(u-r),v=parseInt(g-d);if(0==f&&0!=v)return new mxPoint(r,d+l*v/Math.abs(v));if(0==f&&0==v)return new mxPoint(u,g);if(o){if(g>=i&&g<=i+e.height){var x=g-d,z=Math.sqrt(a*a*(1-x*x/(l*l)))||0;return u<=s&&(z=-z),new mxPoint(r+z,g)}if(u>=s&&u<=s+e.width)return z=u-r,x=Math.sqrt(l*l*(1-z*z/(a*a)))||0,g<=i&&(x=-x),new mxPoint(u,d+x)}var b=v/f,_=d-b*r,H=a*a*b*b+l*l,T=-2*r*H,V=Math.sqrt(T*T-4*H*(a*a*b*b*r*r+l*l*r*r-a*a*l*l)),Y=(-T+V)/(2*H),J=(-T-V)/(2*H),K=b*Y+_,re=b*J+_,he=0,Q=0;return Math.sqrt(Math.pow(Y-u,2)+Math.pow(K-g,2))<Math.sqrt(Math.pow(J-u,2)+Math.pow(re-g,2))?(he=Y,Q=K):(he=J,Q=re),new mxPoint(he,Q)},RhombusPerimeter:function(e,t,n,o){var s=e.x,i=e.y,a=e.width,l=e.height,r=s+a/2,d=i+l/2,u=n.x,g=n.y;if(r==u)return new mxPoint(r,d>g?i:i+l);if(d==g)return new mxPoint(r>u?s:s+a,d);var f=r,v=d;return o&&(u>=s&&u<=s+a?f=u:g>=i&&g<=i+l&&(v=g)),mxUtils.intersection(u,g,f,v,r,g<d?i:i+l,u<r?s:s+a,d)},TrianglePerimeter:function(e,t,n,o){var s=null!=t?t.style[mxConstants.STYLE_DIRECTION]:null,i=s==mxConstants.DIRECTION_NORTH||s==mxConstants.DIRECTION_SOUTH,a=e.x,l=e.y,r=e.width,d=e.height,u=a+r/2,g=l+d/2,f=new mxPoint(a,l),v=new mxPoint(a+r,g),x=new mxPoint(a,l+d);s==mxConstants.DIRECTION_NORTH?(f=x,v=new mxPoint(u,l),x=new mxPoint(a+r,l+d)):s==mxConstants.DIRECTION_SOUTH?(v=new mxPoint(u,l+d),x=new mxPoint(a+r,l)):s==mxConstants.DIRECTION_WEST&&(f=new mxPoint(a+r,l),v=new mxPoint(a,g),x=new mxPoint(a+r,l+d));var z=n.x-u,b=n.y-g,_=i?Math.atan2(z,b):Math.atan2(b,z),H=i?Math.atan2(r,d):Math.atan2(d,r),L=null;if(s==mxConstants.DIRECTION_NORTH||s==mxConstants.DIRECTION_WEST?_>-H&&_<H:_<-Math.PI+H||_>Math.PI-H)L=o&&(i&&n.x>=f.x&&n.x<=x.x||!i&&n.y>=f.y&&n.y<=x.y)?i?new mxPoint(n.x,f.y):new mxPoint(f.x,n.y):s==mxConstants.DIRECTION_NORTH?new mxPoint(a+r/2+d*Math.tan(_)/2,l+d):s==mxConstants.DIRECTION_SOUTH?new mxPoint(a+r/2-d*Math.tan(_)/2,l):s==mxConstants.DIRECTION_WEST?new mxPoint(a+r,l+d/2+r*Math.tan(_)/2):new mxPoint(a,l+d/2-r*Math.tan(_)/2);else{if(o){var V=new mxPoint(u,g);n.y>=l&&n.y<=l+d?(V.x=i?u:s==mxConstants.DIRECTION_WEST?a+r:a,V.y=n.y):n.x>=a&&n.x<=a+r&&(V.x=n.x,V.y=i?s==mxConstants.DIRECTION_NORTH?l+d:l:g),z=n.x-V.x,b=n.y-V.y,u=V.x,g=V.y}L=i&&n.x<=a+r/2||!i&&n.y<=l+d/2?mxUtils.intersection(n.x,n.y,u,g,f.x,f.y,v.x,v.y):mxUtils.intersection(n.x,n.y,u,g,v.x,v.y,x.x,x.y)}return null==L&&(L=new mxPoint(u,g)),L},HexagonPerimeter:function(e,t,n,o){var s=e.x,i=e.y,a=e.width,l=e.height,r=e.getCenterX(),d=e.getCenterY(),u=n.x,g=n.y,x=-Math.atan2(g-d,u-r),z=Math.PI,b=Math.PI/2,_=new mxPoint(r,d),H=null!=t?mxUtils.getValue(t.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST,T=H==mxConstants.DIRECTION_NORTH||H==mxConstants.DIRECTION_SOUTH,L=new mxPoint,V=new mxPoint;if((u<s&&g<i||u<s&&g>i+l||u>s+a&&g<i||u>s+a&&g>i+l)&&(o=!1),o){if(T){if(u==r){if(g<=i)return new mxPoint(r,i);if(g>=i+l)return new mxPoint(r,i+l)}else if(u<s){if(g==i+l/4)return new mxPoint(s,i+l/4);if(g==i+3*l/4)return new mxPoint(s,i+3*l/4)}else if(u>s+a){if(g==i+l/4)return new mxPoint(s+a,i+l/4);if(g==i+3*l/4)return new mxPoint(s+a,i+3*l/4)}else if(u==s){if(g<d)return new mxPoint(s,i+l/4);if(g>d)return new mxPoint(s,i+3*l/4)}else if(u==s+a){if(g<d)return new mxPoint(s+a,i+l/4);if(g>d)return new mxPoint(s+a,i+3*l/4)}if(g==i)return new mxPoint(r,i);if(g==i+l)return new mxPoint(r,i+l);u<r?g>i+l/4&&g<i+3*l/4?(L=new mxPoint(s,i),V=new mxPoint(s,i+l)):g<i+l/4?(L=new mxPoint(s-Math.floor(.5*a),i+Math.floor(.5*l)),V=new mxPoint(s+a,i-Math.floor(.25*l))):g>i+3*l/4&&(L=new mxPoint(s-Math.floor(.5*a),i+Math.floor(.5*l)),V=new mxPoint(s+a,i+Math.floor(1.25*l))):u>r&&(g>i+l/4&&g<i+3*l/4?(L=new mxPoint(s+a,i),V=new mxPoint(s+a,i+l)):g<i+l/4?(L=new mxPoint(s,i-Math.floor(.25*l)),V=new mxPoint(s+Math.floor(1.5*a),i+Math.floor(.5*l))):g>i+3*l/4&&(L=new mxPoint(s+Math.floor(1.5*a),i+Math.floor(.5*l)),V=new mxPoint(s,i+Math.floor(1.25*l))))}else{if(g==d){if(u<=s)return new mxPoint(s,i+l/2);if(u>=s+a)return new mxPoint(s+a,i+l/2)}else if(g<i){if(u==s+a/4)return new mxPoint(s+a/4,i);if(u==s+3*a/4)return new mxPoint(s+3*a/4,i)}else if(g>i+l){if(u==s+a/4)return new mxPoint(s+a/4,i+l);if(u==s+3*a/4)return new mxPoint(s+3*a/4,i+l)}else if(g==i){if(u<r)return new mxPoint(s+a/4,i);if(u>r)return new mxPoint(s+3*a/4,i)}else if(g==i+l){if(u<r)return new mxPoint(s+a/4,i+l);if(g>d)return new mxPoint(s+3*a/4,i+l)}if(u==s)return new mxPoint(s,d);if(u==s+a)return new mxPoint(s+a,d);g<d?u>s+a/4&&u<s+3*a/4?(L=new mxPoint(s,i),V=new mxPoint(s+a,i)):u<s+a/4?(L=new mxPoint(s-Math.floor(.25*a),i+l),V=new mxPoint(s+Math.floor(.5*a),i-Math.floor(.5*l))):u>s+3*a/4&&(L=new mxPoint(s+Math.floor(.5*a),i-Math.floor(.5*l)),V=new mxPoint(s+Math.floor(1.25*a),i+l)):g>d&&(u>s+a/4&&u<s+3*a/4?(L=new mxPoint(s,i+l),V=new mxPoint(s+a,i+l)):u<s+a/4?(L=new mxPoint(s-Math.floor(.25*a),i),V=new mxPoint(s+Math.floor(.5*a),i+Math.floor(1.5*l))):u>s+3*a/4&&(L=new mxPoint(s+Math.floor(.5*a),i+Math.floor(1.5*l)),V=new mxPoint(s+Math.floor(1.25*a),i)))}var Y=r,J=d;u>=s&&u<=s+a?(Y=u,J=g<d?i+l:i):g>=i&&g<=i+l&&(J=g,Y=u<r?s+a:s),_=mxUtils.intersection(Y,J,n.x,n.y,L.x,L.y,V.x,V.y)}else{if(T){if(x==(K=Math.atan2(l/4,a/2)))return new mxPoint(s+a,i+Math.floor(.25*l));if(x==b)return new mxPoint(s+Math.floor(.5*a),i);if(x==z-K)return new mxPoint(s,i+Math.floor(.25*l));if(x==-K)return new mxPoint(s+a,i+Math.floor(.75*l));if(x==-b)return new mxPoint(s+Math.floor(.5*a),i+l);if(x==-z+K)return new mxPoint(s,i+Math.floor(.75*l));x<K&&x>-K?(L=new mxPoint(s+a,i),V=new mxPoint(s+a,i+l)):x>K&&x<b?(L=new mxPoint(s,i-Math.floor(.25*l)),V=new mxPoint(s+Math.floor(1.5*a),i+Math.floor(.5*l))):x>b&&x<z-K?(L=new mxPoint(s-Math.floor(.5*a),i+Math.floor(.5*l)),V=new mxPoint(s+a,i-Math.floor(.25*l))):x>z-K&&x<=z||x<-z+K&&x>=-z?(L=new mxPoint(s,i),V=new mxPoint(s,i+l)):x<-K&&x>-b?(L=new mxPoint(s+Math.floor(1.5*a),i+Math.floor(.5*l)),V=new mxPoint(s,i+Math.floor(1.25*l))):x<-b&&x>-z+K&&(L=new mxPoint(s-Math.floor(.5*a),i+Math.floor(.5*l)),V=new mxPoint(s+a,i+Math.floor(1.25*l)))}else{var K;if(x==(K=Math.atan2(l/2,a/4)))return new mxPoint(s+Math.floor(.75*a),i);if(x==z-K)return new mxPoint(s+Math.floor(.25*a),i);if(x==z||x==-z)return new mxPoint(s,i+Math.floor(.5*l));if(0==x)return new mxPoint(s+a,i+Math.floor(.5*l));if(x==-K)return new mxPoint(s+Math.floor(.75*a),i+l);if(x==-z+K)return new mxPoint(s+Math.floor(.25*a),i+l);x>0&&x<K?(L=new mxPoint(s+Math.floor(.5*a),i-Math.floor(.5*l)),V=new mxPoint(s+Math.floor(1.25*a),i+l)):x>K&&x<z-K?(L=new mxPoint(s,i),V=new mxPoint(s+a,i)):x>z-K&&x<z?(L=new mxPoint(s-Math.floor(.25*a),i+l),V=new mxPoint(s+Math.floor(.5*a),i-Math.floor(.5*l))):x<0&&x>-K?(L=new mxPoint(s+Math.floor(.5*a),i+Math.floor(1.5*l)),V=new mxPoint(s+Math.floor(1.25*a),i)):x<-K&&x>-z+K?(L=new mxPoint(s,i+l),V=new mxPoint(s+a,i+l)):x<-z+K&&x>-z&&(L=new mxPoint(s-Math.floor(.25*a),i),V=new mxPoint(s+Math.floor(.5*a),i+Math.floor(1.5*l)))}_=mxUtils.intersection(r,d,n.x,n.y,L.x,L.y,V.x,V.y)}return null==_?new mxPoint(r,d):_}};exports.mxPerimeter=mxPerimeter,mxPrintPreview.prototype.graph=null,mxPrintPreview.prototype.pageFormat=null,mxPrintPreview.prototype.scale=null,mxPrintPreview.prototype.border=0,mxPrintPreview.prototype.marginTop=0,mxPrintPreview.prototype.marginBottom=0,mxPrintPreview.prototype.x0=0,mxPrintPreview.prototype.y0=0,mxPrintPreview.prototype.autoOrigin=!0,mxPrintPreview.prototype.printOverlays=!1,mxPrintPreview.prototype.printControls=!1,mxPrintPreview.prototype.printBackgroundImage=!1,mxPrintPreview.prototype.backgroundColor="#ffffff",mxPrintPreview.prototype.borderColor=null,mxPrintPreview.prototype.title=null,mxPrintPreview.prototype.pageSelector=null,mxPrintPreview.prototype.wnd=null,mxPrintPreview.prototype.targetWindow=null,mxPrintPreview.prototype.pageCount=0,mxPrintPreview.prototype.clipping=!0,mxPrintPreview.prototype.getWindow=function(){return this.wnd},mxPrintPreview.prototype.getDoctype=function(){var e="";return 5==document.documentMode?e='<meta http-equiv="X-UA-Compatible" content="IE=5">':8==document.documentMode?e='<meta http-equiv="X-UA-Compatible" content="IE=8">':document.documentMode>8&&(e='\x3c!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--\x3e'),e},mxPrintPreview.prototype.open=function(e,t){var n=this.graph.cellRenderer.initializeOverlay,o=null;try{if(this.printOverlays&&(this.graph.cellRenderer.initializeOverlay=function(K,re){re.init(K.view.getDrawPane())}),this.printControls&&(this.graph.cellRenderer.initControl=function(K,re,X,ne){re.dialect=K.view.graph.dialect,re.init(K.view.getDrawPane())}),null==this.wnd){this.wnd=null!=t?t:window.open();var s=this.wnd.document;if(null==t){var i=this.getDoctype();null!=i&&i.length>0&&s.writeln(i),mxClient.IS_VML?s.writeln('<html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office">'):("CSS1Compat"===document.compatMode&&s.writeln("<!DOCTYPE html>"),s.writeln("<html>")),s.writeln("<head>"),this.writeHead(s,e),s.writeln("</head>"),s.writeln('<body class="mxPage">')}var a=this.graph.getGraphBounds().clone(),l=this.graph.getView().getScale(),r=l/this.scale,d=this.graph.getView().getTranslate();this.autoOrigin||(this.x0-=d.x*this.scale,this.y0-=d.y*this.scale,a.width+=a.x,a.height+=a.y,a.x=0,a.y=0,this.border=0);var u=this.pageFormat.width-2*this.border,g=this.pageFormat.height-2*this.border;this.pageFormat.height+=this.marginTop+this.marginBottom,a.width/=r,a.height/=r;var f=Math.max(1,Math.ceil((a.width+this.x0)/u)),v=Math.max(1,Math.ceil((a.height+this.y0)/g));this.pageCount=f*v;var x=mxUtils.bind(this,function(){if(this.pageSelector&&(v>1||f>1)){var K=this.createPageSelector(v,f);if(s.body.appendChild(K),mxClient.IS_IE&&null==s.documentMode||5==s.documentMode||8==s.documentMode||7==s.documentMode){K.style.position="absolute";var re=function(){K.style.top=(s.body.scrollTop||s.documentElement.scrollTop)+10+"px"};mxEvent.addListener(this.wnd,"scroll",function(X){re()}),mxEvent.addListener(this.wnd,"resize",function(X){re()})}}}),z=mxUtils.bind(this,function(K,re){if(null!=this.borderColor&&(K.style.borderColor=this.borderColor,K.style.borderStyle="solid",K.style.borderWidth="1px"),K.style.background=this.backgroundColor,re&&(K.style.pageBreakAfter="always"),mxClient.IS_IE||document.documentMode>=11||mxClient.IS_EDGE?(s.writeln(K.outerHTML),K.parentNode.removeChild(K)):(K.parentNode.removeChild(K),s.body.appendChild(K)),re&&null==t){var X=s.createElement("hr");X.className="mxPageBreak",s.body.appendChild(X)}}),b=this.getCoverPages(this.pageFormat.width,this.pageFormat.height);if(null!=b)for(var _=0;_<b.length;_++)z(b[_],!0);var H=this.getAppendices(this.pageFormat.width,this.pageFormat.height);for(_=0;_<v;_++)for(var T=_*g/this.scale-this.y0/this.scale+(a.y-d.y*l)/l,L=0;L<f;L++){if(null==this.wnd)return null;var V=L*u/this.scale-this.x0/this.scale+(a.x-d.x*l)/l,Y=_*f+L+1,J=new mxRectangle(V,T,u,g);(o=this.renderPage(this.pageFormat.width,this.pageFormat.height,0,0,mxUtils.bind(this,function(re){this.addGraphFragment(-V,-T,this.scale,Y,re,J),this.printBackgroundImage&&this.insertBackgroundImage(re,-V,-T)}),Y)).setAttribute("id","mxPage-"+Y),z(o,null!=H||_<v-1||L<f-1)}if(null!=H)for(_=0;_<H.length;_++)z(H[_],_<H.length);null==t&&(this.writePostfix(s),s.writeln("</body>"),s.writeln("</html>"),s.close(),x(),mxEvent.release(s.body))}this.wnd.focus()}catch(K){null!=o&&null!=o.parentNode&&o.parentNode.removeChild(o),console.log("e",K)}finally{this.graph.cellRenderer.initializeOverlay=n}return this.wnd},mxPrintPreview.prototype.writeHead=function(e,t){null!=this.title&&e.writeln("<title>"+this.title+"</title>"),mxClient.IS_VML&&e.writeln('<style type="text/css">v\\:*{behavior:url(#default#VML)}o\\:*{behavior:url(#default#VML)}</style>'),mxClient.link("stylesheet",mxClient.basePath+"/css/common.css",e),e.writeln('<style type="text/css">'),e.writeln("@media print {"),e.writeln("  table.mxPageSelector { display: none; }"),e.writeln("  hr.mxPageBreak { display: none; }"),e.writeln("}"),e.writeln("@media screen {"),e.writeln("  table.mxPageSelector { position: fixed; right: 10px; top: 10px;font-family: Arial; font-size:10pt; border: solid 1px darkgray;background: white; border-collapse:collapse; }"),e.writeln("  table.mxPageSelector td { border: solid 1px gray; padding:4px; }"),e.writeln("  body.mxPage { background: gray; }"),e.writeln("}"),null!=t&&e.writeln(t),e.writeln("</style>")},mxPrintPreview.prototype.writePostfix=function(e){},mxPrintPreview.prototype.createPageSelector=function(e,t){var n=this.wnd.document,o=n.createElement("table");o.className="mxPageSelector",o.setAttribute("border","0");for(var s=n.createElement("tbody"),i=0;i<e;i++){for(var a=n.createElement("tr"),l=0;l<t;l++){var r=i*t+l+1,d=n.createElement("td"),u=n.createElement("a");u.setAttribute("href","#mxPage-"+r),!mxClient.IS_NS||mxClient.IS_SF||mxClient.IS_GC||u.setAttribute("onclick","var page = document.getElementById('mxPage-"+r+"');page.scrollIntoView(true);event.preventDefault();"),mxUtils.write(u,r,n),d.appendChild(u),a.appendChild(d)}s.appendChild(a)}return o.appendChild(s),o},mxPrintPreview.prototype.renderPage=function(e,t,n,o,s,i){var a=this.wnd.document,l=document.createElement("div"),r=null;try{if(0!=n||0!=o){l.style.position="relative",l.style.width=e+"px",l.style.height=t+"px",l.style.pageBreakInside="avoid",(d=document.createElement("div")).style.position="relative",d.style.top=this.border+"px",d.style.left=this.border+"px",d.style.width=e-2*this.border+"px",d.style.height=t-2*this.border+"px",d.style.overflow="hidden";var u=document.createElement("div");u.style.position="relative",u.style.marginLeft=n+"px",u.style.marginTop=o+"px",8==a.documentMode&&(d.style.position="absolute",u.style.position="absolute"),10==a.documentMode&&(u.style.width="100%",u.style.height="100%"),d.appendChild(u),l.appendChild(d),document.body.appendChild(l),r=u}else{var d;l.style.width=e+"px",l.style.height=t+"px",l.style.overflow="hidden",l.style.pageBreakInside="avoid",8==a.documentMode&&(l.style.position="relative"),(d=document.createElement("div")).style.width=e-2*this.border+"px",d.style.height=t-2*this.border+"px",d.style.overflow="hidden",!mxClient.IS_IE||null!=a.documentMode&&5!=a.documentMode&&8!=a.documentMode&&7!=a.documentMode?(d.style.top=this.border+"px",d.style.left=this.border+"px"):(d.style.marginTop=this.border+"px",d.style.marginLeft=this.border+"px"),this.graph.dialect==mxConstants.DIALECT_VML&&(d.style.position="absolute"),l.appendChild(d),document.body.appendChild(l),r=d}}catch(g){throw l.parentNode.removeChild(l),l=null,g}return s(r),l},mxPrintPreview.prototype.getRoot=function(){var e=this.graph.view.currentRoot;return null==e&&(e=this.graph.getModel().getRoot()),e},mxPrintPreview.prototype.addGraphFragment=function(e,t,n,o,s,i){var a=this.graph.getView(),l=this.graph.container;this.graph.container=s;var r=a.getCanvas(),d=a.getBackgroundPane(),u=a.getDrawPane(),g=a.getOverlayPane();this.graph.dialect==mxConstants.DIALECT_SVG?a.createSvg():this.graph.dialect==mxConstants.DIALECT_VML?a.createVml():a.createHtml();var f=a.isEventsEnabled();a.setEventsEnabled(!1);var v=this.graph.isEnabled();this.graph.setEnabled(!1);var x=a.getTranslate();a.translate=new mxPoint(e,t);var z=this.graph.cellRenderer.redraw,b=a.states,_=a.scale;if(this.clipping){var H=new mxRectangle((i.x+x.x)*_,(i.y+x.y)*_,i.width*_/n,i.height*_/n);this.graph.cellRenderer.redraw=function(re,X,ne){if(null!=re){var he=b.get(re.cell);if(null!=he){var Q=a.getBoundingBox(he,!1);if(null!=Q&&!mxUtils.intersects(H,Q))return}}z.apply(this,arguments)}}var T=null;try{var L=[this.getRoot()];T=new mxTemporaryCellStates(a,n,L)}finally{if(mxClient.IS_IE)a.overlayPane.innerHTML="",a.canvas.style.overflow="hidden",a.canvas.style.position="relative",a.canvas.style.top=this.marginTop+"px",a.canvas.style.width=i.width+"px",a.canvas.style.height=i.height+"px";else for(var V=s.firstChild;null!=V;){var Y=V.nextSibling,J=V.nodeName.toLowerCase();"svg"==J?(V.style.overflow="hidden",V.style.position="relative",V.style.top=this.marginTop+"px",V.setAttribute("width",i.width),V.setAttribute("height",i.height),V.style.width="",V.style.height=""):"default"!=V.style.cursor&&"div"!=J&&V.parentNode.removeChild(V),V=Y}if(this.printBackgroundImage){var K=s.getElementsByTagName("svg");K.length>0&&(K[0].style.position="absolute")}a.overlayPane.parentNode.removeChild(a.overlayPane),this.graph.setEnabled(v),this.graph.container=l,this.graph.cellRenderer.redraw=z,a.canvas=r,a.backgroundPane=d,a.drawPane=u,a.overlayPane=g,a.translate=x,T.destroy(),a.setEventsEnabled(f)}},mxPrintPreview.prototype.insertBackgroundImage=function(e,t,n){var o=this.graph.backgroundImage;if(null!=o){var s=document.createElement("img");s.style.position="absolute",s.style.marginLeft=Math.round(t*this.scale)+"px",s.style.marginTop=Math.round(n*this.scale)+"px",s.setAttribute("width",Math.round(this.scale*o.width)),s.setAttribute("height",Math.round(this.scale*o.height)),s.src=o.src,e.insertBefore(s,e.firstChild)}},mxPrintPreview.prototype.getCoverPages=function(){return null},mxPrintPreview.prototype.getAppendices=function(){return null},mxPrintPreview.prototype.print=function(e){var t=this.open(e);null!=t&&t.print()},mxPrintPreview.prototype.close=function(){null!=this.wnd&&(this.wnd.close(),this.wnd=null)},exports.mxPrintPreview=mxPrintPreview,mxStylesheet.prototype.createDefaultVertexStyle=function(){var e=new Object;return e[mxConstants.STYLE_SHAPE]=mxConstants.SHAPE_RECTANGLE,e[mxConstants.STYLE_PERIMETER]=mxPerimeter.RectanglePerimeter,e[mxConstants.STYLE_VERTICAL_ALIGN]=mxConstants.ALIGN_MIDDLE,e[mxConstants.STYLE_ALIGN]=mxConstants.ALIGN_CENTER,e[mxConstants.STYLE_FILLCOLOR]="#C3D9FF",e[mxConstants.STYLE_STROKECOLOR]="#6482B9",e[mxConstants.STYLE_FONTCOLOR]="#774400",e},mxStylesheet.prototype.createDefaultEdgeStyle=function(){var e=new Object;return e[mxConstants.STYLE_SHAPE]=mxConstants.SHAPE_CONNECTOR,e[mxConstants.STYLE_ENDARROW]=mxConstants.ARROW_CLASSIC,e[mxConstants.STYLE_VERTICAL_ALIGN]=mxConstants.ALIGN_MIDDLE,e[mxConstants.STYLE_ALIGN]=mxConstants.ALIGN_CENTER,e[mxConstants.STYLE_STROKECOLOR]="#6482B9",e[mxConstants.STYLE_FONTCOLOR]="#446299",e},mxStylesheet.prototype.putDefaultVertexStyle=function(e){this.putCellStyle("defaultVertex",e)},mxStylesheet.prototype.putDefaultEdgeStyle=function(e){this.putCellStyle("defaultEdge",e)},mxStylesheet.prototype.getDefaultVertexStyle=function(){return this.styles.defaultVertex},mxStylesheet.prototype.getDefaultEdgeStyle=function(){return this.styles.defaultEdge},mxStylesheet.prototype.putCellStyle=function(e,t){this.styles[e]=t},mxStylesheet.prototype.getCellStyle=function(e,t){var n=t;if(null!=e&&e.length>0){var o=e.split(";");n=null!=n&&";"!=e.charAt(0)?mxUtils.clone(n):new Object;for(var s=0;s<o.length;s++){var i=o[s],a=i.indexOf("=");if(a>=0){var l=i.substring(0,a),r=i.substring(a+1);r==mxConstants.NONE?delete n[l]:n[l]=mxUtils.isNumeric(r)?parseFloat(r):r}else{var d=this.styles[i];if(null!=d)for(var l in d)n[l]=d[l]}}}return n},exports.mxStylesheet=mxStylesheet,mxCellState.prototype=new mxRectangle,mxCellState.prototype.constructor=mxCellState,mxCellState.prototype.view=null,mxCellState.prototype.cell=null,mxCellState.prototype.style=null,mxCellState.prototype.invalid=!0,mxCellState.prototype.origin=null,mxCellState.prototype.absolutePoints=null,mxCellState.prototype.absoluteOffset=null,mxCellState.prototype.visibleSourceState=null,mxCellState.prototype.visibleTargetState=null,mxCellState.prototype.terminalDistance=0,mxCellState.prototype.length=0,mxCellState.prototype.segments=null,mxCellState.prototype.shape=null,mxCellState.prototype.text=null,mxCellState.prototype.unscaledWidth=null,mxCellState.prototype.getPerimeterBounds=function(e,t){if(e=e||0,t=null!=t?t:new mxRectangle(this.x,this.y,this.width,this.height),null!=this.shape&&null!=this.shape.stencil&&"fixed"==this.shape.stencil.aspect){var n=this.shape.stencil.computeAspect(this.style,t.x,t.y,t.width,t.height);t.x=n.x,t.y=n.y,t.width=this.shape.stencil.w0*n.width,t.height=this.shape.stencil.h0*n.height}return 0!=e&&t.grow(e),t},mxCellState.prototype.setAbsoluteTerminalPoint=function(e,t){t?(null==this.absolutePoints&&(this.absolutePoints=[]),0==this.absolutePoints.length?this.absolutePoints.push(e):this.absolutePoints[0]=e):null==this.absolutePoints?(this.absolutePoints=[],this.absolutePoints.push(null),this.absolutePoints.push(e)):1==this.absolutePoints.length?this.absolutePoints.push(e):this.absolutePoints[this.absolutePoints.length-1]=e},mxCellState.prototype.setCursor=function(e){null!=this.shape&&this.shape.setCursor(e),null!=this.text&&this.text.setCursor(e)},mxCellState.prototype.getVisibleTerminal=function(e){var t=this.getVisibleTerminalState(e);return null!=t?t.cell:null},mxCellState.prototype.getVisibleTerminalState=function(e){return e?this.visibleSourceState:this.visibleTargetState},mxCellState.prototype.setVisibleTerminalState=function(e,t){t?this.visibleSourceState=e:this.visibleTargetState=e},mxCellState.prototype.getCellBounds=function(){return this.cellBounds},mxCellState.prototype.getPaintBounds=function(){return this.paintBounds},mxCellState.prototype.updateCachedBounds=function(){var e=this.view.translate,t=this.view.scale;this.cellBounds=new mxRectangle(this.x/t-e.x,this.y/t-e.y,this.width/t,this.height/t),this.paintBounds=mxRectangle.fromRectangle(this.cellBounds),null!=this.shape&&this.shape.isPaintBoundsInverted()&&this.paintBounds.rotate90()},mxCellState.prototype.setState=function(e){this.view=e.view,this.cell=e.cell,this.style=e.style,this.absolutePoints=e.absolutePoints,this.origin=e.origin,this.absoluteOffset=e.absoluteOffset,this.boundingBox=e.boundingBox,this.terminalDistance=e.terminalDistance,this.segments=e.segments,this.length=e.length,this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this.unscaledWidth=e.unscaledWidth},mxCellState.prototype.clone=function(){var e=new mxCellState(this.view,this.cell,this.style);if(null!=this.absolutePoints){e.absolutePoints=[];for(var t=0;t<this.absolutePoints.length;t++)e.absolutePoints[t]=this.absolutePoints[t].clone()}return null!=this.origin&&(e.origin=this.origin.clone()),null!=this.absoluteOffset&&(e.absoluteOffset=this.absoluteOffset.clone()),null!=this.boundingBox&&(e.boundingBox=this.boundingBox.clone()),e.terminalDistance=this.terminalDistance,e.segments=this.segments,e.length=this.length,e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e.unscaledWidth=this.unscaledWidth,e},mxCellState.prototype.destroy=function(){this.view.graph.cellRenderer.destroy(this)},exports.mxCellState=mxCellState,mxGraphSelectionModel.prototype=new mxEventSource,mxGraphSelectionModel.prototype.constructor=mxGraphSelectionModel,mxGraphSelectionModel.prototype.doneResource="none"!=mxClient.language?"done":"",mxGraphSelectionModel.prototype.updatingSelectionResource="none"!=mxClient.language?"updatingSelection":"",mxGraphSelectionModel.prototype.graph=null,mxGraphSelectionModel.prototype.singleSelection=!1,mxGraphSelectionModel.prototype.isSingleSelection=function(){return this.singleSelection},mxGraphSelectionModel.prototype.setSingleSelection=function(e){this.singleSelection=e},mxGraphSelectionModel.prototype.isSelected=function(e){return null!=e&&mxUtils.indexOf(this.cells,e)>=0},mxGraphSelectionModel.prototype.isEmpty=function(){return 0==this.cells.length},mxGraphSelectionModel.prototype.clear=function(){this.changeSelection(null,this.cells)},mxGraphSelectionModel.prototype.setCell=function(e){null!=e&&this.setCells([e])},mxGraphSelectionModel.prototype.setCells=function(e){if(null!=e){this.singleSelection&&(e=[this.getFirstSelectableCell(e)]);for(var t=[],n=0;n<e.length;n++)this.graph.isCellSelectable(e[n])&&t.push(e[n]);this.changeSelection(t,this.cells)}},mxGraphSelectionModel.prototype.getFirstSelectableCell=function(e){if(null!=e)for(var t=0;t<e.length;t++)if(this.graph.isCellSelectable(e[t]))return e[t];return null},mxGraphSelectionModel.prototype.addCell=function(e){null!=e&&this.addCells([e])},mxGraphSelectionModel.prototype.addCells=function(e){if(null!=e){var t=null;this.singleSelection&&(t=this.cells,e=[this.getFirstSelectableCell(e)]);for(var n=[],o=0;o<e.length;o++)!this.isSelected(e[o])&&this.graph.isCellSelectable(e[o])&&n.push(e[o]);this.changeSelection(n,t)}},mxGraphSelectionModel.prototype.removeCell=function(e){null!=e&&this.removeCells([e])},mxGraphSelectionModel.prototype.removeCells=function(e){if(null!=e){for(var t=[],n=0;n<e.length;n++)this.isSelected(e[n])&&t.push(e[n]);this.changeSelection(null,t)}},mxGraphSelectionModel.prototype.changeSelection=function(e,t){if(null!=e&&e.length>0&&null!=e[0]||null!=t&&t.length>0&&null!=t[0]){var n=new mxSelectionChange(this,e,t);n.execute();var o=new mxUndoableEdit(this,!1);o.add(n),this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",o))}},mxGraphSelectionModel.prototype.cellAdded=function(e){null==e||this.isSelected(e)||this.cells.push(e)},mxGraphSelectionModel.prototype.cellRemoved=function(e){if(null!=e){var t=mxUtils.indexOf(this.cells,e);t>=0&&this.cells.splice(t,1)}},mxSelectionChange.prototype.execute=function(){var e=mxLog.enter("mxSelectionChange.execute");if(window.status=mxResources.get(this.selectionModel.updatingSelectionResource)||this.selectionModel.updatingSelectionResource,null!=this.removed)for(var t=0;t<this.removed.length;t++)this.selectionModel.cellRemoved(this.removed[t]);if(null!=this.added)for(t=0;t<this.added.length;t++)this.selectionModel.cellAdded(this.added[t]);var n=this.added;this.added=this.removed,this.removed=n,window.status=mxResources.get(this.selectionModel.doneResource)||this.selectionModel.doneResource,mxLog.leave("mxSelectionChange.execute",e),this.selectionModel.fireEvent(new mxEventObject(mxEvent.CHANGE,"added",this.added,"removed",this.removed))},exports.mxGraphSelectionModel=mxGraphSelectionModel,mxCellEditor.prototype.graph=null,mxCellEditor.prototype.textarea=null,mxCellEditor.prototype.editingCell=null,mxCellEditor.prototype.trigger=null,mxCellEditor.prototype.modified=!1,mxCellEditor.prototype.autoSize=!0,mxCellEditor.prototype.selectText=!0,mxCellEditor.prototype.emptyLabelText=mxClient.IS_FF?"<br>":"",mxCellEditor.prototype.escapeCancelsEditing=!0,mxCellEditor.prototype.textNode="",mxCellEditor.prototype.zIndex=5,mxCellEditor.prototype.minResize=new mxRectangle(0,20),mxCellEditor.prototype.wordWrapPadding=mxClient.IS_QUIRKS?2:mxClient.IS_IE11?0:1,mxCellEditor.prototype.blurEnabled=!1,mxCellEditor.prototype.initialValue=null,mxCellEditor.prototype.init=function(){this.textarea=document.createElement("div"),this.textarea.className="mxCellEditor mxPlainTextEditor",this.textarea.contentEditable=!0,this.installListeners(this.textarea)},mxCellEditor.prototype.applyValue=function(e,t){this.graph.labelChanged(e.cell,t,this.trigger)},mxCellEditor.prototype.getInitialValue=function(e,t){var n=mxUtils.htmlEntities(this.graph.getEditingValue(e.cell,t),!1);return mxClient.IS_QUIRKS||8==document.documentMode||9==document.documentMode||10==document.documentMode||(n=mxUtils.replaceTrailingNewlines(n,"<div><br></div>")),n.replace(/\n/g,"<br>")},mxCellEditor.prototype.getCurrentValue=function(e){var t=mxUtils.extractTextWithWhitespace(this.textarea.childNodes);return t.length>0&&"\n"==t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t},mxCellEditor.prototype.installListeners=function(e){mxEvent.addListener(e,"blur",mxUtils.bind(this,function(i){this.blurEnabled&&this.focusLost(i)})),mxEvent.addListener(e,"keydown",mxUtils.bind(this,function(i){mxEvent.isConsumed(i)||(this.isStopEditingEvent(i)?(this.graph.stopEditing(!1),mxEvent.consume(i)):27==i.keyCode&&(this.graph.stopEditing(this.escapeCancelsEditing||mxEvent.isShiftDown(i)),mxEvent.consume(i)))})),this.changeHandler=mxUtils.bind(this,function(i){null!=this.editingCell&&null==this.graph.getView().getState(this.editingCell)&&this.stopEditing(!0)}),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler);var t=mxUtils.bind(this,function(i){null!=this.editingCell&&this.clearOnChange&&e.innerHTML==this.getEmptyLabelText()&&(!mxClient.IS_FF||8!=i.keyCode&&46!=i.keyCode)&&(this.clearOnChange=!1,e.innerHTML="")});mxEvent.addListener(e,"keypress",t),mxEvent.addListener(e,"paste",t);var n=mxUtils.bind(this,function(i){null!=this.editingCell&&(0==this.textarea.innerHTML.length||"<br>"==this.textarea.innerHTML?(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=this.textarea.innerHTML.length>0):this.clearOnChange=!1)});mxEvent.addListener(e,mxClient.IS_IE11||mxClient.IS_IE?"keyup":"input",n),mxEvent.addListener(e,"cut",n),mxEvent.addListener(e,"paste",n);var o=mxClient.IS_IE11||mxClient.IS_IE?"keydown":"input",s=mxUtils.bind(this,function(i){null!=this.editingCell&&this.autoSize&&!mxEvent.isConsumed(i)&&(null!=this.resizeThread&&window.clearTimeout(this.resizeThread),this.resizeThread=window.setTimeout(mxUtils.bind(this,function(){this.resizeThread=null,this.resize()}),0))});mxEvent.addListener(e,o,s),document.documentMode>=9?(mxEvent.addListener(e,"DOMNodeRemoved",s),mxEvent.addListener(e,"DOMNodeInserted",s)):(mxEvent.addListener(e,"cut",s),mxEvent.addListener(e,"paste",s))},mxCellEditor.prototype.isStopEditingEvent=function(e){return 113==e.keyCode||this.graph.isEnterStopsCellEditing()&&13==e.keyCode&&!mxEvent.isControlDown(e)&&!mxEvent.isShiftDown(e)},mxCellEditor.prototype.isEventSource=function(e){return mxEvent.getSource(e)==this.textarea},mxCellEditor.prototype.resize=function(){var e=this.graph.getView().getState(this.editingCell);if(null==e)this.stopEditing(!0);else{var t=this.graph.getModel().isEdge(e.cell),n=this.graph.getView().scale,o=null;if(this.autoSize&&"fill"!=e.style[mxConstants.STYLE_OVERFLOW]){var s=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_WIDTH,null);if(null==(o=null!=e.text?e.text.margin:null)&&(o=mxUtils.getAlignmentAsPoint(mxUtils.getValue(e.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER),mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE))),t){if(this.bounds=new mxRectangle(e.absoluteOffset.x,e.absoluteOffset.y,0,0),null!=s){var i=(parseFloat(s)+2)*n;this.bounds.width=i,this.bounds.x+=o.x*i}}else{var a=mxRectangle.fromRectangle(e),l=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),r=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE);if(a=null!=e.shape&&l==mxConstants.ALIGN_CENTER&&r==mxConstants.ALIGN_MIDDLE?e.shape.getLabelBounds(a):a,null!=s&&(a.width=parseFloat(s)*n),!e.view.graph.cellRenderer.legacySpacing||"width"!=e.style[mxConstants.STYLE_OVERFLOW]){var d=parseInt(e.style[mxConstants.STYLE_SPACING]||2)*n,u=(parseInt(e.style[mxConstants.STYLE_SPACING_TOP]||0)+mxText.prototype.baseSpacingTop)*n+d,g=(parseInt(e.style[mxConstants.STYLE_SPACING_RIGHT]||0)+mxText.prototype.baseSpacingRight)*n+d,f=(parseInt(e.style[mxConstants.STYLE_SPACING_BOTTOM]||0)+mxText.prototype.baseSpacingBottom)*n+d,v=(parseInt(e.style[mxConstants.STYLE_SPACING_LEFT]||0)+mxText.prototype.baseSpacingLeft)*n+d;l=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),r=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),a=new mxRectangle(a.x+v,a.y+u,a.width-(l==mxConstants.ALIGN_CENTER&&null==s?v+g:0),a.height-(r==mxConstants.ALIGN_MIDDLE?u+f:0))}this.bounds=new mxRectangle(a.x+e.absoluteOffset.x,a.y+e.absoluteOffset.y,a.width,a.height)}this.graph.isWrapping(e.cell)&&(this.bounds.width>=2||this.bounds.height>=2)&&this.textarea.innerHTML!=this.getEmptyLabelText()?(this.textarea.style.wordWrap=mxConstants.WORD_WRAP,this.textarea.style.whiteSpace="normal",i=Math.round(this.bounds.width/(document,n))+this.wordWrapPadding,this.textarea.style.width=i+"px",this.textarea.scrollWidth>i&&(this.textarea.style.width=this.textarea.scrollWidth+"px")):(this.textarea.style.whiteSpace="nowrap",this.textarea.style.width=""),8==document.documentMode&&(this.textarea.style.zoom="1",this.textarea.style.height="auto");var x=this.textarea.scrollWidth,z=this.textarea.scrollHeight;8==document.documentMode?(this.textarea.style.left=Math.max(0,Math.ceil((this.bounds.x-o.x*(this.bounds.width-(x+1)*n)+x*(n-1)*0+2*(o.x+.5))/n))+"px",this.textarea.style.top=Math.max(0,Math.ceil((this.bounds.y-o.y*(this.bounds.height-(z+.5)*n)+z*(n-1)*0+1*Math.abs(o.y+.5))/n))+"px",this.textarea.style.width=Math.round(x*n)+"px",this.textarea.style.height=Math.round(z*n)+"px"):mxClient.IS_QUIRKS?(this.textarea.style.left=Math.max(0,Math.ceil(this.bounds.x-o.x*(this.bounds.width-(x+1)*n)+x*(n-1)*0+2*(o.x+.5)))+"px",this.textarea.style.top=Math.max(0,Math.ceil(this.bounds.y-o.y*(this.bounds.height-(z+.5)*n)+z*(n-1)*0+1*Math.abs(o.y+.5)))+"px"):(this.textarea.style.left=Math.max(0,Math.round(this.bounds.x-o.x*(this.bounds.width-2))+1)+"px",this.textarea.style.top=Math.max(0,Math.round(this.bounds.y-o.y*(this.bounds.height-4)+(-1==o.y?3:0))+1)+"px")}else this.bounds=this.getEditorBounds(e),this.textarea.style.width=Math.round(this.bounds.width/n)+"px",this.textarea.style.height=Math.round(this.bounds.height/n)+"px",8==document.documentMode||mxClient.IS_QUIRKS?(this.textarea.style.left=Math.round(this.bounds.x)+"px",this.textarea.style.top=Math.round(this.bounds.y)+"px"):(this.textarea.style.left=Math.max(0,Math.round(this.bounds.x+1))+"px",this.textarea.style.top=Math.max(0,Math.round(this.bounds.y+1))+"px"),this.graph.isWrapping(e.cell)&&(this.bounds.width>=2||this.bounds.height>=2)&&this.textarea.innerHTML!=this.getEmptyLabelText()?(this.textarea.style.wordWrap=mxConstants.WORD_WRAP,this.textarea.style.whiteSpace="normal","fill"!=e.style[mxConstants.STYLE_OVERFLOW]&&(this.textarea.style.width=Math.round(this.bounds.width/n)+this.wordWrapPadding+"px")):(this.textarea.style.whiteSpace="nowrap","fill"!=e.style[mxConstants.STYLE_OVERFLOW]&&(this.textarea.style.width=""));mxClient.IS_VML?this.textarea.style.zoom=n:(mxUtils.setPrefixedStyle(this.textarea.style,"transformOrigin","0px 0px"),mxUtils.setPrefixedStyle(this.textarea.style,"transform","scale("+n+","+n+")"+(null==o?"":" translate("+100*o.x+"%,"+100*o.y+"%)")))}},mxCellEditor.prototype.focusLost=function(){this.stopEditing(!this.graph.isInvokesStopCellEditing())},mxCellEditor.prototype.getBackgroundColor=function(e){return null},mxCellEditor.prototype.startEditing=function(e,t){null==this.textarea&&this.init(),null!=this.graph.tooltipHandler&&this.graph.tooltipHandler.hideTooltip(),this.stopEditing(!0);var n=this.graph.getView().getState(e);if(null!=n){var o=(this.graph.getView(),mxUtils.getValue(n.style,mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE)),s=mxUtils.getValue(n.style,mxConstants.STYLE_FONTFAMILY,mxConstants.DEFAULT_FONTFAMILY),i=mxUtils.getValue(n.style,mxConstants.STYLE_FONTCOLOR,"black"),a=mxUtils.getValue(n.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_LEFT),l=(mxUtils.getValue(n.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD,r=(mxUtils.getValue(n.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC,d=(mxUtils.getValue(n.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE;this.textarea.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?Math.round(o*mxConstants.LINE_HEIGHT)+"px":mxConstants.LINE_HEIGHT,this.textarea.style.backgroundColor=this.getBackgroundColor(n),this.textarea.style.textDecoration=d?"underline":"",this.textarea.style.fontWeight=l?"bold":"normal",this.textarea.style.fontStyle=r?"italic":"",this.textarea.style.fontSize=Math.round(o)+"px",this.textarea.style.zIndex=this.zIndex,this.textarea.style.fontFamily=s,this.textarea.style.textAlign=a,this.textarea.style.outline="none",this.textarea.style.color=i;var u=this.textDirection=mxUtils.getValue(n.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION);if(u==mxConstants.TEXT_DIRECTION_AUTO&&(null==n||null==n.text||n.text.dialect==mxConstants.DIALECT_STRICTHTML||mxUtils.isNode(n.text.value)||(u=n.text.getAutoDirection())),u==mxConstants.TEXT_DIRECTION_LTR||u==mxConstants.TEXT_DIRECTION_RTL?this.textarea.setAttribute("dir",u):this.textarea.removeAttribute("dir"),this.textarea.innerHTML=this.getInitialValue(n,t)||"",this.initialValue=this.textarea.innerHTML,0==this.textarea.innerHTML.length||"<br>"==this.textarea.innerHTML?(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=!0):this.clearOnChange=this.textarea.innerHTML==this.getEmptyLabelText(),this.graph.container.appendChild(this.textarea),this.editingCell=e,this.trigger=t,this.textNode=null,null!=n.text&&this.isHideLabel(n)&&(this.textNode=n.text.node,this.textNode.style.visibility="hidden"),this.autoSize&&(this.graph.model.isEdge(n.cell)||"fill"!=n.style[mxConstants.STYLE_OVERFLOW])&&window.setTimeout(mxUtils.bind(this,function(){this.resize()}),0),this.resize(),null!=this.textarea)try{this.textarea.focus(),this.isSelectText()&&this.textarea.innerHTML.length>0&&(this.textarea.innerHTML!=this.getEmptyLabelText()||!this.clearOnChange)&&document.execCommand("selectAll",!1,null)}catch(g){}}},mxCellEditor.prototype.isSelectText=function(){return this.selectText},mxCellEditor.prototype.stopEditing=function(e){if(e=e||!1,null!=this.editingCell){null!=this.textNode&&(this.textNode.style.visibility="visible",this.textNode=null);var t=e?null:this.graph.view.getState(this.editingCell),n=this.initialValue;if(this.initialValue=null,this.editingCell=null,this.trigger=null,this.bounds=null,this.textarea.blur(),null!=this.textarea.parentNode&&this.textarea.parentNode.removeChild(this.textarea),this.clearOnChange&&this.textarea.innerHTML==this.getEmptyLabelText()&&(this.textarea.innerHTML="",this.clearOnChange=!1),null!=t&&this.textarea.innerHTML!=n){var o=this.getCurrentValue(t);null!=o&&this.applyValue(t,o)}}},mxCellEditor.prototype.isHideLabel=function(e){return!0},mxCellEditor.prototype.getMinimumSize=function(e){var t=this.graph.getView().scale;return new mxRectangle(0,0,null==e.text?30:e.text.size*t+20,"left"==this.textarea.style.textAlign?120:40)},mxCellEditor.prototype.getEditorBounds=function(e){var t=this.graph.getModel().isEdge(e.cell),n=this.graph.getView().scale,o=this.getMinimumSize(e),s=o.width,i=o.height,a=null;if(!t&&e.view.graph.cellRenderer.legacySpacing&&"fill"==e.style[mxConstants.STYLE_OVERFLOW])a=e.shape.getLabelBounds(mxRectangle.fromRectangle(e));else{var l=parseInt(e.style[mxConstants.STYLE_SPACING]||0)*n,r=(parseInt(e.style[mxConstants.STYLE_SPACING_TOP]||0)+mxText.prototype.baseSpacingTop)*n+l,d=(parseInt(e.style[mxConstants.STYLE_SPACING_RIGHT]||0)+mxText.prototype.baseSpacingRight)*n+l,u=(parseInt(e.style[mxConstants.STYLE_SPACING_BOTTOM]||0)+mxText.prototype.baseSpacingBottom)*n+l,g=(parseInt(e.style[mxConstants.STYLE_SPACING_LEFT]||0)+mxText.prototype.baseSpacingLeft)*n+l;a=new mxRectangle(e.x,e.y,Math.max(s,e.width-g-d),Math.max(i,e.height-r-u));var f=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),v=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE);if(a=null!=e.shape&&f==mxConstants.ALIGN_CENTER&&v==mxConstants.ALIGN_MIDDLE?e.shape.getLabelBounds(a):a,t?(a.x=e.absoluteOffset.x,a.y=e.absoluteOffset.y,null!=e.text&&null!=e.text.boundingBox&&(e.text.boundingBox.x>0&&(a.x=e.text.boundingBox.x),e.text.boundingBox.y>0&&(a.y=e.text.boundingBox.y))):null!=e.text&&null!=e.text.boundingBox&&(a.x=Math.min(a.x,e.text.boundingBox.x),a.y=Math.min(a.y,e.text.boundingBox.y)),a.x+=g,a.y+=r,null!=e.text&&null!=e.text.boundingBox&&(t?(a.width=Math.max(s,e.text.boundingBox.width),a.height=Math.max(i,e.text.boundingBox.height)):(a.width=Math.max(a.width,e.text.boundingBox.width),a.height=Math.max(a.height,e.text.boundingBox.height))),this.graph.getModel().isVertex(e.cell)){var x=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER);x==mxConstants.ALIGN_LEFT?a.x-=e.width:x==mxConstants.ALIGN_RIGHT&&(a.x+=e.width);var z=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE);z==mxConstants.ALIGN_TOP?a.y-=e.height:z==mxConstants.ALIGN_BOTTOM&&(a.y+=e.height)}}return new mxRectangle(Math.round(a.x),Math.round(a.y),Math.round(a.width),Math.round(a.height))},mxCellEditor.prototype.getEmptyLabelText=function(e){return this.emptyLabelText},mxCellEditor.prototype.getEditingCell=function(){return this.editingCell},mxCellEditor.prototype.destroy=function(){null!=this.textarea&&(mxEvent.release(this.textarea),null!=this.textarea.parentNode&&this.textarea.parentNode.removeChild(this.textarea),this.textarea=null,null!=this.changeHandler&&(this.graph.getModel().removeListener(this.changeHandler),this.changeHandler=null),this.zoomHandler&&(this.graph.view.removeListener(this.zoomHandler),this.zoomHandler=null))},exports.mxCellEditor=mxCellEditor,mxCellRenderer.prototype.defaultEdgeShape=mxConnector,mxCellRenderer.prototype.defaultVertexShape=mxRectangleShape,mxCellRenderer.prototype.defaultTextShape=mxText,mxCellRenderer.prototype.legacyControlPosition=!0,mxCellRenderer.prototype.legacySpacing=!0,mxCellRenderer.prototype.defaultShapes=new Object,mxCellRenderer.prototype.antiAlias=!0,mxCellRenderer.prototype.forceControlClickHandler=!1,mxCellRenderer.registerShape=function(e,t){mxCellRenderer.prototype.defaultShapes[e]=t},mxCellRenderer.registerShape(mxConstants.SHAPE_RECTANGLE,mxRectangleShape),mxCellRenderer.registerShape(mxConstants.SHAPE_ELLIPSE,mxEllipse),mxCellRenderer.registerShape(mxConstants.SHAPE_RHOMBUS,mxRhombus),mxCellRenderer.registerShape(mxConstants.SHAPE_CYLINDER,mxCylinder),mxCellRenderer.registerShape(mxConstants.SHAPE_CONNECTOR,mxConnector),mxCellRenderer.registerShape(mxConstants.SHAPE_ACTOR,mxActor),mxCellRenderer.registerShape(mxConstants.SHAPE_TRIANGLE,mxTriangle),mxCellRenderer.registerShape(mxConstants.SHAPE_HEXAGON,mxHexagon),mxCellRenderer.registerShape(mxConstants.SHAPE_CLOUD,mxCloud),mxCellRenderer.registerShape(mxConstants.SHAPE_LINE,mxLine),mxCellRenderer.registerShape(mxConstants.SHAPE_ARROW,mxArrow),mxCellRenderer.registerShape(mxConstants.SHAPE_ARROW_CONNECTOR,mxArrowConnector),mxCellRenderer.registerShape(mxConstants.SHAPE_DOUBLE_ELLIPSE,mxDoubleEllipse),mxCellRenderer.registerShape(mxConstants.SHAPE_SWIMLANE,mxSwimlane),mxCellRenderer.registerShape(mxConstants.SHAPE_IMAGE,mxImageShape),mxCellRenderer.registerShape(mxConstants.SHAPE_LABEL,mxLabel),mxCellRenderer.prototype.initializeShape=function(e){e.shape.dialect=e.view.graph.dialect,this.configureShape(e),e.shape.init(e.view.getDrawPane())},mxCellRenderer.prototype.createShape=function(e){var t=null;if(null!=e.style){var n=mxStencilRegistry.getStencil(e.style[mxConstants.STYLE_SHAPE]);t=null!=n?new mxShape(n):new(this.getShapeConstructor(e))}return t},mxCellRenderer.prototype.createIndicatorShape=function(e){e.shape.indicatorShape=this.getShape(e.view.graph.getIndicatorShape(e))},mxCellRenderer.prototype.getShape=function(e){return null!=e?mxCellRenderer.prototype.defaultShapes[e]:null},mxCellRenderer.prototype.getShapeConstructor=function(e){var t=this.getShape(e.style[mxConstants.STYLE_SHAPE]);return null==t&&(t=e.view.graph.getModel().isEdge(e.cell)?this.defaultEdgeShape:this.defaultVertexShape),t},mxCellRenderer.prototype.configureShape=function(e){e.shape.apply(e),e.shape.image=e.view.graph.getImage(e),e.shape.indicatorColor=e.view.graph.getIndicatorColor(e),e.shape.indicatorStrokeColor=e.style[mxConstants.STYLE_INDICATOR_STROKECOLOR],e.shape.indicatorGradientColor=e.view.graph.getIndicatorGradientColor(e),e.shape.indicatorDirection=e.style[mxConstants.STYLE_INDICATOR_DIRECTION],e.shape.indicatorImage=e.view.graph.getIndicatorImage(e),this.postConfigureShape(e)},mxCellRenderer.prototype.postConfigureShape=function(e){null!=e.shape&&(this.resolveColor(e,"indicatorColor",mxConstants.STYLE_FILLCOLOR),this.resolveColor(e,"indicatorGradientColor",mxConstants.STYLE_GRADIENTCOLOR),this.resolveColor(e,"fill",mxConstants.STYLE_FILLCOLOR),this.resolveColor(e,"stroke",mxConstants.STYLE_STROKECOLOR),this.resolveColor(e,"gradient",mxConstants.STYLE_GRADIENTCOLOR))},mxCellRenderer.prototype.resolveColor=function(e,t,n){var o=e.shape[t],s=e.view.graph,i=null;if("inherit"==o?i=s.model.getParent(e.cell):"swimlane"==o?(i=null!=s.model.getTerminal(e.cell,!1)?s.model.getTerminal(e.cell,!1):e.cell,i=s.getSwimlane(i),n=s.swimlaneIndicatorColorAttribute):"indicated"==o&&(e.shape[t]=e.shape.indicatorColor),null!=i){var a=s.getView().getState(i);e.shape[t]=null,null!=a&&(e.shape[t]=null!=a.shape&&"indicatorColor"!=t?a.shape[t]:a.style[n])}},mxCellRenderer.prototype.getLabelValue=function(e){return e.view.graph.getLabel(e.cell)},mxCellRenderer.prototype.createLabel=function(e,t){var n=e.view.graph;if(n.getModel().isEdge(e.cell),e.style[mxConstants.STYLE_FONTSIZE]>0||null==e.style[mxConstants.STYLE_FONTSIZE]){var o=n.isHtmlLabel(e.cell)||null!=t&&mxUtils.isNode(t);e.text=new this.defaultTextShape(t,new mxRectangle,e.style[mxConstants.STYLE_ALIGN]||mxConstants.ALIGN_CENTER,n.getVerticalAlign(e),e.style[mxConstants.STYLE_FONTCOLOR],e.style[mxConstants.STYLE_FONTFAMILY],e.style[mxConstants.STYLE_FONTSIZE],e.style[mxConstants.STYLE_FONTSTYLE],e.style[mxConstants.STYLE_SPACING],e.style[mxConstants.STYLE_SPACING_TOP],e.style[mxConstants.STYLE_SPACING_RIGHT],e.style[mxConstants.STYLE_SPACING_BOTTOM],e.style[mxConstants.STYLE_SPACING_LEFT],e.style[mxConstants.STYLE_HORIZONTAL],e.style[mxConstants.STYLE_LABEL_BACKGROUNDCOLOR],e.style[mxConstants.STYLE_LABEL_BORDERCOLOR],n.isWrapping(e.cell)&&n.isHtmlLabel(e.cell),n.isLabelClipped(e.cell),e.style[mxConstants.STYLE_OVERFLOW],e.style[mxConstants.STYLE_LABEL_PADDING],mxUtils.getValue(e.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION)),e.text.opacity=mxUtils.getValue(e.style,mxConstants.STYLE_TEXT_OPACITY,100),e.text.dialect=o?mxConstants.DIALECT_STRICTHTML:e.view.graph.dialect,e.text.style=e.style,e.text.state=e,this.initializeLabel(e,e.text);var s=!1,i=function(a){var l=e;if(mxClient.IS_TOUCH||s){var r=mxEvent.getClientX(a),d=mxEvent.getClientY(a),u=mxUtils.convertPoint(n.container,r,d);l=n.view.getState(n.getCellAt(u.x,u.y))}return l};mxEvent.addGestureListeners(e.text.node,mxUtils.bind(this,function(a){this.isLabelEvent(e,a)&&(n.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(a,e)),s=n.dialect!=mxConstants.DIALECT_SVG&&"IMG"==mxEvent.getSource(a).nodeName)}),mxUtils.bind(this,function(a){this.isLabelEvent(e,a)&&n.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(a,i(a)))}),mxUtils.bind(this,function(a){this.isLabelEvent(e,a)&&(n.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(a,i(a))),s=!1)})),n.nativeDblClickEnabled&&mxEvent.addListener(e.text.node,"dblclick",mxUtils.bind(this,function(a){this.isLabelEvent(e,a)&&(n.dblClick(a,e.cell),mxEvent.consume(a))}))}},mxCellRenderer.prototype.initializeLabel=function(e,t){t.init(mxClient.IS_SVG&&mxClient.NO_FO&&t.dialect!=mxConstants.DIALECT_SVG?e.view.graph.container:e.view.getDrawPane())},mxCellRenderer.prototype.createCellOverlays=function(e){var n=e.view.graph.getCellOverlays(e.cell),o=null;if(null!=n){o=new mxDictionary;for(var s=0;s<n.length;s++){var i=null!=e.overlays?e.overlays.remove(n[s]):null;if(null==i){var a=new mxImageShape(new mxRectangle,n[s].image.src);a.dialect=e.view.graph.dialect,a.preserveImageAspect=!1,a.overlay=n[s],this.initializeOverlay(e,a),this.installCellOverlayListeners(e,n[s],a),null!=n[s].cursor&&(a.node.style.cursor=n[s].cursor),o.put(n[s],a)}else o.put(n[s],i)}}null!=e.overlays&&e.overlays.visit(function(l,r){r.destroy()}),e.overlays=o},mxCellRenderer.prototype.initializeOverlay=function(e,t){t.init(e.view.getOverlayPane())},mxCellRenderer.prototype.installCellOverlayListeners=function(e,t,n){var o=e.view.graph;mxEvent.addListener(n.node,"click",function(s){o.isEditing()&&o.stopEditing(!o.isInvokesStopCellEditing()),t.fireEvent(new mxEventObject(mxEvent.CLICK,"event",s,"cell",e.cell))}),mxEvent.addGestureListeners(n.node,function(s){mxEvent.consume(s)},function(s){o.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(s,e))}),mxClient.IS_TOUCH&&mxEvent.addListener(n.node,"touchend",function(s){t.fireEvent(new mxEventObject(mxEvent.CLICK,"event",s,"cell",e.cell))})},mxCellRenderer.prototype.createControl=function(e){var t=e.view.graph,n=t.getFoldingImage(e);if(t.foldingEnabled&&null!=n){if(null==e.control){var o=new mxRectangle(0,0,n.width,n.height);e.control=new mxImageShape(o,n.src),e.control.preserveImageAspect=!1,e.control.dialect=t.dialect,this.initControl(e,e.control,!0,this.createControlClickHandler(e))}}else null!=e.control&&(e.control.destroy(),e.control=null)},mxCellRenderer.prototype.createControlClickHandler=function(e){var t=e.view.graph;return mxUtils.bind(this,function(n){if(this.forceControlClickHandler||t.isEnabled()){var o=!t.isCellCollapsed(e.cell);t.foldCells(o,!1,[e.cell],null,n),mxEvent.consume(n)}})},mxCellRenderer.prototype.initControl=function(e,t,n,o){var s=e.view.graph;s.isHtmlLabel(e.cell)&&mxClient.NO_FO&&s.dialect==mxConstants.DIALECT_SVG?(t.dialect=mxConstants.DIALECT_PREFERHTML,t.init(s.container),t.node.style.zIndex=1):t.init(e.view.getOverlayPane());var a=t.innerNode||t.node;if(null==o||mxClient.IS_IOS||(s.isEnabled()&&(a.style.cursor="pointer"),mxEvent.addListener(a,"click",o)),n){var l=null;mxEvent.addGestureListeners(a,function(r){l=new mxPoint(mxEvent.getClientX(r),mxEvent.getClientY(r)),s.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(r,e)),mxEvent.consume(r)},function(r){s.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(r,e))},function(r){s.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(r,e)),mxEvent.consume(r)}),null!=o&&mxClient.IS_IOS&&a.addEventListener("touchend",function(r){if(null!=l){var d=s.tolerance;Math.abs(l.x-mxEvent.getClientX(r))<d&&Math.abs(l.y-mxEvent.getClientY(r))<d&&(o.call(o,r),mxEvent.consume(r))}},!0)}return a},mxCellRenderer.prototype.isShapeEvent=function(e,t){return!0},mxCellRenderer.prototype.isLabelEvent=function(e,t){return!0},mxCellRenderer.prototype.installListeners=function(e){var t=e.view.graph,n=function(o){var s=e;if(t.dialect!=mxConstants.DIALECT_SVG&&"IMG"==mxEvent.getSource(o).nodeName||mxClient.IS_TOUCH){var i=mxEvent.getClientX(o),a=mxEvent.getClientY(o),l=mxUtils.convertPoint(t.container,i,a);s=t.view.getState(t.getCellAt(l.x,l.y))}return s};mxEvent.addGestureListeners(e.shape.node,mxUtils.bind(this,function(o){this.isShapeEvent(e,o)&&t.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(o,e))}),mxUtils.bind(this,function(o){this.isShapeEvent(e,o)&&t.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(o,n(o)))}),mxUtils.bind(this,function(o){this.isShapeEvent(e,o)&&t.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(o,n(o)))})),t.nativeDblClickEnabled&&mxEvent.addListener(e.shape.node,"dblclick",mxUtils.bind(this,function(o){this.isShapeEvent(e,o)&&(t.dblClick(o,e.cell),mxEvent.consume(o))}))},mxCellRenderer.prototype.redrawLabel=function(e,t){var n=this.getLabelValue(e);if(null==e.text&&null!=n&&(mxUtils.isNode(n)||n.length>0)?this.createLabel(e,n):null==e.text||null!=n&&0!=n.length||(e.text.destroy(),e.text=null),null!=e.text){var o=e.view.graph;t&&(null!=e.text.lastValue&&this.isTextShapeInvalid(e,e.text)&&(e.text.lastValue=null),e.text.resetStyles(),e.text.apply(e),e.text.opacity=mxUtils.getValue(e.style,mxConstants.STYLE_TEXT_OPACITY,100));var s=this.getLabelBounds(e),i=o.isWrapping(e.cell),a=o.isLabelClipped(e.cell),r=e.view.graph.isHtmlLabel(e.cell)||null!=n&&mxUtils.isNode(n)?mxConstants.DIALECT_STRICTHTML:e.view.graph.dialect,d=e.style[mxConstants.STYLE_OVERFLOW]||"visible";if(t||e.text.value!=n||e.text.isWrapping!=i||e.text.overflow!=d||e.text.isClipping!=a||e.text.scale!=this.getTextScale(e)||e.text.dialect!=r||!e.text.bounds.equals(s)){e.text.dialect=r,e.text.value=n,e.text.bounds=s,e.text.scale=this.getTextScale(e),e.text.wrap=i,e.text.clipped=a,e.text.overflow=d;var u=e.text.node.style.visibility;this.redrawLabelShape(e.text),e.text.node.style.visibility=u}}},mxCellRenderer.prototype.isTextShapeInvalid=function(e,t){function n(o,s,i){return t[o]!=(e.style[s]||i)}return n("fontStyle",mxConstants.STYLE_FONTSTYLE,mxConstants.DEFAULT_FONTSTYLE)||n("family",mxConstants.STYLE_FONTFAMILY,mxConstants.DEFAULT_FONTFAMILY)||n("size",mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE)||n("color",mxConstants.STYLE_FONTCOLOR,"black")||n("align",mxConstants.STYLE_ALIGN,"")||n("valign",mxConstants.STYLE_VERTICAL_ALIGN,"")||n("spacing",mxConstants.STYLE_SPACING,2)||n("spacingTop",mxConstants.STYLE_SPACING_TOP,2)||n("spacingRight",mxConstants.STYLE_SPACING_RIGHT,2)||n("spacingBottom",mxConstants.STYLE_SPACING_BOTTOM,2)||n("spacingLeft",mxConstants.STYLE_SPACING_LEFT,2)||n("horizontal",mxConstants.STYLE_HORIZONTAL,!0)||n("background",mxConstants.STYLE_LABEL_BACKGROUNDCOLOR)||n("border",mxConstants.STYLE_LABEL_BORDERCOLOR)||n("opacity",mxConstants.STYLE_TEXT_OPACITY,100)||n("textDirection",mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION)},mxCellRenderer.prototype.redrawLabelShape=function(e){e.redraw()},mxCellRenderer.prototype.getTextScale=function(e){return e.view.scale},mxCellRenderer.prototype.getLabelBounds=function(e){var t=e.view.graph,n=e.view.scale,o=t.getModel().isEdge(e.cell),s=new mxRectangle(e.absoluteOffset.x,e.absoluteOffset.y);if(o){var i=e.text.getSpacing();s.x+=i.x*n,s.y+=i.y*n;var a=t.getCellGeometry(e.cell);null!=a&&(s.width=Math.max(0,a.width*n),s.height=Math.max(0,a.height*n))}else{if(e.text.isPaintBoundsInverted()){var l=s.x;s.x=s.y,s.y=l}s.x+=e.x,s.y+=e.y,s.width=Math.max(1,e.width),s.height=Math.max(1,e.height);var r=mxUtils.getValue(e.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE);if(r!=mxConstants.NONE&&""!=r){var d=parseFloat(mxUtils.getValue(e.style,mxConstants.STYLE_STROKEWIDTH,1))*n,u=1+Math.floor((d-1)/2),g=Math.floor(d+1);s.x+=u,s.y+=u,s.width-=g,s.height-=g}}if(e.text.isPaintBoundsInverted()){var f=(e.width-e.height)/2;s.x+=f,s.y-=f,l=s.width,s.width=s.height,s.height=l}if(null!=e.shape){var v=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),x=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE);v==mxConstants.ALIGN_CENTER&&x==mxConstants.ALIGN_MIDDLE&&(s=e.shape.getLabelBounds(s))}var z=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_WIDTH,null);return null!=z&&(s.width=parseFloat(z)*n),o||this.rotateLabelBounds(e,s),s},mxCellRenderer.prototype.rotateLabelBounds=function(e,t){if(t.y-=e.text.margin.y*t.height,t.x-=e.text.margin.x*t.width,!this.legacySpacing||"fill"!=e.style[mxConstants.STYLE_OVERFLOW]&&"width"!=e.style[mxConstants.STYLE_OVERFLOW]){var n=e.view.scale,o=e.text.getSpacing();t.x+=o.x*n,t.y+=o.y*n;var s=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),i=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),a=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_WIDTH,null);t.width=Math.max(0,t.width-(s==mxConstants.ALIGN_CENTER&&null==a?e.text.spacingLeft*n+e.text.spacingRight*n:0)),t.height=Math.max(0,t.height-(i==mxConstants.ALIGN_MIDDLE?e.text.spacingTop*n+e.text.spacingBottom*n:0))}var l=e.text.getTextRotation();if(0!=l&&null!=e&&e.view.graph.model.isVertex(e.cell)){var r=e.getCenterX(),d=e.getCenterY();if(t.x!=r||t.y!=d){var u=l*(Math.PI/180);pt=mxUtils.getRotatedPoint(new mxPoint(t.x,t.y),Math.cos(u),Math.sin(u),new mxPoint(r,d)),t.x=pt.x,t.y=pt.y}}},mxCellRenderer.prototype.redrawCellOverlays=function(e,t){if(this.createCellOverlays(e),null!=e.overlays){var n=mxUtils.mod(mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION,0),90),o=mxUtils.toRadians(n),s=Math.cos(o),i=Math.sin(o);e.overlays.visit(function(a,l){var r=l.overlay.getBounds(e);if(!e.view.graph.getModel().isEdge(e.cell)&&null!=e.shape&&0!=n){var d=r.getCenterX(),u=r.getCenterY(),g=mxUtils.getRotatedPoint(new mxPoint(d,u),s,i,new mxPoint(e.getCenterX(),e.getCenterY()));d=g.x,u=g.y,r.x=Math.round(d-r.width/2),r.y=Math.round(u-r.height/2)}!t&&null!=l.bounds&&l.scale==e.view.scale&&l.bounds.equals(r)||(l.bounds=r,l.scale=e.view.scale,l.redraw())})}},mxCellRenderer.prototype.redrawControl=function(e,t){var n=e.view.graph.getFoldingImage(e);if(null!=e.control&&null!=n){var o=this.getControlBounds(e,n.width,n.height),s=this.legacyControlPosition?mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION,0):e.shape.getTextRotation(),i=e.view.scale;!t&&e.control.scale==i&&e.control.bounds.equals(o)&&e.control.rotation==s||(e.control.rotation=s,e.control.bounds=o,e.control.scale=i,e.control.redraw())}},mxCellRenderer.prototype.getControlBounds=function(e,t,n){if(null!=e.control){var o=e.view.scale,s=e.getCenterX(),i=e.getCenterY();if(!e.view.graph.getModel().isEdge(e.cell)&&(s=e.x+t*o,i=e.y+n*o,null!=e.shape)){var a=e.shape.getShapeRotation();if(this.legacyControlPosition)a=mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION,0);else if(e.shape.isPaintBoundsInverted()){var l=(e.width-e.height)/2;s+=l,i-=l}if(0!=a){var r=mxUtils.toRadians(a),d=Math.cos(r),u=Math.sin(r),g=mxUtils.getRotatedPoint(new mxPoint(s,i),d,u,new mxPoint(e.getCenterX(),e.getCenterY()));s=g.x,i=g.y}}return e.view.graph.getModel().isEdge(e.cell),new mxRectangle(Math.round(s-t/2*o),Math.round(i-n/2*o),Math.round(t*o),Math.round(n*o))}return null},mxCellRenderer.prototype.insertStateAfter=function(e,t,n){for(var o=this.getShapesForState(e),s=0;s<o.length;s++)if(null!=o[s]&&null!=o[s].node){var i=o[s].node.parentNode!=e.view.getDrawPane()&&o[s].node.parentNode!=e.view.getOverlayPane(),a=i?n:t;if(null!=a&&a.nextSibling!=o[s].node)null==a.nextSibling?a.parentNode.appendChild(o[s].node):a.parentNode.insertBefore(o[s].node,a.nextSibling);else if(null==a)if(o[s].node.parentNode==e.view.graph.container){for(var l=e.view.canvas;null!=l&&l.parentNode!=e.view.graph.container;)l=l.parentNode;null!=l&&null!=l.nextSibling?l.nextSibling!=o[s].node&&o[s].node.parentNode.insertBefore(o[s].node,l.nextSibling):o[s].node.parentNode.appendChild(o[s].node)}else null!=o[s].node.parentNode.firstChild&&o[s].node.parentNode.firstChild!=o[s].node&&o[s].node.parentNode.insertBefore(o[s].node,o[s].node.parentNode.firstChild);i?n=o[s].node:t=o[s].node}return[t,n]},mxCellRenderer.prototype.getShapesForState=function(e){return[e.shape,e.text,e.control]},mxCellRenderer.prototype.redraw=function(e,t,n){var o=this.redrawShape(e,t,n);null==e.shape||null!=n&&!n||(this.redrawLabel(e,o),this.redrawCellOverlays(e,o),this.redrawControl(e,o))},mxCellRenderer.prototype.redrawShape=function(e,t,n){var o=e.view.graph.model,s=!1;return null!=e.shape&&null!=e.shape.style&&null!=e.style&&e.shape.style[mxConstants.STYLE_SHAPE]!=e.style[mxConstants.STYLE_SHAPE]&&(e.shape.destroy(),e.shape=null),null==e.shape&&null!=e.view.graph.container&&e.cell!=e.view.currentRoot&&(o.isVertex(e.cell)||o.isEdge(e.cell))?(e.shape=this.createShape(e),null!=e.shape&&(e.shape.antiAlias=this.antiAlias,this.createIndicatorShape(e),this.initializeShape(e),this.createCellOverlays(e),this.installListeners(e),e.view.graph.selectionCellsHandler.updateHandler(e))):null==e.shape||mxUtils.equalEntries(e.shape.style,e.style)||(e.shape.resetStyles(),this.configureShape(e),e.view.graph.selectionCellsHandler.updateHandler(e),t=!0),null!=e.shape&&(this.createControl(e),(t||null==e.shape.bounds||e.shape.scale!=e.view.scale||null==e.absolutePoints&&!e.shape.bounds.equals(e)||null!=e.absolutePoints&&!mxUtils.equalPoints(e.shape.points,e.absolutePoints))&&(null!=e.absolutePoints?(e.shape.points=e.absolutePoints.slice(),e.shape.bounds=null):(e.shape.points=null,e.shape.bounds=new mxRectangle(e.x,e.y,e.width,e.height)),e.shape.scale=e.view.scale,null==n||n?e.shape.redraw():e.shape.updateBoundingBox(),s=!0)),s},mxCellRenderer.prototype.destroy=function(e){null!=e.shape&&(null!=e.text&&(e.text.destroy(),e.text=null),null!=e.overlays&&(e.overlays.visit(function(t,n){n.destroy()}),e.overlays=null),null!=e.control&&(e.control.destroy(),e.control=null),e.shape.destroy(),e.shape=null)},exports.mxCellRenderer=mxCellRenderer;var mxEdgeStyle={EntityRelation:function(e,t,n,o,s){var i=e.view,a=i.graph,l=mxUtils.getValue(e.style,mxConstants.STYLE_SEGMENT,mxConstants.ENTITY_SEGMENT)*i.scale,r=e.absolutePoints,d=r[0],u=r[r.length-1],g=!1;if(null!=d)(t=new mxCellState).x=d.x,t.y=d.y;else{if(null==t)return;if((f=mxUtils.getPortConstraints(t,e,!0,mxConstants.DIRECTION_MASK_NONE))!=mxConstants.DIRECTION_MASK_NONE&&f!=mxConstants.DIRECTION_MASK_WEST+mxConstants.DIRECTION_MASK_EAST)g=f==mxConstants.DIRECTION_MASK_WEST;else{var v=a.getCellGeometry(t.cell);v.relative?g=v.x<=.5:null!=n&&(g=n.x+n.width<t.x)}}var x=!0;if(null!=u)(n=new mxCellState).x=u.x,n.y=u.y;else if(null!=n){var f;if((f=mxUtils.getPortConstraints(n,e,!1,mxConstants.DIRECTION_MASK_NONE))!=mxConstants.DIRECTION_MASK_NONE&&f!=mxConstants.DIRECTION_MASK_WEST+mxConstants.DIRECTION_MASK_EAST)x=f==mxConstants.DIRECTION_MASK_WEST;else{var z=a.getCellGeometry(n.cell);z.relative?x=z.x<=.5:null!=t&&(x=t.x+t.width<n.x)}}if(null!=t&&null!=n){var b=g?t.x:t.x+t.width,_=i.getRoutingCenterY(t),H=x?n.x:n.x+n.width,T=i.getRoutingCenterY(n),L=l,V=g?-L:L,Y=new mxPoint(b+V,_),J=new mxPoint(H+(V=x?-L:L),T);if(g==x){var K=g?Math.min(b,H)-l:Math.max(b,H)+l;s.push(new mxPoint(K,_)),s.push(new mxPoint(K,T))}else if(Y.x<J.x==g){var re=_+(T-_)/2;s.push(Y),s.push(new mxPoint(Y.x,re)),s.push(new mxPoint(J.x,re)),s.push(J)}else s.push(Y),s.push(J)}},Loop:function(e,t,n,o,s){var i=e.absolutePoints;if(null==i[0]||null==i[i.length-1]){if(null!=t){var r=e.view,d=r.graph;null!=(u=null!=o&&o.length>0?o[0]:null)&&(u=r.transformControlPoint(e,u),mxUtils.contains(t,u.x,u.y)&&(u=null));var g=0,f=0,v=0,x=0,z=mxUtils.getValue(e.style,mxConstants.STYLE_SEGMENT,d.gridSize)*r.scale,b=mxUtils.getValue(e.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_WEST);b==mxConstants.DIRECTION_NORTH||b==mxConstants.DIRECTION_SOUTH?(g=r.getRoutingCenterX(t),f=z):(v=r.getRoutingCenterY(t),x=z),null==u||u.x<t.x||u.x>t.x+t.width?null!=u?(g=u.x,x=Math.max(Math.abs(v-u.y),x)):b==mxConstants.DIRECTION_NORTH?v=t.y-2*f:b==mxConstants.DIRECTION_SOUTH?v=t.y+t.height+2*f:g=b==mxConstants.DIRECTION_EAST?t.x-2*x:t.x+t.width+2*x:null!=u&&(g=r.getRoutingCenterX(t),f=Math.max(Math.abs(g-u.x),x),v=u.y,x=0),s.push(new mxPoint(g-f,v-x)),s.push(new mxPoint(g+f,v+x))}}else if(null!=o&&o.length>0)for(var _=0;_<o.length;_++){var u;u=e.view.transformControlPoint(e,u=o[_]),s.push(new mxPoint(u.x,u.y))}},ElbowConnector:function(e,t,n,o,s){var i=null!=o&&o.length>0?o[0]:null,a=!1,l=!1;if(null!=t&&null!=n)if(null!=i){var r=Math.min(t.x,n.x),d=Math.max(t.x+t.width,n.x+n.width),u=Math.min(t.y,n.y),g=Math.max(t.y+t.height,n.y+n.height);a=(i=e.view.transformControlPoint(e,i)).y<u||i.y>g,l=i.x<r||i.x>d}else(a=(r=Math.max(t.x,n.x))==(d=Math.min(t.x+t.width,n.x+n.width)))||(l=(u=Math.max(t.y,n.y))==(g=Math.min(t.y+t.height,n.y+n.height)));l||!a&&e.style[mxConstants.STYLE_ELBOW]!=mxConstants.ELBOW_VERTICAL?mxEdgeStyle.SideToSide(e,t,n,o,s):mxEdgeStyle.TopToBottom(e,t,n,o,s)},SideToSide:function(e,t,n,o,s){var i=e.view,a=null!=o&&o.length>0?o[0]:null,l=e.absolutePoints,r=l[0],d=l[l.length-1];if(null!=a&&(a=i.transformControlPoint(e,a)),null!=r&&((t=new mxCellState).x=r.x,t.y=r.y),null!=d&&((n=new mxCellState).x=d.x,n.y=d.y),null!=t&&null!=n){var u=Math.max(t.x,n.x),g=Math.min(t.x+t.width,n.x+n.width),f=null!=a?a.x:Math.round(g+(u-g)/2),v=i.getRoutingCenterY(t),x=i.getRoutingCenterY(n);if(null!=a&&(a.y>=t.y&&a.y<=t.y+t.height&&(v=a.y),a.y>=n.y&&a.y<=n.y+n.height&&(x=a.y)),mxUtils.contains(n,f,v)||mxUtils.contains(t,f,v)||s.push(new mxPoint(f,v)),mxUtils.contains(n,f,x)||mxUtils.contains(t,f,x)||s.push(new mxPoint(f,x)),1==s.length)if(null!=a)mxUtils.contains(n,f,a.y)||mxUtils.contains(t,f,a.y)||s.push(new mxPoint(f,a.y));else{var z=Math.max(t.y,n.y),b=Math.min(t.y+t.height,n.y+n.height);s.push(new mxPoint(f,z+(b-z)/2))}}},TopToBottom:function(e,t,n,o,s){var i=e.view,a=null!=o&&o.length>0?o[0]:null,l=e.absolutePoints,r=l[0],d=l[l.length-1];if(null!=a&&(a=i.transformControlPoint(e,a)),null!=r&&((t=new mxCellState).x=r.x,t.y=r.y),null!=d&&((n=new mxCellState).x=d.x,n.y=d.y),null!=t&&null!=n){var u=Math.max(t.y,n.y),g=Math.min(t.y+t.height,n.y+n.height),f=i.getRoutingCenterX(t);null!=a&&a.x>=t.x&&a.x<=t.x+t.width&&(f=a.x);var v=null!=a?a.y:Math.round(g+(u-g)/2);if(mxUtils.contains(n,f,v)||mxUtils.contains(t,f,v)||s.push(new mxPoint(f,v)),f=null!=a&&a.x>=n.x&&a.x<=n.x+n.width?a.x:i.getRoutingCenterX(n),mxUtils.contains(n,f,v)||mxUtils.contains(t,f,v)||s.push(new mxPoint(f,v)),1==s.length)if(null!=a&&1==s.length)mxUtils.contains(n,a.x,v)||mxUtils.contains(t,a.x,v)||s.push(new mxPoint(a.x,v));else{var x=Math.max(t.x,n.x),z=Math.min(t.x+t.width,n.x+n.width);s.push(new mxPoint(x+(z-x)/2,v))}}},SegmentConnector:function(e,t,n,o,s){function i(X){return(null==r||Math.abs(r.x-X.x)>=l||Math.abs(r.y-X.y)>=l)&&(s.push(X),r=X),r}var a=e.absolutePoints,l=Math.max(1,e.view.scale),r=s.length>0?s[0]:null,d=!0,u=null,g=a[0];null==g&&null!=t?g=new mxPoint(e.view.getRoutingCenterX(t),e.view.getRoutingCenterY(t)):null!=g&&(g=g.clone()),g.x=Math.round(g.x),g.y=Math.round(g.y);var f=a.length-1;if(null!=o&&o.length>0){for(var v=[],x=0;x<o.length;x++){var z=e.view.transformControlPoint(e,o[x]);null!=z&&(z.x=Math.round(z.x),z.y=Math.round(z.y),v.push(z))}if(0==v.length)return;o=v,null!=g&&null!=o[0]&&(Math.abs(o[0].x-g.x)<l&&(o[0].x=g.x),Math.abs(o[0].y-g.y)<l&&(o[0].y=g.y));var b=a[f];null!=b&&null!=o[o.length-1]&&(Math.abs(o[o.length-1].x-b.x)<l&&(o[o.length-1].x=b.x),Math.abs(o[o.length-1].y-b.y)<l&&(o[o.length-1].y=b.y));var _=t,H=a[0],T=!1,L=!1,V=u=o[0];for(null!=H&&(H.x=Math.round(H.x),H.y=Math.round(H.y),_=null),x=0;x<2;x++){var Y=null!=H&&H.x==V.x,J=null!=H&&H.y==V.y,K=null!=_&&V.y>=_.y&&V.y<=_.y+_.height,re=null!=_&&V.x>=_.x&&V.x<=_.x+_.width;if(T=J||null==H&&K,L=Y||null==H&&re,0!=x||!(T&&L||Y&&J)){if(null!=H&&!J&&!Y&&(K||re)){d=!K;break}if(L||T){d=T,1==x&&(d=o.length%2==0?T:L);break}}_=n,null!=(H=a[f])&&(H.x=Math.round(H.x),H.y=Math.round(H.y),_=null),V=o[o.length-1],Y&&J&&(o=o.slice(1))}for(d&&(null!=a[0]&&a[0].y!=u.y||null==a[0]&&null!=t&&(u.y<t.y||u.y>t.y+t.height))?i(new mxPoint(g.x,u.y)):!d&&(null!=a[0]&&a[0].x!=u.x||null==a[0]&&null!=t&&(u.x<t.x||u.x>t.x+t.width))&&i(new mxPoint(u.x,g.y)),d?g.y=u.y:g.x=u.x,x=0;x<o.length;x++)u=o[x],(d=!d)?g.y=u.y:g.x=u.x,i(g.clone())}else u=g,d=!0;if(null==(g=a[f])&&null!=n&&(g=new mxPoint(e.view.getRoutingCenterX(n),e.view.getRoutingCenterY(n))),null!=g&&(g.x=Math.round(g.x),g.y=Math.round(g.y),null!=u&&(d&&(null!=a[f]&&a[f].y!=u.y||null==a[f]&&null!=n&&(u.y<n.y||u.y>n.y+n.height))?i(new mxPoint(g.x,u.y)):!d&&(null!=a[f]&&a[f].x!=u.x||null==a[f]&&null!=n&&(u.x<n.x||u.x>n.x+n.width))&&i(new mxPoint(u.x,g.y)))),null==a[0]&&null!=t)for(;s.length>1&&null!=s[1]&&mxUtils.contains(t,s[1].x,s[1].y);)s.splice(1,1);if(null==a[f]&&null!=n)for(;s.length>1&&null!=s[s.length-1]&&mxUtils.contains(n,s[s.length-1].x,s[s.length-1].y);)s.splice(s.length-1,1);null!=b&&null!=s[s.length-1]&&Math.abs(b.x-s[s.length-1].x)<l&&Math.abs(b.y-s[s.length-1].y)<l&&(s.splice(s.length-1,1),null!=s[s.length-1]&&(Math.abs(s[s.length-1].x-b.x)<l&&(s[s.length-1].x=b.x),Math.abs(s[s.length-1].y-b.y)<l&&(s[s.length-1].y=b.y)))},orthBuffer:10,orthPointsFallback:!0,dirVectors:[[-1,0],[0,-1],[1,0],[0,1],[-1,0],[0,-1],[1,0]],wayPoints1:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],routePatterns:[[[513,2308,2081,2562],[513,1090,514,2184,2114,2561],[513,1090,514,2564,2184,2562],[513,2308,2561,1090,514,2568,2308]],[[514,1057,513,2308,2081,2562],[514,2184,2114,2561],[514,2184,2562,1057,513,2564,2184],[514,1057,513,2568,2308,2561]],[[1090,514,1057,513,2308,2081,2562],[2114,2561],[1090,2562,1057,513,2564,2184],[1090,514,1057,513,2308,2561,2568]],[[2081,2562],[1057,513,1090,514,2184,2114,2561],[1057,513,1090,514,2184,2562,2564],[1057,2561,1090,514,2568,2308]]],inlineRoutePatterns:[[null,[2114,2568],null,null],[null,[514,2081,2114,2568],null,null],[null,[2114,2561],null,null],[[2081,2562],[1057,2114,2568],[2184,2562],null]],vertexSeperations:[],limits:[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],LEFT_MASK:32,TOP_MASK:64,RIGHT_MASK:128,BOTTOM_MASK:256,LEFT:1,TOP:2,RIGHT:4,BOTTOM:8,SIDE_MASK:480,CENTER_MASK:512,SOURCE_MASK:1024,TARGET_MASK:2048,VERTEX_MASK:3072,getJettySize:function(e,t,n,o,s){var i=mxUtils.getValue(e.style,s?mxConstants.STYLE_SOURCE_JETTY_SIZE:mxConstants.STYLE_TARGET_JETTY_SIZE,mxUtils.getValue(e.style,mxConstants.STYLE_JETTY_SIZE,mxEdgeStyle.orthBuffer));if("auto"==i)if(mxUtils.getValue(e.style,s?mxConstants.STYLE_STARTARROW:mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE){var l=mxUtils.getNumber(e.style,s?mxConstants.STYLE_STARTSIZE:mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE);i=Math.max(2,Math.ceil((l+mxEdgeStyle.orthBuffer)/mxEdgeStyle.orthBuffer))*mxEdgeStyle.orthBuffer}else i=2*mxEdgeStyle.orthBuffer;return i},OrthConnector:function(e,t,n,o,s){var i=e.view.graph,a=null!=t&&i.getModel().isEdge(t.cell),l=null!=n&&i.getModel().isEdge(n.cell),r=e.absolutePoints,d=r[0],u=r[r.length-1],g=null!=t?t.x:d.x,f=null!=t?t.y:d.y,v=null!=t?t.width:0,x=null!=t?t.height:0,z=null!=n?n.x:u.x,b=null!=n?n.y:u.y,_=null!=n?n.width:0,H=null!=n?n.height:0,T=e.view.scale*mxEdgeStyle.getJettySize(e,t,n,o,!0),L=e.view.scale*mxEdgeStyle.getJettySize(e,t,n,o,!1);null!=t&&n==t&&(T=L=Math.max(T,L));var V=L+T,Y=!1;if(null!=d&&null!=u&&(Y=(De=u.x-d.x)*De+(xe=u.y-d.y)*xe<V*V),Y||mxEdgeStyle.orthPointsFallback&&null!=o&&o.length>0||a||l)mxEdgeStyle.SegmentConnector(e,t,n,o,s);else{var re,J=[mxConstants.DIRECTION_MASK_ALL,mxConstants.DIRECTION_MASK_ALL],K=0;null!=t&&(J[0]=mxUtils.getPortConstraints(t,e,!0,mxConstants.DIRECTION_MASK_ALL),0!=(K=mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION,0)))&&(g=(re=mxUtils.getBoundingBox(new mxRectangle(g,f,v,x),K)).x,f=re.y,v=re.width,x=re.height),null!=n&&(J[1]=mxUtils.getPortConstraints(n,e,!1,mxConstants.DIRECTION_MASK_ALL),0!=(K=mxUtils.getValue(n.style,mxConstants.STYLE_ROTATION,0)))&&(z=(re=mxUtils.getBoundingBox(new mxRectangle(z,b,_,H),K)).x,b=re.y,_=re.width,H=re.height);for(var X=[0,0],ne=[[g=Math.round(10*g)/10,f=Math.round(10*f)/10,v=Math.round(10*v)/10,x=Math.round(10*x)/10],[z=Math.round(10*z)/10,b=Math.round(10*b)/10,_=Math.round(10*_)/10,H=Math.round(10*H)/10]],he=[T,L],Q=0;Q<2;Q++)mxEdgeStyle.limits[Q][1]=ne[Q][0]-he[Q],mxEdgeStyle.limits[Q][2]=ne[Q][1]-he[Q],mxEdgeStyle.limits[Q][4]=ne[Q][0]+ne[Q][2]+he[Q],mxEdgeStyle.limits[Q][8]=ne[Q][1]+ne[Q][3]+he[Q];var De,xe=ne[0][1]+ne[0][3]/2-(ne[1][1]+ne[1][3]/2),Oe=0;(De=ne[0][0]+ne[0][2]/2-(ne[1][0]+ne[1][2]/2))<0?Oe=xe<0?2:1:xe<=0&&(Oe=3,0==De&&(Oe=2));var k=null;null!=t&&(k=d);var tt=[[.5,.5],[.5,.5]];for(Q=0;Q<2;Q++)null!=k&&(tt[Q][0]=(k.x-ne[Q][0])/ne[Q][2],Math.abs(k.x-ne[Q][0])<=1?X[Q]=mxConstants.DIRECTION_MASK_WEST:Math.abs(k.x-ne[Q][0]-ne[Q][2])<=1&&(X[Q]=mxConstants.DIRECTION_MASK_EAST),tt[Q][1]=(k.y-ne[Q][1])/ne[Q][3],Math.abs(k.y-ne[Q][1])<=1?X[Q]=mxConstants.DIRECTION_MASK_NORTH:Math.abs(k.y-ne[Q][1]-ne[Q][3])<=1&&(X[Q]=mxConstants.DIRECTION_MASK_SOUTH)),k=null,null!=n&&(k=u);var nt=ne[0][1]-(ne[1][1]+ne[1][3]),St=ne[0][0]-(ne[1][0]+ne[1][2]),zt=ne[1][1]-(ne[0][1]+ne[0][3]),et=ne[1][0]-(ne[0][0]+ne[0][2]);mxEdgeStyle.vertexSeperations[1]=Math.max(St-V,0),mxEdgeStyle.vertexSeperations[2]=Math.max(nt-V,0),mxEdgeStyle.vertexSeperations[4]=Math.max(zt-V,0),mxEdgeStyle.vertexSeperations[3]=Math.max(et-V,0);var ot=[],gt=[],ut=[];gt[0]=St>=et?mxConstants.DIRECTION_MASK_WEST:mxConstants.DIRECTION_MASK_EAST,ut[0]=nt>=zt?mxConstants.DIRECTION_MASK_NORTH:mxConstants.DIRECTION_MASK_SOUTH,gt[1]=mxUtils.reversePortConstraints(gt[0]),ut[1]=mxUtils.reversePortConstraints(ut[0]);var Nt=St>=et?St:et,je=nt>=zt?nt:zt,Ze=[[0,0],[0,0]],ke=!1;for(Q=0;Q<2;Q++)0==X[Q]&&(0==(gt[Q]&J[Q])&&(gt[Q]=mxUtils.reversePortConstraints(gt[Q])),0==(ut[Q]&J[Q])&&(ut[Q]=mxUtils.reversePortConstraints(ut[Q])),Ze[Q][0]=ut[Q],Ze[Q][1]=gt[Q]);for(je>0&&Nt>0&&((gt[0]&J[0])>0&&(ut[1]&J[1])>0?(Ze[0][0]=gt[0],Ze[0][1]=ut[0],Ze[1][0]=ut[1],Ze[1][1]=gt[1],ke=!0):(ut[0]&J[0])>0&&(gt[1]&J[1])>0&&(Ze[0][0]=ut[0],Ze[0][1]=gt[0],Ze[1][0]=gt[1],Ze[1][1]=ut[1],ke=!0)),je>0&&!ke&&(Ze[0][0]=ut[0],Ze[0][1]=gt[0],Ze[1][0]=ut[1],Ze[1][1]=gt[1],ke=!0),Nt>0&&!ke&&(Ze[0][0]=gt[0],Ze[0][1]=ut[0],Ze[1][0]=gt[1],Ze[1][1]=ut[1],ke=!0),Q=0;Q<2;Q++)0==X[Q]&&(0==(Ze[Q][0]&J[Q])&&(Ze[Q][0]=Ze[Q][1]),ot[Q]=Ze[Q][0]&J[Q],ot[Q]|=(Ze[Q][1]&J[Q])<<8,ot[Q]|=(Ze[1-Q][Q]&J[Q])<<16,ot[Q]|=(Ze[1-Q][1-Q]&J[Q])<<24,0==(15&ot[Q])&&(ot[Q]=ot[Q]<<8),0==(3840&ot[Q])&&(ot[Q]=15&ot[Q]|ot[Q]>>8),0==(983040&ot[Q])&&(ot[Q]=65535&ot[Q]|(251658240&ot[Q])>>8),X[Q]=15&ot[Q],J[Q]!=mxConstants.DIRECTION_MASK_WEST&&J[Q]!=mxConstants.DIRECTION_MASK_NORTH&&J[Q]!=mxConstants.DIRECTION_MASK_EAST&&J[Q]!=mxConstants.DIRECTION_MASK_SOUTH||(X[Q]=J[Q]));var vt=X[0]==mxConstants.DIRECTION_MASK_EAST?3:X[0],st=X[1]==mxConstants.DIRECTION_MASK_EAST?3:X[1];(vt-=Oe)<1&&(vt+=4),(st-=Oe)<1&&(st+=4);var _t=mxEdgeStyle.routePatterns[vt-1][st-1];switch(mxEdgeStyle.wayPoints1[0][0]=ne[0][0],mxEdgeStyle.wayPoints1[0][1]=ne[0][1],X[0]){case mxConstants.DIRECTION_MASK_WEST:mxEdgeStyle.wayPoints1[0][0]-=T,mxEdgeStyle.wayPoints1[0][1]+=tt[0][1]*ne[0][3];break;case mxConstants.DIRECTION_MASK_SOUTH:mxEdgeStyle.wayPoints1[0][0]+=tt[0][0]*ne[0][2],mxEdgeStyle.wayPoints1[0][1]+=ne[0][3]+T;break;case mxConstants.DIRECTION_MASK_EAST:mxEdgeStyle.wayPoints1[0][0]+=ne[0][2]+T,mxEdgeStyle.wayPoints1[0][1]+=tt[0][1]*ne[0][3];break;case mxConstants.DIRECTION_MASK_NORTH:mxEdgeStyle.wayPoints1[0][0]+=tt[0][0]*ne[0][2],mxEdgeStyle.wayPoints1[0][1]-=T}var rt=0,At=(X[0]&(mxConstants.DIRECTION_MASK_EAST|mxConstants.DIRECTION_MASK_WEST))>0?0:1,$e=At,yt=0;for(Q=0;Q<_t.length;Q++){var Bt=15&_t[Q],Lt=Bt==mxConstants.DIRECTION_MASK_EAST?3:Bt;(Lt+=Oe)>4&&(Lt-=4);var Vt=mxEdgeStyle.dirVectors[Lt-1];(yt=Lt%2>0?0:1)!=At&&(rt++,mxEdgeStyle.wayPoints1[rt][0]=mxEdgeStyle.wayPoints1[rt-1][0],mxEdgeStyle.wayPoints1[rt][1]=mxEdgeStyle.wayPoints1[rt-1][1]);var Gt=(_t[Q]&mxEdgeStyle.SOURCE_MASK)>0,le=(_t[Q]&mxEdgeStyle.SIDE_MASK)>>5;(le<<=Oe)>15&&(le>>=4);var Ge=(_t[Q]&mxEdgeStyle.CENTER_MASK)>0;if((Gt||(_t[Q]&mxEdgeStyle.TARGET_MASK)>0)&&le<9){var N,ee=Gt?0:1;if(N=Ge&&0==yt?ne[ee][0]+tt[ee][0]*ne[ee][2]:Ge?ne[ee][1]+tt[ee][1]*ne[ee][3]:mxEdgeStyle.limits[ee][le],0==yt){var Be=(N-mxEdgeStyle.wayPoints1[rt][0])*Vt[0];Be>0&&(mxEdgeStyle.wayPoints1[rt][0]+=Vt[0]*Be)}else{var we=(N-mxEdgeStyle.wayPoints1[rt][1])*Vt[1];we>0&&(mxEdgeStyle.wayPoints1[rt][1]+=Vt[1]*we)}}else Ge&&(mxEdgeStyle.wayPoints1[rt][0]+=Vt[0]*Math.abs(mxEdgeStyle.vertexSeperations[Lt]/2),mxEdgeStyle.wayPoints1[rt][1]+=Vt[1]*Math.abs(mxEdgeStyle.vertexSeperations[Lt]/2));rt>0&&mxEdgeStyle.wayPoints1[rt][yt]==mxEdgeStyle.wayPoints1[rt-1][yt]?rt--:At=yt}for(Q=0;Q<=rt&&(Q!=rt||(((X[1]&(mxConstants.DIRECTION_MASK_EAST|mxConstants.DIRECTION_MASK_WEST))>0?0:1)==$e?0:1)==(rt+1)%2);Q++)s.push(new mxPoint(Math.round(mxEdgeStyle.wayPoints1[Q][0]),Math.round(mxEdgeStyle.wayPoints1[Q][1])));for(var qe=1;qe<s.length;)null==s[qe-1]||null==s[qe]||s[qe-1].x!=s[qe].x||s[qe-1].y!=s[qe].y?qe++:s.splice(qe,1)}},getRoutePattern:function(e,t,n,o){var s=e[0]==mxConstants.DIRECTION_MASK_EAST?3:e[0],i=e[1]==mxConstants.DIRECTION_MASK_EAST?3:e[1];(s-=t)<1&&(s+=4),(i-=t)<1&&(i+=4);var a=routePatterns[s-1][i-1];return 0!=n&&0!=o||null!=inlineRoutePatterns[s-1][i-1]&&(a=inlineRoutePatterns[s-1][i-1]),a}};exports.mxEdgeStyle=mxEdgeStyle;var mxStyleRegistry={values:[],putValue:function(e,t){mxStyleRegistry.values[e]=t},getValue:function(e){return mxStyleRegistry.values[e]},getName:function(e){for(var t in mxStyleRegistry.values)if(mxStyleRegistry.values[t]==e)return t;return null}};mxStyleRegistry.putValue(mxConstants.EDGESTYLE_ELBOW,mxEdgeStyle.ElbowConnector),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_ENTITY_RELATION,mxEdgeStyle.EntityRelation),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_LOOP,mxEdgeStyle.Loop),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_SIDETOSIDE,mxEdgeStyle.SideToSide),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_TOPTOBOTTOM,mxEdgeStyle.TopToBottom),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_ORTHOGONAL,mxEdgeStyle.OrthConnector),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_SEGMENT,mxEdgeStyle.SegmentConnector),mxStyleRegistry.putValue(mxConstants.PERIMETER_ELLIPSE,mxPerimeter.EllipsePerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_RECTANGLE,mxPerimeter.RectanglePerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_RHOMBUS,mxPerimeter.RhombusPerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_TRIANGLE,mxPerimeter.TrianglePerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_HEXAGON,mxPerimeter.HexagonPerimeter),exports.mxStyleRegistry=mxStyleRegistry,mxGraphView.prototype=new mxEventSource,mxGraphView.prototype.constructor=mxGraphView,mxGraphView.prototype.EMPTY_POINT=new mxPoint,mxGraphView.prototype.doneResource="none"!=mxClient.language?"done":"",mxGraphView.prototype.updatingDocumentResource="none"!=mxClient.language?"updatingDocument":"",mxGraphView.prototype.allowEval=!1,mxGraphView.prototype.captureDocumentGesture=!0,mxGraphView.prototype.optimizeVmlReflows=!0,mxGraphView.prototype.rendering=!0,mxGraphView.prototype.graph=null,mxGraphView.prototype.currentRoot=null,mxGraphView.prototype.graphBounds=null,mxGraphView.prototype.scale=1,mxGraphView.prototype.translate=null,mxGraphView.prototype.updateStyle=!1,mxGraphView.prototype.lastNode=null,mxGraphView.prototype.lastHtmlNode=null,mxGraphView.prototype.lastForegroundNode=null,mxGraphView.prototype.lastForegroundHtmlNode=null,mxGraphView.prototype.getGraphBounds=function(){return this.graphBounds},mxGraphView.prototype.setGraphBounds=function(e){this.graphBounds=e},mxGraphView.prototype.getBounds=function(e){var t=null;if(null!=e&&e.length>0)for(var n=this.graph.getModel(),o=0;o<e.length;o++)if(n.isVertex(e[o])||n.isEdge(e[o])){var s=this.getState(e[o]);null!=s&&(null==t?t=mxRectangle.fromRectangle(s):t.add(s))}return t},mxGraphView.prototype.setCurrentRoot=function(e){if(this.currentRoot!=e){var t=new mxCurrentRootChange(this,e);t.execute();var n=new mxUndoableEdit(this,!1);n.add(t),this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",n)),this.graph.sizeDidChange()}return e},mxGraphView.prototype.scaleAndTranslate=function(e,t,n){var o=this.scale,s=new mxPoint(this.translate.x,this.translate.y);this.scale==e&&this.translate.x==t&&this.translate.y==n||(this.scale=e,this.translate.x=t,this.translate.y=n,this.isEventsEnabled()&&(this.revalidate(),this.graph.sizeDidChange())),this.fireEvent(new mxEventObject(mxEvent.SCALE_AND_TRANSLATE,"scale",e,"previousScale",o,"translate",this.translate,"previousTranslate",s))},mxGraphView.prototype.getScale=function(){return this.scale},mxGraphView.prototype.setScale=function(e){var t=this.scale;this.scale!=e&&(this.scale=e,this.isEventsEnabled()&&(this.revalidate(),this.graph.sizeDidChange())),this.fireEvent(new mxEventObject(mxEvent.SCALE,"scale",e,"previousScale",t))},mxGraphView.prototype.getTranslate=function(){return this.translate},mxGraphView.prototype.setTranslate=function(e,t){var n=new mxPoint(this.translate.x,this.translate.y);this.translate.x==e&&this.translate.y==t||(this.translate.x=e,this.translate.y=t,this.isEventsEnabled()&&(this.revalidate(),this.graph.sizeDidChange())),this.fireEvent(new mxEventObject(mxEvent.TRANSLATE,"translate",this.translate,"previousTranslate",n))},mxGraphView.prototype.refresh=function(){null!=this.currentRoot&&this.clear(),this.revalidate()},mxGraphView.prototype.revalidate=function(){this.invalidate(),this.validate()},mxGraphView.prototype.clear=function(e,t,n){var o=this.graph.getModel();if(e=e||o.getRoot(),t=null!=t&&t,n=null==n||n,this.removeState(e),n&&(t||e!=this.currentRoot))for(var s=o.getChildCount(e),i=0;i<s;i++)this.clear(o.getChildAt(e,i),t);else this.invalidate(e)},mxGraphView.prototype.invalidate=function(e,t,n){var o=this.graph.getModel();e=e||o.getRoot(),t=null==t||t,n=null==n||n;var s=this.getState(e);if(null!=s&&(s.invalid=!0),!e.invalidating){if(e.invalidating=!0,t)for(var i=o.getChildCount(e),a=0;a<i;a++){var l=o.getChildAt(e,a);this.invalidate(l,t,n)}if(n){var r=o.getEdgeCount(e);for(a=0;a<r;a++)this.invalidate(o.getEdgeAt(e,a),t,n)}delete e.invalidating}},mxGraphView.prototype.validate=function(e){var t=mxLog.enter("mxGraphView.validate");window.status=mxResources.get(this.updatingDocumentResource)||this.updatingDocumentResource,this.resetValidationState();var n=null;this.optimizeVmlReflows&&null!=this.canvas&&null==this.textDiv&&(8==document.documentMode&&!mxClient.IS_EM||mxClient.IS_QUIRKS)&&(this.placeholder=document.createElement("div"),this.placeholder.style.position="absolute",this.placeholder.style.width=this.canvas.clientWidth+"px",this.placeholder.style.height=this.canvas.clientHeight+"px",this.canvas.parentNode.appendChild(this.placeholder),n=this.drawPane.style.display,this.canvas.style.display="none",this.textDiv=document.createElement("div"),this.textDiv.style.position="absolute",this.textDiv.style.whiteSpace="nowrap",this.textDiv.style.visibility="hidden",this.textDiv.style.display=mxClient.IS_QUIRKS?"inline":"inline-block",this.textDiv.style.zoom="1",document.body.appendChild(this.textDiv));var o=this.getBoundingBox(this.validateCellState(this.validateCell(e||(null!=this.currentRoot?this.currentRoot:this.graph.getModel().getRoot()))));this.setGraphBounds(null!=o?o:this.getEmptyBounds()),this.validateBackground(),null!=n&&(this.canvas.style.display=n,this.textDiv.parentNode.removeChild(this.textDiv),null!=this.placeholder&&this.placeholder.parentNode.removeChild(this.placeholder),this.textDiv=null),this.resetValidationState(),window.status=mxResources.get(this.doneResource)||this.doneResource,mxLog.leave("mxGraphView.validate",t)},mxGraphView.prototype.getEmptyBounds=function(){return new mxRectangle(this.translate.x*this.scale,this.translate.y*this.scale)},mxGraphView.prototype.getBoundingBox=function(e,t){t=null==t||t;var n=null;if(null!=e&&(null!=e.shape&&null!=e.shape.boundingBox&&(n=e.shape.boundingBox.clone()),null!=e.text&&null!=e.text.boundingBox&&(null!=n?n.add(e.text.boundingBox):n=e.text.boundingBox.clone()),t))for(var o=this.graph.getModel(),s=o.getChildCount(e.cell),i=0;i<s;i++){var a=this.getBoundingBox(this.getState(o.getChildAt(e.cell,i)));null!=a&&(null==n?n=a:n.add(a))}return n},mxGraphView.prototype.createBackgroundPageShape=function(e){return new mxRectangleShape(e,"white","black")},mxGraphView.prototype.validateBackground=function(){this.validateBackgroundImage(),this.validateBackgroundPage()},mxGraphView.prototype.validateBackgroundImage=function(){var e=this.graph.getBackgroundImage();if(null!=e){if(null==this.backgroundImage||this.backgroundImage.image!=e.src){null!=this.backgroundImage&&this.backgroundImage.destroy();var t=new mxRectangle(0,0,1,1);this.backgroundImage=new mxImageShape(t,e.src),this.backgroundImage.dialect=this.graph.dialect,this.backgroundImage.init(this.backgroundPane),this.backgroundImage.redraw(),8!=document.documentMode||mxClient.IS_EM||mxEvent.addGestureListeners(this.backgroundImage.node,mxUtils.bind(this,function(n){this.graph.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(n))}),mxUtils.bind(this,function(n){this.graph.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(n))}),mxUtils.bind(this,function(n){this.graph.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(n))}))}this.redrawBackgroundImage(this.backgroundImage,e)}else null!=this.backgroundImage&&(this.backgroundImage.destroy(),this.backgroundImage=null)},mxGraphView.prototype.validateBackgroundPage=function(){if(this.graph.pageVisible){var e=this.getBackgroundPageBounds();null==this.backgroundPageShape?(this.backgroundPageShape=this.createBackgroundPageShape(e),this.backgroundPageShape.scale=this.scale,this.backgroundPageShape.isShadow=!0,this.backgroundPageShape.dialect=this.graph.dialect,this.backgroundPageShape.init(this.backgroundPane),this.backgroundPageShape.redraw(),this.graph.nativeDblClickEnabled&&mxEvent.addListener(this.backgroundPageShape.node,"dblclick",mxUtils.bind(this,function(t){this.graph.dblClick(t)})),mxEvent.addGestureListeners(this.backgroundPageShape.node,mxUtils.bind(this,function(t){this.graph.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){null!=this.graph.tooltipHandler&&this.graph.tooltipHandler.isHideOnHover()&&this.graph.tooltipHandler.hide(),this.graph.isMouseDown&&!mxEvent.isConsumed(t)&&this.graph.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){this.graph.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t))}))):(this.backgroundPageShape.scale=this.scale,this.backgroundPageShape.bounds=e,this.backgroundPageShape.redraw())}else null!=this.backgroundPageShape&&(this.backgroundPageShape.destroy(),this.backgroundPageShape=null)},mxGraphView.prototype.getBackgroundPageBounds=function(){var e=this.graph.pageFormat,t=this.scale*this.graph.pageScale;return new mxRectangle(this.scale*this.translate.x,this.scale*this.translate.y,e.width*t,e.height*t)},mxGraphView.prototype.redrawBackgroundImage=function(e,t){e.scale=this.scale,e.bounds.x=this.scale*this.translate.x,e.bounds.y=this.scale*this.translate.y,e.bounds.width=this.scale*t.width,e.bounds.height=this.scale*t.height,e.redraw()},mxGraphView.prototype.validateCell=function(e,t){if(t=null==t||t,null!=e)if(t=t&&this.graph.isCellVisible(e),null==this.getState(e,t)||t)for(var o=this.graph.getModel(),s=o.getChildCount(e),i=0;i<s;i++)this.validateCell(o.getChildAt(e,i),t&&(!this.isCellCollapsed(e)||e==this.currentRoot));else this.removeState(e);return e},mxGraphView.prototype.validateCellState=function(e,t){t=null==t||t;var n=null;if(null!=e&&null!=(n=this.getState(e))){var o=this.graph.getModel();if(n.invalid&&(n.invalid=!1,null==n.style&&(n.style=this.graph.getCellStyle(n.cell)),e!=this.currentRoot&&this.validateCellState(o.getParent(e),!1),n.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(e,!0),!1),!0),n.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(e,!1),!1),!1),this.updateCellState(n),e==this.currentRoot||n.invalid||this.graph.cellRenderer.redraw(n,!1,this.isRendering())),t&&!n.invalid){null!=n.shape&&this.stateValidated(n);for(var s=o.getChildCount(e),i=0;i<s;i++)this.validateCellState(o.getChildAt(e,i))}}return n},mxGraphView.prototype.updateCellState=function(e){if(e.absoluteOffset.x=0,e.absoluteOffset.y=0,e.origin.x=0,e.origin.y=0,e.length=0,e.cell!=this.currentRoot){var t=this.graph.getModel(),n=this.getState(t.getParent(e.cell));null!=n&&n.cell!=this.currentRoot&&(e.origin.x+=n.origin.x,e.origin.y+=n.origin.y);var o=this.graph.getChildOffsetForCell(e.cell);null!=o&&(e.origin.x+=o.x,e.origin.y+=o.y);var s=this.graph.getCellGeometry(e.cell);if(null!=s){if(!t.isEdge(e.cell))if(o=s.offset||this.EMPTY_POINT,s.relative&&null!=n)if(t.isEdge(n.cell)){var i=this.getPoint(n,s);null!=i&&(e.origin.x+=i.x/this.scale-n.origin.x-this.translate.x,e.origin.y+=i.y/this.scale-n.origin.y-this.translate.y)}else e.origin.x+=s.x*n.width/this.scale+o.x,e.origin.y+=s.y*n.height/this.scale+o.y;else e.absoluteOffset.x=this.scale*o.x,e.absoluteOffset.y=this.scale*o.y,e.origin.x+=s.x,e.origin.y+=s.y;e.x=this.scale*(this.translate.x+e.origin.x),e.y=this.scale*(this.translate.y+e.origin.y),e.width=this.scale*s.width,e.unscaledWidth=s.width,e.height=this.scale*s.height,t.isVertex(e.cell)&&this.updateVertexState(e,s),t.isEdge(e.cell)&&this.updateEdgeState(e,s)}}e.updateCachedBounds()},mxGraphView.prototype.isCellCollapsed=function(e){return this.graph.isCellCollapsed(e)},mxGraphView.prototype.updateVertexState=function(e,t){var n=this.graph.getModel(),o=this.getState(n.getParent(e.cell));if(t.relative&&null!=o&&!n.isEdge(o.cell)){var s=mxUtils.toRadians(o.style[mxConstants.STYLE_ROTATION]||"0");if(0!=s){var i=Math.cos(s),a=Math.sin(s),l=new mxPoint(e.getCenterX(),e.getCenterY()),r=new mxPoint(o.getCenterX(),o.getCenterY()),d=mxUtils.getRotatedPoint(l,i,a,r);e.x=d.x-e.width/2,e.y=d.y-e.height/2}}this.updateVertexLabelOffset(e)},mxGraphView.prototype.updateEdgeState=function(e,t){var n=e.getVisibleTerminalState(!0),o=e.getVisibleTerminalState(!1);if(null!=this.graph.model.getTerminal(e.cell,!0)&&null==n||null==n&&null==t.getTerminalPoint(!0)||null!=this.graph.model.getTerminal(e.cell,!1)&&null==o||null==o&&null==t.getTerminalPoint(!1))this.clear(e.cell,!0);else{this.updateFixedTerminalPoints(e,n,o),this.updatePoints(e,t.points,n,o),this.updateFloatingTerminalPoints(e,n,o);var s=e.absolutePoints;e.cell!=this.currentRoot&&(null==s||s.length<2||null==s[0]||null==s[s.length-1])?this.clear(e.cell,!0):(this.updateEdgeBounds(e),this.updateEdgeLabelOffset(e))}},mxGraphView.prototype.updateVertexLabelOffset=function(e){var t=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER);if(t==mxConstants.ALIGN_LEFT)null!=(n=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_WIDTH,null))?n*=this.scale:n=e.width,e.absoluteOffset.x-=n;else if(t==mxConstants.ALIGN_RIGHT)e.absoluteOffset.x+=e.width;else if(t==mxConstants.ALIGN_CENTER){var n;if(null!=(n=mxUtils.getValue(e.style,mxConstants.STYLE_LABEL_WIDTH,null))){var o=mxUtils.getValue(e.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER),s=0;o==mxConstants.ALIGN_CENTER?s=.5:o==mxConstants.ALIGN_RIGHT&&(s=1),0!=s&&(e.absoluteOffset.x-=(n*this.scale-e.width)*s)}}var i=mxUtils.getValue(e.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE);i==mxConstants.ALIGN_TOP?e.absoluteOffset.y-=e.height:i==mxConstants.ALIGN_BOTTOM&&(e.absoluteOffset.y+=e.height)},mxGraphView.prototype.resetValidationState=function(){this.lastNode=null,this.lastHtmlNode=null,this.lastForegroundNode=null,this.lastForegroundHtmlNode=null},mxGraphView.prototype.stateValidated=function(e){var t=this.graph.getModel().isEdge(e.cell)&&this.graph.keepEdgesInForeground||this.graph.getModel().isVertex(e.cell)&&this.graph.keepEdgesInBackground,s=this.graph.cellRenderer.insertStateAfter(e,t&&this.lastForegroundNode||this.lastNode,t&&this.lastForegroundHtmlNode||this.lastHtmlNode);t?(this.lastForegroundHtmlNode=s[1],this.lastForegroundNode=s[0]):(this.lastHtmlNode=s[1],this.lastNode=s[0])},mxGraphView.prototype.updateFixedTerminalPoints=function(e,t,n){this.updateFixedTerminalPoint(e,t,!0,this.graph.getConnectionConstraint(e,t,!0)),this.updateFixedTerminalPoint(e,n,!1,this.graph.getConnectionConstraint(e,n,!1))},mxGraphView.prototype.updateFixedTerminalPoint=function(e,t,n,o){e.setAbsoluteTerminalPoint(this.getFixedTerminalPoint(e,t,n,o),n)},mxGraphView.prototype.getFixedTerminalPoint=function(e,t,n,o){var s=null;if(null!=o&&(s=this.graph.getConnectionPoint(t,o)),null==s&&null==t){var i=this.scale,a=this.translate,l=e.origin;null!=(s=this.graph.getCellGeometry(e.cell).getTerminalPoint(n))&&(s=new mxPoint(i*(a.x+s.x+l.x),i*(a.y+s.y+l.y)))}return s},mxGraphView.prototype.updateBoundsFromStencil=function(e){var t=null;if(null!=e&&null!=e.shape&&null!=e.shape.stencil&&"fixed"==e.shape.stencil.aspect){t=mxRectangle.fromRectangle(e);var n=e.shape.stencil.computeAspect(e.style,e.x,e.y,e.width,e.height);e.setRect(n.x,n.y,e.shape.stencil.w0*n.width,e.shape.stencil.h0*n.height)}return t},mxGraphView.prototype.updatePoints=function(e,t,n,o){if(null!=e){var s=[];s.push(e.absolutePoints[0]);var i=this.getEdgeStyle(e,t,n,o);if(null!=i){var a=this.getTerminalPort(e,n,!0),l=this.getTerminalPort(e,o,!1),r=this.updateBoundsFromStencil(a),d=this.updateBoundsFromStencil(l);i(e,a,l,t,s),null!=r&&a.setRect(r.x,r.y,r.width,r.height),null!=d&&l.setRect(d.x,d.y,d.width,d.height)}else if(null!=t)for(var u=0;u<t.length;u++)if(null!=t[u]){var g=mxUtils.clone(t[u]);s.push(this.transformControlPoint(e,g))}var f=e.absolutePoints;s.push(f[f.length-1]),e.absolutePoints=s}},mxGraphView.prototype.transformControlPoint=function(e,t){if(null!=e&&null!=t){var n=e.origin;return new mxPoint(this.scale*(t.x+this.translate.x+n.x),this.scale*(t.y+this.translate.y+n.y))}return null},mxGraphView.prototype.isLoopStyleEnabled=function(e,t,n,o){var s=this.graph.getConnectionConstraint(e,n,!0),i=this.graph.getConnectionConstraint(e,o,!1);return!(mxUtils.getValue(e.style,mxConstants.STYLE_ORTHOGONAL_LOOP,!1)&&(null!=s&&null!=s.point||null!=i&&null!=i.point)||null==n||n!=o)},mxGraphView.prototype.getEdgeStyle=function(e,t,n,o){var s=this.isLoopStyleEnabled(e,t,n,o)?mxUtils.getValue(e.style,mxConstants.STYLE_LOOP,this.graph.defaultLoopStyle):mxUtils.getValue(e.style,mxConstants.STYLE_NOEDGESTYLE,!1)?null:e.style[mxConstants.STYLE_EDGE];if("string"==typeof s){var i=mxStyleRegistry.getValue(s);null==i&&this.isAllowEval()&&(i=mxUtils.eval(s)),s=i}return"function"==typeof s?s:null},mxGraphView.prototype.updateFloatingTerminalPoints=function(e,t,n){var o=e.absolutePoints,s=o[0];null==o[o.length-1]&&null!=n&&this.updateFloatingTerminalPoint(e,n,t,!1),null==s&&null!=t&&this.updateFloatingTerminalPoint(e,t,n,!0)},mxGraphView.prototype.updateFloatingTerminalPoint=function(e,t,n,o){e.setAbsoluteTerminalPoint(this.getFloatingTerminalPoint(e,t,n,o),o)},mxGraphView.prototype.getFloatingTerminalPoint=function(e,t,n,o){t=this.getTerminalPort(e,t,o);var s=this.getNextPoint(e,n,o),i=this.graph.isOrthogonal(e),a=mxUtils.toRadians(Number(t.style[mxConstants.STYLE_ROTATION]||"0")),l=new mxPoint(t.getCenterX(),t.getCenterY());if(0!=a){var r=Math.cos(-a),d=Math.sin(-a);s=mxUtils.getRotatedPoint(s,r,d,l)}var u=parseFloat(e.style[mxConstants.STYLE_PERIMETER_SPACING]||0);u+=parseFloat(e.style[o?mxConstants.STYLE_SOURCE_PERIMETER_SPACING:mxConstants.STYLE_TARGET_PERIMETER_SPACING]||0);var g=this.getPerimeterPoint(t,s,0==a&&i,u);return 0!=a&&(r=Math.cos(a),d=Math.sin(a),g=mxUtils.getRotatedPoint(g,r,d,l)),g},mxGraphView.prototype.getTerminalPort=function(e,t,n){var s=mxUtils.getValue(e.style,n?mxConstants.STYLE_SOURCE_PORT:mxConstants.STYLE_TARGET_PORT);if(null!=s){var i=this.getState(this.graph.getModel().getCell(s));null!=i&&(t=i)}return t},mxGraphView.prototype.getPerimeterPoint=function(e,t,n,o){var s=null;if(null!=e){var i=this.getPerimeterFunction(e);if(null!=i&&null!=t){var a=this.getPerimeterBounds(e,o);(a.width>0||a.height>0)&&(s=i(a,e,t,n))}null==s&&(s=this.getPoint(e))}return s},mxGraphView.prototype.getRoutingCenterX=function(e){var t=null!=e.style&&parseFloat(e.style[mxConstants.STYLE_ROUTING_CENTER_X])||0;return e.getCenterX()+t*e.width},mxGraphView.prototype.getRoutingCenterY=function(e){var t=null!=e.style&&parseFloat(e.style[mxConstants.STYLE_ROUTING_CENTER_Y])||0;return e.getCenterY()+t*e.height},mxGraphView.prototype.getPerimeterBounds=function(e,t){return t=null!=t?t:0,null!=e&&(t+=parseFloat(e.style[mxConstants.STYLE_PERIMETER_SPACING]||0)),e.getPerimeterBounds(t*this.scale)},mxGraphView.prototype.getPerimeterFunction=function(e){var t=e.style[mxConstants.STYLE_PERIMETER];if("string"==typeof t){var n=mxStyleRegistry.getValue(t);null==n&&this.isAllowEval()&&(n=mxUtils.eval(t)),t=n}return"function"==typeof t?t:null},mxGraphView.prototype.getNextPoint=function(e,t,n){var o=e.absolutePoints,s=null;if(null!=o&&o.length>=2){var i=o.length;s=o[n?Math.min(1,i-1):Math.max(0,i-2)]}return null==s&&null!=t&&(s=new mxPoint(t.getCenterX(),t.getCenterY())),s},mxGraphView.prototype.getVisibleTerminal=function(e,t){for(var n=this.graph.getModel(),o=n.getTerminal(e,t),s=o;null!=o&&o!=this.currentRoot;)this.graph.isCellVisible(s)&&!this.isCellCollapsed(o)||(s=o),o=n.getParent(o);return n.getParent(s)==n.getRoot()&&(s=null),s},mxGraphView.prototype.updateEdgeBounds=function(e){var t=e.absolutePoints,n=t[0],o=t[t.length-1];if(n.x!=o.x||n.y!=o.y){var s=o.x-n.x,i=o.y-n.y;e.terminalDistance=Math.sqrt(s*s+i*i)}else e.terminalDistance=0;var a=0,l=[],r=n;if(null!=r){for(var d=r.x,u=r.y,g=d,f=u,v=1;v<t.length;v++){var x=t[v];if(null!=x){s=r.x-x.x,i=r.y-x.y;var z=Math.sqrt(s*s+i*i);l.push(z),a+=z,r=x,d=Math.min(r.x,d),u=Math.min(r.y,u),g=Math.max(r.x,g),f=Math.max(r.y,f)}}e.length=a,e.segments=l,e.x=d,e.y=u,e.width=Math.max(1,g-d),e.height=Math.max(1,f-u)}},mxGraphView.prototype.getPoint=function(e,t){var n=e.getCenterX(),o=e.getCenterY();if(null==e.segments||null!=t&&!t.relative)null!=t&&null!=(s=t.offset)&&(n+=s.x,o+=s.y);else{for(var a=e.absolutePoints.length,l=Math.round((.5+(null!=t?t.x/2:0))*e.length),r=e.segments[0],d=0,u=1;l>=Math.round(d+r)&&u<a-1;)d+=r,r=e.segments[u++];var g=0==r?0:(l-d)/r,f=e.absolutePoints[u-1],v=e.absolutePoints[u];if(null!=f&&null!=v){var s,x=0,z=0,b=0;null!=t&&(x=t.y,null!=(s=t.offset)&&(z=s.x,b=s.y));var _=v.x-f.x,H=v.y-f.y;n=f.x+_*g+((0==r?0:H/r)*x+z)*this.scale,o=f.y+H*g-((0==r?0:_/r)*x-b)*this.scale}}return new mxPoint(n,o)},mxGraphView.prototype.getRelativePoint=function(e,t,n){var s=this.graph.getModel().getGeometry(e.cell);if(null!=s){var i=e.absolutePoints.length;if(s.relative&&i>1){for(var a=e.length,l=e.segments,r=e.absolutePoints[0],d=e.absolutePoints[1],u=mxUtils.ptSegDistSq(r.x,r.y,d.x,d.y,t,n),g=0,f=0,v=0,x=2;x<i;x++){f+=l[x-2];var z=mxUtils.ptSegDistSq(r.x,r.y,(d=e.absolutePoints[x]).x,d.y,t,n);z<=u&&(u=z,g=x-1,v=f),r=d}var b=l[g],T=(d=e.absolutePoints[g+1]).x,L=d.y,V=t,Y=n,J=(r=e.absolutePoints[g]).x-T,K=r.y-L,X=(V=J-(V-=T))*J+(Y=K-(Y-=L))*K,ne=Math.sqrt(X<=0?0:X*X/(J*J+K*K));ne>b&&(ne=b);var he=Math.sqrt(mxUtils.ptSegDistSq(r.x,r.y,d.x,d.y,t,n));return-1==mxUtils.relativeCcw(r.x,r.y,d.x,d.y,t,n)&&(he=-he),new mxPoint((a/2-v-ne)/a*-2,he/this.scale)}}return new mxPoint},mxGraphView.prototype.updateEdgeLabelOffset=function(e){var t=e.absolutePoints;if(e.absoluteOffset.x=e.getCenterX(),e.absoluteOffset.y=e.getCenterY(),null!=t&&t.length>0&&null!=e.segments){var n=this.graph.getCellGeometry(e.cell);if(n.relative){var o=this.getPoint(e,n);null!=o&&(e.absoluteOffset=o)}else{var s=t[0],i=t[t.length-1];if(null!=s&&null!=i){var r=0,d=0,u=n.offset;null!=u&&(r=u.x,d=u.y);var f=s.y+(i.y-s.y)/2+d*this.scale;e.absoluteOffset.x=s.x+(i.x-s.x)/2+r*this.scale,e.absoluteOffset.y=f}}}},mxGraphView.prototype.getState=function(e,t){t=t||!1;var n=null;return null!=e&&(n=this.states.get(e),t&&(null==n||this.updateStyle)&&this.graph.isCellVisible(e)&&(null==n?(n=this.createState(e),this.states.put(e,n)):n.style=this.graph.getCellStyle(e))),n},mxGraphView.prototype.isRendering=function(){return this.rendering},mxGraphView.prototype.setRendering=function(e){this.rendering=e},mxGraphView.prototype.isAllowEval=function(){return this.allowEval},mxGraphView.prototype.setAllowEval=function(e){this.allowEval=e},mxGraphView.prototype.getStates=function(){return this.states},mxGraphView.prototype.setStates=function(e){this.states=e},mxGraphView.prototype.getCellStates=function(e){if(null==e)return this.states;for(var t=[],n=0;n<e.length;n++){var o=this.getState(e[n]);null!=o&&t.push(o)}return t},mxGraphView.prototype.removeState=function(e){var t=null;return null!=e&&null!=(t=this.states.remove(e))&&(this.graph.cellRenderer.destroy(t),t.invalid=!0,t.destroy()),t},mxGraphView.prototype.createState=function(e){return new mxCellState(this,e,this.graph.getCellStyle(e))},mxGraphView.prototype.getCanvas=function(){return this.canvas},mxGraphView.prototype.getBackgroundPane=function(){return this.backgroundPane},mxGraphView.prototype.getDrawPane=function(){return this.drawPane},mxGraphView.prototype.getOverlayPane=function(){return this.overlayPane},mxGraphView.prototype.getDecoratorPane=function(){return this.decoratorPane},mxGraphView.prototype.isContainerEvent=function(e){var t=mxEvent.getSource(e);return t==this.graph.container||t.parentNode==this.backgroundPane||null!=t.parentNode&&t.parentNode.parentNode==this.backgroundPane||t==this.canvas.parentNode||t==this.canvas||t==this.backgroundPane||t==this.drawPane||t==this.overlayPane||t==this.decoratorPane},mxGraphView.prototype.isScrollEvent=function(e){var t=mxUtils.getOffset(this.graph.container),n=new mxPoint(e.clientX-t.x,e.clientY-t.y),o=this.graph.container.offsetWidth,s=this.graph.container.clientWidth;if(o>s&&n.x>s+2&&n.x<=o)return!0;var i=this.graph.container.offsetHeight,a=this.graph.container.clientHeight;return i>a&&n.y>a+2&&n.y<=i},mxGraphView.prototype.init=function(){this.installListeners();var e=this.graph;e.dialect==mxConstants.DIALECT_SVG?this.createSvg():e.dialect==mxConstants.DIALECT_VML?this.createVml():this.createHtml()},mxGraphView.prototype.installListeners=function(){var e=this.graph,t=e.container;null!=t&&(mxClient.IS_TOUCH&&(mxEvent.addListener(t,"gesturestart",mxUtils.bind(this,function(o){e.fireGestureEvent(o),mxEvent.consume(o)})),mxEvent.addListener(t,"gesturechange",mxUtils.bind(this,function(o){e.fireGestureEvent(o),mxEvent.consume(o)})),mxEvent.addListener(t,"gestureend",mxUtils.bind(this,function(o){e.fireGestureEvent(o),mxEvent.consume(o)}))),mxEvent.addGestureListeners(t,mxUtils.bind(this,function(o){!this.isContainerEvent(o)||(mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_GC||mxClient.IS_OP||mxClient.IS_SF)&&this.isScrollEvent(o)||e.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(o))}),mxUtils.bind(this,function(o){this.isContainerEvent(o)&&e.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(o))}),mxUtils.bind(this,function(o){this.isContainerEvent(o)&&e.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(o))})),mxEvent.addListener(t,"dblclick",mxUtils.bind(this,function(o){this.isContainerEvent(o)&&e.dblClick(o)})),e.addMouseListener({mouseDown:function(o,s){e.popupMenuHandler.hideMenu()},mouseMove:function(){},mouseUp:function(){}}),this.moveHandler=mxUtils.bind(this,function(o){null!=e.tooltipHandler&&e.tooltipHandler.isHideOnHover()&&e.tooltipHandler.hide(),this.captureDocumentGesture&&e.isMouseDown&&null!=e.container&&!this.isContainerEvent(o)&&"none"!=e.container.style.display&&"hidden"!=e.container.style.visibility&&!mxEvent.isConsumed(o)&&e.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(o,function(o){var s=null;if(mxClient.IS_TOUCH){var i=mxEvent.getClientX(o),a=mxEvent.getClientY(o),l=mxUtils.convertPoint(t,i,a);s=e.view.getState(e.getCellAt(l.x,l.y))}return s}(o)))}),this.endHandler=mxUtils.bind(this,function(o){this.captureDocumentGesture&&e.isMouseDown&&null!=e.container&&!this.isContainerEvent(o)&&"none"!=e.container.style.display&&"hidden"!=e.container.style.visibility&&e.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(o))}),mxEvent.addGestureListeners(document,null,this.moveHandler,this.endHandler))},mxGraphView.prototype.createHtml=function(){var e=this.graph.container;if(null!=e&&(this.canvas=this.createHtmlPane("100%","100%"),this.backgroundPane=this.createHtmlPane("1px","1px"),this.drawPane=this.createHtmlPane("1px","1px"),this.overlayPane=this.createHtmlPane("1px","1px"),this.decoratorPane=this.createHtmlPane("1px","1px"),this.canvas.appendChild(this.backgroundPane),this.canvas.appendChild(this.drawPane),this.canvas.appendChild(this.overlayPane),this.canvas.appendChild(this.decoratorPane),e.appendChild(this.canvas),this.updateContainerStyle(e),mxClient.IS_QUIRKS)){var t=mxUtils.bind(this,function(n){var o=this.getGraphBounds();this.updateHtmlCanvasSize(o.x+o.width+this.graph.border,o.y+o.height+this.graph.border)});mxEvent.addListener(window,"resize",t)}},mxGraphView.prototype.updateHtmlCanvasSize=function(e,t){if(null!=this.graph.container){var o=this.graph.container.offsetHeight;this.canvas.style.width=this.graph.container.offsetWidth<e?e+"px":"100%",this.canvas.style.height=o<t?t+"px":"100%"}},mxGraphView.prototype.createHtmlPane=function(e,t){var n=document.createElement("DIV");return null!=e&&null!=t?(n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.style.width=e,n.style.height=t):n.style.position="relative",n},mxGraphView.prototype.createVml=function(){var e=this.graph.container;if(null!=e){var t=e.offsetWidth,n=e.offsetHeight;this.canvas=this.createVmlPane(t,n),this.backgroundPane=this.createVmlPane(t,n),this.drawPane=this.createVmlPane(t,n),this.overlayPane=this.createVmlPane(t,n),this.decoratorPane=this.createVmlPane(t,n),this.canvas.appendChild(this.backgroundPane),this.canvas.appendChild(this.drawPane),this.canvas.appendChild(this.overlayPane),this.canvas.appendChild(this.decoratorPane),e.appendChild(this.canvas)}},mxGraphView.prototype.createVmlPane=function(e,t){var n=document.createElement(mxClient.VML_PREFIX+":group");return n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.style.width=e+"px",n.style.height=t+"px",n.setAttribute("coordsize",e+","+t),n.setAttribute("coordorigin","0,0"),n},mxGraphView.prototype.createSvg=function(){var e=this.graph.container;this.canvas=document.createElementNS(mxConstants.NS_SVG,"g"),this.backgroundPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.backgroundPane),this.drawPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.drawPane),this.overlayPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.overlayPane),this.decoratorPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.decoratorPane);var t=document.createElementNS(mxConstants.NS_SVG,"svg");t.style.width="100%",t.style.height="100%",t.style.display="block",t.appendChild(this.canvas),null!=e&&(e.appendChild(t),this.updateContainerStyle(e))},mxGraphView.prototype.updateContainerStyle=function(e){var t=mxUtils.getCurrentStyle(e);null!=t&&"static"==t.position&&(e.style.position="relative"),mxClient.IS_POINTER&&(e.style.touchAction="none")},mxGraphView.prototype.destroy=function(){var e=null!=this.canvas?this.canvas.ownerSVGElement:null;null==e&&(e=this.canvas),null!=e&&null!=e.parentNode&&(this.clear(this.currentRoot,!0),mxEvent.removeGestureListeners(document,null,this.moveHandler,this.endHandler),mxEvent.release(this.graph.container),e.parentNode.removeChild(e),this.moveHandler=null,this.endHandler=null,this.canvas=null,this.backgroundPane=null,this.drawPane=null,this.overlayPane=null,this.decoratorPane=null)},mxCurrentRootChange.prototype.execute=function(){var e=this.view.currentRoot;this.view.currentRoot=this.previous,this.previous=e;var t=this.view.graph.getTranslateForRoot(this.view.currentRoot);null!=t&&(this.view.translate=new mxPoint(-t.x,-t.y)),this.isUp?(this.view.clear(this.view.currentRoot,!0),this.view.validate()):this.view.refresh(),this.view.fireEvent(new mxEventObject(this.isUp?mxEvent.UP:mxEvent.DOWN,"root",this.view.currentRoot,"previous",this.previous)),this.isUp=!this.isUp},exports.mxGraphView=mxGraphView,mxLoadResources&&mxResources.add(mxClient.basePath+"/resources/graph"),mxGraph.prototype=new mxEventSource,mxGraph.prototype.constructor=mxGraph,mxGraph.prototype.EMPTY_ARRAY=[],mxGraph.prototype.mouseListeners=null,mxGraph.prototype.isMouseDown=!1,mxGraph.prototype.model=null,mxGraph.prototype.view=null,mxGraph.prototype.stylesheet=null,mxGraph.prototype.selectionModel=null,mxGraph.prototype.cellEditor=null,mxGraph.prototype.cellRenderer=null,mxGraph.prototype.multiplicities=null,mxGraph.prototype.renderHint=null,mxGraph.prototype.dialect=null,mxGraph.prototype.gridSize=10,mxGraph.prototype.gridEnabled=!0,mxGraph.prototype.portsEnabled=!0,mxGraph.prototype.nativeDblClickEnabled=!0,mxGraph.prototype.doubleTapEnabled=!0,mxGraph.prototype.doubleTapTimeout=500,mxGraph.prototype.doubleTapTolerance=25,mxGraph.prototype.lastTouchY=0,mxGraph.prototype.lastTouchY=0,mxGraph.prototype.lastTouchTime=0,mxGraph.prototype.tapAndHoldEnabled=!0,mxGraph.prototype.tapAndHoldDelay=500,mxGraph.prototype.tapAndHoldInProgress=!1,mxGraph.prototype.tapAndHoldValid=!1,mxGraph.prototype.initialTouchX=0,mxGraph.prototype.initialTouchY=0,mxGraph.prototype.tolerance=4,mxGraph.prototype.defaultOverlap=.5,mxGraph.prototype.defaultParent=null,mxGraph.prototype.alternateEdgeStyle=null,mxGraph.prototype.backgroundImage=null,mxGraph.prototype.pageVisible=!1,mxGraph.prototype.pageBreaksVisible=!1,mxGraph.prototype.pageBreakColor="gray",mxGraph.prototype.pageBreakDashed=!0,mxGraph.prototype.minPageBreakDist=20,mxGraph.prototype.preferPageSize=!1,mxGraph.prototype.pageFormat=mxConstants.PAGE_FORMAT_A4_PORTRAIT,mxGraph.prototype.pageScale=1.5,mxGraph.prototype.enabled=!0,mxGraph.prototype.escapeEnabled=!0,mxGraph.prototype.invokesStopCellEditing=!0,mxGraph.prototype.enterStopsCellEditing=!1,mxGraph.prototype.useScrollbarsForPanning=!0,mxGraph.prototype.exportEnabled=!0,mxGraph.prototype.importEnabled=!0,mxGraph.prototype.cellsLocked=!1,mxGraph.prototype.cellsCloneable=!0,mxGraph.prototype.foldingEnabled=!0,mxGraph.prototype.cellsEditable=!0,mxGraph.prototype.cellsDeletable=!0,mxGraph.prototype.cellsMovable=!0,mxGraph.prototype.edgeLabelsMovable=!0,mxGraph.prototype.vertexLabelsMovable=!1,mxGraph.prototype.dropEnabled=!1,mxGraph.prototype.splitEnabled=!0,mxGraph.prototype.cellsResizable=!0,mxGraph.prototype.cellsBendable=!0,mxGraph.prototype.cellsSelectable=!0,mxGraph.prototype.cellsDisconnectable=!0,mxGraph.prototype.autoSizeCells=!1,mxGraph.prototype.autoSizeCellsOnAdd=!1,mxGraph.prototype.autoScroll=!0,mxGraph.prototype.ignoreScrollbars=!1,mxGraph.prototype.translateToScrollPosition=!1,mxGraph.prototype.timerAutoScroll=!1,mxGraph.prototype.allowAutoPanning=!1,mxGraph.prototype.autoExtend=!0,mxGraph.prototype.maximumGraphBounds=null,mxGraph.prototype.minimumGraphSize=null,mxGraph.prototype.minimumContainerSize=null,mxGraph.prototype.maximumContainerSize=null,mxGraph.prototype.resizeContainer=!1,mxGraph.prototype.border=0,mxGraph.prototype.keepEdgesInForeground=!1,mxGraph.prototype.keepEdgesInBackground=!1,mxGraph.prototype.allowNegativeCoordinates=!0,mxGraph.prototype.constrainChildren=!0,mxGraph.prototype.constrainRelativeChildren=!1,mxGraph.prototype.extendParents=!0,mxGraph.prototype.extendParentsOnAdd=!0,mxGraph.prototype.extendParentsOnMove=!1,mxGraph.prototype.recursiveResize=!1,mxGraph.prototype.collapseToPreferredSize=!0,mxGraph.prototype.zoomFactor=1.2,mxGraph.prototype.keepSelectionVisibleOnZoom=!1,mxGraph.prototype.centerZoom=!0,mxGraph.prototype.resetViewOnRootChange=!0,mxGraph.prototype.resetEdgesOnResize=!1,mxGraph.prototype.resetEdgesOnMove=!1,mxGraph.prototype.resetEdgesOnConnect=!0,mxGraph.prototype.allowLoops=!1,mxGraph.prototype.defaultLoopStyle=mxEdgeStyle.Loop,mxGraph.prototype.multigraph=!0,mxGraph.prototype.connectableEdges=!1,mxGraph.prototype.allowDanglingEdges=!0,mxGraph.prototype.cloneInvalidEdges=!1,mxGraph.prototype.disconnectOnMove=!0,mxGraph.prototype.labelsVisible=!0,mxGraph.prototype.htmlLabels=!1,mxGraph.prototype.swimlaneSelectionEnabled=!0,mxGraph.prototype.swimlaneNesting=!0,mxGraph.prototype.swimlaneIndicatorColorAttribute=mxConstants.STYLE_FILLCOLOR,mxGraph.prototype.imageBundles=null,mxGraph.prototype.minFitScale=.1,mxGraph.prototype.maxFitScale=8,mxGraph.prototype.panDx=0,mxGraph.prototype.panDy=0,mxGraph.prototype.collapsedImage=new mxImage(mxClient.imageBasePath+"/collapsed.gif",9,9),mxGraph.prototype.expandedImage=new mxImage(mxClient.imageBasePath+"/expanded.gif",9,9),mxGraph.prototype.warningImage=new mxImage(mxClient.imageBasePath+"/warning"+(mxClient.IS_MAC?".png":".gif"),16,16),mxGraph.prototype.alreadyConnectedResource="none"!=mxClient.language?"alreadyConnected":"",mxGraph.prototype.containsValidationErrorsResource="none"!=mxClient.language?"containsValidationErrors":"",mxGraph.prototype.collapseExpandResource="none"!=mxClient.language?"collapse-expand":"",mxGraph.prototype.init=function(e){this.container=e,this.cellEditor=this.createCellEditor(),this.view.init(),this.sizeDidChange(),mxEvent.addListener(e,"mouseleave",mxUtils.bind(this,function(){null!=this.tooltipHandler&&this.tooltipHandler.hide()})),mxClient.IS_IE&&(mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()})),mxEvent.addListener(e,"selectstart",mxUtils.bind(this,function(t){return this.isEditing()||!this.isMouseDown&&!mxEvent.isShiftDown(t)}))),8==document.documentMode&&e.insertAdjacentHTML("beforeend",'<v:group style="DISPLAY: none;"></v:group>')},mxGraph.prototype.createHandlers=function(){this.tooltipHandler=this.createTooltipHandler(),this.tooltipHandler.setEnabled(!1),this.selectionCellsHandler=this.createSelectionCellsHandler(),this.connectionHandler=this.createConnectionHandler(),this.connectionHandler.setEnabled(!1),this.graphHandler=this.createGraphHandler(),this.panningHandler=this.createPanningHandler(),this.panningHandler.panningEnabled=!1,this.popupMenuHandler=this.createPopupMenuHandler()},mxGraph.prototype.createTooltipHandler=function(){return new mxTooltipHandler(this)},mxGraph.prototype.createSelectionCellsHandler=function(){return new mxSelectionCellsHandler(this)},mxGraph.prototype.createConnectionHandler=function(){return new mxConnectionHandler(this)},mxGraph.prototype.createGraphHandler=function(){return new mxGraphHandler(this)},mxGraph.prototype.createPanningHandler=function(){return new mxPanningHandler(this)},mxGraph.prototype.createPopupMenuHandler=function(){return new mxPopupMenuHandler(this)},mxGraph.prototype.createSelectionModel=function(){return new mxGraphSelectionModel(this)},mxGraph.prototype.createStylesheet=function(){return new mxStylesheet},mxGraph.prototype.createGraphView=function(){return new mxGraphView(this)},mxGraph.prototype.createCellRenderer=function(){return new mxCellRenderer},mxGraph.prototype.createCellEditor=function(){return new mxCellEditor(this)},mxGraph.prototype.getModel=function(){return this.model},mxGraph.prototype.getView=function(){return this.view},mxGraph.prototype.getStylesheet=function(){return this.stylesheet},mxGraph.prototype.setStylesheet=function(e){this.stylesheet=e},mxGraph.prototype.getSelectionModel=function(){return this.selectionModel},mxGraph.prototype.setSelectionModel=function(e){this.selectionModel=e},mxGraph.prototype.getSelectionCellsForChanges=function(e){for(var t=[],n=0;n<e.length;n++){var o=e[n];if(o.constructor!=mxRootChange){var s=null;o instanceof mxChildChange&&null==o.previous?s=o.child:null!=o.cell&&o.cell instanceof mxCell&&(s=o.cell),null!=s&&mxUtils.indexOf(t,s)<0&&t.push(s)}}return this.getModel().getTopmostCells(t)},mxGraph.prototype.graphModelChanged=function(e){for(var t=0;t<e.length;t++)this.processChange(e[t]);this.removeSelectionCells(this.getRemovedCellsForChanges(e)),this.view.validate(),this.sizeDidChange()},mxGraph.prototype.getRemovedCellsForChanges=function(e){for(var t=[],n=0;n<e.length;n++){var o=e[n];if(o instanceof mxRootChange)break;o instanceof mxChildChange?null!=o.previous&&null==o.parent&&(t=t.concat(this.model.getDescendants(o.child))):o instanceof mxVisibleChange&&(t=t.concat(this.model.getDescendants(o.cell)))}return t},mxGraph.prototype.processChange=function(e){if(e instanceof mxRootChange)this.clearSelection(),this.removeStateForCell(e.previous),this.resetViewOnRootChange&&(this.view.scale=1,this.view.translate.x=0,this.view.translate.y=0),this.fireEvent(new mxEventObject(mxEvent.ROOT));else if(e instanceof mxChildChange){var t=this.model.getParent(e.child);this.view.invalidate(e.child,!0,!0),(null==t||this.isCellCollapsed(t))&&(this.view.invalidate(e.child,!0,!0),this.removeStateForCell(e.child),this.view.currentRoot==e.child&&this.home()),t!=e.previous&&(null!=t&&this.view.invalidate(t,!1,!1),null!=e.previous&&this.view.invalidate(e.previous,!1,!1))}else if(e instanceof mxTerminalChange||e instanceof mxGeometryChange)(e instanceof mxTerminalChange||null==e.previous&&null!=e.geometry||null!=e.previous&&!e.previous.equals(e.geometry))&&this.view.invalidate(e.cell);else if(e instanceof mxValueChange)this.view.invalidate(e.cell,!1,!1);else if(e instanceof mxStyleChange){this.view.invalidate(e.cell,!0,!0);var n=this.view.getState(e.cell);null!=n&&(n.style=null)}else null!=e.cell&&e.cell instanceof mxCell&&this.removeStateForCell(e.cell)},mxGraph.prototype.removeStateForCell=function(e){for(var t=this.model.getChildCount(e),n=0;n<t;n++)this.removeStateForCell(this.model.getChildAt(e,n));this.view.invalidate(e,!1,!0),this.view.removeState(e)},mxGraph.prototype.addCellOverlay=function(e,t){null==e.overlays&&(e.overlays=[]),e.overlays.push(t);var n=this.view.getState(e);return null!=n&&this.cellRenderer.redraw(n),this.fireEvent(new mxEventObject(mxEvent.ADD_OVERLAY,"cell",e,"overlay",t)),t},mxGraph.prototype.getCellOverlays=function(e){return e.overlays},mxGraph.prototype.removeCellOverlay=function(e,t){if(null==t)this.removeCellOverlays(e);else{var n=mxUtils.indexOf(e.overlays,t);if(n>=0){e.overlays.splice(n,1),0==e.overlays.length&&(e.overlays=null);var o=this.view.getState(e);null!=o&&this.cellRenderer.redraw(o),this.fireEvent(new mxEventObject(mxEvent.REMOVE_OVERLAY,"cell",e,"overlay",t))}else t=null}return t},mxGraph.prototype.removeCellOverlays=function(e){var t=e.overlays;if(null!=t){e.overlays=null;var n=this.view.getState(e);null!=n&&this.cellRenderer.redraw(n);for(var o=0;o<t.length;o++)this.fireEvent(new mxEventObject(mxEvent.REMOVE_OVERLAY,"cell",e,"overlay",t[o]))}return t},mxGraph.prototype.clearCellOverlays=function(e){e=null!=e?e:this.model.getRoot(),this.removeCellOverlays(e);for(var t=this.model.getChildCount(e),n=0;n<t;n++){var o=this.model.getChildAt(e,n);this.clearCellOverlays(o)}},mxGraph.prototype.setCellWarning=function(e,t,n,o){if(null!=t&&t.length>0){var s=new mxCellOverlay(n=null!=n?n:this.warningImage,"<font color=red>"+t+"</font>");return o&&s.addListener(mxEvent.CLICK,mxUtils.bind(this,function(i,a){this.isEnabled()&&this.setSelectionCell(e)})),this.addCellOverlay(e,s)}return this.removeCellOverlays(e),null},mxGraph.prototype.startEditing=function(e){this.startEditingAtCell(null,e)},mxGraph.prototype.startEditingAtCell=function(e,t){null!=t&&mxEvent.isMultiTouchEvent(t)||(null==e&&(null==(e=this.getSelectionCell())||this.isCellEditable(e)||(e=null)),null!=e&&(this.fireEvent(new mxEventObject(mxEvent.START_EDITING,"cell",e,"event",t)),this.cellEditor.startEditing(e,t),this.fireEvent(new mxEventObject(mxEvent.EDITING_STARTED,"cell",e,"event",t))))},mxGraph.prototype.getEditingValue=function(e,t){return this.convertValueToString(e)},mxGraph.prototype.stopEditing=function(e){this.cellEditor.stopEditing(e),this.fireEvent(new mxEventObject(mxEvent.EDITING_STOPPED,"cancel",e))},mxGraph.prototype.labelChanged=function(e,t,n){this.model.beginUpdate();try{var o=e.value;this.cellLabelChanged(e,t,this.isAutoSizeCell(e)),this.fireEvent(new mxEventObject(mxEvent.LABEL_CHANGED,"cell",e,"value",t,"old",o,"event",n))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellLabelChanged=function(e,t,n){this.model.beginUpdate();try{this.model.setValue(e,t),n&&this.cellSizeUpdated(e,!1)}finally{this.model.endUpdate()}},mxGraph.prototype.escape=function(e){this.fireEvent(new mxEventObject(mxEvent.ESCAPE,"event",e))},mxGraph.prototype.click=function(e){var t=e.getEvent(),n=e.getCell(),o=new mxEventObject(mxEvent.CLICK,"event",t,"cell",n);if(e.isConsumed()&&o.consume(),this.fireEvent(o),this.isEnabled()&&!mxEvent.isConsumed(t)&&!o.isConsumed())if(null!=n)this.selectCellForEvent(n,t);else{var s=null;this.isSwimlaneSelectionEnabled()&&(s=this.getSwimlaneAt(e.getGraphX(),e.getGraphY())),null!=s?this.selectCellForEvent(s,t):this.isToggleEvent(t)||this.clearSelection()}},mxGraph.prototype.dblClick=function(e,t){var n=new mxEventObject(mxEvent.DOUBLE_CLICK,"event",e,"cell",t);this.fireEvent(n),!this.isEnabled()||mxEvent.isConsumed(e)||n.isConsumed()||null==t||!this.isCellEditable(t)||this.isEditing(t)||(this.startEditingAtCell(t,e),mxEvent.consume(e))},mxGraph.prototype.tapAndHold=function(e){var t=e.getEvent(),n=new mxEventObject(mxEvent.TAP_AND_HOLD,"event",t,"cell",e.getCell());if(this.fireEvent(n),n.isConsumed()&&(this.panningHandler.panningTrigger=!1),this.isEnabled()&&!mxEvent.isConsumed(t)&&!n.isConsumed()&&this.connectionHandler.isEnabled()){var o=this.view.getState(this.connectionHandler.marker.getCell(e));null!=o&&(this.connectionHandler.marker.currentColor=this.connectionHandler.marker.validColor,this.connectionHandler.marker.markedState=o,this.connectionHandler.marker.mark(),this.connectionHandler.first=new mxPoint(e.getGraphX(),e.getGraphY()),this.connectionHandler.edgeState=this.connectionHandler.createEdgeState(e),this.connectionHandler.previous=o,this.connectionHandler.fireEvent(new mxEventObject(mxEvent.START,"state",this.connectionHandler.previous)))}},mxGraph.prototype.scrollPointToVisible=function(e,t,n,o){if(this.timerAutoScroll||!this.ignoreScrollbars&&!mxUtils.hasScrollbars(this.container))this.allowAutoPanning&&!this.panningHandler.isActive()&&(null==this.panningManager&&(this.panningManager=this.createPanningManager()),this.panningManager.panTo(e+this.panDx,t+this.panDy));else{var s=this.container;if(o=null!=o?o:20,e>=s.scrollLeft&&t>=s.scrollTop&&e<=s.scrollLeft+s.clientWidth&&t<=s.scrollTop+s.clientHeight){var i=s.scrollLeft+s.clientWidth-e;if(i<o){var a=s.scrollLeft;if(s.scrollLeft+=o-i,n&&a==s.scrollLeft){if(this.dialect==mxConstants.DIALECT_SVG)this.view.getDrawPane().ownerSVGElement.style.width=(r=this.container.scrollWidth+o-i)+"px";else{var r=Math.max(s.clientWidth,s.scrollWidth)+o-i;this.view.getCanvas().style.width=r+"px"}s.scrollLeft+=o-i}}else(i=e-s.scrollLeft)<o&&(s.scrollLeft-=o-i);var u=s.scrollTop+s.clientHeight-t;if(u<o){if(a=s.scrollTop,s.scrollTop+=o-u,a==s.scrollTop&&n){if(this.dialect==mxConstants.DIALECT_SVG)this.view.getDrawPane().ownerSVGElement.style.height=(g=this.container.scrollHeight+o-u)+"px";else{var g=Math.max(s.clientHeight,s.scrollHeight)+o-u;this.view.getCanvas().style.height=g+"px"}s.scrollTop+=o-u}}else(u=t-s.scrollTop)<o&&(s.scrollTop-=o-u)}}},mxGraph.prototype.createPanningManager=function(){return new mxPanningManager(this)},mxGraph.prototype.getBorderSizes=function(){var e=mxUtils.getCurrentStyle(this.container);return new mxRectangle(mxUtils.parseCssNumber(e.paddingLeft)+("none"!=e.borderLeftStyle?mxUtils.parseCssNumber(e.borderLeftWidth):0),mxUtils.parseCssNumber(e.paddingTop)+("none"!=e.borderTopStyle?mxUtils.parseCssNumber(e.borderTopWidth):0),mxUtils.parseCssNumber(e.paddingRight)+("none"!=e.borderRightStyle?mxUtils.parseCssNumber(e.borderRightWidth):0),mxUtils.parseCssNumber(e.paddingBottom)+("none"!=e.borderBottomStyle?mxUtils.parseCssNumber(e.borderBottomWidth):0))},mxGraph.prototype.getPreferredPageSize=function(e,t,n){var o=this.view.scale,s=this.view.translate,i=this.pageFormat,a=o*this.pageScale,l=new mxRectangle(0,0,i.width*a,i.height*a),r=this.pageBreaksVisible?Math.ceil(t/l.width):1,d=this.pageBreaksVisible?Math.ceil(n/l.height):1;return new mxRectangle(0,0,r*l.width+2+s.x/o,d*l.height+2+s.y/o)},mxGraph.prototype.fit=function(e,t,n,o,s,i){if(null!=this.container){e=null!=e?e:this.getBorder(),t=null!=t&&t,n=null!=n?n:0,o=null==o||o,s=null!=s&&s,i=null!=i&&i;var a=this.getBorderSizes(),l=this.container.offsetWidth-a.x-a.width-1,r=this.container.offsetHeight-a.y-a.height-1,d=this.view.getGraphBounds();if(d.width>0&&d.height>0){t&&null!=d.x&&null!=d.y&&((d=d.clone()).width+=d.x,d.height+=d.y,d.x=0,d.y=0);var u=this.view.scale,g=d.width/u,f=d.height/u;null!=this.backgroundImage&&(g=Math.max(g,this.backgroundImage.width-d.x/u),f=Math.max(f,this.backgroundImage.height-d.y/u));var v=(t?e:2*e)+n;l-=v,r-=v;var x=s?r/f:i?l/g:Math.min(l/g,r/f);if(null!=this.minFitScale&&(x=Math.max(x,this.minFitScale)),null!=this.maxFitScale&&(x=Math.min(x,this.maxFitScale)),!o)return x;if(t)this.view.scale!=x&&this.view.setScale(x);else if(mxUtils.hasScrollbars(this.container)){this.view.setScale(x);var z=this.getGraphBounds();null!=z.x&&(this.container.scrollLeft=z.x),null!=z.y&&(this.container.scrollTop=z.y)}else{var b=null!=d.x?Math.floor(this.view.translate.x-d.x/u+e/x+n/2):e,_=null!=d.y?Math.floor(this.view.translate.y-d.y/u+e/x+n/2):e;this.view.scaleAndTranslate(x,b,_)}}}return this.view.scale},mxGraph.prototype.sizeDidChange=function(){var e=this.getGraphBounds();if(null!=this.container){var t=this.getBorder(),n=Math.max(0,e.x+e.width+t),o=Math.max(0,e.y+e.height+t);if(null!=this.minimumContainerSize&&(n=Math.max(n,this.minimumContainerSize.width),o=Math.max(o,this.minimumContainerSize.height)),this.resizeContainer&&this.doResizeContainer(n,o),this.preferPageSize||!mxClient.IS_IE&&this.pageVisible){var s=this.getPreferredPageSize(e,n,o);null!=s&&(n=s.width*this.view.scale,o=s.height*this.view.scale)}if(null!=this.minimumGraphSize&&(n=Math.max(n,this.minimumGraphSize.width*this.view.scale),o=Math.max(o,this.minimumGraphSize.height*this.view.scale)),n=Math.ceil(n),o=Math.ceil(o),this.dialect==mxConstants.DIALECT_SVG){var i=this.view.getDrawPane().ownerSVGElement;i.style.minWidth=Math.max(1,n)+"px",i.style.minHeight=Math.max(1,o)+"px",i.style.width="100%",i.style.height="100%"}else mxClient.IS_QUIRKS?this.view.updateHtmlCanvasSize(Math.max(1,n),Math.max(1,o)):(this.view.canvas.style.minWidth=Math.max(1,n)+"px",this.view.canvas.style.minHeight=Math.max(1,o)+"px");this.updatePageBreaks(this.pageBreaksVisible,n,o)}this.fireEvent(new mxEventObject(mxEvent.SIZE,"bounds",e))},mxGraph.prototype.doResizeContainer=function(e,t){null!=this.maximumContainerSize&&(e=Math.min(this.maximumContainerSize.width,e),t=Math.min(this.maximumContainerSize.height,t)),this.container.style.width=Math.ceil(e)+"px",this.container.style.height=Math.ceil(t)+"px"},mxGraph.prototype.updatePageBreaks=function(e,t,n){var o=this.view.scale,s=this.view.translate,i=this.pageFormat,a=o*this.pageScale,l=new mxRectangle(0,0,i.width*a,i.height*a),r=mxRectangle.fromRectangle(this.getGraphBounds());l.x=Math.floor((r.x-s.x*o)/l.width)*l.width+s.x*o,l.y=Math.floor((r.y-s.y*o)/l.height)*l.height+s.y*o,r.width=Math.ceil((r.width+(r.x-l.x))/l.width)*l.width,r.height=Math.ceil((r.height+(r.y-l.y))/l.height)*l.height;var d=(e=e&&Math.min(l.width,l.height)>this.minPageBreakDist)?Math.ceil(r.width/l.width)+1:0,u=e?Math.ceil(r.height/l.height)+1:0,g=(d-1)*l.width,f=(u-1)*l.height;null==this.horizontalPageBreaks&&d>0&&(this.horizontalPageBreaks=[]),null==this.verticalPageBreaks&&u>0&&(this.verticalPageBreaks=[]);var v=mxUtils.bind(this,function(x){if(null!=x){for(var z=x==this.horizontalPageBreaks?d:u,b=0;b<=z;b++){var _=x==this.horizontalPageBreaks?[new mxPoint(l.x+b*l.width,l.y),new mxPoint(l.x+b*l.width,l.y+f)]:[new mxPoint(l.x,l.y+b*l.height),new mxPoint(l.x+g,l.y+b*l.height)];if(null!=x[b])x[b].points=_,x[b].redraw();else{var H=new mxPolyline(_,this.pageBreakColor);H.dialect=this.dialect,H.pointerEvents=!1,H.isDashed=this.pageBreakDashed,H.init(this.view.backgroundPane),H.redraw(),x[b]=H}}for(b=z;b<x.length;b++)x[b].destroy();x.splice(z,x.length-z)}});v(this.horizontalPageBreaks),v(this.verticalPageBreaks)},mxGraph.prototype.getCellStyle=function(e){var t=this.model.getStyle(e),n=null;return n=this.model.isEdge(e)?this.stylesheet.getDefaultEdgeStyle():this.stylesheet.getDefaultVertexStyle(),null!=t&&(n=this.postProcessCellStyle(this.stylesheet.getCellStyle(t,n))),null==n&&(n=mxGraph.prototype.EMPTY_ARRAY),n},mxGraph.prototype.postProcessCellStyle=function(e){if(null!=e){var t=e[mxConstants.STYLE_IMAGE],n=this.getImageFromBundles(t);if(null!=n?e[mxConstants.STYLE_IMAGE]=n:n=t,null!=n&&"data:image/"==n.substring(0,11)){if("data:image/svg+xml,<"==n.substring(0,20))n=n.substring(0,19)+encodeURIComponent(n.substring(19));else if("data:image/svg+xml,%3C"!=n.substring(0,22)){var o=n.indexOf(",");o>0&&";base64,"!=n.substring(o-7,o+1)&&(n=n.substring(0,o)+";base64,"+n.substring(o+1))}e[mxConstants.STYLE_IMAGE]=n}}return e},mxGraph.prototype.setCellStyle=function(e,t){if(null!=(t=t||this.getSelectionCells())){this.model.beginUpdate();try{for(var n=0;n<t.length;n++)this.model.setStyle(t[n],e)}finally{this.model.endUpdate()}}},mxGraph.prototype.toggleCellStyle=function(e,t,n){return n=n||this.getSelectionCell(),this.toggleCellStyles(e,t,[n])},mxGraph.prototype.toggleCellStyles=function(e,t,n){t=null!=t&&t;var o=null;if(null!=(n=n||this.getSelectionCells())&&n.length>0){var s=this.view.getState(n[0]),i=null!=s?s.style:this.getCellStyle(n[0]);null!=i&&(o=mxUtils.getValue(i,e,t)?0:1,this.setCellStyles(e,o,n))}return o},mxGraph.prototype.setCellStyles=function(e,t,n){n=n||this.getSelectionCells(),mxUtils.setCellStyles(this.model,n,e,t)},mxGraph.prototype.toggleCellStyleFlags=function(e,t,n){this.setCellStyleFlags(e,t,null,n)},mxGraph.prototype.setCellStyleFlags=function(e,t,n,o){if(null!=(o=o||this.getSelectionCells())&&o.length>0){if(null==n){var s=this.view.getState(o[0]),i=null!=s?s.style:this.getCellStyle(o[0]);null!=i&&(n=(parseInt(i[e]||0)&t)!=t)}mxUtils.setCellStyleFlags(this.model,o,e,t,n)}},mxGraph.prototype.alignCells=function(e,t,n){if(null==t&&(t=this.getSelectionCells()),null!=t&&t.length>1){if(null==n)for(var o=0;o<t.length;o++)if(null!=(s=this.view.getState(t[o]))&&!this.model.isEdge(t[o]))if(null==n){if(e==mxConstants.ALIGN_CENTER){n=s.x+s.width/2;break}if(e==mxConstants.ALIGN_RIGHT)n=s.x+s.width;else if(e==mxConstants.ALIGN_TOP)n=s.y;else{if(e==mxConstants.ALIGN_MIDDLE){n=s.y+s.height/2;break}n=e==mxConstants.ALIGN_BOTTOM?s.y+s.height:s.x}}else n=e==mxConstants.ALIGN_RIGHT?Math.max(n,s.x+s.width):e==mxConstants.ALIGN_TOP?Math.min(n,s.y):e==mxConstants.ALIGN_BOTTOM?Math.max(n,s.y+s.height):Math.min(n,s.x);if(null!=n){var i=this.view.scale;this.model.beginUpdate();try{for(o=0;o<t.length;o++){var s;if(null!=(s=this.view.getState(t[o]))){var a=this.getCellGeometry(t[o]);null==a||this.model.isEdge(t[o])||(a=a.clone(),e==mxConstants.ALIGN_CENTER?a.x+=(n-s.x-s.width/2)/i:e==mxConstants.ALIGN_RIGHT?a.x+=(n-s.x-s.width)/i:e==mxConstants.ALIGN_TOP?a.y+=(n-s.y)/i:e==mxConstants.ALIGN_MIDDLE?a.y+=(n-s.y-s.height/2)/i:e==mxConstants.ALIGN_BOTTOM?a.y+=(n-s.y-s.height)/i:a.x+=(n-s.x)/i,this.resizeCell(t[o],a))}}this.fireEvent(new mxEventObject(mxEvent.ALIGN_CELLS,"align",e,"cells",t))}finally{this.model.endUpdate()}}}return t},mxGraph.prototype.flipEdge=function(e){if(null!=e&&null!=this.alternateEdgeStyle){this.model.beginUpdate();try{var t=this.model.getStyle(e);this.model.setStyle(e,null==t||0==t.length?this.alternateEdgeStyle:null),this.resetEdge(e),this.fireEvent(new mxEventObject(mxEvent.FLIP_EDGE,"edge",e))}finally{this.model.endUpdate()}}return e},mxGraph.prototype.addImageBundle=function(e){this.imageBundles.push(e)},mxGraph.prototype.removeImageBundle=function(e){for(var t=[],n=0;n<this.imageBundles.length;n++)this.imageBundles[n]!=e&&t.push(this.imageBundles[n]);this.imageBundles=t},mxGraph.prototype.getImageFromBundles=function(e){if(null!=e)for(var t=0;t<this.imageBundles.length;t++){var n=this.imageBundles[t].getImage(e);if(null!=n)return n}return null},mxGraph.prototype.orderCells=function(e,t){null==t&&(t=mxUtils.sortCells(this.getSelectionCells(),!0)),this.model.beginUpdate();try{this.cellsOrdered(t,e),this.fireEvent(new mxEventObject(mxEvent.ORDER_CELLS,"back",e,"cells",t))}finally{this.model.endUpdate()}return t},mxGraph.prototype.cellsOrdered=function(e,t){if(null!=e){this.model.beginUpdate();try{for(var n=0;n<e.length;n++){var o=this.model.getParent(e[n]);this.model.add(o,e[n],t?n:this.model.getChildCount(o)-1)}this.fireEvent(new mxEventObject(mxEvent.CELLS_ORDERED,"back",t,"cells",e))}finally{this.model.endUpdate()}}},mxGraph.prototype.groupCells=function(e,t,n){null==n&&(n=mxUtils.sortCells(this.getSelectionCells(),!0)),n=this.getCellsForGroup(n),null==e&&(e=this.createGroupCell(n));var o=this.getBoundsForGroup(e,n,t);if(n.length>0&&null!=o){var s=this.model.getParent(e);null==s&&(s=this.model.getParent(n[0])),this.model.beginUpdate();try{null==this.getCellGeometry(e)&&this.model.setGeometry(e,new mxGeometry);var i=this.model.getChildCount(s);this.cellsAdded([e],s,i,null,null,!1),i=this.model.getChildCount(e),this.cellsAdded(n,e,i,null,null,!1,!1),this.cellsMoved(n,-o.x,-o.y,!1,!0),this.cellsResized([e],[o],!1),this.fireEvent(new mxEventObject(mxEvent.GROUP_CELLS,"group",e,"border",t,"cells",n))}finally{this.model.endUpdate()}}return e},mxGraph.prototype.getCellsForGroup=function(e){var t=[];if(null!=e&&e.length>0){var n=this.model.getParent(e[0]);t.push(e[0]);for(var o=1;o<e.length;o++)this.model.getParent(e[o])==n&&t.push(e[o])}return t},mxGraph.prototype.getBoundsForGroup=function(e,t,n){var o=this.getBoundingBoxFromGeometry(t,!0);if(null!=o){if(this.isSwimlane(e)){var s=this.getStartSize(e);o.x-=s.width,o.y-=s.height,o.width+=s.width,o.height+=s.height}null!=n&&(o.x-=n,o.y-=n,o.width+=2*n,o.height+=2*n)}return o},mxGraph.prototype.createGroupCell=function(e){var t=new mxCell("");return t.setVertex(!0),t.setConnectable(!1),t},mxGraph.prototype.ungroupCells=function(e){var t=[];if(null==e){e=this.getSelectionCells();for(var n=[],o=0;o<e.length;o++)this.model.getChildCount(e[o])>0&&n.push(e[o]);e=n}if(null!=e&&e.length>0){this.model.beginUpdate();try{for(o=0;o<e.length;o++){var s=this.model.getChildren(e[o]);if(null!=s&&s.length>0){s=s.slice();var i=this.model.getParent(e[o]),a=this.model.getChildCount(i);this.cellsAdded(s,i,a,null,null,!0),t=t.concat(s)}}this.removeCellsAfterUngroup(e),this.fireEvent(new mxEventObject(mxEvent.UNGROUP_CELLS,"cells",e))}finally{this.model.endUpdate()}}return t},mxGraph.prototype.removeCellsAfterUngroup=function(e){this.cellsRemoved(this.addAllEdges(e))},mxGraph.prototype.removeCellsFromParent=function(e){null==e&&(e=this.getSelectionCells()),this.model.beginUpdate();try{var t=this.getDefaultParent(),n=this.model.getChildCount(t);this.cellsAdded(e,t,n,null,null,!0),this.fireEvent(new mxEventObject(mxEvent.REMOVE_CELLS_FROM_PARENT,"cells",e))}finally{this.model.endUpdate()}return e},mxGraph.prototype.updateGroupBounds=function(e,t,n,o,s,i,a){null==e&&(e=this.getSelectionCells()),t=null!=t?t:0,n=null!=n&&n,o=null!=o?o:0,s=null!=s?s:0,i=null!=i?i:0,a=null!=a?a:0,this.model.beginUpdate();try{for(var l=e.length-1;l>=0;l--){var r=this.getCellGeometry(e[l]);if(null!=r){var d=this.getChildCells(e[l]);if(null!=d&&d.length>0){var u=this.getBoundingBoxFromGeometry(d,!0);if(null!=u&&u.width>0&&u.height>0){var g=0,f=0;if(this.isSwimlane(e[l])){var v=this.getStartSize(e[l]);g=v.width,f=v.height}r=r.clone(),n&&(r.x=Math.round(r.x+u.x-t-g-a),r.y=Math.round(r.y+u.y-t-f-o)),r.width=Math.round(u.width+2*t+g+a+s),r.height=Math.round(u.height+2*t+f+o+i),this.model.setGeometry(e[l],r),this.moveCells(d,t+g-u.x+a,t+f-u.y+o)}}}}}finally{this.model.endUpdate()}return e},mxGraph.prototype.getBoundingBox=function(e){var t=null;if(null!=e&&e.length>0)for(var n=0;n<e.length;n++)if(this.model.isVertex(e[n])||this.model.isEdge(e[n])){var o=this.view.getBoundingBox(this.view.getState(e[n]),!0);null!=o&&(null==t?t=mxRectangle.fromRectangle(o):t.add(o))}return t},mxGraph.prototype.cloneCells=function(e,t,n){t=null==t||t;var o=null;if(null!=e){for(var s=new mxDictionary,i=[],a=0;a<e.length;a++)s.put(e[a],!0),i.push(e[a]);if(i.length>0){var l=this.view.scale,r=this.view.translate;for(o=this.model.cloneCells(e,!0,n),a=0;a<e.length;a++)if(!t&&this.model.isEdge(o[a])&&null!=this.getEdgeValidationError(o[a],this.model.getTerminal(o[a],!0),this.model.getTerminal(o[a],!1)))o[a]=null;else{var d=this.model.getGeometry(o[a]);if(null!=d){var u=this.view.getState(e[a]),g=this.view.getState(this.model.getParent(e[a]));if(null!=u&&null!=g){var f=g.origin.x,v=g.origin.y;if(this.model.isEdge(o[a])){for(var x=u.absolutePoints,z=this.model.getTerminal(e[a],!0);null!=z&&!s.get(z);)z=this.model.getParent(z);null==z&&d.setTerminalPoint(new mxPoint(x[0].x/l-r.x,x[0].y/l-r.y),!0);for(var b=this.model.getTerminal(e[a],!1);null!=b&&!s.get(b);)b=this.model.getParent(b);if(null==b){var _=x.length-1;d.setTerminalPoint(new mxPoint(x[_].x/l-r.x,x[_].y/l-r.y),!1)}var H=d.points;if(null!=H)for(var T=0;T<H.length;T++)H[T].x+=f,H[T].y+=v}else d.translate(f,v)}}}}else o=[]}return o},mxGraph.prototype.insertVertex=function(e,t,n,o,s,i,a,l,r){var d=this.createVertex(e,t,n,o,s,i,a,l,r);return this.addCell(d,e)},mxGraph.prototype.createVertex=function(e,t,n,o,s,i,a,l,r){var d=new mxGeometry(o,s,i,a);d.relative=null!=r&&r;var u=new mxCell(n,d,l);return u.setId(t),u.setVertex(!0),u.setConnectable(!0),u},mxGraph.prototype.insertEdge=function(e,t,n,o,s,i){var a=this.createEdge(e,t,n,o,s,i);return this.addEdge(a,e,o,s)},mxGraph.prototype.createEdge=function(e,t,n,o,s,i){var a=new mxCell(n,new mxGeometry,i);return a.setId(t),a.setEdge(!0),a.geometry.relative=!0,a},mxGraph.prototype.addEdge=function(e,t,n,o,s){return this.addCell(e,t,s,n,o)},mxGraph.prototype.addCell=function(e,t,n,o,s){return this.addCells([e],t,n,o,s)[0]},mxGraph.prototype.addCells=function(e,t,n,o,s){null==t&&(t=this.getDefaultParent()),null==n&&(n=this.model.getChildCount(t)),this.model.beginUpdate();try{this.cellsAdded(e,t,n,o,s,!1,!0),this.fireEvent(new mxEventObject(mxEvent.ADD_CELLS,"cells",e,"parent",t,"index",n,"source",o,"target",s))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellsAdded=function(e,t,n,o,s,i,a){if(null!=e&&null!=t&&null!=n){this.model.beginUpdate();try{for(var l=i?this.view.getState(t):null,r=null!=l?l.origin:null,d=new mxPoint(0,0),u=0;u<e.length;u++)if(null==e[u])n--;else{var g=this.model.getParent(e[u]);if(null!=r&&e[u]!=t&&t!=g){var f=this.view.getState(g),v=null!=f?f.origin:d,x=this.model.getGeometry(e[u]);if(null!=x){var z=v.x-r.x,b=v.y-r.y;(x=x.clone()).translate(z,b),x.relative||!this.model.isVertex(e[u])||this.isAllowNegativeCoordinates()||(x.x=Math.max(0,x.x),x.y=Math.max(0,x.y)),this.model.setGeometry(e[u],x)}}t==g&&n+u>this.model.getChildCount(t)&&n--,this.model.add(t,e[u],n+u),this.autoSizeCellsOnAdd&&this.autoSizeCell(e[u],!0),this.isExtendParentsOnAdd(e[u])&&this.isExtendParent(e[u])&&this.extendParent(e[u]),(null==a||a)&&this.constrainChild(e[u]),null!=o&&this.cellConnected(e[u],o,!0),null!=s&&this.cellConnected(e[u],s,!1)}this.fireEvent(new mxEventObject(mxEvent.CELLS_ADDED,"cells",e,"parent",t,"index",n,"source",o,"target",s,"absolute",i))}finally{this.model.endUpdate()}}},mxGraph.prototype.autoSizeCell=function(e,t){if(t=null==t||t)for(var n=this.model.getChildCount(e),o=0;o<n;o++)this.autoSizeCell(this.model.getChildAt(e,o));this.getModel().isVertex(e)&&this.isAutoSizeCell(e)&&this.updateCellSize(e)},mxGraph.prototype.removeCells=function(e,t){t=null==t||t,null==e&&(e=this.getDeletableCells(this.getSelectionCells())),t&&(e=this.getDeletableCells(this.addAllEdges(e))),this.model.beginUpdate();try{this.cellsRemoved(e),this.fireEvent(new mxEventObject(mxEvent.REMOVE_CELLS,"cells",e,"includeEdges",t))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellsRemoved=function(e){if(null!=e&&e.length>0){var t=this.view.scale,n=this.view.translate;this.model.beginUpdate();try{for(var o=new mxDictionary,s=0;s<e.length;s++)o.put(e[s],!0);for(s=0;s<e.length;s++){for(var i=this.getAllEdges([e[s]]),a=mxUtils.bind(this,function(d,u){var g=this.model.getGeometry(d);if(null!=g){var f=this.view.getState(d);if(null!=f){for(var v=f.getVisibleTerminal(u),x=!1;null!=v;){if(e[s]==v){x=!0;break}v=this.model.getParent(v)}if(x){var z=n.x,b=n.y,_=this.view.getState(this.model.getParent(d));null!=_&&this.model.isVertex(_.cell)&&(z=_.x/t,b=_.y/t),g=g.clone();var H=f.absolutePoints,T=u?0:H.length-1;g.setTerminalPoint(new mxPoint(H[T].x/t-z,H[T].y/t-b),u),this.model.setTerminal(i[l],null,u),this.model.setGeometry(i[l],g)}}}}),l=0;l<i.length;l++)o.get(i[l])||(a(i[l],!0),a(i[l],!1));this.model.remove(e[s])}this.fireEvent(new mxEventObject(mxEvent.CELLS_REMOVED,"cells",e))}finally{this.model.endUpdate()}}},mxGraph.prototype.splitEdge=function(e,t,n,o,s){o=o||0,s=s||0;var i=this.model.getParent(e),a=this.model.getTerminal(e,!0);this.model.beginUpdate();try{if(null==n){n=this.cloneCells([e])[0];var l=this.view.getState(e),r=this.getCellGeometry(n);if(null!=r&&null!=r.points&&null!=l){var d=this.view.translate,u=this.view.scale,g=mxUtils.findNearestSegment(l,(o+d.x)*u,(s+d.y)*u);r.points=r.points.slice(0,g),null!=(r=this.getCellGeometry(e))&&null!=r.points&&((r=r.clone()).points=r.points.slice(g),this.model.setGeometry(e,r))}}this.cellsMoved(t,o,s,!1,!1),this.cellsAdded(t,i,this.model.getChildCount(i),null,null,!0),this.cellsAdded([n],i,this.model.getChildCount(i),a,t[0],!1),this.cellConnected(e,t[0],!0),this.fireEvent(new mxEventObject(mxEvent.SPLIT_EDGE,"edge",e,"cells",t,"newEdge",n,"dx",o,"dy",s))}finally{this.model.endUpdate()}return n},mxGraph.prototype.toggleCells=function(e,t,n){null==t&&(t=this.getSelectionCells()),n&&(t=this.addAllEdges(t)),this.model.beginUpdate();try{this.cellsToggled(t,e),this.fireEvent(new mxEventObject(mxEvent.TOGGLE_CELLS,"show",e,"cells",t,"includeEdges",n))}finally{this.model.endUpdate()}return t},mxGraph.prototype.cellsToggled=function(e,t){if(null!=e&&e.length>0){this.model.beginUpdate();try{for(var n=0;n<e.length;n++)this.model.setVisible(e[n],t)}finally{this.model.endUpdate()}}},mxGraph.prototype.foldCells=function(e,t,n,o,s){t=null!=t&&t,null==n&&(n=this.getFoldableCells(this.getSelectionCells(),e)),this.stopEditing(!1),this.model.beginUpdate();try{this.cellsFolded(n,e,t,o),this.fireEvent(new mxEventObject(mxEvent.FOLD_CELLS,"collapse",e,"recurse",t,"cells",n))}finally{this.model.endUpdate()}return n},mxGraph.prototype.cellsFolded=function(e,t,n,o){if(null!=e&&e.length>0){this.model.beginUpdate();try{for(var s=0;s<e.length;s++)if((!o||this.isCellFoldable(e[s],t))&&t!=this.isCellCollapsed(e[s])){if(this.model.setCollapsed(e[s],t),this.swapBounds(e[s],t),this.isExtendParent(e[s])&&this.extendParent(e[s]),n){var i=this.model.getChildren(e[s]);this.foldCells(i,t,n)}this.constrainChild(e[s])}this.fireEvent(new mxEventObject(mxEvent.CELLS_FOLDED,"cells",e,"collapse",t,"recurse",n))}finally{this.model.endUpdate()}}},mxGraph.prototype.swapBounds=function(e,t){if(null!=e){var n=this.model.getGeometry(e);null!=n&&(n=n.clone(),this.updateAlternateBounds(e,n,t),n.swap(),this.model.setGeometry(e,n))}},mxGraph.prototype.updateAlternateBounds=function(e,t,n){if(null!=e&&null!=t){var o=this.view.getState(e),s=null!=o?o.style:this.getCellStyle(e);if(null==t.alternateBounds){var i=t;if(this.collapseToPreferredSize){var a=this.getPreferredSizeForCell(e);if(null!=a){i=a;var l=mxUtils.getValue(s,mxConstants.STYLE_STARTSIZE);l>0&&(i.height=Math.max(i.height,l))}}t.alternateBounds=new mxRectangle(0,0,i.width,i.height)}if(null!=t.alternateBounds){t.alternateBounds.x=t.x,t.alternateBounds.y=t.y;var r=mxUtils.toRadians(s[mxConstants.STYLE_ROTATION]||0);if(0!=r){var d=t.alternateBounds.getCenterX()-t.getCenterX(),u=t.alternateBounds.getCenterY()-t.getCenterY(),g=Math.cos(r),f=Math.sin(r),x=f*d+g*u;t.alternateBounds.x+=g*d-f*u-d,t.alternateBounds.y+=x-u}}}},mxGraph.prototype.addAllEdges=function(e){var t=e.slice();return mxUtils.removeDuplicates(t.concat(this.getAllEdges(e)))},mxGraph.prototype.getAllEdges=function(e){var t=[];if(null!=e)for(var n=0;n<e.length;n++){for(var o=this.model.getEdgeCount(e[n]),s=0;s<o;s++)t.push(this.model.getEdgeAt(e[n],s));var i=this.model.getChildren(e[n]);t=t.concat(this.getAllEdges(i))}return t},mxGraph.prototype.updateCellSize=function(e,t){t=null!=t&&t,this.model.beginUpdate();try{this.cellSizeUpdated(e,t),this.fireEvent(new mxEventObject(mxEvent.UPDATE_CELL_SIZE,"cell",e,"ignoreChildren",t))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellSizeUpdated=function(e,t){if(null!=e){this.model.beginUpdate();try{var n=this.getPreferredSizeForCell(e),o=this.model.getGeometry(e);if(null!=n&&null!=o){var s=this.isCellCollapsed(e);if(o=o.clone(),this.isSwimlane(e)){var i=this.view.getState(e),a=null!=i?i.style:this.getCellStyle(e),l=this.model.getStyle(e);null==l&&(l=""),mxUtils.getValue(a,mxConstants.STYLE_HORIZONTAL,!0)?(l=mxUtils.setStyle(l,mxConstants.STYLE_STARTSIZE,n.height+8),s&&(o.height=n.height+8),o.width=n.width):(l=mxUtils.setStyle(l,mxConstants.STYLE_STARTSIZE,n.width+8),s&&(o.width=n.width+8),o.height=n.height),this.model.setStyle(e,l)}else o.width=n.width,o.height=n.height;if(!t&&!s){var r=this.view.getBounds(this.model.getChildren(e));if(null!=r){var d=this.view.translate,u=this.view.scale,f=(r.y+r.height)/u-o.y-d.y;o.width=Math.max(o.width,(r.x+r.width)/u-o.x-d.x),o.height=Math.max(o.height,f)}}this.cellsResized([e],[o],!1)}}finally{this.model.endUpdate()}}},mxGraph.prototype.getPreferredSizeForCell=function(e){var t=null;if(null!=e){var n=this.view.getState(e)||this.view.createState(e),o=n.style;if(!this.model.isEdge(e)){var s=o[mxConstants.STYLE_FONTSIZE]||mxConstants.DEFAULT_FONTSIZE,i=0,a=0;null==this.getImage(n)&&null==o[mxConstants.STYLE_IMAGE]||o[mxConstants.STYLE_SHAPE]==mxConstants.SHAPE_LABEL&&(o[mxConstants.STYLE_VERTICAL_ALIGN]==mxConstants.ALIGN_MIDDLE&&(i+=parseFloat(o[mxConstants.STYLE_IMAGE_WIDTH])||mxLabel.prototype.imageSize),o[mxConstants.STYLE_ALIGN]!=mxConstants.ALIGN_CENTER&&(a+=parseFloat(o[mxConstants.STYLE_IMAGE_HEIGHT])||mxLabel.prototype.imageSize)),i+=2*(o[mxConstants.STYLE_SPACING]||0),i+=o[mxConstants.STYLE_SPACING_LEFT]||0,i+=o[mxConstants.STYLE_SPACING_RIGHT]||0,a+=2*(o[mxConstants.STYLE_SPACING]||0),a+=o[mxConstants.STYLE_SPACING_TOP]||0,a+=o[mxConstants.STYLE_SPACING_BOTTOM]||0;var l=this.getFoldingImage(n);null!=l&&(i+=l.width+8);var r=this.cellRenderer.getLabelValue(n);if(null!=r&&r.length>0){this.isHtmlLabel(n.cell)||(r=mxUtils.htmlEntities(r)),r=r.replace(/\n/g,"<br>");var d=mxUtils.getSizeForString(r,s,o[mxConstants.STYLE_FONTFAMILY]),u=d.width+i,g=d.height+a;if(!mxUtils.getValue(o,mxConstants.STYLE_HORIZONTAL,!0)){var f=g;g=u,u=f}this.gridEnabled&&(u=this.snap(u+this.gridSize/2),g=this.snap(g+this.gridSize/2)),t=new mxRectangle(0,0,u,g)}else{var v=4*this.gridSize;t=new mxRectangle(0,0,v,v)}}}return t},mxGraph.prototype.resizeCell=function(e,t,n){return this.resizeCells([e],[t],n)[0]},mxGraph.prototype.resizeCells=function(e,t,n){n=null!=n?n:this.isRecursiveResize(),this.model.beginUpdate();try{this.cellsResized(e,t,n),this.fireEvent(new mxEventObject(mxEvent.RESIZE_CELLS,"cells",e,"bounds",t))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellsResized=function(e,t,n){if(n=null!=n&&n,null!=e&&null!=t&&e.length==t.length){this.model.beginUpdate();try{for(var o=0;o<e.length;o++)this.cellResized(e[o],t[o],!1,n),this.isExtendParent(e[o])&&this.extendParent(e[o]),this.constrainChild(e[o]);this.resetEdgesOnResize&&this.resetEdges(e),this.fireEvent(new mxEventObject(mxEvent.CELLS_RESIZED,"cells",e,"bounds",t))}finally{this.model.endUpdate()}}},mxGraph.prototype.cellResized=function(e,t,n,o){var s=this.model.getGeometry(e);if(null!=s&&(s.x!=t.x||s.y!=t.y||s.width!=t.width||s.height!=t.height)){if(s=s.clone(),!n&&s.relative){var i=s.offset;null!=i&&(i.x+=t.x-s.x,i.y+=t.y-s.y)}else s.x=t.x,s.y=t.y;s.width=t.width,s.height=t.height,s.relative||!this.model.isVertex(e)||this.isAllowNegativeCoordinates()||(s.x=Math.max(0,s.x),s.y=Math.max(0,s.y)),this.model.beginUpdate();try{o&&this.resizeChildCells(e,s),this.model.setGeometry(e,s),this.constrainChildCells(e)}finally{this.model.endUpdate()}}},mxGraph.prototype.resizeChildCells=function(e,t){for(var n=this.model.getGeometry(e),o=t.width/n.width,s=t.height/n.height,i=this.model.getChildCount(e),a=0;a<i;a++)this.scaleCell(this.model.getChildAt(e,a),o,s,!0)},mxGraph.prototype.constrainChildCells=function(e){for(var t=this.model.getChildCount(e),n=0;n<t;n++)this.constrainChild(this.model.getChildAt(e,n))},mxGraph.prototype.scaleCell=function(e,t,n,o){var s=this.model.getGeometry(e);if(null!=s){var i=this.view.getState(e),a=null!=i?i.style:this.getCellStyle(e),l=(s=s.clone()).x,r=s.y,d=s.width,u=s.height;s.scale(t,n,"fixed"==a[mxConstants.STYLE_ASPECT]),"1"==a[mxConstants.STYLE_RESIZE_WIDTH]?s.width=d*t:"0"==a[mxConstants.STYLE_RESIZE_WIDTH]&&(s.width=d),"1"==a[mxConstants.STYLE_RESIZE_HEIGHT]?s.height=u*n:"0"==a[mxConstants.STYLE_RESIZE_HEIGHT]&&(s.height=u),this.isCellMovable(e)||(s.x=l,s.y=r),this.isCellResizable(e)||(s.width=d,s.height=u),this.model.isVertex(e)?this.cellResized(e,s,!0,o):this.model.setGeometry(e,s)}},mxGraph.prototype.extendParent=function(e){if(null!=e){var t=this.model.getParent(e),n=this.getCellGeometry(t);if(null!=t&&null!=n&&!this.isCellCollapsed(t)){var o=this.getCellGeometry(e);null!=o&&!o.relative&&(n.width<o.x+o.width||n.height<o.y+o.height)&&((n=n.clone()).width=Math.max(n.width,o.x+o.width),n.height=Math.max(n.height,o.y+o.height),this.cellsResized([t],[n],!1))}}},mxGraph.prototype.importCells=function(e,t,n,o,s,i){return this.moveCells(e,t,n,!0,o,s,i)},mxGraph.prototype.moveCells=function(e,t,n,o,s,i,a){if(t=null!=t?t:0,n=null!=n?n:0,o=null!=o&&o,null!=e&&(0!=t||0!=n||o||null!=s)){e=this.model.getTopmostCells(e),this.model.beginUpdate();try{for(var l=new mxDictionary,r=0;r<e.length;r++)l.put(e[r],!0);var d=mxUtils.bind(this,function(b){for(;null!=b;){if(l.get(b))return!0;b=this.model.getParent(b)}return!1}),u=[];for(r=0;r<e.length;r++){var g=this.getCellGeometry(e[r]),f=this.model.getParent(e[r]);null!=g&&g.relative&&this.model.isEdge(f)&&(d(this.model.getTerminal(f,!0))||d(this.model.getTerminal(f,!1)))||u.push(e[r])}e=u,o&&(e=this.cloneCells(e,this.isCloneInvalidEdges(),a),null==s&&(s=this.getDefaultParent()));var v=this.isAllowNegativeCoordinates();if(null!=s&&this.setAllowNegativeCoordinates(!0),this.cellsMoved(e,t,n,!o&&this.isDisconnectOnMove()&&this.isAllowDanglingEdges(),null==s,this.isExtendParentsOnMove()&&null==s),this.setAllowNegativeCoordinates(v),null!=s){var x=this.model.getChildCount(s);this.cellsAdded(e,s,x,null,null,!0)}this.fireEvent(new mxEventObject(mxEvent.MOVE_CELLS,"cells",e,"dx",t,"dy",n,"clone",o,"target",s,"event",i))}finally{this.model.endUpdate()}}return e},mxGraph.prototype.cellsMoved=function(e,t,n,o,s,i){if(null!=e&&(0!=t||0!=n)){i=null!=i&&i,this.model.beginUpdate();try{o&&this.disconnectGraph(e);for(var a=0;a<e.length;a++)this.translateCell(e[a],t,n),i&&this.isExtendParent(e[a])?this.extendParent(e[a]):s&&this.constrainChild(e[a]);this.resetEdgesOnMove&&this.resetEdges(e),this.fireEvent(new mxEventObject(mxEvent.CELLS_MOVED,"cells",e,"dx",t,"dy",n,"disconnect",o))}finally{this.model.endUpdate()}}},mxGraph.prototype.translateCell=function(e,t,n){var o=this.model.getGeometry(e);if(null!=o){if(t=parseFloat(t),n=parseFloat(n),(o=o.clone()).translate(t,n),o.relative||!this.model.isVertex(e)||this.isAllowNegativeCoordinates()||(o.x=Math.max(0,parseFloat(o.x)),o.y=Math.max(0,parseFloat(o.y))),o.relative&&!this.model.isEdge(e)){var s=this.model.getParent(e),i=0;if(this.model.isVertex(s)){var a=this.view.getState(s),l=null!=a?a.style:this.getCellStyle(s);i=mxUtils.getValue(l,mxConstants.STYLE_ROTATION,0)}if(0!=i){var r=mxUtils.toRadians(-i),d=Math.cos(r),u=Math.sin(r),g=mxUtils.getRotatedPoint(new mxPoint(t,n),d,u,new mxPoint(0,0));t=g.x,n=g.y}null==o.offset?o.offset=new mxPoint(t,n):(o.offset.x=parseFloat(o.offset.x)+t,o.offset.y=parseFloat(o.offset.y)+n)}this.model.setGeometry(e,o)}},mxGraph.prototype.getCellContainmentArea=function(e){if(null!=e&&!this.model.isEdge(e)){var t=this.model.getParent(e);if(null!=t&&t!=this.getDefaultParent()){var n=this.model.getGeometry(t);if(null!=n){var o=0,s=0,i=n.width,a=n.height;if(this.isSwimlane(t)){var l=this.getStartSize(t),r=this.view.getState(t),d=null!=r?r.style:this.getCellStyle(t),u=mxUtils.getValue(d,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST),g=1==mxUtils.getValue(d,mxConstants.STYLE_FLIPH,0),f=1==mxUtils.getValue(d,mxConstants.STYLE_FLIPV,0);if(u==mxConstants.DIRECTION_SOUTH||u==mxConstants.DIRECTION_NORTH){var v=l.width;l.width=l.height,l.height=v}(u==mxConstants.DIRECTION_EAST&&!f||u==mxConstants.DIRECTION_NORTH&&!g||u==mxConstants.DIRECTION_WEST&&f||u==mxConstants.DIRECTION_SOUTH&&g)&&(o=l.width,s=l.height),i-=l.width,a-=l.height}return new mxRectangle(o,s,i,a)}}}return null},mxGraph.prototype.getMaximumGraphBounds=function(){return this.maximumGraphBounds},mxGraph.prototype.constrainChild=function(e,t){if(t=null==t||t,null!=e){var n=this.getCellGeometry(e);if(null!=n&&(this.isConstrainRelativeChildren()||!n.relative)){var o=this.model.getParent(e),s=(this.getCellGeometry(o),this.getMaximumGraphBounds());if(null!=s){var i=this.getBoundingBoxFromGeometry([o],!1);null!=i&&((s=mxRectangle.fromRectangle(s)).x-=i.x,s.y-=i.y)}if(this.isConstrainChild(e)){var a=this.getCellContainmentArea(e);if(null!=a){var l=this.getOverlap(e);l>0&&((a=mxRectangle.fromRectangle(a)).x-=a.width*l,a.y-=a.height*l,a.width+=2*a.width*l,a.height+=2*a.height*l),null==s?s=a:(s=mxRectangle.fromRectangle(s)).intersect(a)}}if(null!=s){var r=[e];if(!this.isCellCollapsed(e))for(var d=this.model.getDescendants(e),u=0;u<d.length;u++)this.isCellVisible(d[u])&&r.push(d[u]);var g=this.getBoundingBoxFromGeometry(r,!1);if(null!=g){var f=0;(n=n.clone()).width>s.width&&(n.width-=f=n.width-s.width),g.x+g.width>s.x+s.width&&(f-=g.x+g.width-s.x-s.width-f);var v=0;n.height>s.height&&(n.height-=v=n.height-s.height),g.y+g.height>s.y+s.height&&(v-=g.y+g.height-s.y-s.height-v),g.x<s.x&&(f-=g.x-s.x),g.y<s.y&&(v-=g.y-s.y),0==f&&0==v||(n.relative?(null==n.offset&&(n.offset=new mxPoint),n.offset.x+=f,n.offset.y+=v):(n.x+=f,n.y+=v)),this.model.setGeometry(e,n)}}}}},mxGraph.prototype.resetEdges=function(e){if(null!=e){for(var t=new mxDictionary,n=0;n<e.length;n++)t.put(e[n],!0);this.model.beginUpdate();try{for(n=0;n<e.length;n++){var o=this.model.getEdges(e[n]);if(null!=o)for(var s=0;s<o.length;s++){var i=this.view.getState(o[s]),a=null!=i?i.getVisibleTerminal(!0):this.view.getVisibleTerminal(o[s],!0),l=null!=i?i.getVisibleTerminal(!1):this.view.getVisibleTerminal(o[s],!1);t.get(a)&&t.get(l)||this.resetEdge(o[s])}this.resetEdges(this.model.getChildren(e[n]))}}finally{this.model.endUpdate()}}},mxGraph.prototype.resetEdge=function(e){var t=this.model.getGeometry(e);return null!=t&&null!=t.points&&t.points.length>0&&((t=t.clone()).points=[],this.model.setGeometry(e,t)),e},mxGraph.prototype.getOutlineConstraint=function(e,t,n){if(null!=t.shape){var o=this.view.getPerimeterBounds(t),s=t.style[mxConstants.STYLE_DIRECTION];if(s==mxConstants.DIRECTION_NORTH||s==mxConstants.DIRECTION_SOUTH){o.x+=o.width/2-o.height/2,o.y+=o.height/2-o.width/2;var i=o.width;o.width=o.height,o.height=i}var a=mxUtils.toRadians(t.shape.getShapeRotation());if(0!=a){var l=Math.cos(-a),r=Math.sin(-a),d=new mxPoint(o.getCenterX(),o.getCenterY());e=mxUtils.getRotatedPoint(e,l,r,d)}var u=1,g=1,f=0,v=0;if(this.getModel().isVertex(t.cell)){var x=t.style[mxConstants.STYLE_FLIPH],z=t.style[mxConstants.STYLE_FLIPV];null!=t.shape&&null!=t.shape.stencil&&(x=1==mxUtils.getValue(t.style,"stencilFlipH",0)||x,z=1==mxUtils.getValue(t.style,"stencilFlipV",0)||z),(s==mxConstants.DIRECTION_NORTH||s==mxConstants.DIRECTION_SOUTH)&&(i=x,x=z,z=i),x&&(u=-1,f=-o.width),z&&(g=-1,v=-o.height)}return e=new mxPoint((e.x-o.x)*u-f+o.x,(e.y-o.y)*g-v+o.y),new mxConnectionConstraint(new mxPoint(Math.round(1e3*(e.x-o.x)/o.width)/1e3,Math.round(1e3*(e.y-o.y)/o.height)/1e3),!1)}return null},mxGraph.prototype.getAllConnectionConstraints=function(e,t){return null!=e&&null!=e.shape&&null!=e.shape.stencil?e.shape.stencil.constraints:null},mxGraph.prototype.getConnectionConstraint=function(e,t,n){var o=null,s=e.style[n?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X];if(null!=s){var i=e.style[n?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y];null!=i&&(o=new mxPoint(parseFloat(s),parseFloat(i)))}var a=!1;return null!=o&&(a=mxUtils.getValue(e.style,n?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,!0)),new mxConnectionConstraint(o,a)},mxGraph.prototype.setConnectionConstraint=function(e,t,n,o){if(null!=o){this.model.beginUpdate();try{null==o||null==o.point?(this.setCellStyles(n?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X,null,[e]),this.setCellStyles(n?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y,null,[e]),this.setCellStyles(n?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,null,[e])):null!=o.point&&(this.setCellStyles(n?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X,o.point.x,[e]),this.setCellStyles(n?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y,o.point.y,[e]),this.setCellStyles(n?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,o.perimeter?null:"0",[e]))}finally{this.model.endUpdate()}}},mxGraph.prototype.getConnectionPoint=function(e,t){var n=null;if(null!=e&&null!=t.point){var o=this.view.getPerimeterBounds(e),s=new mxPoint(o.getCenterX(),o.getCenterY()),i=e.style[mxConstants.STYLE_DIRECTION],a=0;if(null!=i&&(i==mxConstants.DIRECTION_NORTH?a+=270:i==mxConstants.DIRECTION_WEST?a+=180:i==mxConstants.DIRECTION_SOUTH&&(a+=90),i!=mxConstants.DIRECTION_NORTH&&i!=mxConstants.DIRECTION_SOUTH||o.rotate90()),null!=t.point){var l=1,r=1,d=0,u=0;if(this.getModel().isVertex(e.cell)){var g=e.style[mxConstants.STYLE_FLIPH],f=e.style[mxConstants.STYLE_FLIPV];if(null!=e.shape&&null!=e.shape.stencil&&(g=1==mxUtils.getValue(e.style,"stencilFlipH",0)||g,f=1==mxUtils.getValue(e.style,"stencilFlipV",0)||f),i==mxConstants.DIRECTION_NORTH||i==mxConstants.DIRECTION_SOUTH){var v=g;g=f,f=v}g&&(l=-1,d=-o.width),f&&(r=-1,u=-o.height)}n=new mxPoint(o.x+t.point.x*o.width*l-d,o.y+t.point.y*o.height*r-u)}var x=e.style[mxConstants.STYLE_ROTATION]||0;if(t.perimeter){if(0!=a&&null!=n){var z=0,b=0;90==a?b=1:180==a?z=-1:270==a&&(b=-1),n=mxUtils.getRotatedPoint(n,z,b,s)}null!=n&&t.perimeter&&(n=this.view.getPerimeterPoint(e,n,!1))}else x+=a;if(0!=x&&null!=n){var _=mxUtils.toRadians(x);z=Math.cos(_),b=Math.sin(_),n=mxUtils.getRotatedPoint(n,z,b,s)}}return null!=n&&(n.x=Math.round(n.x),n.y=Math.round(n.y)),n},mxGraph.prototype.connectCell=function(e,t,n,o){this.model.beginUpdate();try{var s=this.model.getTerminal(e,n);this.cellConnected(e,t,n,o),this.fireEvent(new mxEventObject(mxEvent.CONNECT_CELL,"edge",e,"terminal",t,"source",n,"previous",s))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellConnected=function(e,t,n,o){if(null!=e){this.model.beginUpdate();try{var s=this.model.getTerminal(e,n);if(this.setConnectionConstraint(e,t,n,o),this.isPortsEnabled()){var i=null;this.isPort(t)&&(i=t.getId(),t=this.getTerminalForPort(t,n)),this.setCellStyles(n?mxConstants.STYLE_SOURCE_PORT:mxConstants.STYLE_TARGET_PORT,i,[e])}this.model.setTerminal(e,t,n),this.resetEdgesOnConnect&&this.resetEdge(e),this.fireEvent(new mxEventObject(mxEvent.CELL_CONNECTED,"edge",e,"terminal",t,"source",n,"previous",s))}finally{this.model.endUpdate()}}},mxGraph.prototype.disconnectGraph=function(e){if(null!=e){this.model.beginUpdate();try{for(var t=this.view.scale,n=this.view.translate,o=new mxDictionary,s=0;s<e.length;s++)o.put(e[s],!0);for(s=0;s<e.length;s++)if(this.model.isEdge(e[s])){var i=this.model.getGeometry(e[s]);if(null!=i){var a=this.view.getState(e[s]),l=this.view.getState(this.model.getParent(e[s]));if(null!=a&&null!=l){i=i.clone();var r=-l.origin.x,d=-l.origin.y,u=a.absolutePoints,g=this.model.getTerminal(e[s],!0);if(null!=g&&this.isCellDisconnectable(e[s],g,!0)){for(;null!=g&&!o.get(g);)g=this.model.getParent(g);null==g&&(i.setTerminalPoint(new mxPoint(u[0].x/t-n.x+r,u[0].y/t-n.y+d),!0),this.model.setTerminal(e[s],null,!0))}var f=this.model.getTerminal(e[s],!1);if(null!=f&&this.isCellDisconnectable(e[s],f,!1)){for(;null!=f&&!o.get(f);)f=this.model.getParent(f);if(null==f){var v=u.length-1;i.setTerminalPoint(new mxPoint(u[v].x/t-n.x+r,u[v].y/t-n.y+d),!1),this.model.setTerminal(e[s],null,!1)}}this.model.setGeometry(e[s],i)}}}}finally{this.model.endUpdate()}}},mxGraph.prototype.getCurrentRoot=function(){return this.view.currentRoot},mxGraph.prototype.getTranslateForRoot=function(e){return null},mxGraph.prototype.isPort=function(e){return!1},mxGraph.prototype.getTerminalForPort=function(e,t){return this.model.getParent(e)},mxGraph.prototype.getChildOffsetForCell=function(e){return null},mxGraph.prototype.enterGroup=function(e){null!=(e=e||this.getSelectionCell())&&this.isValidRoot(e)&&(this.view.setCurrentRoot(e),this.clearSelection())},mxGraph.prototype.exitGroup=function(){var e=this.model.getRoot(),t=this.getCurrentRoot();if(null!=t){for(var n=this.model.getParent(t);n!=e&&!this.isValidRoot(n)&&this.model.getParent(n)!=e;)n=this.model.getParent(n);n==e||this.model.getParent(n)==e?this.view.setCurrentRoot(null):this.view.setCurrentRoot(n),null!=this.view.getState(t)&&this.setSelectionCell(t)}},mxGraph.prototype.home=function(){var e=this.getCurrentRoot();null!=e&&(this.view.setCurrentRoot(null),null!=this.view.getState(e)&&this.setSelectionCell(e))},mxGraph.prototype.isValidRoot=function(e){return null!=e},mxGraph.prototype.getGraphBounds=function(){return this.view.getGraphBounds()},mxGraph.prototype.getCellBounds=function(e,t,n){var o=[e];t&&(o=o.concat(this.model.getEdges(e)));var s=this.view.getBounds(o);if(n)for(var i=this.model.getChildCount(e),a=0;a<i;a++){var l=this.getCellBounds(this.model.getChildAt(e,a),t,!0);null!=s?s.add(l):s=l}return s},mxGraph.prototype.getBoundingBoxFromGeometry=function(e,t){t=null!=t&&t;var n=null;if(null!=e)for(var o=0;o<e.length;o++)if(t||this.model.isVertex(e[o])){var s=this.getCellGeometry(e[o]);if(null!=s){var i=null;if(this.model.isEdge(e[o])){var a=s.points;if(null!=a&&a.length>0){for(var l=new mxRectangle(a[0].x,a[0].y,0,0),r=function(g){null!=g&&l.add(new mxRectangle(g.x,g.y,0,0))},d=1;d<a.length;d++)r(a[d]);r(s.getTerminalPoint(!0)),r(s.getTerminalPoint(!1)),i=l}}else{var u=this.model.getParent(e[o]);s.relative?this.model.isVertex(u)&&u!=this.view.currentRoot&&null!=(l=this.getBoundingBoxFromGeometry([u],!1))&&(i=new mxRectangle(s.x*l.width,s.y*l.height,s.width,s.height),mxUtils.indexOf(e,u)>=0&&(i.x+=l.x,i.y+=l.y)):(i=mxRectangle.fromRectangle(s),this.model.isVertex(u)&&mxUtils.indexOf(e,u)>=0&&null!=(l=this.getBoundingBoxFromGeometry([u],!1))&&(i.x+=l.x,i.y+=l.y)),null!=i&&null!=s.offset&&(i.x+=s.offset.x,i.y+=s.offset.y)}null!=i&&(null==n?n=mxRectangle.fromRectangle(i):n.add(i))}}return n},mxGraph.prototype.refresh=function(e){this.view.clear(e,null==e),this.view.validate(),this.sizeDidChange(),this.fireEvent(new mxEventObject(mxEvent.REFRESH))},mxGraph.prototype.snap=function(e){return this.gridEnabled&&(e=Math.round(e/this.gridSize)*this.gridSize),e},mxGraph.prototype.panGraph=function(e,t){if(this.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.container))this.container.scrollLeft=-e,this.container.scrollTop=-t;else{var n=this.view.getCanvas();if(this.dialect==mxConstants.DIALECT_SVG)if(0==e&&0==t){if(mxClient.IS_IE?n.setAttribute("transform","translate("+e+","+t+")"):n.removeAttribute("transform"),null!=this.shiftPreview1){for(var o=this.shiftPreview1.firstChild;null!=o;){var s=o.nextSibling;this.container.appendChild(o),o=s}for(null!=this.shiftPreview1.parentNode&&this.shiftPreview1.parentNode.removeChild(this.shiftPreview1),this.shiftPreview1=null,this.container.appendChild(n.parentNode),o=this.shiftPreview2.firstChild;null!=o;)s=o.nextSibling,this.container.appendChild(o),o=s;null!=this.shiftPreview2.parentNode&&this.shiftPreview2.parentNode.removeChild(this.shiftPreview2),this.shiftPreview2=null}}else{if(n.setAttribute("transform","translate("+e+","+t+")"),null==this.shiftPreview1){this.shiftPreview1=document.createElement("div"),this.shiftPreview1.style.position="absolute",this.shiftPreview1.style.overflow="visible",this.shiftPreview2=document.createElement("div"),this.shiftPreview2.style.position="absolute",this.shiftPreview2.style.overflow="visible";var i=this.shiftPreview1;for(o=this.container.firstChild;null!=o;)s=o.nextSibling,o!=n.parentNode?i.appendChild(o):i=this.shiftPreview2,o=s;null!=this.shiftPreview1.firstChild&&this.container.insertBefore(this.shiftPreview1,n.parentNode),null!=this.shiftPreview2.firstChild&&this.container.appendChild(this.shiftPreview2)}this.shiftPreview1.style.left=e+"px",this.shiftPreview1.style.top=t+"px",this.shiftPreview2.style.left=e+"px",this.shiftPreview2.style.top=t+"px"}else n.style.left=e+"px",n.style.top=t+"px";this.panDx=e,this.panDy=t,this.fireEvent(new mxEventObject(mxEvent.PAN))}},mxGraph.prototype.zoomIn=function(){this.zoom(this.zoomFactor)},mxGraph.prototype.zoomOut=function(){this.zoom(1/this.zoomFactor)},mxGraph.prototype.zoomActual=function(){1==this.view.scale?this.view.setTranslate(0,0):(this.view.translate.x=0,this.view.translate.y=0,this.view.setScale(1))},mxGraph.prototype.zoomTo=function(e,t){this.zoom(e/this.view.scale,t)},mxGraph.prototype.center=function(e,t,n,o){e=null==e||e,t=null==t||t,n=null!=n?n:.5,o=null!=o?o:.5;var s=mxUtils.hasScrollbars(this.container),i=this.container.clientWidth,a=this.container.clientHeight,l=this.getGraphBounds(),r=this.view.translate,d=this.view.scale,u=e?i-l.width:0,g=t?a-l.height:0;if(s){l.x-=r.x,l.y-=r.y;var f=this.container.scrollWidth,v=this.container.scrollHeight;f>i&&(u=0),v>a&&(g=0),this.view.setTranslate(Math.floor(u/2-l.x),Math.floor(g/2-l.y)),this.container.scrollLeft=(f-i)/2,this.container.scrollTop=(v-a)/2}else this.view.setTranslate(e?Math.floor(r.x-l.x*d+u*n/d):r.x,t?Math.floor(r.y-l.y*d+g*o/d):r.y)},mxGraph.prototype.zoom=function(e,t){t=null!=t?t:this.centerZoom;var n=Math.round(this.view.scale*e*100)/100,o=this.view.getState(this.getSelectionCell());if(e=n/this.view.scale,this.keepSelectionVisibleOnZoom&&null!=o){var s=new mxRectangle(o.x*e,o.y*e,o.width*e,o.height*e);this.view.scale=n,this.scrollRectToVisible(s)||(this.view.revalidate(),this.view.setScale(n))}else{var i=mxUtils.hasScrollbars(this.container);if(t&&!i){var r,a=this.container.offsetWidth,l=this.container.offsetHeight;e>1?(a*=-(r=(e-1)/(2*n)),l*=-r):(a*=r=(1/e-1)/(2*this.view.scale),l*=r),this.view.scaleAndTranslate(n,this.view.translate.x+a,this.view.translate.y+l)}else{var d=this.view.translate.x,u=this.view.translate.y,g=this.container.scrollLeft,f=this.container.scrollTop;this.view.setScale(n),i&&(a=0,l=0,t&&(a=this.container.offsetWidth*(e-1)/2,l=this.container.offsetHeight*(e-1)/2),this.container.scrollLeft=(this.view.translate.x-d)*this.view.scale+Math.round(g*e+a),this.container.scrollTop=(this.view.translate.y-u)*this.view.scale+Math.round(f*e+l))}}},mxGraph.prototype.zoomToRect=function(e){var o=this.container.clientWidth/e.width/(this.container.clientHeight/e.height);e.x=Math.max(0,e.x),e.y=Math.max(0,e.y);var s=Math.min(this.container.scrollWidth,e.x+e.width),i=Math.min(this.container.scrollHeight,e.y+e.height);if(e.width=s-e.x,e.height=i-e.y,o<1){var a=e.height/o,l=(a-e.height)/2;e.height=a;var r=Math.min(e.y,l);e.y=e.y-r,i=Math.min(this.container.scrollHeight,e.y+e.height),e.height=i-e.y}else{var d=e.width*o,u=(d-e.width)/2;e.width=d;var g=Math.min(e.x,u);e.x=e.x-g,s=Math.min(this.container.scrollWidth,e.x+e.width),e.width=s-e.x}var f=this.container.clientWidth/e.width,v=this.view.scale*f;mxUtils.hasScrollbars(this.container)?(this.view.setScale(v),this.container.scrollLeft=Math.round(e.x*f),this.container.scrollTop=Math.round(e.y*f)):this.view.scaleAndTranslate(v,this.view.translate.x-e.x/this.view.scale,this.view.translate.y-e.y/this.view.scale)},mxGraph.prototype.scrollCellToVisible=function(e,t){var n=-this.view.translate.x,o=-this.view.translate.y,s=this.view.getState(e);if(null!=s){var i=new mxRectangle(n+s.x,o+s.y,s.width,s.height);if(t&&null!=this.container){var a=this.container.clientWidth,l=this.container.clientHeight;i.x=i.getCenterX()-a/2,i.width=a,i.y=i.getCenterY()-l/2,i.height=l}var r=new mxPoint(this.view.translate.x,this.view.translate.y);if(this.scrollRectToVisible(i)){var d=new mxPoint(this.view.translate.x,this.view.translate.y);this.view.translate.x=r.x,this.view.translate.y=r.y,this.view.setTranslate(d.x,d.y)}}},mxGraph.prototype.scrollRectToVisible=function(e){var t=!1;if(null!=e){var n=this.container.offsetWidth,o=this.container.offsetHeight,s=Math.min(n,e.width),i=Math.min(o,e.height);if(mxUtils.hasScrollbars(this.container)){var a=this.container;e.x+=this.view.translate.x,e.y+=this.view.translate.y;var l=a.scrollLeft-e.x,r=Math.max(l-a.scrollLeft,0);l>0?a.scrollLeft-=l+2:(l=e.x+s-a.scrollLeft-a.clientWidth)>0&&(a.scrollLeft+=l+2);var d=a.scrollTop-e.y,u=Math.max(0,d-a.scrollTop);d>0?a.scrollTop-=d+2:(d=e.y+i-a.scrollTop-a.clientHeight)>0&&(a.scrollTop+=d+2),this.useScrollbarsForPanning||0==r&&0==u||this.view.setTranslate(r,u)}else{var g=-this.view.translate.x,f=-this.view.translate.y,v=this.view.scale;e.x+s>g+n&&(this.view.translate.x-=(e.x+s-n-g)/v,t=!0),e.y+i>f+o&&(this.view.translate.y-=(e.y+i-o-f)/v,t=!0),e.x<g&&(this.view.translate.x+=(g-e.x)/v,t=!0),e.y<f&&(this.view.translate.y+=(f-e.y)/v,t=!0),t&&(this.view.refresh(),null!=this.selectionCellsHandler&&this.selectionCellsHandler.refresh())}}return t},mxGraph.prototype.getCellGeometry=function(e){return this.model.getGeometry(e)},mxGraph.prototype.isCellVisible=function(e){return this.model.isVisible(e)},mxGraph.prototype.isCellCollapsed=function(e){return this.model.isCollapsed(e)},mxGraph.prototype.isCellConnectable=function(e){return this.model.isConnectable(e)},mxGraph.prototype.isOrthogonal=function(e){var t=e.style[mxConstants.STYLE_ORTHOGONAL];if(null!=t)return t;var n=this.view.getEdgeStyle(e);return n==mxEdgeStyle.SegmentConnector||n==mxEdgeStyle.ElbowConnector||n==mxEdgeStyle.SideToSide||n==mxEdgeStyle.TopToBottom||n==mxEdgeStyle.EntityRelation||n==mxEdgeStyle.OrthConnector},mxGraph.prototype.isLoop=function(e){var t=e.getVisibleTerminalState(!0),n=e.getVisibleTerminalState(!1);return null!=t&&t==n},mxGraph.prototype.isCloneEvent=function(e){return mxEvent.isControlDown(e)},mxGraph.prototype.isToggleEvent=function(e){return mxClient.IS_MAC?mxEvent.isMetaDown(e):mxEvent.isControlDown(e)},mxGraph.prototype.isGridEnabledEvent=function(e){return null!=e&&!mxEvent.isAltDown(e)},mxGraph.prototype.isConstrainedEvent=function(e){return mxEvent.isShiftDown(e)},mxGraph.prototype.isIgnoreTerminalEvent=function(e){return!1},mxGraph.prototype.validationAlert=function(e){mxUtils.alert(e)},mxGraph.prototype.isEdgeValid=function(e,t,n){return null==this.getEdgeValidationError(e,t,n)},mxGraph.prototype.getEdgeValidationError=function(e,t,n){if(null!=e&&!this.isAllowDanglingEdges()&&(null==t||null==n))return"";if(null!=e&&null==this.model.getTerminal(e,!0)&&null==this.model.getTerminal(e,!1))return null;if(!this.allowLoops&&t==n&&null!=t||!this.isValidConnection(t,n))return"";if(null!=t&&null!=n){var o="";if(!this.multigraph){var s=this.model.getEdgesBetween(t,n,!0);(s.length>1||1==s.length&&s[0]!=e)&&(o+=(mxResources.get(this.alreadyConnectedResource)||this.alreadyConnectedResource)+"\n")}var i=this.model.getDirectedEdgeCount(t,!0,e),a=this.model.getDirectedEdgeCount(n,!1,e);if(null!=this.multiplicities)for(var l=0;l<this.multiplicities.length;l++){var r;null!=(r=this.multiplicities[l].check(this,e,t,n,i,a))&&(o+=r)}return null!=(r=this.validateEdge(e,t,n))&&(o+=r),o.length>0?o:null}return this.allowDanglingEdges?null:""},mxGraph.prototype.validateEdge=function(e,t,n){return null},mxGraph.prototype.validateGraph=function(e,t){e=null!=e?e:this.model.getRoot(),t=null!=t?t:new Object;for(var n=!0,o=this.model.getChildCount(e),s=0;s<o;s++){var i=this.model.getChildAt(e,s),a=t;this.isValidRoot(i)&&(a=new Object);var l=this.validateGraph(i,a);this.setCellWarning(i,null!=l?l.replace(/\n/g,"<br>"):null),n=n&&null==l}var r="";this.isCellCollapsed(e)&&!n&&(r+=(mxResources.get(this.containsValidationErrorsResource)||this.containsValidationErrorsResource)+"\n"),r+=this.model.isEdge(e)?this.getEdgeValidationError(e,this.model.getTerminal(e,!0),this.model.getTerminal(e,!1))||"":this.getCellValidationError(e)||"";var d=this.validateCell(e,t);return null!=d&&(r+=d),null==this.model.getParent(e)&&this.view.validate(),r.length>0||!n?r:null},mxGraph.prototype.getCellValidationError=function(e){var t=this.model.getDirectedEdgeCount(e,!0),n=this.model.getDirectedEdgeCount(e,!1),o=this.model.getValue(e),s="";if(null!=this.multiplicities)for(var i=0;i<this.multiplicities.length;i++){var a=this.multiplicities[i];(a.source&&mxUtils.isNode(o,a.type,a.attr,a.value)&&(0==a.max&&t>0||1==a.min&&0==t||1==a.max&&t>1)||!a.source&&mxUtils.isNode(o,a.type,a.attr,a.value)&&(0==a.max&&n>0||1==a.min&&0==n||1==a.max&&n>1))&&(s+=a.countError+"\n")}return s.length>0?s:null},mxGraph.prototype.validateCell=function(e,t){return null},mxGraph.prototype.getBackgroundImage=function(){return this.backgroundImage},mxGraph.prototype.setBackgroundImage=function(e){this.backgroundImage=e},mxGraph.prototype.getFoldingImage=function(e){if(null!=e&&this.foldingEnabled&&!this.getModel().isEdge(e.cell)){var t=this.isCellCollapsed(e.cell);if(this.isCellFoldable(e.cell,!t))return t?this.collapsedImage:this.expandedImage}return null},mxGraph.prototype.convertValueToString=function(e){var t=this.model.getValue(e);if(null!=t){if(mxUtils.isNode(t))return t.nodeName;if("function"==typeof t.toString)return t.toString()}return""},mxGraph.prototype.getLabel=function(e){var t="";if(this.labelsVisible&&null!=e){var n=this.view.getState(e),o=null!=n?n.style:this.getCellStyle(e);mxUtils.getValue(o,mxConstants.STYLE_NOLABEL,!1)||(t=this.convertValueToString(e))}return t},mxGraph.prototype.isHtmlLabel=function(e){return this.isHtmlLabels()},mxGraph.prototype.isHtmlLabels=function(){return this.htmlLabels},mxGraph.prototype.setHtmlLabels=function(e){this.htmlLabels=e},mxGraph.prototype.isWrapping=function(e){var t=this.view.getState(e),n=null!=t?t.style:this.getCellStyle(e);return null!=n&&"wrap"==n[mxConstants.STYLE_WHITE_SPACE]},mxGraph.prototype.isLabelClipped=function(e){var t=this.view.getState(e),n=null!=t?t.style:this.getCellStyle(e);return null!=n&&"hidden"==n[mxConstants.STYLE_OVERFLOW]},mxGraph.prototype.getTooltip=function(e,t,n,o){var s=null;if(null!=e){if(null==e.control||t!=e.control.node&&t.parentNode!=e.control.node||(s=mxUtils.htmlEntities(mxResources.get(s=this.collapseExpandResource)||s).replace(/\\n/g,"<br>")),null==s&&null!=e.overlays&&e.overlays.visit(function(a,l){null!=s||t!=l.node&&t.parentNode!=l.node||(s=l.overlay.toString())}),null==s){var i=this.selectionCellsHandler.getHandler(e.cell);null!=i&&"function"==typeof i.getTooltipForNode&&(s=i.getTooltipForNode(t))}null==s&&(s=this.getTooltipForCell(e.cell))}return s},mxGraph.prototype.getTooltipForCell=function(e){return null!=e&&null!=e.getTooltip?e.getTooltip():this.convertValueToString(e)},mxGraph.prototype.getCursorForMouseEvent=function(e){return this.getCursorForCell(e.getCell())},mxGraph.prototype.getCursorForCell=function(e){return null},mxGraph.prototype.getStartSize=function(e){var t=new mxRectangle,n=this.view.getState(e),o=null!=n?n.style:this.getCellStyle(e);if(null!=o){var s=parseInt(mxUtils.getValue(o,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE));mxUtils.getValue(o,mxConstants.STYLE_HORIZONTAL,!0)?t.height=s:t.width=s}return t},mxGraph.prototype.getImage=function(e){return null!=e&&null!=e.style?e.style[mxConstants.STYLE_IMAGE]:null},mxGraph.prototype.getVerticalAlign=function(e){return null!=e&&null!=e.style?e.style[mxConstants.STYLE_VERTICAL_ALIGN]||mxConstants.ALIGN_MIDDLE:null},mxGraph.prototype.getIndicatorColor=function(e){return null!=e&&null!=e.style?e.style[mxConstants.STYLE_INDICATOR_COLOR]:null},mxGraph.prototype.getIndicatorGradientColor=function(e){return null!=e&&null!=e.style?e.style[mxConstants.STYLE_INDICATOR_GRADIENTCOLOR]:null},mxGraph.prototype.getIndicatorShape=function(e){return null!=e&&null!=e.style?e.style[mxConstants.STYLE_INDICATOR_SHAPE]:null},mxGraph.prototype.getIndicatorImage=function(e){return null!=e&&null!=e.style?e.style[mxConstants.STYLE_INDICATOR_IMAGE]:null},mxGraph.prototype.getBorder=function(){return this.border},mxGraph.prototype.setBorder=function(e){this.border=e},mxGraph.prototype.isSwimlane=function(e){if(null!=e&&this.model.getParent(e)!=this.model.getRoot()){var t=this.view.getState(e),n=null!=t?t.style:this.getCellStyle(e);if(null!=n&&!this.model.isEdge(e))return n[mxConstants.STYLE_SHAPE]==mxConstants.SHAPE_SWIMLANE}return!1},mxGraph.prototype.isResizeContainer=function(){return this.resizeContainer},mxGraph.prototype.setResizeContainer=function(e){this.resizeContainer=e},mxGraph.prototype.isEnabled=function(){return this.enabled},mxGraph.prototype.setEnabled=function(e){this.enabled=e},mxGraph.prototype.isEscapeEnabled=function(){return this.escapeEnabled},mxGraph.prototype.setEscapeEnabled=function(e){this.escapeEnabled=e},mxGraph.prototype.isInvokesStopCellEditing=function(){return this.invokesStopCellEditing},mxGraph.prototype.setInvokesStopCellEditing=function(e){this.invokesStopCellEditing=e},mxGraph.prototype.isEnterStopsCellEditing=function(){return this.enterStopsCellEditing},mxGraph.prototype.setEnterStopsCellEditing=function(e){this.enterStopsCellEditing=e},mxGraph.prototype.isCellLocked=function(e){var t=this.model.getGeometry(e);return this.isCellsLocked()||null!=t&&this.model.isVertex(e)&&t.relative},mxGraph.prototype.isCellsLocked=function(){return this.cellsLocked},mxGraph.prototype.setCellsLocked=function(e){this.cellsLocked=e},mxGraph.prototype.getCloneableCells=function(e){return this.model.filterCells(e,mxUtils.bind(this,function(t){return this.isCellCloneable(t)}))},mxGraph.prototype.isCellCloneable=function(e){var t=this.view.getState(e),n=null!=t?t.style:this.getCellStyle(e);return this.isCellsCloneable()&&0!=n[mxConstants.STYLE_CLONEABLE]},mxGraph.prototype.isCellsCloneable=function(){return this.cellsCloneable},mxGraph.prototype.setCellsCloneable=function(e){this.cellsCloneable=e},mxGraph.prototype.getExportableCells=function(e){return this.model.filterCells(e,mxUtils.bind(this,function(t){return this.canExportCell(t)}))},mxGraph.prototype.canExportCell=function(e){return this.exportEnabled},mxGraph.prototype.getImportableCells=function(e){return this.model.filterCells(e,mxUtils.bind(this,function(t){return this.canImportCell(t)}))},mxGraph.prototype.canImportCell=function(e){return this.importEnabled},mxGraph.prototype.isCellSelectable=function(e){return this.isCellsSelectable()},mxGraph.prototype.isCellsSelectable=function(){return this.cellsSelectable},mxGraph.prototype.setCellsSelectable=function(e){this.cellsSelectable=e},mxGraph.prototype.getDeletableCells=function(e){return this.model.filterCells(e,mxUtils.bind(this,function(t){return this.isCellDeletable(t)}))},mxGraph.prototype.isCellDeletable=function(e){var t=this.view.getState(e),n=null!=t?t.style:this.getCellStyle(e);return this.isCellsDeletable()&&0!=n[mxConstants.STYLE_DELETABLE]},mxGraph.prototype.isCellsDeletable=function(){return this.cellsDeletable},mxGraph.prototype.setCellsDeletable=function(e){this.cellsDeletable=e},mxGraph.prototype.isLabelMovable=function(e){return!this.isCellLocked(e)&&(this.model.isEdge(e)&&this.edgeLabelsMovable||this.model.isVertex(e)&&this.vertexLabelsMovable)},mxGraph.prototype.isCellRotatable=function(e){var t=this.view.getState(e);return 0!=(null!=t?t.style:this.getCellStyle(e))[mxConstants.STYLE_ROTATABLE]},mxGraph.prototype.getMovableCells=function(e){return this.model.filterCells(e,mxUtils.bind(this,function(t){return this.isCellMovable(t)}))},mxGraph.prototype.isCellMovable=function(e){var t=this.view.getState(e),n=null!=t?t.style:this.getCellStyle(e);return this.isCellsMovable()&&!this.isCellLocked(e)&&0!=n[mxConstants.STYLE_MOVABLE]},mxGraph.prototype.isCellsMovable=function(){return this.cellsMovable},mxGraph.prototype.setCellsMovable=function(e){this.cellsMovable=e},mxGraph.prototype.isGridEnabled=function(){return this.gridEnabled},mxGraph.prototype.setGridEnabled=function(e){this.gridEnabled=e},mxGraph.prototype.isPortsEnabled=function(){return this.portsEnabled},mxGraph.prototype.setPortsEnabled=function(e){this.portsEnabled=e},mxGraph.prototype.getGridSize=function(){return this.gridSize},mxGraph.prototype.setGridSize=function(e){this.gridSize=e},mxGraph.prototype.getTolerance=function(){return this.tolerance},mxGraph.prototype.setTolerance=function(e){this.tolerance=e},mxGraph.prototype.isVertexLabelsMovable=function(){return this.vertexLabelsMovable},mxGraph.prototype.setVertexLabelsMovable=function(e){this.vertexLabelsMovable=e},mxGraph.prototype.isEdgeLabelsMovable=function(){return this.edgeLabelsMovable},mxGraph.prototype.setEdgeLabelsMovable=function(e){this.edgeLabelsMovable=e},mxGraph.prototype.isSwimlaneNesting=function(){return this.swimlaneNesting},mxGraph.prototype.setSwimlaneNesting=function(e){this.swimlaneNesting=e},mxGraph.prototype.isSwimlaneSelectionEnabled=function(){return this.swimlaneSelectionEnabled},mxGraph.prototype.setSwimlaneSelectionEnabled=function(e){this.swimlaneSelectionEnabled=e},mxGraph.prototype.isMultigraph=function(){return this.multigraph},mxGraph.prototype.setMultigraph=function(e){this.multigraph=e},mxGraph.prototype.isAllowLoops=function(){return this.allowLoops},mxGraph.prototype.setAllowDanglingEdges=function(e){this.allowDanglingEdges=e},mxGraph.prototype.isAllowDanglingEdges=function(){return this.allowDanglingEdges},mxGraph.prototype.setConnectableEdges=function(e){this.connectableEdges=e},mxGraph.prototype.isConnectableEdges=function(){return this.connectableEdges},mxGraph.prototype.setCloneInvalidEdges=function(e){this.cloneInvalidEdges=e},mxGraph.prototype.isCloneInvalidEdges=function(){return this.cloneInvalidEdges},mxGraph.prototype.setAllowLoops=function(e){this.allowLoops=e},mxGraph.prototype.isDisconnectOnMove=function(){return this.disconnectOnMove},mxGraph.prototype.setDisconnectOnMove=function(e){this.disconnectOnMove=e},mxGraph.prototype.isDropEnabled=function(){return this.dropEnabled},mxGraph.prototype.setDropEnabled=function(e){this.dropEnabled=e},mxGraph.prototype.isSplitEnabled=function(){return this.splitEnabled},mxGraph.prototype.setSplitEnabled=function(e){this.splitEnabled=e},mxGraph.prototype.isCellResizable=function(e){var t=this.view.getState(e),n=null!=t?t.style:this.getCellStyle(e);return this.isCellsResizable()&&!this.isCellLocked(e)&&"0"!=mxUtils.getValue(n,mxConstants.STYLE_RESIZABLE,"1")},mxGraph.prototype.isCellsResizable=function(){return this.cellsResizable},mxGraph.prototype.setCellsResizable=function(e){this.cellsResizable=e},mxGraph.prototype.isTerminalPointMovable=function(e,t){return!0},mxGraph.prototype.isCellBendable=function(e){var t=this.view.getState(e),n=null!=t?t.style:this.getCellStyle(e);return this.isCellsBendable()&&!this.isCellLocked(e)&&0!=n[mxConstants.STYLE_BENDABLE]},mxGraph.prototype.isCellsBendable=function(){return this.cellsBendable},mxGraph.prototype.setCellsBendable=function(e){this.cellsBendable=e},mxGraph.prototype.isCellEditable=function(e){var t=this.view.getState(e),n=null!=t?t.style:this.getCellStyle(e);return this.isCellsEditable()&&!this.isCellLocked(e)&&0!=n[mxConstants.STYLE_EDITABLE]},mxGraph.prototype.isCellsEditable=function(){return this.cellsEditable},mxGraph.prototype.setCellsEditable=function(e){this.cellsEditable=e},mxGraph.prototype.isCellDisconnectable=function(e,t,n){return this.isCellsDisconnectable()&&!this.isCellLocked(e)},mxGraph.prototype.isCellsDisconnectable=function(){return this.cellsDisconnectable},mxGraph.prototype.setCellsDisconnectable=function(e){this.cellsDisconnectable=e},mxGraph.prototype.isValidSource=function(e){return null==e&&this.allowDanglingEdges||null!=e&&(!this.model.isEdge(e)||this.connectableEdges)&&this.isCellConnectable(e)},mxGraph.prototype.isValidTarget=function(e){return this.isValidSource(e)},mxGraph.prototype.isValidConnection=function(e,t){return this.isValidSource(e)&&this.isValidTarget(t)},mxGraph.prototype.setConnectable=function(e){this.connectionHandler.setEnabled(e)},mxGraph.prototype.isConnectable=function(e){return this.connectionHandler.isEnabled()},mxGraph.prototype.setTooltips=function(e){this.tooltipHandler.setEnabled(e)},mxGraph.prototype.setPanning=function(e){this.panningHandler.panningEnabled=e},mxGraph.prototype.isEditing=function(e){if(null!=this.cellEditor){var t=this.cellEditor.getEditingCell();return null==e?null!=t:e==t}return!1},mxGraph.prototype.isAutoSizeCell=function(e){var t=this.view.getState(e),n=null!=t?t.style:this.getCellStyle(e);return this.isAutoSizeCells()||1==n[mxConstants.STYLE_AUTOSIZE]},mxGraph.prototype.isAutoSizeCells=function(){return this.autoSizeCells},mxGraph.prototype.setAutoSizeCells=function(e){this.autoSizeCells=e},mxGraph.prototype.isExtendParent=function(e){return!this.getModel().isEdge(e)&&this.isExtendParents()},mxGraph.prototype.isExtendParents=function(){return this.extendParents},mxGraph.prototype.setExtendParents=function(e){this.extendParents=e},mxGraph.prototype.isExtendParentsOnAdd=function(e){return this.extendParentsOnAdd},mxGraph.prototype.setExtendParentsOnAdd=function(e){this.extendParentsOnAdd=e},mxGraph.prototype.isExtendParentsOnMove=function(){return this.extendParentsOnMove},mxGraph.prototype.setExtendParentsOnMove=function(e){this.extendParentsOnMove=e},mxGraph.prototype.isRecursiveResize=function(e){return this.recursiveResize},mxGraph.prototype.setRecursiveResize=function(e){this.recursiveResize=e},mxGraph.prototype.isConstrainChild=function(e){return this.isConstrainChildren()&&!this.getModel().isEdge(this.getModel().getParent(e))},mxGraph.prototype.isConstrainChildren=function(){return this.constrainChildren},mxGraph.prototype.setConstrainChildren=function(e){this.constrainChildren=e},mxGraph.prototype.isConstrainRelativeChildren=function(){return this.constrainRelativeChildren},mxGraph.prototype.setConstrainRelativeChildren=function(e){this.constrainRelativeChildren=e},mxGraph.prototype.isAllowNegativeCoordinates=function(){return this.allowNegativeCoordinates},mxGraph.prototype.setAllowNegativeCoordinates=function(e){this.allowNegativeCoordinates=e},mxGraph.prototype.getOverlap=function(e){return this.isAllowOverlapParent(e)?this.defaultOverlap:0},mxGraph.prototype.isAllowOverlapParent=function(e){return!1},mxGraph.prototype.getFoldableCells=function(e,t){return this.model.filterCells(e,mxUtils.bind(this,function(n){return this.isCellFoldable(n,t)}))},mxGraph.prototype.isCellFoldable=function(e,t){var n=this.view.getState(e),o=null!=n?n.style:this.getCellStyle(e);return this.model.getChildCount(e)>0&&0!=o[mxConstants.STYLE_FOLDABLE]},mxGraph.prototype.isValidDropTarget=function(e,t,n){return null!=e&&(this.isSplitEnabled()&&this.isSplitTarget(e,t,n)||!this.model.isEdge(e)&&(this.isSwimlane(e)||this.model.getChildCount(e)>0&&!this.isCellCollapsed(e)))},mxGraph.prototype.isSplitTarget=function(e,t,n){if(this.model.isEdge(e)&&null!=t&&1==t.length&&this.isCellConnectable(t[0])&&null==this.getEdgeValidationError(e,this.model.getTerminal(e,!0),t[0])){var o=this.model.getTerminal(e,!0),s=this.model.getTerminal(e,!1);return!this.model.isAncestor(t[0],o)&&!this.model.isAncestor(t[0],s)}return!1},mxGraph.prototype.getDropTarget=function(e,t,n,o){if(!this.isSwimlaneNesting())for(var s=0;s<e.length;s++)if(this.isSwimlane(e[s]))return null;var i=mxUtils.convertPoint(this.container,mxEvent.getClientX(t),mxEvent.getClientY(t));i.x-=this.panDx,i.y-=this.panDy;var a=this.getSwimlaneAt(i.x,i.y);if(null==n)n=a;else if(null!=a){for(var l=this.model.getParent(a);null!=l&&this.isSwimlane(l)&&l!=n;)l=this.model.getParent(l);l==n&&(n=a)}for(;null!=n&&!this.isValidDropTarget(n,e,t)&&!this.model.isLayer(n);)n=this.model.getParent(n);if(null==o||!o)for(var r=n;null!=r&&mxUtils.indexOf(e,r)<0;)r=this.model.getParent(r);return this.model.isLayer(n)||null!=r?null:n},mxGraph.prototype.getDefaultParent=function(){var e=this.getCurrentRoot();if(null==e&&null==(e=this.defaultParent)){var t=this.model.getRoot();e=this.model.getChildAt(t,0)}return e},mxGraph.prototype.setDefaultParent=function(e){this.defaultParent=e},mxGraph.prototype.getSwimlane=function(e){for(;null!=e&&!this.isSwimlane(e);)e=this.model.getParent(e);return e},mxGraph.prototype.getSwimlaneAt=function(e,t,n){if(null!=(n=n||this.getDefaultParent()))for(var o=this.model.getChildCount(n),s=0;s<o;s++){var i=this.model.getChildAt(n,s),a=this.getSwimlaneAt(e,t,i);if(null!=a)return a;if(this.isSwimlane(i)){var l=this.view.getState(i);if(this.intersects(l,e,t))return i}}return null},mxGraph.prototype.getCellAt=function(e,t,n,o,s,i){if(o=null==o||o,s=null==s||s,null==n&&null==(n=this.getCurrentRoot())&&(n=this.getModel().getRoot()),null!=n)for(var l=this.model.getChildCount(n)-1;l>=0;l--){var r=this.model.getChildAt(n,l),d=this.getCellAt(e,t,r,o,s,i);if(null!=d)return d;if(this.isCellVisible(r)&&(s&&this.model.isEdge(r)||o&&this.model.isVertex(r))){var u=this.view.getState(r);if(null!=u&&(null==i||!i(u,e,t))&&this.intersects(u,e,t))return r}}return null},mxGraph.prototype.intersects=function(e,t,n){if(null!=e){var o=e.absolutePoints;if(null!=o)for(var s=this.tolerance*this.tolerance,i=o[0],a=1;a<o.length;a++){var l=o[a];if(mxUtils.ptSegDistSq(i.x,i.y,l.x,l.y,t,n)<=s)return!0;i=l}else{var d=mxUtils.toRadians(mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION)||0);if(0!=d){var u=Math.cos(-d),g=Math.sin(-d),f=new mxPoint(e.getCenterX(),e.getCenterY());t=(i=mxUtils.getRotatedPoint(new mxPoint(t,n),u,g,f)).x,n=i.y}if(mxUtils.contains(e,t,n))return!0}}return!1},mxGraph.prototype.hitsSwimlaneContent=function(e,t,n){var o=this.getView().getState(e),s=this.getStartSize(e);if(null!=o){var i=this.getView().getScale();if(t-=o.x,n-=o.y,s.width>0&&t>0&&t>s.width*i||s.height>0&&n>0&&n>s.height*i)return!0}return!1},mxGraph.prototype.getChildVertices=function(e){return this.getChildCells(e,!0,!1)},mxGraph.prototype.getChildEdges=function(e){return this.getChildCells(e,!1,!0)},mxGraph.prototype.getChildCells=function(e,t,n){e=null!=e?e:this.getDefaultParent();for(var o=this.model.getChildCells(e,t=null!=t&&t,n=null!=n&&n),s=[],i=0;i<o.length;i++)this.isCellVisible(o[i])&&s.push(o[i]);return s},mxGraph.prototype.getConnections=function(e,t){return this.getEdges(e,t,!0,!0,!1)},mxGraph.prototype.getIncomingEdges=function(e,t){return this.getEdges(e,t,!0,!1,!1)},mxGraph.prototype.getOutgoingEdges=function(e,t){return this.getEdges(e,t,!1,!0,!1)},mxGraph.prototype.getEdges=function(e,t,n,o,s,i){n=null==n||n,o=null==o||o,s=null==s||s,i=null!=i&&i;for(var a=[],l=this.isCellCollapsed(e),r=this.model.getChildCount(e),d=0;d<r;d++){var u=this.model.getChildAt(e,d);!l&&this.isCellVisible(u)||(a=a.concat(this.model.getEdges(u,n,o)))}a=a.concat(this.model.getEdges(e,n,o));var g=[];for(d=0;d<a.length;d++){var f=this.view.getState(a[d]),v=null!=f?f.getVisibleTerminal(!0):this.view.getVisibleTerminal(a[d],!0),x=null!=f?f.getVisibleTerminal(!1):this.view.getVisibleTerminal(a[d],!1);(s&&v==x||v!=x&&(n&&x==e&&(null==t||this.isValidAncestor(v,t,i))||o&&v==e&&(null==t||this.isValidAncestor(x,t,i))))&&g.push(a[d])}return g},mxGraph.prototype.isValidAncestor=function(e,t,n){return n?this.model.isAncestor(t,e):this.model.getParent(e)==t},mxGraph.prototype.getOpposites=function(e,t,n,o){n=null==n||n,o=null==o||o;var s=[],i=new mxDictionary;if(null!=e)for(var a=0;a<e.length;a++){var l=this.view.getState(e[a]),r=null!=l?l.getVisibleTerminal(!0):this.view.getVisibleTerminal(e[a],!0),d=null!=l?l.getVisibleTerminal(!1):this.view.getVisibleTerminal(e[a],!1);r==t&&null!=d&&d!=t&&o?i.get(d)||(i.put(d,!0),s.push(d)):d==t&&null!=r&&r!=t&&n&&(i.get(r)||(i.put(r,!0),s.push(r)))}return s},mxGraph.prototype.getEdgesBetween=function(e,t,n){n=null!=n&&n;for(var o=this.getEdges(e),s=[],i=0;i<o.length;i++){var a=this.view.getState(o[i]),l=null!=a?a.getVisibleTerminal(!0):this.view.getVisibleTerminal(o[i],!0),r=null!=a?a.getVisibleTerminal(!1):this.view.getVisibleTerminal(o[i],!1);(l==e&&r==t||!n&&l==t&&r==e)&&s.push(o[i])}return s},mxGraph.prototype.getPointForEvent=function(e,t){var n=mxUtils.convertPoint(this.container,mxEvent.getClientX(e),mxEvent.getClientY(e)),o=this.view.scale,s=this.view.translate,i=0!=t?this.gridSize/2:0;return n.x=this.snap(n.x/o-s.x-i),n.y=this.snap(n.y/o-s.y-i),n},mxGraph.prototype.getCells=function(e,t,n,o,s,i){if(i=null!=i?i:[],n>0||o>0){var a=this.getModel(),l=e+n,r=t+o;if(null==s&&null==(s=this.getCurrentRoot())&&(s=a.getRoot()),null!=s)for(var d=a.getChildCount(s),u=0;u<d;u++){var g=a.getChildAt(s,u),f=this.view.getState(g);if(null!=f&&this.isCellVisible(g)){var v=mxUtils.getValue(f.style,mxConstants.STYLE_ROTATION)||0,x=f;0!=v&&(x=mxUtils.getBoundingBox(x,v)),(a.isEdge(g)||a.isVertex(g))&&x.x>=e&&x.y+x.height<=r&&x.y>=t&&x.x+x.width<=l?i.push(g):this.getCells(e,t,n,o,g,i)}}}return i},mxGraph.prototype.getCellsBeyond=function(e,t,n,o,s){var i=[];if((o||s)&&(null==n&&(n=this.getDefaultParent()),null!=n))for(var a=this.model.getChildCount(n),l=0;l<a;l++){var r=this.model.getChildAt(n,l),d=this.view.getState(r);this.isCellVisible(r)&&null!=d&&(!o||d.x>=e)&&(!s||d.y>=t)&&i.push(r)}return i},mxGraph.prototype.findTreeRoots=function(e,t,n){t=null!=t&&t,n=null!=n&&n;var o=[];if(null!=e){for(var s=this.getModel(),i=s.getChildCount(e),a=null,l=0,r=0;r<i;r++){var d=s.getChildAt(e,r);if(this.model.isVertex(d)&&this.isCellVisible(d)){for(var u=this.getConnections(d,t?e:null),g=0,f=0,v=0;v<u.length;v++)this.view.getVisibleTerminal(u[v],!0)==d?g++:f++;(n&&0==g&&f>0||!n&&0==f&&g>0)&&o.push(d);var z=n?f-g:g-f;z>l&&(l=z,a=d)}}0==o.length&&null!=a&&o.push(a)}return o},mxGraph.prototype.traverse=function(e,t,n,o,s){if(null!=n&&null!=e&&(t=null==t||t,!(s=s||new mxDictionary).get(e))){s.put(e,!0);var i=n(e,o);if(null==i||i){var a=this.model.getEdgeCount(e);if(a>0)for(var l=0;l<a;l++){var r=this.model.getEdgeAt(e,l),d=this.model.getTerminal(r,!0)==e;if(!t||d){var u=this.model.getTerminal(r,!d);this.traverse(u,t,n,r,s)}}}}},mxGraph.prototype.isCellSelected=function(e){return this.getSelectionModel().isSelected(e)},mxGraph.prototype.isSelectionEmpty=function(){return this.getSelectionModel().isEmpty()},mxGraph.prototype.clearSelection=function(){return this.getSelectionModel().clear()},mxGraph.prototype.getSelectionCount=function(){return this.getSelectionModel().cells.length},mxGraph.prototype.getSelectionCell=function(){return this.getSelectionModel().cells[0]},mxGraph.prototype.getSelectionCells=function(){return this.getSelectionModel().cells.slice()},mxGraph.prototype.setSelectionCell=function(e){this.getSelectionModel().setCell(e)},mxGraph.prototype.setSelectionCells=function(e){this.getSelectionModel().setCells(e)},mxGraph.prototype.addSelectionCell=function(e){this.getSelectionModel().addCell(e)},mxGraph.prototype.addSelectionCells=function(e){this.getSelectionModel().addCells(e)},mxGraph.prototype.removeSelectionCell=function(e){this.getSelectionModel().removeCell(e)},mxGraph.prototype.removeSelectionCells=function(e){this.getSelectionModel().removeCells(e)},mxGraph.prototype.selectRegion=function(e,t){var n=this.getCells(e.x,e.y,e.width,e.height);return this.selectCellsForEvent(n,t),n},mxGraph.prototype.selectNextCell=function(){this.selectCell(!0)},mxGraph.prototype.selectPreviousCell=function(){this.selectCell()},mxGraph.prototype.selectParentCell=function(){this.selectCell(!1,!0)},mxGraph.prototype.selectChildCell=function(){this.selectCell(!1,!1,!0)},mxGraph.prototype.selectCell=function(e,t,n){var o=this.selectionModel,s=o.cells.length>0?o.cells[0]:null;o.cells.length>1&&o.clear();var i=null!=s?this.model.getParent(s):this.getDefaultParent(),a=this.model.getChildCount(i);if(null==s&&a>0){var l=this.model.getChildAt(i,0);this.setSelectionCell(l)}else if(null!=s&&!t||null==this.view.getState(i)||null==this.model.getGeometry(i)){if(null!=s&&n)this.model.getChildCount(s)>0&&(l=this.model.getChildAt(s,0),this.setSelectionCell(l));else if(a>0){var d=i.getIndex(s);e?(d++,l=this.model.getChildAt(i,d%a),this.setSelectionCell(l)):(d--,l=this.model.getChildAt(i,d<0?a-1:d),this.setSelectionCell(l))}}else this.getCurrentRoot()!=i&&this.setSelectionCell(i)},mxGraph.prototype.selectAll=function(e,t){e=e||this.getDefaultParent();var n=t?this.model.filterDescendants(function(o){return o!=e},e):this.model.getChildren(e);null!=n&&this.setSelectionCells(n)},mxGraph.prototype.selectVertices=function(e){this.selectCells(!0,!1,e)},mxGraph.prototype.selectEdges=function(e){this.selectCells(!1,!0,e)},mxGraph.prototype.selectCells=function(e,t,n){n=n||this.getDefaultParent();var o=mxUtils.bind(this,function(i){return null!=this.view.getState(i)&&(0==this.model.getChildCount(i)&&this.model.isVertex(i)&&e&&!this.model.isEdge(this.model.getParent(i))||this.model.isEdge(i)&&t)}),s=this.model.filterDescendants(o,n);this.setSelectionCells(s)},mxGraph.prototype.selectCellForEvent=function(e,t){var n=this.isCellSelected(e);this.isToggleEvent(t)?n?this.removeSelectionCell(e):this.addSelectionCell(e):n&&1==this.getSelectionCount()||this.setSelectionCell(e)},mxGraph.prototype.selectCellsForEvent=function(e,t){this.isToggleEvent(t)?this.addSelectionCells(e):this.setSelectionCells(e)},mxGraph.prototype.createHandler=function(e){var t=null;if(null!=e)if(this.model.isEdge(e.cell)){var n=e.getVisibleTerminalState(!0),o=e.getVisibleTerminalState(!1),s=this.getCellGeometry(e.cell),i=this.view.getEdgeStyle(e,null!=s?s.points:null,n,o);t=this.createEdgeHandler(e,i)}else t=this.createVertexHandler(e);return t},mxGraph.prototype.createVertexHandler=function(e){return new mxVertexHandler(e)},mxGraph.prototype.createEdgeHandler=function(e,t){return t==mxEdgeStyle.Loop||t==mxEdgeStyle.ElbowConnector||t==mxEdgeStyle.SideToSide||t==mxEdgeStyle.TopToBottom?this.createElbowEdgeHandler(e):t==mxEdgeStyle.SegmentConnector||t==mxEdgeStyle.OrthConnector?this.createEdgeSegmentHandler(e):new mxEdgeHandler(e)},mxGraph.prototype.createEdgeSegmentHandler=function(e){return new mxEdgeSegmentHandler(e)},mxGraph.prototype.createElbowEdgeHandler=function(e){return new mxElbowEdgeHandler(e)},mxGraph.prototype.addMouseListener=function(e){null==this.mouseListeners&&(this.mouseListeners=[]),this.mouseListeners.push(e)},mxGraph.prototype.removeMouseListener=function(e){if(null!=this.mouseListeners)for(var t=0;t<this.mouseListeners.length;t++)if(this.mouseListeners[t]==e){this.mouseListeners.splice(t,1);break}},mxGraph.prototype.updateMouseEvent=function(e,t){if(null==e.graphX||null==e.graphY){var n=mxUtils.convertPoint(this.container,e.getX(),e.getY());e.graphX=n.x-this.panDx,e.graphY=n.y-this.panDy,null==e.getCell()&&this.isMouseDown&&t==mxEvent.MOUSE_MOVE&&(e.state=this.view.getState(this.getCellAt(n.x,n.y,null,null,null,function(o){return null==o.shape||o.shape.paintBackground!=mxRectangleShape.prototype.paintBackground||"1"==mxUtils.getValue(o.style,mxConstants.STYLE_POINTER_EVENTS,"1")||null!=o.shape.fill&&o.shape.fill!=mxConstants.NONE})))}return e},mxGraph.prototype.getStateForTouchEvent=function(e){var t=mxEvent.getClientX(e),n=mxEvent.getClientY(e),o=mxUtils.convertPoint(this.container,t,n);return this.view.getState(this.getCellAt(o.x,o.y))},mxGraph.prototype.isEventIgnored=function(e,t,n){var o=mxEvent.isMouseEvent(t.getEvent()),s=!1;return t.getEvent()==this.lastEvent?s=!0:this.lastEvent=t.getEvent(),null!=this.eventSource&&e!=mxEvent.MOUSE_MOVE?(mxEvent.removeGestureListeners(this.eventSource,null,this.mouseMoveRedirect,this.mouseUpRedirect),this.mouseMoveRedirect=null,this.mouseUpRedirect=null,this.eventSource=null):null!=this.eventSource&&t.getSource()!=this.eventSource?s=!0:mxClient.IS_TOUCH&&e==mxEvent.MOUSE_DOWN&&!o&&(this.eventSource=t.getSource(),this.mouseMoveRedirect=mxUtils.bind(this,function(i){this.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(i,this.getStateForTouchEvent(i)))}),this.mouseUpRedirect=mxUtils.bind(this,function(i){this.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(i,this.getStateForTouchEvent(i)))}),mxEvent.addGestureListeners(this.eventSource,null,this.mouseMoveRedirect,this.mouseUpRedirect)),this.isSyntheticEventIgnored(e,t,n)&&(s=!0),!mxEvent.isPopupTrigger(this.lastEvent)&&e!=mxEvent.MOUSE_MOVE&&2==this.lastEvent.detail||(e==mxEvent.MOUSE_UP&&this.isMouseDown?this.isMouseDown=!1:e!=mxEvent.MOUSE_DOWN||this.isMouseDown?!s&&((!mxClient.IS_FF||e!=mxEvent.MOUSE_MOVE)&&this.isMouseDown&&this.isMouseTrigger!=o||e==mxEvent.MOUSE_DOWN&&this.isMouseDown||e==mxEvent.MOUSE_UP&&!this.isMouseDown)&&(s=!0):(this.isMouseDown=!0,this.isMouseTrigger=o),s||e!=mxEvent.MOUSE_DOWN||(this.lastMouseX=t.getX(),this.lastMouseY=t.getY()),s)},mxGraph.prototype.isSyntheticEventIgnored=function(e,t,n){var o=!1,s=mxEvent.isMouseEvent(t.getEvent());return this.ignoreMouseEvents&&s&&e!=mxEvent.MOUSE_MOVE?(this.ignoreMouseEvents=e!=mxEvent.MOUSE_UP,o=!0):mxClient.IS_FF&&!s&&e==mxEvent.MOUSE_UP&&(this.ignoreMouseEvents=!0),o},mxGraph.prototype.isEventSourceIgnored=function(e,t){var n=t.getSource(),o=null!=n.nodeName?n.nodeName.toLowerCase():"",s=!mxEvent.isMouseEvent(t.getEvent())||mxEvent.isLeftMouseButton(t.getEvent());return e==mxEvent.MOUSE_DOWN&&s&&("select"==o||"option"==o||"input"==o&&"checkbox"!=n.type&&"radio"!=n.type&&"button"!=n.type&&"submit"!=n.type&&"file"!=n.type)},mxGraph.prototype.getEventState=function(e){return e},mxGraph.prototype.fireMouseEvent=function(e,t,n){if(this.isEventSourceIgnored(e,t))null!=this.tooltipHandler&&this.tooltipHandler.hide();else{if(null==n&&(n=this),t=this.updateMouseEvent(t,e),!this.nativeDblClickEnabled&&!mxEvent.isPopupTrigger(t.getEvent())||this.doubleTapEnabled&&mxClient.IS_TOUCH&&mxEvent.isTouchEvent(t.getEvent())){var o=(new Date).getTime();if(!mxClient.IS_QUIRKS&&e==mxEvent.MOUSE_DOWN||mxClient.IS_QUIRKS&&e==mxEvent.MOUSE_UP&&!this.fireDoubleClick)if(null!=this.lastTouchEvent&&this.lastTouchEvent!=t.getEvent()&&o-this.lastTouchTime<this.doubleTapTimeout&&Math.abs(this.lastTouchX-t.getX())<this.doubleTapTolerance&&Math.abs(this.lastTouchY-t.getY())<this.doubleTapTolerance&&this.doubleClickCounter<2){this.doubleClickCounter++;var s=!1;if(e==mxEvent.MOUSE_UP){if(t.getCell()==this.lastTouchCell&&null!=this.lastTouchCell){this.lastTouchTime=0;var i=this.lastTouchCell;this.lastTouchCell=null,mxClient.IS_QUIRKS&&t.getSource().fireEvent("ondblclick"),this.dblClick(t.getEvent(),i),s=!0}}else this.fireDoubleClick=!0,this.lastTouchTime=0;if(!mxClient.IS_QUIRKS||s)return void mxEvent.consume(t.getEvent())}else null!=this.lastTouchEvent&&this.lastTouchEvent==t.getEvent()||(this.lastTouchCell=t.getCell(),this.lastTouchX=t.getX(),this.lastTouchY=t.getY(),this.lastTouchTime=o,this.lastTouchEvent=t.getEvent(),this.doubleClickCounter=0);else if((this.isMouseDown||e==mxEvent.MOUSE_UP)&&this.fireDoubleClick)return this.fireDoubleClick=!1,i=this.lastTouchCell,this.lastTouchCell=null,this.isMouseDown=!1,void((null!=i||mxEvent.isTouchEvent(t.getEvent())&&(mxClient.IS_GC||mxClient.IS_SF))&&Math.abs(this.lastTouchX-t.getX())<this.doubleTapTolerance&&Math.abs(this.lastTouchY-t.getY())<this.doubleTapTolerance?this.dblClick(t.getEvent(),i):mxEvent.consume(t.getEvent()))}if(!this.isEventIgnored(e,t,n)){if(t.state=this.getEventState(t.getState()),this.fireEvent(new mxEventObject(mxEvent.FIRE_MOUSE_EVENT,"eventName",e,"event",t)),mxClient.IS_OP||mxClient.IS_SF||mxClient.IS_GC||mxClient.IS_IE11||mxClient.IS_IE&&mxClient.IS_SVG||t.getEvent().target!=this.container){if(e==mxEvent.MOUSE_MOVE&&this.isMouseDown&&this.autoScroll&&!mxEvent.isMultiTouchEvent(t.getEvent))this.scrollPointToVisible(t.getGraphX(),t.getGraphY(),this.autoExtend);else if(e==mxEvent.MOUSE_UP&&this.ignoreScrollbars&&this.translateToScrollPosition&&(0!=this.container.scrollLeft||0!=this.container.scrollTop)){var l=this.view.scale,r=this.view.translate;this.view.setTranslate(r.x-this.container.scrollLeft/l,r.y-this.container.scrollTop/l),this.container.scrollLeft=0,this.container.scrollTop=0}if(null!=this.mouseListeners){var d=[n,t];t.getEvent().preventDefault||(t.getEvent().returnValue=!0);for(var u=0;u<this.mouseListeners.length;u++){var g=this.mouseListeners[u];e==mxEvent.MOUSE_DOWN?g.mouseDown.apply(g,d):e==mxEvent.MOUSE_MOVE?g.mouseMove.apply(g,d):e==mxEvent.MOUSE_UP&&g.mouseUp.apply(g,d)}}e==mxEvent.MOUSE_UP&&this.click(t)}mxEvent.isTouchEvent(t.getEvent())&&e==mxEvent.MOUSE_DOWN&&this.tapAndHoldEnabled&&!this.tapAndHoldInProgress?(this.tapAndHoldInProgress=!0,this.initialTouchX=t.getGraphX(),this.initialTouchY=t.getGraphY(),this.tapAndHoldThread&&window.clearTimeout(this.tapAndHoldThread),this.tapAndHoldThread=window.setTimeout(mxUtils.bind(this,function(){this.tapAndHoldValid&&this.tapAndHold(t),this.tapAndHoldInProgress=!1,this.tapAndHoldValid=!1}),this.tapAndHoldDelay),this.tapAndHoldValid=!0):e==mxEvent.MOUSE_UP?(this.tapAndHoldInProgress=!1,this.tapAndHoldValid=!1):this.tapAndHoldValid&&(this.tapAndHoldValid=Math.abs(this.initialTouchX-t.getGraphX())<this.tolerance&&Math.abs(this.initialTouchY-t.getGraphY())<this.tolerance),e==mxEvent.MOUSE_DOWN&&this.isEditing()&&!this.cellEditor.isEventSource(t.getEvent())&&this.stopEditing(!this.isInvokesStopCellEditing()),this.consumeMouseEvent(e,t,n)}}},mxGraph.prototype.consumeMouseEvent=function(e,t,n){e==mxEvent.MOUSE_DOWN&&mxEvent.isTouchEvent(t.getEvent())&&t.consume(!1)},mxGraph.prototype.fireGestureEvent=function(e,t){this.lastTouchTime=0,this.fireEvent(new mxEventObject(mxEvent.GESTURE,"event",e,"cell",t))},mxGraph.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,null!=this.tooltipHandler&&this.tooltipHandler.destroy(),null!=this.selectionCellsHandler&&this.selectionCellsHandler.destroy(),null!=this.panningHandler&&this.panningHandler.destroy(),null!=this.popupMenuHandler&&this.popupMenuHandler.destroy(),null!=this.connectionHandler&&this.connectionHandler.destroy(),null!=this.graphHandler&&this.graphHandler.destroy(),null!=this.cellEditor&&this.cellEditor.destroy(),null!=this.view&&this.view.destroy(),null!=this.model&&null!=this.graphModelChangeListener&&(this.model.removeListener(this.graphModelChangeListener),this.graphModelChangeListener=null),this.container=null)},exports.mxGraph=mxGraph,mxCellOverlay.prototype=new mxEventSource,mxCellOverlay.prototype.constructor=mxCellOverlay,mxCellOverlay.prototype.image=null,mxCellOverlay.prototype.tooltip=null,mxCellOverlay.prototype.align=mxConstants.ALIGN_RIGHT,mxCellOverlay.prototype.verticalAlign=mxConstants.ALIGN_BOTTOM,mxCellOverlay.prototype.offset=null,mxCellOverlay.prototype.cursor=null,mxCellOverlay.prototype.defaultOverlap=.5,mxCellOverlay.prototype.getBounds=function(e){var t=e.view.graph.getModel().isEdge(e.cell),n=e.view.scale,o=null,s=this.image.width,i=this.image.height;if(t){var a=e.absolutePoints;if(a.length%2==1)o=a[Math.floor(a.length/2)];else{var l=a.length/2,r=a[l-1],d=a[l];o=new mxPoint(r.x+(d.x-r.x)/2,r.y+(d.y-r.y)/2)}}else(o=new mxPoint).x=this.align==mxConstants.ALIGN_LEFT?e.x:this.align==mxConstants.ALIGN_CENTER?e.x+e.width/2:e.x+e.width,o.y=this.verticalAlign==mxConstants.ALIGN_TOP?e.y:this.verticalAlign==mxConstants.ALIGN_MIDDLE?e.y+e.height/2:e.y+e.height;return new mxRectangle(Math.round(o.x-(s*this.defaultOverlap-this.offset.x)*n),Math.round(o.y-(i*this.defaultOverlap-this.offset.y)*n),s*n,i*n)},mxCellOverlay.prototype.toString=function(){return this.tooltip},exports.mxCellOverlay=mxCellOverlay,mxOutline.prototype.source=null,mxOutline.prototype.outline=null,mxOutline.prototype.graphRenderHint=mxConstants.RENDERING_HINT_FASTER,mxOutline.prototype.enabled=!0,mxOutline.prototype.showViewport=!0,mxOutline.prototype.border=10,mxOutline.prototype.sizerSize=8,mxOutline.prototype.labelsVisible=!1,mxOutline.prototype.updateOnPan=!1,mxOutline.prototype.sizerImage=null,mxOutline.prototype.minScale=1e-4,mxOutline.prototype.suspended=!1,mxOutline.prototype.forceVmlHandles=8==document.documentMode,mxOutline.prototype.createGraph=function(e){var t=new mxGraph(e,this.source.getModel(),this.graphRenderHint,this.source.getStylesheet());return t.foldingEnabled=!1,t.autoScroll=!1,t},mxOutline.prototype.init=function(e){this.outline=this.createGraph(e);var t=this.outline.graphModelChanged;if(this.outline.graphModelChanged=mxUtils.bind(this,function(i){this.suspended||null==this.outline||t.apply(this.outline,arguments)}),mxClient.IS_SVG){var n=this.outline.getView().getCanvas().parentNode;n.setAttribute("shape-rendering","optimizeSpeed"),n.setAttribute("image-rendering","optimizeSpeed")}this.outline.labelsVisible=this.labelsVisible,this.outline.setEnabled(!1),this.updateHandler=mxUtils.bind(this,function(i,a){this.suspended||this.active||this.update()}),this.source.getModel().addListener(mxEvent.CHANGE,this.updateHandler),this.outline.addMouseListener(this);var o=this.source.getView();o.addListener(mxEvent.SCALE,this.updateHandler),o.addListener(mxEvent.TRANSLATE,this.updateHandler),o.addListener(mxEvent.SCALE_AND_TRANSLATE,this.updateHandler),o.addListener(mxEvent.DOWN,this.updateHandler),o.addListener(mxEvent.UP,this.updateHandler),mxEvent.addListener(this.source.container,"scroll",this.updateHandler),this.panHandler=mxUtils.bind(this,function(i){this.updateOnPan&&this.updateHandler.apply(this,arguments)}),this.source.addListener(mxEvent.PAN,this.panHandler),this.refreshHandler=mxUtils.bind(this,function(i){this.outline.setStylesheet(this.source.getStylesheet()),this.outline.refresh()}),this.source.addListener(mxEvent.REFRESH,this.refreshHandler),this.bounds=new mxRectangle(0,0,0,0),this.selectionBorder=new mxRectangleShape(this.bounds,null,mxConstants.OUTLINE_COLOR,mxConstants.OUTLINE_STROKEWIDTH),this.selectionBorder.dialect=this.outline.dialect,this.forceVmlHandles&&(this.selectionBorder.isHtmlAllowed=function(){return!1}),this.selectionBorder.init(this.outline.getView().getOverlayPane());var s=mxUtils.bind(this,function(i){var a=mxEvent.getSource(i),l=mxUtils.bind(this,function(d){this.outline.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(d))}),r=mxUtils.bind(this,function(d){mxEvent.removeGestureListeners(a,null,l,r),this.outline.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(d))});mxEvent.addGestureListeners(a,null,l,r),this.outline.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(i))});mxEvent.addGestureListeners(this.selectionBorder.node,s),this.sizer=this.createSizer(),this.forceVmlHandles&&(this.sizer.isHtmlAllowed=function(){return!1}),this.sizer.init(this.outline.getView().getOverlayPane()),this.enabled&&(this.sizer.node.style.cursor="nwse-resize"),mxEvent.addGestureListeners(this.sizer.node,s),this.selectionBorder.node.style.display=this.showViewport?"":"none",this.sizer.node.style.display=this.selectionBorder.node.style.display,this.selectionBorder.node.style.cursor="move",this.update(!1)},mxOutline.prototype.isEnabled=function(){return this.enabled},mxOutline.prototype.setEnabled=function(e){this.enabled=e},mxOutline.prototype.setZoomEnabled=function(e){this.sizer.node.style.visibility=e?"visible":"hidden"},mxOutline.prototype.refresh=function(){this.update(!0)},mxOutline.prototype.createSizer=function(){var e;return null!=this.sizerImage?((e=new mxImageShape(new mxRectangle(0,0,this.sizerImage.width,this.sizerImage.height),this.sizerImage.src)).dialect=this.outline.dialect,e):((e=new mxRectangleShape(new mxRectangle(0,0,this.sizerSize,this.sizerSize),mxConstants.OUTLINE_HANDLE_FILLCOLOR,mxConstants.OUTLINE_HANDLE_STROKECOLOR)).dialect=this.outline.dialect,e)},mxOutline.prototype.getSourceContainerSize=function(){return new mxRectangle(0,0,this.source.container.scrollWidth,this.source.container.scrollHeight)},mxOutline.prototype.getOutlineOffset=function(e){return null},mxOutline.prototype.getSourceGraphBounds=function(){return this.source.getGraphBounds()},mxOutline.prototype.update=function(e){if(null!=this.source&&null!=this.outline){var t=this.source.view.scale,n=this.getSourceGraphBounds(),o=new mxRectangle(n.x/t+this.source.panDx,n.y/t+this.source.panDy,n.width/t,n.height/t),s=new mxRectangle(0,0,this.source.container.clientWidth/t,this.source.container.clientHeight/t),i=o.clone();i.add(s);var a=this.getSourceContainerSize(),l=Math.max(a.width/t,i.width),r=Math.max(a.height/t,i.height),d=Math.max(0,this.outline.container.clientWidth-this.border),u=Math.max(0,this.outline.container.clientHeight-this.border),g=Math.min(d/l,u/r),f=isNaN(g)?this.minScale:Math.max(this.minScale,g);if(f>0){this.outline.getView().scale!=f&&(this.outline.getView().scale=f,e=!0);var v=this.outline.getView();v.currentRoot!=this.source.getView().currentRoot&&v.setCurrentRoot(this.source.getView().currentRoot);var x=this.source.view.translate,z=x.x+this.source.panDx,b=x.y+this.source.panDy,_=this.getOutlineOffset(f);null!=_&&(z+=_.x,b+=_.y),o.x<0&&(z-=o.x),o.y<0&&(b-=o.y),v.translate.x==z&&v.translate.y==b||(v.translate.x=z,v.translate.y=b,e=!0);var H=v.translate,T=(f=this.source.getView().scale)/v.scale,L=1/v.scale,V=this.source.container;this.bounds=new mxRectangle((H.x-x.x-this.source.panDx)/L,(H.y-x.y-this.source.panDy)/L,V.clientWidth/T,V.clientHeight/T),this.bounds.x+=this.source.container.scrollLeft*v.scale/f,this.bounds.y+=this.source.container.scrollTop*v.scale/f,(Y=this.selectionBorder.bounds).x==this.bounds.x&&Y.y==this.bounds.y&&Y.width==this.bounds.width&&Y.height==this.bounds.height||(this.selectionBorder.bounds=this.bounds,this.selectionBorder.redraw());var Y,J=new mxRectangle(this.bounds.x+this.bounds.width-(Y=this.sizer.bounds).width/2,this.bounds.y+this.bounds.height-Y.height/2,Y.width,Y.height);Y.x==J.x&&Y.y==J.y&&Y.width==J.width&&Y.height==J.height||(this.sizer.bounds=J,"hidden"!=this.sizer.node.style.visibility&&this.sizer.redraw()),e&&this.outline.view.revalidate()}}},mxOutline.prototype.mouseDown=function(e,t){if(this.enabled&&this.showViewport){var n=mxEvent.isMouseEvent(t.getEvent())?0:this.source.tolerance,o=this.source.allowHandleBoundsCheck&&(mxClient.IS_IE||n>0)?new mxRectangle(t.getGraphX()-n,t.getGraphY()-n,2*n,2*n):null;this.zoom=t.isSource(this.sizer)||null!=o&&mxUtils.intersects(shape.bounds,o),this.startX=t.getX(),this.startY=t.getY(),this.active=!0,this.source.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.source.container)?(this.dx0=this.source.container.scrollLeft,this.dy0=this.source.container.scrollTop):(this.dx0=0,this.dy0=0)}t.consume()},mxOutline.prototype.mouseMove=function(e,t){if(this.active){this.selectionBorder.node.style.display=this.showViewport?"":"none",this.sizer.node.style.display=this.selectionBorder.node.style.display;var n=this.getTranslateForEvent(t),o=n.x,s=n.y,i=null;if(this.zoom){var a=this.source.container;s=o/(a.clientWidth/a.clientHeight),i=new mxRectangle(this.bounds.x,this.bounds.y,Math.max(1,this.bounds.width+o),Math.max(1,this.bounds.height+s)),this.selectionBorder.bounds=i,this.selectionBorder.redraw()}else{var r=this.outline.getView().scale;i=new mxRectangle(this.bounds.x+o,this.bounds.y+s,this.bounds.width,this.bounds.height),this.selectionBorder.bounds=i,this.selectionBorder.redraw(),o/=r,o*=this.source.getView().scale,s/=r,s*=this.source.getView().scale,this.source.panGraph(-o-this.dx0,-s-this.dy0)}var d=this.sizer.bounds;this.sizer.bounds=new mxRectangle(i.x+i.width-d.width/2,i.y+i.height-d.height/2,d.width,d.height),"hidden"!=this.sizer.node.style.visibility&&this.sizer.redraw(),t.consume()}},mxOutline.prototype.getTranslateForEvent=function(e){return new mxPoint(e.getX()-this.startX,e.getY()-this.startY)},mxOutline.prototype.mouseUp=function(e,t){if(this.active){var n=this.getTranslateForEvent(t),o=n.x,s=n.y;if(Math.abs(o)>0||Math.abs(s)>0){if(this.zoom){var i=this.selectionBorder.bounds.width,a=this.source.getView().scale;this.source.zoomTo(Math.max(this.minScale,a-o*a/i),!1)}else if(!this.source.useScrollbarsForPanning||!mxUtils.hasScrollbars(this.source.container)){this.source.panGraph(0,0),o/=this.outline.getView().scale,s/=this.outline.getView().scale;var l=this.source.getView().translate;this.source.getView().setTranslate(l.x-o,l.y-s)}this.update(),t.consume()}this.index=null,this.active=!1}},mxOutline.prototype.destroy=function(){null!=this.source&&(this.source.removeListener(this.panHandler),this.source.removeListener(this.refreshHandler),this.source.getModel().removeListener(this.updateHandler),this.source.getView().removeListener(this.updateHandler),mxEvent.addListener(this.source.container,"scroll",this.updateHandler),this.source=null),null!=this.outline&&(this.outline.removeMouseListener(this),this.outline.destroy(),this.outline=null),null!=this.selectionBorder&&(this.selectionBorder.destroy(),this.selectionBorder=null),null!=this.sizer&&(this.sizer.destroy(),this.sizer=null)},exports.mxOutline=mxOutline,mxMultiplicity.prototype.type=null,mxMultiplicity.prototype.attr=null,mxMultiplicity.prototype.value=null,mxMultiplicity.prototype.source=null,mxMultiplicity.prototype.min=null,mxMultiplicity.prototype.max=null,mxMultiplicity.prototype.validNeighbors=null,mxMultiplicity.prototype.validNeighborsAllowed=!0,mxMultiplicity.prototype.countError=null,mxMultiplicity.prototype.typeError=null,mxMultiplicity.prototype.check=function(e,t,n,o,s,i){var a="";return(this.source&&this.checkTerminal(e,n,t)||!this.source&&this.checkTerminal(e,o,t))&&(null!=this.countError&&(this.source&&(0==this.max||s>=this.max)||!this.source&&(0==this.max||i>=this.max))&&(a+=this.countError+"\n"),null!=this.validNeighbors&&null!=this.typeError&&this.validNeighbors.length>0)&&(this.checkNeighbors(e,t,n,o)||(a+=this.typeError+"\n")),a.length>0?a:null},mxMultiplicity.prototype.checkNeighbors=function(e,t,n,o){for(var s=e.model.getValue(n),i=e.model.getValue(o),a=!this.validNeighborsAllowed,l=this.validNeighbors,r=0;r<l.length;r++){if(this.source&&this.checkType(e,i,l[r])){a=this.validNeighborsAllowed;break}if(!this.source&&this.checkType(e,s,l[r])){a=this.validNeighborsAllowed;break}}return a},mxMultiplicity.prototype.checkTerminal=function(e,t,n){var o=e.model.getValue(t);return this.checkType(e,o,this.type,this.attr,this.value)},mxMultiplicity.prototype.checkType=function(e,t,n,o,s){return null!=t&&(isNaN(t.nodeType)?t==n:mxUtils.isNode(t,n,o,s))},exports.mxMultiplicity=mxMultiplicity,mxLayoutManager.prototype=new mxEventSource,mxLayoutManager.prototype.constructor=mxLayoutManager,mxLayoutManager.prototype.graph=null,mxLayoutManager.prototype.bubbling=!0,mxLayoutManager.prototype.enabled=!0,mxLayoutManager.prototype.updateHandler=null,mxLayoutManager.prototype.moveHandler=null,mxLayoutManager.prototype.isEnabled=function(){return this.enabled},mxLayoutManager.prototype.setEnabled=function(e){this.enabled=e},mxLayoutManager.prototype.isBubbling=function(){return this.bubbling},mxLayoutManager.prototype.setBubbling=function(e){this.bubbling=e},mxLayoutManager.prototype.getGraph=function(){return this.graph},mxLayoutManager.prototype.setGraph=function(e){null!=this.graph&&(this.graph.getModel().removeListener(this.undoHandler),this.graph.removeListener(this.moveHandler)),this.graph=e,null!=this.graph&&(this.graph.getModel().addListener(mxEvent.BEFORE_UNDO,this.undoHandler),this.graph.addListener(mxEvent.MOVE_CELLS,this.moveHandler))},mxLayoutManager.prototype.getLayout=function(e){return null},mxLayoutManager.prototype.beforeUndo=function(e){for(var t=this.getCellsForChanges(e.changes),n=this.getGraph().getModel(),o=[],s=0;s<t.length;s++)o=o.concat(n.getDescendants(t[s]));if(t=o,this.isBubbling())for(o=n.getParents(t);o.length>0;)t=t.concat(o),o=n.getParents(o);this.executeLayoutForCells(t)},mxLayoutManager.prototype.executeLayoutForCells=function(e){var t=mxUtils.sortCells(e,!0);t=t.concat(t.slice().reverse()),this.layoutCells(t)},mxLayoutManager.prototype.cellsMoved=function(e,t){if(null!=e&&null!=t)for(var n=mxUtils.convertPoint(this.getGraph().container,mxEvent.getClientX(t),mxEvent.getClientY(t)),o=this.getGraph().getModel(),s=0;s<e.length;s++){var i=o.getParent(e[s]);if(mxUtils.indexOf(e,i)<0){var a=this.getLayout(i);null!=a&&a.moveCell(e[s],n.x,n.y)}}},mxLayoutManager.prototype.getCellsForChanges=function(e){for(var t=new mxDictionary,n=[],o=0;o<e.length;o++){var s=e[o];if(s instanceof mxRootChange)return[];for(var i=this.getCellsForChange(s),a=0;a<i.length;a++)null==i[a]||t.get(i[a])||(t.put(i[a],!0),n.push(i[a]))}return n},mxLayoutManager.prototype.getCellsForChange=function(e){var t=this.getGraph().getModel();return e instanceof mxChildChange?[e.child,e.previous,t.getParent(e.child)]:e instanceof mxTerminalChange||e instanceof mxGeometryChange?[e.cell,t.getParent(e.cell)]:e instanceof mxVisibleChange||e instanceof mxStyleChange?[e.cell]:[]},mxLayoutManager.prototype.layoutCells=function(e){if(e.length>0){var t=this.getGraph().getModel();t.beginUpdate();try{for(var n=null,o=0;o<e.length;o++)e[o]!=t.getRoot()&&e[o]!=n&&this.executeLayout(this.getLayout(e[o]),e[o])&&(n=e[o]);this.fireEvent(new mxEventObject(mxEvent.LAYOUT_CELLS,"cells",e))}finally{t.endUpdate()}}},mxLayoutManager.prototype.executeLayout=function(e,t){var n=!1;return null!=e&&null!=t&&(e.execute(t),n=!0),n},mxLayoutManager.prototype.destroy=function(){this.setGraph(null)},exports.mxLayoutManager=mxLayoutManager,mxSwimlaneManager.prototype=new mxEventSource,mxSwimlaneManager.prototype.constructor=mxSwimlaneManager,mxSwimlaneManager.prototype.graph=null,mxSwimlaneManager.prototype.enabled=!0,mxSwimlaneManager.prototype.horizontal=!0,mxSwimlaneManager.prototype.addEnabled=!0,mxSwimlaneManager.prototype.resizeEnabled=!0,mxSwimlaneManager.prototype.addHandler=null,mxSwimlaneManager.prototype.resizeHandler=null,mxSwimlaneManager.prototype.isEnabled=function(){return this.enabled},mxSwimlaneManager.prototype.setEnabled=function(e){this.enabled=e},mxSwimlaneManager.prototype.isHorizontal=function(){return this.horizontal},mxSwimlaneManager.prototype.setHorizontal=function(e){this.horizontal=e},mxSwimlaneManager.prototype.isAddEnabled=function(){return this.addEnabled},mxSwimlaneManager.prototype.setAddEnabled=function(e){this.addEnabled=e},mxSwimlaneManager.prototype.isResizeEnabled=function(){return this.resizeEnabled},mxSwimlaneManager.prototype.setResizeEnabled=function(e){this.resizeEnabled=e},mxSwimlaneManager.prototype.getGraph=function(){return this.graph},mxSwimlaneManager.prototype.setGraph=function(e){null!=this.graph&&(this.graph.removeListener(this.addHandler),this.graph.removeListener(this.resizeHandler)),this.graph=e,null!=this.graph&&(this.graph.addListener(mxEvent.ADD_CELLS,this.addHandler),this.graph.addListener(mxEvent.CELLS_RESIZED,this.resizeHandler))},mxSwimlaneManager.prototype.isSwimlaneIgnored=function(e){return!this.getGraph().isSwimlane(e)},mxSwimlaneManager.prototype.isCellHorizontal=function(e){if(this.graph.isSwimlane(e)){var t=this.graph.getCellStyle(e);return 1==mxUtils.getValue(t,mxConstants.STYLE_HORIZONTAL,1)}return!this.isHorizontal()},mxSwimlaneManager.prototype.cellsAdded=function(e){if(null!=e){var t=this.getGraph().getModel();t.beginUpdate();try{for(var n=0;n<e.length;n++)this.isSwimlaneIgnored(e[n])||this.swimlaneAdded(e[n])}finally{t.endUpdate()}}},mxSwimlaneManager.prototype.swimlaneAdded=function(e){for(var t=this.getGraph().getModel(),n=t.getParent(e),o=t.getChildCount(n),s=null,i=0;i<o;i++){var a=t.getChildAt(n,i);if(a!=e&&!this.isSwimlaneIgnored(a)&&null!=(s=t.getGeometry(a)))break}if(null!=s){var l=null!=n?this.isCellHorizontal(n):this.horizontal;this.resizeSwimlane(e,s.width,s.height,l)}},mxSwimlaneManager.prototype.cellsResized=function(e){if(null!=e){var t=this.getGraph().getModel();t.beginUpdate();try{for(var n=0;n<e.length;n++)if(!this.isSwimlaneIgnored(e[n])){var o=t.getGeometry(e[n]);if(null!=o){for(var s=new mxRectangle(0,0,o.width,o.height),i=e[n],a=i;null!=a;){i=a,a=t.getParent(a);var l=this.graph.isSwimlane(a)?this.graph.getStartSize(a):new mxRectangle;s.width+=l.width,s.height+=l.height}var r=null!=a?this.isCellHorizontal(a):this.horizontal;this.resizeSwimlane(i,s.width,s.height,r)}}}finally{t.endUpdate()}}},mxSwimlaneManager.prototype.resizeSwimlane=function(e,t,n,o){var s=this.getGraph().getModel();s.beginUpdate();try{var i=this.isCellHorizontal(e);if(!this.isSwimlaneIgnored(e)){var a=s.getGeometry(e);null!=a&&(o&&a.height!=n||!o&&a.width!=t)&&(a=a.clone(),o?a.height=n:a.width=t,s.setGeometry(e,a))}var l=this.graph.isSwimlane(e)?this.graph.getStartSize(e):new mxRectangle;t-=l.width,n-=l.height;for(var r=s.getChildCount(e),d=0;d<r;d++){var u=s.getChildAt(e,d);this.resizeSwimlane(u,t,n,i)}}finally{s.endUpdate()}},mxSwimlaneManager.prototype.destroy=function(){this.setGraph(null)},exports.mxSwimlaneManager=mxSwimlaneManager,mxTemporaryCellStates.prototype.view=null,mxTemporaryCellStates.prototype.oldStates=null,mxTemporaryCellStates.prototype.oldBounds=null,mxTemporaryCellStates.prototype.oldScale=null,mxTemporaryCellStates.prototype.destroy=function(){this.view.setScale(this.oldScale),this.view.setStates(this.oldStates),this.view.setGraphBounds(this.oldBounds),this.view.validateCellState=this.oldValidateCellState},exports.mxTemporaryCellStates=mxTemporaryCellStates,mxCellStatePreview.prototype.graph=null,mxCellStatePreview.prototype.deltas=null,mxCellStatePreview.prototype.count=0,mxCellStatePreview.prototype.isEmpty=function(){return 0==this.count},mxCellStatePreview.prototype.moveState=function(e,t,n,o,s){o=null==o||o,s=null==s||s;var i=this.deltas.get(e.cell);return null==i?(i={point:new mxPoint(t,n),state:e},this.deltas.put(e.cell,i),this.count++):o?(i.point.x+=t,i.point.y+=n):(i.point.x=t,i.point.y=n),s&&this.addEdges(e),i.point},mxCellStatePreview.prototype.show=function(e){this.deltas.visit(mxUtils.bind(this,function(t,n){this.translateState(n.state,n.point.x,n.point.y)})),this.deltas.visit(mxUtils.bind(this,function(t,n){this.revalidateState(n.state,n.point.x,n.point.y,e)}))},mxCellStatePreview.prototype.translateState=function(e,t,n){if(null!=e){var o=this.graph.getModel();if(o.isVertex(e.cell)){e.view.updateCellState(e);var s=o.getGeometry(e.cell);0==t&&0==n||null==s||s.relative&&null==this.deltas.get(e.cell)||(e.x+=t,e.y+=n)}for(var i=o.getChildCount(e.cell),a=0;a<i;a++)this.translateState(e.view.getState(o.getChildAt(e.cell,a)),t,n)}},mxCellStatePreview.prototype.revalidateState=function(e,t,n,o){if(null!=e){var s=this.graph.getModel();s.isEdge(e.cell)&&e.view.updateCellState(e);var i=this.graph.getCellGeometry(e.cell),a=e.view.getState(s.getParent(e.cell));0==t&&0==n||null==i||!i.relative||!s.isVertex(e.cell)||null!=a&&!s.isVertex(a.cell)&&null==this.deltas.get(e.cell)||(e.x+=t,e.y+=n),this.graph.cellRenderer.redraw(e),null!=o&&o(e);for(var l=s.getChildCount(e.cell),r=0;r<l;r++)this.revalidateState(this.graph.view.getState(s.getChildAt(e.cell,r)),t,n,o)}},mxCellStatePreview.prototype.addEdges=function(e){for(var t=this.graph.getModel(),n=t.getEdgeCount(e.cell),o=0;o<n;o++){var s=e.view.getState(t.getEdgeAt(e.cell,o));null!=s&&this.moveState(s,0,0)}},exports.mxCellStatePreview=mxCellStatePreview,mxConnectionConstraint.prototype.point=null,mxConnectionConstraint.prototype.perimeter=null,exports.mxConnectionConstraint=mxConnectionConstraint,mxGraphHandler.prototype.graph=null,mxGraphHandler.prototype.maxCells=mxClient.IS_IE?20:50,mxGraphHandler.prototype.enabled=!0,mxGraphHandler.prototype.highlightEnabled=!0,mxGraphHandler.prototype.cloneEnabled=!0,mxGraphHandler.prototype.moveEnabled=!0,mxGraphHandler.prototype.guidesEnabled=!1,mxGraphHandler.prototype.guide=null,mxGraphHandler.prototype.currentDx=null,mxGraphHandler.prototype.currentDy=null,mxGraphHandler.prototype.updateCursor=!0,mxGraphHandler.prototype.selectEnabled=!0,mxGraphHandler.prototype.removeCellsFromParent=!0,mxGraphHandler.prototype.connectOnDrop=!1,mxGraphHandler.prototype.scrollOnMove=!0,mxGraphHandler.prototype.minimumSize=6,mxGraphHandler.prototype.previewColor="black",mxGraphHandler.prototype.htmlPreview=!1,mxGraphHandler.prototype.shape=null,mxGraphHandler.prototype.scaleGrid=!1,mxGraphHandler.prototype.rotationEnabled=!0,mxGraphHandler.prototype.isEnabled=function(){return this.enabled},mxGraphHandler.prototype.setEnabled=function(e){this.enabled=e},mxGraphHandler.prototype.isCloneEnabled=function(){return this.cloneEnabled},mxGraphHandler.prototype.setCloneEnabled=function(e){this.cloneEnabled=e},mxGraphHandler.prototype.isMoveEnabled=function(){return this.moveEnabled},mxGraphHandler.prototype.setMoveEnabled=function(e){this.moveEnabled=e},mxGraphHandler.prototype.isSelectEnabled=function(){return this.selectEnabled},mxGraphHandler.prototype.setSelectEnabled=function(e){this.selectEnabled=e},mxGraphHandler.prototype.isRemoveCellsFromParent=function(){return this.removeCellsFromParent},mxGraphHandler.prototype.setRemoveCellsFromParent=function(e){this.removeCellsFromParent=e},mxGraphHandler.prototype.getInitialCellForEvent=function(e){return e.getCell()},mxGraphHandler.prototype.isDelayedSelection=function(e,t){return this.graph.isCellSelected(e)},mxGraphHandler.prototype.mouseDown=function(e,t){if(!t.isConsumed()&&this.isEnabled()&&this.graph.isEnabled()&&null!=t.getState()&&!mxEvent.isMultiTouchEvent(t.getEvent())){var n=this.getInitialCellForEvent(t);if(this.delayedSelection=this.isDelayedSelection(n,t),this.cell=null,this.isSelectEnabled()&&!this.delayedSelection&&this.graph.selectCellForEvent(n,t.getEvent()),this.isMoveEnabled()){var o=this.graph.model,s=o.getGeometry(n);this.graph.isCellMovable(n)&&(!o.isEdge(n)||this.graph.getSelectionCount()>1||null!=s.points&&s.points.length>0||null==o.getTerminal(n,!0)||null==o.getTerminal(n,!1)||this.graph.allowDanglingEdges||this.graph.isCloneEvent(t.getEvent())&&this.graph.isCellsCloneable())?this.start(n,t.getX(),t.getY()):this.delayedSelection&&(this.cell=n),this.cellWasClicked=!0,t.consume()}}},mxGraphHandler.prototype.getGuideStates=function(){var e=this.graph.getDefaultParent(),t=this.graph.getModel(),n=mxUtils.bind(this,function(o){return null!=this.graph.view.getState(o)&&t.isVertex(o)&&null!=t.getGeometry(o)&&!t.getGeometry(o).relative});return this.graph.view.getCellStates(t.filterDescendants(n,e))},mxGraphHandler.prototype.getCells=function(e){return!this.delayedSelection&&this.graph.isCellMovable(e)?[e]:this.graph.getMovableCells(this.graph.getSelectionCells())},mxGraphHandler.prototype.getPreviewBounds=function(e){var t=this.getBoundingBox(e);return null!=t&&(t.width=Math.max(0,t.width-1),t.height=Math.max(0,t.height-1),t.width<this.minimumSize?(t.x-=(this.minimumSize-t.width)/2,t.width=this.minimumSize):(t.x=Math.round(t.x),t.width=Math.ceil(t.width)),t.height<this.minimumSize?(t.y-=(this.minimumSize-t.height)/2,t.height=this.minimumSize):(t.y=Math.round(t.y),t.height=Math.ceil(t.height))),t},mxGraphHandler.prototype.getBoundingBox=function(e){var t=null;if(null!=e&&e.length>0)for(var n=this.graph.getModel(),o=0;o<e.length;o++)if(n.isVertex(e[o])||n.isEdge(e[o])){var s=this.graph.view.getState(e[o]);if(null!=s){var i=s;n.isVertex(e[o])&&null!=s.shape&&null!=s.shape.boundingBox&&(i=s.shape.boundingBox),null==t?t=mxRectangle.fromRectangle(i):t.add(i)}}return t},mxGraphHandler.prototype.createPreviewShape=function(e){var t=new mxRectangleShape(e,null,this.previewColor);return t.isDashed=!0,this.htmlPreview?(t.dialect=mxConstants.DIALECT_STRICTHTML,t.init(this.graph.container)):(t.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,t.init(this.graph.getView().getOverlayPane()),t.pointerEvents=!1,mxClient.IS_IOS&&(t.getSvgScreenOffset=function(){return 0})),t},mxGraphHandler.prototype.start=function(e,t,n){this.cell=e,this.first=mxUtils.convertPoint(this.graph.container,t,n),this.cells=this.getCells(this.cell),this.bounds=this.graph.getView().getBounds(this.cells),this.pBounds=this.getPreviewBounds(this.cells),this.guidesEnabled&&(this.guide=new mxGuide(this.graph,this.getGuideStates()))},mxGraphHandler.prototype.useGuidesForEvent=function(e){return null==this.guide||this.guide.isEnabledForEvent(e.getEvent())},mxGraphHandler.prototype.snap=function(e){var t=this.scaleGrid?this.graph.view.scale:1;return e.x=this.graph.snap(e.x/t)*t,e.y=this.graph.snap(e.y/t)*t,e},mxGraphHandler.prototype.getDelta=function(e){var t=mxUtils.convertPoint(this.graph.container,e.getX(),e.getY()),n=this.graph.view.scale;return new mxPoint(this.roundLength((t.x-this.first.x)/n)*n,this.roundLength((t.y-this.first.y)/n)*n)},mxGraphHandler.prototype.updateHint=function(e){},mxGraphHandler.prototype.removeHint=function(){},mxGraphHandler.prototype.roundLength=function(e){return Math.round(e)},mxGraphHandler.prototype.mouseMove=function(e,t){var n=this.graph;if(!t.isConsumed()&&n.isMouseDown&&null!=this.cell&&null!=this.first&&null!=this.bounds){if(mxEvent.isMultiTouchEvent(t.getEvent()))return void this.reset();var o=this.getDelta(t),s=o.x,i=o.y,a=n.tolerance;if(null!=this.shape||Math.abs(s)>a||Math.abs(i)>a){null==this.highlight&&(this.highlight=new mxCellHighlight(this.graph,mxConstants.DROP_TARGET_COLOR,3)),null==this.shape&&(this.shape=this.createPreviewShape(this.bounds));var l=n.isGridEnabledEvent(t.getEvent()),r=!0;if(null!=this.guide&&this.useGuidesForEvent(t))r=!1,s=(o=this.guide.move(this.bounds,new mxPoint(s,i),l)).x,i=o.y;else if(l){var d=n.getView().translate,u=n.getView().scale,g=this.bounds.x-(n.snap(this.bounds.x/u-d.x)+d.x)*u,f=this.bounds.y-(n.snap(this.bounds.y/u-d.y)+d.y)*u,v=this.snap(new mxPoint(s,i));s=v.x-g,i=v.y-f}null!=this.guide&&r&&this.guide.hide(),n.isConstrainedEvent(t.getEvent())&&(Math.abs(s)>Math.abs(i)?i=0:s=0),this.currentDx=s,this.currentDy=i,this.updatePreviewShape();var x=null,z=t.getCell(),b=n.isCloneEvent(t.getEvent())&&n.isCellsCloneable()&&this.isCloneEnabled();n.isDropEnabled()&&this.highlightEnabled&&(x=n.getDropTarget(this.cells,t.getEvent(),z,b));var _=n.getView().getState(x),H=!1;if(null==_||n.model.getParent(this.cell)==x&&!b){if(this.target=null,this.connectOnDrop&&null!=z&&1==this.cells.length&&n.getModel().isVertex(z)&&n.isCellConnectable(z)&&null!=(_=n.getView().getState(z))){var T=n.getEdgeValidationError(null,this.cell,z);this.setHighlightColor(null==T?mxConstants.VALID_COLOR:mxConstants.INVALID_CONNECT_TARGET_COLOR),H=!0}}else this.target!=x&&(this.target=x,this.setHighlightColor(mxConstants.DROP_TARGET_COLOR)),H=!0;null!=_&&H?this.highlight.highlight(_):this.highlight.hide()}this.updateHint(t),t.consume(),mxEvent.consume(t.getEvent())}else if((this.isMoveEnabled()||this.isCloneEnabled())&&this.updateCursor&&!t.isConsumed()&&null!=t.getState()&&!n.isMouseDown){var V=n.getCursorForMouseEvent(t);null==V&&n.isEnabled()&&n.isCellMovable(t.getCell())&&(V=n.getModel().isEdge(t.getCell())?mxConstants.CURSOR_MOVABLE_EDGE:mxConstants.CURSOR_MOVABLE_VERTEX),null!=t.sourceState&&t.sourceState.setCursor(V)}},mxGraphHandler.prototype.updatePreviewShape=function(){null!=this.shape&&(this.shape.bounds=new mxRectangle(Math.round(this.pBounds.x+this.currentDx-this.graph.panDx),Math.round(this.pBounds.y+this.currentDy-this.graph.panDy),this.pBounds.width,this.pBounds.height),this.shape.redraw())},mxGraphHandler.prototype.setHighlightColor=function(e){null!=this.highlight&&this.highlight.setHighlightColor(e)},mxGraphHandler.prototype.mouseUp=function(e,t){if(!t.isConsumed()){var n=this.graph;if(null!=this.cell&&null!=this.first&&null!=this.shape&&null!=this.currentDx&&null!=this.currentDy){var o=t.getCell();if(this.connectOnDrop&&null==this.target&&null!=o&&n.getModel().isVertex(o)&&n.isCellConnectable(o)&&n.isEdgeValid(null,this.cell,o))n.connectionHandler.connect(this.cell,o,t.getEvent());else{var s=n.isCloneEvent(t.getEvent())&&n.isCellsCloneable()&&this.isCloneEnabled(),i=n.getView().scale,a=this.roundLength(this.currentDx/i),l=this.roundLength(this.currentDy/i),r=this.target;n.isSplitEnabled()&&n.isSplitTarget(r,this.cells,t.getEvent())?n.splitEdge(r,this.cells,null,a,l):this.moveCells(this.cells,a,l,s,this.target,t.getEvent())}}else this.isSelectEnabled()&&this.delayedSelection&&null!=this.cell&&this.selectDelayed(t)}this.cellWasClicked&&t.consume(),this.reset()},mxGraphHandler.prototype.selectDelayed=function(e){this.graph.isCellSelected(this.cell)&&this.graph.popupMenuHandler.isPopupTrigger(e)||this.graph.selectCellForEvent(this.cell,e.getEvent())},mxGraphHandler.prototype.reset=function(){this.destroyShapes(),this.removeHint(),this.cellWasClicked=!1,this.delayedSelection=!1,this.currentDx=null,this.currentDy=null,this.guides=null,this.first=null,this.cell=null,this.target=null},mxGraphHandler.prototype.shouldRemoveCellsFromParent=function(e,t,n){if(this.graph.getModel().isVertex(e)){var o=this.graph.getView().getState(e),s=mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(n),mxEvent.getClientY(n)),i=mxUtils.toRadians(mxUtils.getValue(o.style,mxConstants.STYLE_ROTATION)||0);if(0!=i){var a=Math.cos(-i),l=Math.sin(-i),r=new mxPoint(o.getCenterX(),o.getCenterY());s=mxUtils.getRotatedPoint(s,a,l,r)}return null!=o&&!mxUtils.contains(o,s.x,s.y)}return!1},mxGraphHandler.prototype.moveCells=function(e,t,n,o,s,i){o&&(e=this.graph.getCloneableCells(e)),null==s&&this.isRemoveCellsFromParent()&&this.shouldRemoveCellsFromParent(this.graph.getModel().getParent(this.cell),e,i)&&(s=this.graph.getDefaultParent()),e=this.graph.moveCells(e,t-this.graph.panDx/this.graph.view.scale,n-this.graph.panDy/this.graph.view.scale,o,s,i),this.isSelectEnabled()&&this.scrollOnMove&&this.graph.scrollCellToVisible(e[0]),o&&this.graph.setSelectionCells(e)},mxGraphHandler.prototype.destroyShapes=function(){null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.guide&&(this.guide.destroy(),this.guide=null),null!=this.highlight&&(this.highlight.destroy(),this.highlight=null)},mxGraphHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.panHandler),null!=this.escapeHandler&&(this.graph.removeListener(this.escapeHandler),this.escapeHandler=null),this.destroyShapes(),this.removeHint()},exports.mxGraphHandler=mxGraphHandler,mxPanningHandler.prototype=new mxEventSource,mxPanningHandler.prototype.constructor=mxPanningHandler,mxPanningHandler.prototype.graph=null,mxPanningHandler.prototype.useLeftButtonForPanning=!1,mxPanningHandler.prototype.usePopupTrigger=!0,mxPanningHandler.prototype.ignoreCell=!1,mxPanningHandler.prototype.previewEnabled=!0,mxPanningHandler.prototype.useGrid=!1,mxPanningHandler.prototype.panningEnabled=!0,mxPanningHandler.prototype.pinchEnabled=!0,mxPanningHandler.prototype.maxScale=8,mxPanningHandler.prototype.minScale=.01,mxPanningHandler.prototype.dx=null,mxPanningHandler.prototype.dy=null,mxPanningHandler.prototype.startX=0,mxPanningHandler.prototype.startY=0,mxPanningHandler.prototype.isActive=function(){return this.active||null!=this.initialScale},mxPanningHandler.prototype.isPanningEnabled=function(){return this.panningEnabled},mxPanningHandler.prototype.setPanningEnabled=function(e){this.panningEnabled=e},mxPanningHandler.prototype.isPinchEnabled=function(){return this.pinchEnabled},mxPanningHandler.prototype.setPinchEnabled=function(e){this.pinchEnabled=e},mxPanningHandler.prototype.isPanningTrigger=function(e){var t=e.getEvent();return this.useLeftButtonForPanning&&null==e.getState()&&mxEvent.isLeftMouseButton(t)||mxEvent.isControlDown(t)&&mxEvent.isShiftDown(t)||this.usePopupTrigger&&mxEvent.isPopupTrigger(t)},mxPanningHandler.prototype.isForcePanningEvent=function(e){return this.ignoreCell||mxEvent.isMultiTouchEvent(e.getEvent())},mxPanningHandler.prototype.mouseDown=function(e,t){this.mouseDownEvent=t,!t.isConsumed()&&this.isPanningEnabled()&&!this.active&&this.isPanningTrigger(t)&&(this.start(t),this.consumePanningTrigger(t))},mxPanningHandler.prototype.start=function(e){this.dx0=-this.graph.container.scrollLeft,this.dy0=-this.graph.container.scrollTop,this.startX=e.getX(),this.startY=e.getY(),this.dx=null,this.dy=null,this.panningTrigger=!0},mxPanningHandler.prototype.consumePanningTrigger=function(e){e.consume()},mxPanningHandler.prototype.mouseMove=function(e,t){if(this.dx=t.getX()-this.startX,this.dy=t.getY()-this.startY,this.active)this.previewEnabled&&(this.useGrid&&(this.dx=this.graph.snap(this.dx),this.dy=this.graph.snap(this.dy)),this.graph.panGraph(this.dx+this.dx0,this.dy+this.dy0)),this.fireEvent(new mxEventObject(mxEvent.PAN,"event",t));else if(this.panningTrigger){var n=this.active;this.active=Math.abs(this.dx)>this.graph.tolerance||Math.abs(this.dy)>this.graph.tolerance,!n&&this.active&&this.fireEvent(new mxEventObject(mxEvent.PAN_START,"event",t))}(this.active||this.panningTrigger)&&t.consume()},mxPanningHandler.prototype.mouseUp=function(e,t){if(this.active){if(null!=this.dx&&null!=this.dy){if(!this.graph.useScrollbarsForPanning||!mxUtils.hasScrollbars(this.graph.container)){var n=this.graph.getView().scale,o=this.graph.getView().translate;this.graph.panGraph(0,0),this.panGraph(o.x+this.dx/n,o.y+this.dy/n)}t.consume()}this.fireEvent(new mxEventObject(mxEvent.PAN_END,"event",t))}this.panningTrigger=!1,this.mouseDownEvent=null,this.active=!1,this.dx=null,this.dy=null},mxPanningHandler.prototype.panGraph=function(e,t){this.graph.getView().setTranslate(e,t)},mxPanningHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.forcePanningHandler),this.graph.removeListener(this.gestureHandler)},exports.mxPanningHandler=mxPanningHandler,mxPopupMenuHandler.prototype=new mxPopupMenu,mxPopupMenuHandler.prototype.constructor=mxPopupMenuHandler,mxPopupMenuHandler.prototype.graph=null,mxPopupMenuHandler.prototype.selectOnPopup=!0,mxPopupMenuHandler.prototype.clearSelectionOnBackground=!0,mxPopupMenuHandler.prototype.triggerX=null,mxPopupMenuHandler.prototype.triggerY=null,mxPopupMenuHandler.prototype.screenX=null,mxPopupMenuHandler.prototype.screenY=null,mxPopupMenuHandler.prototype.init=function(){mxPopupMenu.prototype.init.apply(this),mxEvent.addGestureListeners(this.div,mxUtils.bind(this,function(e){this.graph.tooltipHandler.hide()}))},mxPopupMenuHandler.prototype.isSelectOnPopup=function(e){return this.selectOnPopup},mxPopupMenuHandler.prototype.mouseDown=function(e,t){this.isEnabled()&&!mxEvent.isMultiTouchEvent(t.getEvent())&&(this.hideMenu(),this.triggerX=t.getGraphX(),this.triggerY=t.getGraphY(),this.screenX=mxEvent.getMainEvent(t.getEvent()).screenX,this.screenY=mxEvent.getMainEvent(t.getEvent()).screenY,this.popupTrigger=this.isPopupTrigger(t),this.inTolerance=!0)},mxPopupMenuHandler.prototype.mouseMove=function(e,t){this.inTolerance&&null!=this.screenX&&null!=this.screenY&&(Math.abs(mxEvent.getMainEvent(t.getEvent()).screenX-this.screenX)>this.graph.tolerance||Math.abs(mxEvent.getMainEvent(t.getEvent()).screenY-this.screenY)>this.graph.tolerance)&&(this.inTolerance=!1)},mxPopupMenuHandler.prototype.mouseUp=function(e,t){if(this.popupTrigger&&this.inTolerance&&null!=this.triggerX&&null!=this.triggerY){var n=this.getCellForPopupEvent(t);this.graph.isEnabled()&&this.isSelectOnPopup(t)&&null!=n&&!this.graph.isCellSelected(n)?this.graph.setSelectionCell(n):this.clearSelectionOnBackground&&null==n&&this.graph.clearSelection(),this.graph.tooltipHandler.hide();var o=mxUtils.getScrollOrigin();this.popup(t.getX()+o.x+1,t.getY()+o.y+1,n,t.getEvent()),t.consume()}this.popupTrigger=!1,this.inTolerance=!1},mxPopupMenuHandler.prototype.getCellForPopupEvent=function(e){return e.getCell()},mxPopupMenuHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.gestureHandler),mxPopupMenu.prototype.destroy.apply(this)},exports.mxPopupMenuHandler=mxPopupMenuHandler,mxUtils.extend(mxCellMarker,mxEventSource),mxCellMarker.prototype.graph=null,mxCellMarker.prototype.enabled=!0,mxCellMarker.prototype.hotspot=mxConstants.DEFAULT_HOTSPOT,mxCellMarker.prototype.hotspotEnabled=!1,mxCellMarker.prototype.validColor=null,mxCellMarker.prototype.invalidColor=null,mxCellMarker.prototype.currentColor=null,mxCellMarker.prototype.validState=null,mxCellMarker.prototype.markedState=null,mxCellMarker.prototype.setEnabled=function(e){this.enabled=e},mxCellMarker.prototype.isEnabled=function(){return this.enabled},mxCellMarker.prototype.setHotspot=function(e){this.hotspot=e},mxCellMarker.prototype.getHotspot=function(){return this.hotspot},mxCellMarker.prototype.setHotspotEnabled=function(e){this.hotspotEnabled=e},mxCellMarker.prototype.isHotspotEnabled=function(){return this.hotspotEnabled},mxCellMarker.prototype.hasValidState=function(){return null!=this.validState},mxCellMarker.prototype.getValidState=function(){return this.validState},mxCellMarker.prototype.getMarkedState=function(){return this.markedState},mxCellMarker.prototype.reset=function(){this.validState=null,null!=this.markedState&&(this.markedState=null,this.unmark())},mxCellMarker.prototype.process=function(e){var t=null;return this.isEnabled()&&(t=this.getState(e),this.setCurrentState(t,e)),t},mxCellMarker.prototype.setCurrentState=function(e,t,n){var o=null!=e&&this.isValidState(e);n=null!=n?n:this.getMarkerColor(t.getEvent(),e,o),this.validState=o?e:null,e==this.markedState&&n==this.currentColor||(this.currentColor=n,null!=e&&null!=this.currentColor?(this.markedState=e,this.mark()):null!=this.markedState&&(this.markedState=null,this.unmark()))},mxCellMarker.prototype.markCell=function(e,t){var n=this.graph.getView().getState(e);null!=n&&(this.currentColor=null!=t?t:this.validColor,this.markedState=n,this.mark())},mxCellMarker.prototype.mark=function(){this.highlight.setHighlightColor(this.currentColor),this.highlight.highlight(this.markedState),this.fireEvent(new mxEventObject(mxEvent.MARK,"state",this.markedState))},mxCellMarker.prototype.unmark=function(){this.mark()},mxCellMarker.prototype.isValidState=function(e){return!0},mxCellMarker.prototype.getMarkerColor=function(e,t,n){return n?this.validColor:this.invalidColor},mxCellMarker.prototype.getState=function(e){var t=this.graph.getView();cell=this.getCell(e);var n=this.getStateToMark(t.getState(cell));return null!=n&&this.intersects(n,e)?n:null},mxCellMarker.prototype.getCell=function(e){return e.getCell()},mxCellMarker.prototype.getStateToMark=function(e){return e},mxCellMarker.prototype.intersects=function(e,t){return!this.hotspotEnabled||mxUtils.intersectsHotspot(e,t.getGraphX(),t.getGraphY(),this.hotspot,mxConstants.MIN_HOTSPOT_SIZE,mxConstants.MAX_HOTSPOT_SIZE)},mxCellMarker.prototype.destroy=function(){this.graph.getView().removeListener(this.resetHandler),this.graph.getModel().removeListener(this.resetHandler),this.highlight.destroy()},exports.mxCellMarker=mxCellMarker,mxUtils.extend(mxSelectionCellsHandler,mxEventSource),mxSelectionCellsHandler.prototype.graph=null,mxSelectionCellsHandler.prototype.enabled=!0,mxSelectionCellsHandler.prototype.refreshHandler=null,mxSelectionCellsHandler.prototype.maxHandlers=100,mxSelectionCellsHandler.prototype.handlers=null,mxSelectionCellsHandler.prototype.isEnabled=function(){return this.enabled},mxSelectionCellsHandler.prototype.setEnabled=function(e){this.enabled=e},mxSelectionCellsHandler.prototype.getHandler=function(e){return this.handlers.get(e)},mxSelectionCellsHandler.prototype.reset=function(){this.handlers.visit(function(e,t){t.reset.apply(t)})},mxSelectionCellsHandler.prototype.refresh=function(){var e=this.handlers;this.handlers=new mxDictionary;for(var t=this.graph.getSelectionCells(),n=0;n<t.length;n++){var o=this.graph.view.getState(t[n]);if(null!=o){var s=e.remove(t[n]);null!=s&&(s.state!=o?(s.destroy(),s=null):(null!=s.refresh&&s.refresh(),s.redraw())),null==s&&(s=this.graph.createHandler(o),this.fireEvent(new mxEventObject(mxEvent.ADD,"state",o))),null!=s&&this.handlers.put(t[n],s)}}e.visit(mxUtils.bind(this,function(i,a){this.fireEvent(new mxEventObject(mxEvent.REMOVE,"state",a.state)),a.destroy()}))},mxSelectionCellsHandler.prototype.updateHandler=function(e){var t=this.handlers.remove(e.cell);null!=t&&(t.destroy(),null!=(t=this.graph.createHandler(e))&&this.handlers.put(e.cell,t))},mxSelectionCellsHandler.prototype.mouseDown=function(e,t){if(this.graph.isEnabled()&&this.isEnabled()){var n=[e,t];this.handlers.visit(function(o,s){s.mouseDown.apply(s,n)})}},mxSelectionCellsHandler.prototype.mouseMove=function(e,t){if(this.graph.isEnabled()&&this.isEnabled()){var n=[e,t];this.handlers.visit(function(o,s){s.mouseMove.apply(s,n)})}},mxSelectionCellsHandler.prototype.mouseUp=function(e,t){if(this.graph.isEnabled()&&this.isEnabled()){var n=[e,t];this.handlers.visit(function(o,s){s.mouseUp.apply(s,n)})}},mxSelectionCellsHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),null!=this.refreshHandler&&(this.graph.getSelectionModel().removeListener(this.refreshHandler),this.graph.getModel().removeListener(this.refreshHandler),this.graph.getView().removeListener(this.refreshHandler),this.refreshHandler=null)},exports.mxSelectionCellsHandler=mxSelectionCellsHandler,mxUtils.extend(mxConnectionHandler,mxEventSource),mxConnectionHandler.prototype.graph=null,mxConnectionHandler.prototype.factoryMethod=!0,mxConnectionHandler.prototype.moveIconFront=!1,mxConnectionHandler.prototype.moveIconBack=!1,mxConnectionHandler.prototype.connectImage=null,mxConnectionHandler.prototype.targetConnectImage=!1,mxConnectionHandler.prototype.enabled=!0,mxConnectionHandler.prototype.select=!0,mxConnectionHandler.prototype.createTarget=!1,mxConnectionHandler.prototype.marker=null,mxConnectionHandler.prototype.constraintHandler=null,mxConnectionHandler.prototype.error=null,mxConnectionHandler.prototype.waypointsEnabled=!1,mxConnectionHandler.prototype.ignoreMouseDown=!1,mxConnectionHandler.prototype.first=null,mxConnectionHandler.prototype.connectIconOffset=new mxPoint(0,mxConstants.TOOLTIP_VERTICAL_OFFSET),mxConnectionHandler.prototype.edgeState=null,mxConnectionHandler.prototype.changeHandler=null,mxConnectionHandler.prototype.drillHandler=null,mxConnectionHandler.prototype.mouseDownCounter=0,mxConnectionHandler.prototype.movePreviewAway=mxClient.IS_VML,mxConnectionHandler.prototype.outlineConnect=!1,mxConnectionHandler.prototype.livePreview=!1,mxConnectionHandler.prototype.cursor=null,mxConnectionHandler.prototype.insertBeforeSource=!1,mxConnectionHandler.prototype.isEnabled=function(){return this.enabled},mxConnectionHandler.prototype.setEnabled=function(e){this.enabled=e},mxConnectionHandler.prototype.isInsertBefore=function(e,t,n,o,s){return this.insertBeforeSource&&t!=n},mxConnectionHandler.prototype.isCreateTarget=function(e){return this.createTarget},mxConnectionHandler.prototype.setCreateTarget=function(e){this.createTarget=e},mxConnectionHandler.prototype.createShape=function(){var e=this.livePreview&&null!=this.edgeState?this.graph.cellRenderer.createShape(this.edgeState):new mxPolyline([],mxConstants.INVALID_COLOR);return e.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,e.scale=this.graph.view.scale,e.pointerEvents=!1,e.isDashed=!0,e.init(this.graph.getView().getOverlayPane()),mxEvent.redirectMouseEvents(e.node,this.graph,null),e},mxConnectionHandler.prototype.init=function(){this.graph.addMouseListener(this),this.marker=this.createMarker(),this.constraintHandler=new mxConstraintHandler(this.graph),this.changeHandler=mxUtils.bind(this,function(e){null!=this.iconState&&(this.iconState=this.graph.getView().getState(this.iconState.cell)),null!=this.iconState?(this.redrawIcons(this.icons,this.iconState),this.constraintHandler.reset()):null!=this.previous&&null==this.graph.view.getState(this.previous.cell)&&this.reset()}),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler),this.graph.getView().addListener(mxEvent.SCALE,this.changeHandler),this.graph.getView().addListener(mxEvent.TRANSLATE,this.changeHandler),this.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,this.changeHandler),this.drillHandler=mxUtils.bind(this,function(e){this.reset()}),this.graph.addListener(mxEvent.START_EDITING,this.drillHandler),this.graph.getView().addListener(mxEvent.DOWN,this.drillHandler),this.graph.getView().addListener(mxEvent.UP,this.drillHandler)},mxConnectionHandler.prototype.isConnectableCell=function(e){return!0},mxConnectionHandler.prototype.createMarker=function(){var e=new mxCellMarker(this.graph);return e.hotspotEnabled=!0,e.getCell=mxUtils.bind(this,function(t){var n=mxCellMarker.prototype.getCell.apply(e,arguments);if(this.error=null,null==n&&null!=this.currentPoint&&(n=this.graph.getCellAt(this.currentPoint.x,this.currentPoint.y)),null!=n&&!this.graph.isCellConnectable(n)){var o=this.graph.getModel().getParent(n);this.graph.getModel().isVertex(o)&&this.graph.isCellConnectable(o)&&(n=o)}return(this.graph.isSwimlane(n)&&null!=this.currentPoint&&this.graph.hitsSwimlaneContent(n,this.currentPoint.x,this.currentPoint.y)||!this.isConnectableCell(n))&&(n=null),null!=n?this.isConnecting()?null!=this.previous&&(this.error=this.validateConnection(this.previous.cell,n),null!=this.error&&0==this.error.length&&(n=null,this.isCreateTarget(t.getEvent())&&(this.error=null))):this.isValidSource(n,t)||(n=null):!this.isConnecting()||this.isCreateTarget(t.getEvent())||this.graph.allowDanglingEdges||(this.error=""),n}),e.isValidState=mxUtils.bind(this,function(t){return this.isConnecting()?null==this.error:mxCellMarker.prototype.isValidState.apply(e,arguments)}),e.getMarkerColor=mxUtils.bind(this,function(t,n,o){return null==this.connectImage||this.isConnecting()?mxCellMarker.prototype.getMarkerColor.apply(e,arguments):null}),e.intersects=mxUtils.bind(this,function(t,n){return!(null==this.connectImage&&!this.isConnecting())||mxCellMarker.prototype.intersects.apply(e,arguments)}),e},mxConnectionHandler.prototype.start=function(e,t,n,o){this.previous=e,this.first=new mxPoint(t,n),this.edgeState=null!=o?o:this.createEdgeState(null),this.marker.currentColor=this.marker.validColor,this.marker.markedState=e,this.marker.mark(),this.fireEvent(new mxEventObject(mxEvent.START,"state",this.previous))},mxConnectionHandler.prototype.isConnecting=function(){return null!=this.first&&null!=this.shape},mxConnectionHandler.prototype.isValidSource=function(e,t){return this.graph.isValidSource(e)},mxConnectionHandler.prototype.isValidTarget=function(e){return!0},mxConnectionHandler.prototype.validateConnection=function(e,t){return this.isValidTarget(t)?this.graph.getEdgeValidationError(null,e,t):""},mxConnectionHandler.prototype.getConnectImage=function(e){return this.connectImage},mxConnectionHandler.prototype.isMoveIconToFrontForState=function(e){return null!=e.text&&e.text.node.parentNode==this.graph.container||this.moveIconFront},mxConnectionHandler.prototype.createIcons=function(e){var t=this.getConnectImage(e);if(null!=t&&null!=e){this.iconState=e;var n=[],s=new mxImageShape(new mxRectangle(0,0,t.width,t.height),t.src,null,null,0);s.preserveImageAspect=!1,this.isMoveIconToFrontForState(e)?(s.dialect=mxConstants.DIALECT_STRICTHTML,s.init(this.graph.container)):(s.dialect=this.graph.dialect==mxConstants.DIALECT_SVG?mxConstants.DIALECT_SVG:mxConstants.DIALECT_VML,s.init(this.graph.getView().getOverlayPane()),this.moveIconBack&&null!=s.node.previousSibling&&s.node.parentNode.insertBefore(s.node,s.node.parentNode.firstChild)),s.node.style.cursor=mxConstants.CURSOR_CONNECT;var i=mxUtils.bind(this,function(){return null!=this.currentState?this.currentState:e}),a=mxUtils.bind(this,function(l){mxEvent.isConsumed(l)||(this.icon=s,this.graph.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(l,i())))});return mxEvent.redirectMouseEvents(s.node,this.graph,i,a),n.push(s),this.redrawIcons(n,this.iconState),n}return null},mxConnectionHandler.prototype.redrawIcons=function(e,t){if(null!=e&&null!=e[0]&&null!=t){var n=this.getIconPosition(e[0],t);e[0].bounds.x=n.x,e[0].bounds.y=n.y,e[0].redraw()}},mxConnectionHandler.prototype.getIconPosition=function(e,t){var n=this.graph.getView().scale,o=t.getCenterX(),s=t.getCenterY();if(this.graph.isSwimlane(t.cell)){var i=this.graph.getStartSize(t.cell);o=0!=i.width?t.x+i.width*n/2:o,s=0!=i.height?t.y+i.height*n/2:s;var a=mxUtils.toRadians(mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION)||0);if(0!=a){var l=Math.cos(a),r=Math.sin(a),d=new mxPoint(t.getCenterX(),t.getCenterY()),u=mxUtils.getRotatedPoint(new mxPoint(o,s),l,r,d);o=u.x,s=u.y}}return new mxPoint(o-e.bounds.width/2,s-e.bounds.height/2)},mxConnectionHandler.prototype.destroyIcons=function(){if(null!=this.icons){for(var e=0;e<this.icons.length;e++)this.icons[e].destroy();this.icons=null,this.icon=null,this.selectedIcon=null,this.iconState=null}},mxConnectionHandler.prototype.isStartEvent=function(e){return null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentConstraint||null!=this.previous&&null==this.error&&(null==this.icons||null!=this.icons&&null!=this.icon)},mxConnectionHandler.prototype.mouseDown=function(e,t){if(this.mouseDownCounter++,this.isEnabled()&&this.graph.isEnabled()&&!t.isConsumed()&&!this.isConnecting()&&this.isStartEvent(t)){if(null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentPoint?(this.sourceConstraint=this.constraintHandler.currentConstraint,this.previous=this.constraintHandler.currentFocus,this.first=this.constraintHandler.currentPoint.clone()):this.first=new mxPoint(t.getGraphX(),t.getGraphY()),this.edgeState=this.createEdgeState(t),this.mouseDownCounter=1,this.waypointsEnabled&&null==this.shape&&(this.waypoints=null,this.shape=this.createShape(),null!=this.edgeState&&this.shape.apply(this.edgeState)),null==this.previous&&null!=this.edgeState){var n=this.graph.getPointForEvent(t.getEvent());this.edgeState.cell.geometry.setTerminalPoint(n,!0)}this.fireEvent(new mxEventObject(mxEvent.START,"state",this.previous)),t.consume()}this.selectedIcon=this.icon,this.icon=null},mxConnectionHandler.prototype.isImmediateConnectSource=function(e){return!this.graph.isCellMovable(e.cell)},mxConnectionHandler.prototype.createEdgeState=function(e){return null},mxConnectionHandler.prototype.isOutlineConnectEvent=function(e){var t=mxUtils.getOffset(this.graph.container),n=e.getEvent(),o=mxEvent.getClientX(n),s=mxEvent.getClientY(n),i=document.documentElement,a=(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0),l=(window.pageYOffset||i.scrollTop)-(i.clientTop||0),r=this.currentPoint.x-this.graph.container.scrollLeft+t.x-a,d=this.currentPoint.y-this.graph.container.scrollTop+t.y-l;return this.outlineConnect&&!mxEvent.isShiftDown(e.getEvent())&&(e.isSource(this.marker.highlight.shape)||mxEvent.isAltDown(e.getEvent())&&null!=e.getState()||this.marker.highlight.isHighlightAt(o,s)||(r!=o||d!=s)&&null==e.getState()&&this.marker.highlight.isHighlightAt(r,d))},mxConnectionHandler.prototype.updateCurrentState=function(e,t){if(this.constraintHandler.update(e,null==this.first,!1,null==this.first||e.isSource(this.marker.highlight.shape)?null:t),null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentConstraint)null!=this.marker.highlight&&null!=this.marker.highlight.state&&this.marker.highlight.state.cell==this.constraintHandler.currentFocus.cell?"transparent"!=this.marker.highlight.shape.stroke&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint()):this.marker.markCell(this.constraintHandler.currentFocus.cell,"transparent"),null!=this.previous&&(this.error=this.validateConnection(this.previous.cell,this.constraintHandler.currentFocus.cell),null==this.error?this.currentState=this.constraintHandler.currentFocus:this.constraintHandler.reset());else{this.graph.isIgnoreTerminalEvent(e.getEvent())?(this.marker.reset(),this.currentState=null):(this.marker.process(e),this.currentState=this.marker.getValidState());var n=this.isOutlineConnectEvent(e);if(null!=this.currentState&&n){e.isSource(this.marker.highlight.shape)&&(t=new mxPoint(e.getGraphX(),e.getGraphY()));var o=this.graph.getOutlineConstraint(t,this.currentState,e);this.constraintHandler.setFocus(e,this.currentState,!1),this.constraintHandler.currentConstraint=o,this.constraintHandler.currentPoint=t}if(this.outlineConnect&&null!=this.marker.highlight&&null!=this.marker.highlight.shape){var s=this.graph.view.scale;null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus?(this.marker.highlight.shape.stroke=mxConstants.OUTLINE_HIGHLIGHT_COLOR,this.marker.highlight.shape.strokewidth=mxConstants.OUTLINE_HIGHLIGHT_STROKEWIDTH/s/s,this.marker.highlight.repaint()):this.marker.hasValidState()&&(this.marker.getValidState()!=e.getState()?(this.marker.highlight.shape.stroke="transparent",this.currentState=null):this.marker.highlight.shape.stroke=mxConstants.DEFAULT_VALID_COLOR,this.marker.highlight.shape.strokewidth=mxConstants.HIGHLIGHT_STROKEWIDTH/s/s,this.marker.highlight.repaint())}}},mxConnectionHandler.prototype.convertWaypoint=function(e){var t=this.graph.getView().getScale(),n=this.graph.getView().getTranslate();e.x=e.x/t-n.x,e.y=e.y/t-n.y},mxConnectionHandler.prototype.snapToPreview=function(e,t){if(!mxEvent.isAltDown(e.getEvent())&&null!=this.previous){var n=this.graph.gridSize*this.graph.view.scale/2,o=null!=this.sourceConstraint?this.first:new mxPoint(this.previous.getCenterX(),this.previous.getCenterY());Math.abs(o.x-e.getGraphX())<n&&(t.x=o.x),Math.abs(o.y-e.getGraphY())<n&&(t.y=o.y)}},mxConnectionHandler.prototype.mouseMove=function(e,t){if(t.isConsumed()||!this.ignoreMouseDown&&null==this.first&&this.graph.isMouseDown)this.constraintHandler.reset();else{this.isEnabled()||null==this.currentState||(this.destroyIcons(),this.currentState=null);var n=this.graph.getView(),o=n.scale,s=n.translate,i=new mxPoint(t.getGraphX(),t.getGraphY());if(this.error=null,this.graph.isGridEnabledEvent(t.getEvent())&&(i=new mxPoint((this.graph.snap(i.x/o-s.x)+s.x)*o,(this.graph.snap(i.y/o-s.y)+s.y)*o)),this.snapToPreview(t,i),this.currentPoint=i,(null!=this.first||this.isEnabled()&&this.graph.isEnabled())&&this.updateCurrentState(t,i),null!=this.first){var a=null,l=i;null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentPoint?(a=this.constraintHandler.currentConstraint,l=this.constraintHandler.currentPoint.clone()):null!=this.previous&&!this.graph.isIgnoreTerminalEvent(t.getEvent())&&mxEvent.isShiftDown(t.getEvent())&&(Math.abs(this.previous.getCenterX()-i.x)<Math.abs(this.previous.getCenterY()-i.y)?i.x=this.previous.getCenterX():i.y=this.previous.getCenterY());var r=this.first;if(null!=this.selectedIcon){var d=this.selectedIcon.bounds.width,u=this.selectedIcon.bounds.height;if(null!=this.currentState&&this.targetConnectImage){var g=this.getIconPosition(this.selectedIcon,this.currentState);this.selectedIcon.bounds.x=g.x,this.selectedIcon.bounds.y=g.y}else{var f=new mxRectangle(t.getGraphX()+this.connectIconOffset.x,t.getGraphY()+this.connectIconOffset.y,d,u);this.selectedIcon.bounds=f}this.selectedIcon.redraw()}if(null!=this.edgeState?(this.updateEdgeState(l,a),l=this.edgeState.absolutePoints[this.edgeState.absolutePoints.length-1],r=this.edgeState.absolutePoints[0]):(null!=this.currentState&&null==this.constraintHandler.currentConstraint&&null!=(v=this.getTargetPerimeterPoint(this.currentState,t))&&(l=v),null==this.sourceConstraint&&null!=this.previous&&null!=(v=this.getSourcePerimeterPoint(this.previous,null!=this.waypoints&&this.waypoints.length>0?this.waypoints[0]:l,t))&&(r=v)),null==this.currentState&&this.movePreviewAway){var v=r;if(null!=this.edgeState&&this.edgeState.absolutePoints.length>=2){var z=this.edgeState.absolutePoints[this.edgeState.absolutePoints.length-2];null!=z&&(v=z)}var b=l.x-v.x,_=l.y-v.y,H=Math.sqrt(b*b+_*_);if(0==H)return;this.originalPoint=l.clone(),l.x-=4*b/H,l.y-=4*_/H}else this.originalPoint=null;if(null==this.shape&&(b=Math.abs(i.x-this.first.x),_=Math.abs(i.y-this.first.y),(b>this.graph.tolerance||_>this.graph.tolerance)&&(this.shape=this.createShape(),null!=this.edgeState&&this.shape.apply(this.edgeState),this.updateCurrentState(t,i))),null!=this.shape){if(null!=this.edgeState)this.shape.points=this.edgeState.absolutePoints;else{var T=[r];null!=this.waypoints&&(T=T.concat(this.waypoints)),T.push(l),this.shape.points=T}this.drawPreview()}null!=this.cursor&&(this.graph.container.style.cursor=this.cursor),mxEvent.consume(t.getEvent()),t.consume()}else this.isEnabled()&&this.graph.isEnabled()?this.previous!=this.currentState&&null==this.edgeState?(this.destroyIcons(),null!=this.currentState&&null==this.error&&null==this.constraintHandler.currentConstraint&&(this.icons=this.createIcons(this.currentState),null==this.icons&&(this.currentState.setCursor(mxConstants.CURSOR_CONNECT),t.consume())),this.previous=this.currentState):this.previous!=this.currentState||null==this.currentState||null!=this.icons||this.graph.isMouseDown||t.consume():this.constraintHandler.reset();if(!this.graph.isMouseDown&&null!=this.currentState&&null!=this.icons){for(var L=!1,V=t.getSource(),Y=0;Y<this.icons.length&&!L;Y++)L=V==this.icons[Y].node||V.parentNode==this.icons[Y].node;L||this.updateIcons(this.currentState,this.icons,t)}}},mxConnectionHandler.prototype.updateEdgeState=function(e,t){null!=this.sourceConstraint&&null!=this.sourceConstraint.point&&(this.edgeState.style[mxConstants.STYLE_EXIT_X]=this.sourceConstraint.point.x,this.edgeState.style[mxConstants.STYLE_EXIT_Y]=this.sourceConstraint.point.y),null!=t&&null!=t.point?(this.edgeState.style[mxConstants.STYLE_ENTRY_X]=t.point.x,this.edgeState.style[mxConstants.STYLE_ENTRY_Y]=t.point.y):(delete this.edgeState.style[mxConstants.STYLE_ENTRY_X],delete this.edgeState.style[mxConstants.STYLE_ENTRY_Y]),this.edgeState.absolutePoints=[null,null!=this.currentState?null:e],this.graph.view.updateFixedTerminalPoint(this.edgeState,this.previous,!0,this.sourceConstraint),null!=this.currentState&&(null==t&&(t=this.graph.getConnectionConstraint(this.edgeState,this.previous,!1)),this.edgeState.setAbsoluteTerminalPoint(null,!1),this.graph.view.updateFixedTerminalPoint(this.edgeState,this.currentState,!1,t));var n=null;if(null!=this.waypoints){n=[];for(var o=0;o<this.waypoints.length;o++){var s=this.waypoints[o].clone();this.convertWaypoint(s),n[o]=s}}this.graph.view.updatePoints(this.edgeState,n,this.previous,this.currentState),this.graph.view.updateFloatingTerminalPoints(this.edgeState,this.previous,this.currentState)},mxConnectionHandler.prototype.getTargetPerimeterPoint=function(e,t){var n=null,o=e.view,s=o.getPerimeterFunction(e);if(null!=s){var i=null!=this.waypoints&&this.waypoints.length>0?this.waypoints[this.waypoints.length-1]:new mxPoint(this.previous.getCenterX(),this.previous.getCenterY()),a=s(o.getPerimeterBounds(e),this.edgeState,i,!1);null!=a&&(n=a)}else n=new mxPoint(e.getCenterX(),e.getCenterY());return n},mxConnectionHandler.prototype.getSourcePerimeterPoint=function(e,t,n){var o=null,s=e.view,i=s.getPerimeterFunction(e),a=new mxPoint(e.getCenterX(),e.getCenterY());if(null!=i){var l=mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION,0),r=-l*(Math.PI/180);0!=l&&(t=mxUtils.getRotatedPoint(new mxPoint(t.x,t.y),Math.cos(r),Math.sin(r),a));var d=i(s.getPerimeterBounds(e),e,t,!1);null!=d&&(0!=l&&(d=mxUtils.getRotatedPoint(new mxPoint(d.x,d.y),Math.cos(-r),Math.sin(-r),a)),o=d)}else o=a;return o},mxConnectionHandler.prototype.updateIcons=function(e,t,n){},mxConnectionHandler.prototype.isStopEvent=function(e){return null!=e.getState()},mxConnectionHandler.prototype.addWaypointForEvent=function(e){var t=mxUtils.convertPoint(this.graph.container,e.getX(),e.getY()),n=Math.abs(t.x-this.first.x),o=Math.abs(t.y-this.first.y);if(null!=this.waypoints||this.mouseDownCounter>1&&(n>this.graph.tolerance||o>this.graph.tolerance)){null==this.waypoints&&(this.waypoints=[]);var i=this.graph.view.scale;t=new mxPoint(this.graph.snap(e.getGraphX()/i)*i,this.graph.snap(e.getGraphY()/i)*i),this.waypoints.push(t)}},mxConnectionHandler.prototype.mouseUp=function(e,t){if(!t.isConsumed()&&this.isConnecting()){if(this.waypointsEnabled&&!this.isStopEvent(t))return this.addWaypointForEvent(t),void t.consume();if(null==this.error){var o=null;null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&(o=this.constraintHandler.currentFocus.cell),null==o&&null!=this.currentState&&(o=this.currentState.cell),this.connect(null!=this.previous?this.previous.cell:null,o,t.getEvent(),t.getCell())}else null!=this.previous&&null!=this.marker.validState&&this.previous.cell==this.marker.validState.cell&&this.graph.selectCellForEvent(this.marker.source,evt),this.error.length>0&&this.graph.validationAlert(this.error);this.destroyIcons(),t.consume()}null!=this.first&&this.reset()},mxConnectionHandler.prototype.reset=function(){null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.cursor&&null!=this.graph.container&&(this.graph.container.style.cursor=""),this.destroyIcons(),this.marker.reset(),this.constraintHandler.reset(),this.originalPoint=null,this.currentPoint=null,this.edgeState=null,this.previous=null,this.error=null,this.sourceConstraint=null,this.mouseDownCounter=0,this.first=null,this.fireEvent(new mxEventObject(mxEvent.RESET))},mxConnectionHandler.prototype.drawPreview=function(){this.updatePreview(null==this.error),this.shape.redraw()},mxConnectionHandler.prototype.updatePreview=function(e){this.shape.strokewidth=this.getEdgeWidth(e),this.shape.stroke=this.getEdgeColor(e)},mxConnectionHandler.prototype.getEdgeColor=function(e){return e?mxConstants.VALID_COLOR:mxConstants.INVALID_COLOR},mxConnectionHandler.prototype.getEdgeWidth=function(e){return e?3:1},mxConnectionHandler.prototype.connect=function(e,t,n,o){if(null!=t||this.isCreateTarget(n)||this.graph.allowDanglingEdges){var s=this.graph.getModel(),i=!1,a=null;s.beginUpdate();try{if(null!=e&&null==t&&!this.graph.isIgnoreTerminalEvent(n)&&this.isCreateTarget(n)&&null!=(t=this.createTargetVertex(n,e))){if(o=this.graph.getDropTarget([t],n,o),i=!0,null!=o&&this.graph.getModel().isEdge(o))o=this.graph.getDefaultParent();else{var l=this.graph.getView().getState(o);null!=l&&((r=s.getGeometry(t)).x-=l.origin.x,r.y-=l.origin.y)}this.graph.addCell(t,o)}var d=this.graph.getDefaultParent();null!=e&&null!=t&&s.getParent(e)==s.getParent(t)&&s.getParent(s.getParent(e))!=s.getRoot()&&(d=s.getParent(e),null!=e.geometry&&e.geometry.relative&&null!=t.geometry&&t.geometry.relative&&(d=s.getParent(d)));var u=null,g=null;if(null!=this.edgeState&&(u=this.edgeState.cell.value,g=this.edgeState.cell.style),null!=(a=this.insertEdge(d,null,u,e,t,g))){if(this.graph.setConnectionConstraint(a,e,!0,this.sourceConstraint),this.graph.setConnectionConstraint(a,t,!1,this.constraintHandler.currentConstraint),null!=this.edgeState&&s.setGeometry(a,this.edgeState.cell.geometry),d=s.getParent(e),this.isInsertBefore(a,e,t,n,o)){for(var f=null,r=e;null!=r.parent&&null!=r.geometry&&r.geometry.relative&&r.parent!=a.parent;)r=this.graph.model.getParent(r);null!=r&&null!=r.parent&&r.parent==a.parent&&(f=r.parent.getIndex(r),r.parent.insert(a,f))}var v=s.getGeometry(a);if(null==v&&((v=new mxGeometry).relative=!0,s.setGeometry(a,v)),null!=this.waypoints&&this.waypoints.length>0){var x=this.graph.view.scale,z=this.graph.view.translate;v.points=[];for(var b=0;b<this.waypoints.length;b++)v.points.push(new mxPoint((_=this.waypoints[b]).x/x-z.x,_.y/x-z.y))}if(null==t){var _,H=this.graph.view.translate;x=this.graph.view.scale,(_=null!=this.originalPoint?new mxPoint(this.originalPoint.x/x-H.x,this.originalPoint.y/x-H.y):new mxPoint(this.currentPoint.x/x-H.x,this.currentPoint.y/x-H.y)).x-=this.graph.panDx/this.graph.view.scale,_.y-=this.graph.panDy/this.graph.view.scale,v.setTerminalPoint(_,!1)}this.fireEvent(new mxEventObject(mxEvent.CONNECT,"cell",a,"terminal",t,"event",n,"target",o,"terminalInserted",i))}}catch(T){mxLog.show(),mxLog.debug(T.message)}finally{s.endUpdate()}this.select&&this.selectCells(a,i?t:null)}},mxConnectionHandler.prototype.selectCells=function(e,t){this.graph.setSelectionCell(e)},mxConnectionHandler.prototype.insertEdge=function(e,t,n,o,s,i){if(null==this.factoryMethod)return this.graph.insertEdge(e,t,n,o,s,i);var a=this.createEdge(n,o,s,i);return this.graph.addEdge(a,e,o,s)},mxConnectionHandler.prototype.createTargetVertex=function(e,t){for(var o=this.graph.getCellGeometry(t);null!=o&&o.relative;)t=this.graph.getModel().getParent(t),o=this.graph.getCellGeometry(t);var n=this.graph.cloneCells([t])[0];if(null!=(o=this.graph.getModel().getGeometry(n))){var s=this.graph.view.translate,i=this.graph.view.scale,a=new mxPoint(this.currentPoint.x/i-s.x,this.currentPoint.y/i-s.y);o.x=Math.round(a.x-o.width/2-this.graph.panDx/i),o.y=Math.round(a.y-o.height/2-this.graph.panDy/i);var l=this.getAlignmentTolerance();if(l>0){var r=this.graph.view.getState(t);if(null!=r){var d=r.x/i-s.x,u=r.y/i-s.y;Math.abs(d-o.x)<=l&&(o.x=Math.round(d)),Math.abs(u-o.y)<=l&&(o.y=Math.round(u))}}}return n},mxConnectionHandler.prototype.getAlignmentTolerance=function(e){return this.graph.isGridEnabled()?this.graph.gridSize/2:this.graph.tolerance},mxConnectionHandler.prototype.createEdge=function(e,t,n,o){var s=null;if(null!=this.factoryMethod&&(s=this.factoryMethod(t,n,o)),null==s){(s=new mxCell(e||"")).setEdge(!0),s.setStyle(o);var i=new mxGeometry;i.relative=!0,s.setGeometry(i)}return s},mxConnectionHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.marker&&(this.marker.destroy(),this.marker=null),null!=this.constraintHandler&&(this.constraintHandler.destroy(),this.constraintHandler=null),null!=this.changeHandler&&(this.graph.getModel().removeListener(this.changeHandler),this.graph.getView().removeListener(this.changeHandler),this.changeHandler=null),null!=this.drillHandler&&(this.graph.removeListener(this.drillHandler),this.graph.getView().removeListener(this.drillHandler),this.drillHandler=null),null!=this.escapeHandler&&(this.graph.removeListener(this.escapeHandler),this.escapeHandler=null)},exports.mxConnectionHandler=mxConnectionHandler,mxConstraintHandler.prototype.pointImage=new mxImage(mxClient.imageBasePath+"/point.gif",5,5),mxConstraintHandler.prototype.graph=null,mxConstraintHandler.prototype.enabled=!0,mxConstraintHandler.prototype.highlightColor=mxConstants.DEFAULT_VALID_COLOR,mxConstraintHandler.prototype.isEnabled=function(){return this.enabled},mxConstraintHandler.prototype.setEnabled=function(e){this.enabled=e},mxConstraintHandler.prototype.reset=function(){if(null!=this.focusIcons){for(var e=0;e<this.focusIcons.length;e++)this.focusIcons[e].destroy();this.focusIcons=null}null!=this.focusHighlight&&(this.focusHighlight.destroy(),this.focusHighlight=null),this.currentConstraint=null,this.currentFocusArea=null,this.currentPoint=null,this.currentFocus=null,this.focusPoints=null},mxConstraintHandler.prototype.getTolerance=function(e){return this.graph.getTolerance()},mxConstraintHandler.prototype.getImageForConstraint=function(e,t,n){return this.pointImage},mxConstraintHandler.prototype.isEventIgnored=function(e,t){return!1},mxConstraintHandler.prototype.isStateIgnored=function(e,t){return!1},mxConstraintHandler.prototype.destroyIcons=function(){if(null!=this.focusIcons){for(var e=0;e<this.focusIcons.length;e++)this.focusIcons[e].destroy();this.focusIcons=null,this.focusPoints=null}},mxConstraintHandler.prototype.destroyFocusHighlight=function(){null!=this.focusHighlight&&(this.focusHighlight.destroy(),this.focusHighlight=null)},mxConstraintHandler.prototype.isKeepFocusEvent=function(e){return mxEvent.isShiftDown(e.getEvent())},mxConstraintHandler.prototype.getCellForEvent=function(e,t){var n=e.getCell();if(null!=n||null==t||e.getGraphX()==t.x&&e.getGraphY()==t.y||(n=this.graph.getCellAt(t.x,t.y)),null!=n&&!this.graph.isCellConnectable(n)){var o=this.graph.getModel().getParent(n);this.graph.getModel().isVertex(o)&&this.graph.isCellConnectable(o)&&(n=o)}return n},mxConstraintHandler.prototype.update=function(e,t,n,o){if(this.isEnabled()&&!this.isEventIgnored(e)){null==this.mouseleaveHandler&&null!=this.graph.container&&(this.mouseleaveHandler=mxUtils.bind(this,function(){this.reset()}),mxEvent.addListener(this.graph.container,"mouseleave",this.resetHandler));var s=this.getTolerance(e),l=new mxRectangle((null!=o?o.x:e.getGraphX())-s,(null!=o?o.y:e.getGraphY())-s,2*s,2*s),r=new mxRectangle(e.getGraphX()-s,e.getGraphY()-s,2*s,2*s),d=this.graph.view.getState(this.getCellForEvent(e,o));this.isKeepFocusEvent(e)||null!=this.currentFocusArea&&null!=this.currentFocus&&null==d&&this.graph.getModel().isVertex(this.currentFocus.cell)&&mxUtils.intersects(this.currentFocusArea,r)||d==this.currentFocus||(this.currentFocusArea=null,this.currentFocus=null,this.setFocus(e,d,t)),this.currentConstraint=null,this.currentPoint=null;var u=null;if(null!=this.focusIcons&&null!=this.constraints&&(null==d||this.currentFocus==d))for(var g=r.getCenterX(),f=r.getCenterY(),v=0;v<this.focusIcons.length;v++){var x=g-this.focusIcons[v].bounds.getCenterX(),z=f-this.focusIcons[v].bounds.getCenterY(),b=x*x+z*z;if((this.intersects(this.focusIcons[v],r,t,n)||null!=o&&this.intersects(this.focusIcons[v],l,t,n))&&(null==u||b<u)){if(this.currentConstraint=this.constraints[v],this.currentPoint=this.focusPoints[v],u=b,(b=this.focusIcons[v].bounds.clone()).grow(mxConstants.HIGHLIGHT_SIZE),mxClient.IS_IE&&(b.grow(1),b.width-=1,b.height-=1),null==this.focusHighlight){var _=this.createHighlightShape();_.dialect=this.graph.dialect==mxConstants.DIALECT_SVG?mxConstants.DIALECT_SVG:mxConstants.DIALECT_VML,_.pointerEvents=!1,_.init(this.graph.getView().getOverlayPane()),this.focusHighlight=_;var H=mxUtils.bind(this,function(){return null!=this.currentFocus?this.currentFocus:d});mxEvent.redirectMouseEvents(_.node,this.graph,H)}this.focusHighlight.bounds=b,this.focusHighlight.redraw()}}null==this.currentConstraint&&this.destroyFocusHighlight()}else this.currentConstraint=null,this.currentFocus=null,this.currentPoint=null},mxConstraintHandler.prototype.setFocus=function(e,t,n){if(this.constraints=null!=t&&!this.isStateIgnored(t,n)&&this.graph.isCellConnectable(t.cell)?this.isEnabled()&&this.graph.getAllConnectionConstraints(t,n)||[]:null,null!=this.constraints){if(this.currentFocus=t,this.currentFocusArea=new mxRectangle(t.x,t.y,t.width,t.height),null!=this.focusIcons){for(var o=0;o<this.focusIcons.length;o++)this.focusIcons[o].destroy();this.focusIcons=null,this.focusPoints=null}for(this.focusPoints=[],this.focusIcons=[],o=0;o<this.constraints.length;o++){var s=this.graph.getConnectionPoint(t,this.constraints[o]),i=this.getImageForConstraint(t,this.constraints[o],s),a=i.src,r=new mxImageShape(new mxRectangle(Math.round(s.x-i.width/2),Math.round(s.y-i.height/2),i.width,i.height),a);r.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,r.preserveImageAspect=!1,r.init(this.graph.getView().getDecoratorPane()),(mxClient.IS_QUIRKS||8==document.documentMode)&&mxEvent.addListener(r.node,"dragstart",function(g){return mxEvent.consume(g),!1}),null!=r.node.previousSibling&&r.node.parentNode.insertBefore(r.node,r.node.parentNode.firstChild);var d=mxUtils.bind(this,function(){return null!=this.currentFocus?this.currentFocus:t});r.redraw(),mxEvent.redirectMouseEvents(r.node,this.graph,d),this.currentFocusArea.add(r.bounds),this.focusIcons.push(r),this.focusPoints.push(s)}this.currentFocusArea.grow(this.getTolerance(e))}else this.destroyIcons(),this.destroyFocusHighlight()},mxConstraintHandler.prototype.createHighlightShape=function(){var e=new mxRectangleShape(null,this.highlightColor,this.highlightColor,mxConstants.HIGHLIGHT_STROKEWIDTH);return e.opacity=mxConstants.HIGHLIGHT_OPACITY,e},mxConstraintHandler.prototype.intersects=function(e,t,n,o){return mxUtils.intersects(e.bounds,t)},mxConstraintHandler.prototype.destroy=function(){this.reset(),null!=this.resetHandler&&(this.graph.model.removeListener(this.resetHandler),this.graph.view.removeListener(this.resetHandler),this.graph.removeListener(this.resetHandler),this.resetHandler=null),null!=this.mouseleaveHandler&&null!=this.graph.container&&(mxEvent.removeListener(this.graph.container,"mouseleave",this.mouseleaveHandler),this.mouseleaveHandler=null)},exports.mxConstraintHandler=mxConstraintHandler,mxRubberband.prototype.defaultOpacity=20,mxRubberband.prototype.enabled=!0,mxRubberband.prototype.div=null,mxRubberband.prototype.sharedDiv=null,mxRubberband.prototype.currentX=0,mxRubberband.prototype.currentY=0,mxRubberband.prototype.isEnabled=function(){return this.enabled},mxRubberband.prototype.setEnabled=function(e){this.enabled=e},mxRubberband.prototype.isForceRubberbandEvent=function(e){return mxEvent.isAltDown(e.getEvent())},mxRubberband.prototype.mouseDown=function(e,t){if(!t.isConsumed()&&this.isEnabled()&&this.graph.isEnabled()&&null==t.getState()&&!mxEvent.isMultiTouchEvent(t.getEvent())){var n=mxUtils.getOffset(this.graph.container),o=mxUtils.getScrollOrigin(this.graph.container);o.x-=n.x,o.y-=n.y,this.start(t.getX()+o.x,t.getY()+o.y),t.consume(!1)}},mxRubberband.prototype.start=function(e,t){function n(s){var i=new mxMouseEvent(s),a=mxUtils.convertPoint(o,i.getX(),i.getY());return i.graphX=a.x,i.graphY=a.y,i}this.first=new mxPoint(e,t);var o=this.graph.container;this.dragHandler=mxUtils.bind(this,function(s){this.mouseMove(this.graph,n(s))}),this.dropHandler=mxUtils.bind(this,function(s){this.mouseUp(this.graph,n(s))}),mxClient.IS_FF&&mxEvent.addGestureListeners(document,null,this.dragHandler,this.dropHandler)},mxRubberband.prototype.mouseMove=function(e,t){if(!t.isConsumed()&&null!=this.first){var n=mxUtils.getScrollOrigin(this.graph.container),o=mxUtils.getOffset(this.graph.container);n.x-=o.x,n.y-=o.y;var s=t.getX()+n.x,i=t.getY()+n.y,l=this.first.y-i,r=this.graph.tolerance;(null!=this.div||Math.abs(this.first.x-s)>r||Math.abs(l)>r)&&(null==this.div&&(this.div=this.createShape()),mxUtils.clearSelection(),this.update(s,i),t.consume())}},mxRubberband.prototype.createShape=function(){return null==this.sharedDiv&&(this.sharedDiv=document.createElement("div"),this.sharedDiv.className="mxRubberband",mxUtils.setOpacity(this.sharedDiv,this.defaultOpacity)),this.graph.container.appendChild(this.sharedDiv),this.sharedDiv},mxRubberband.prototype.mouseUp=function(e,t){var n=null!=this.div&&"none"!=this.div.style.display;if(this.reset(),n){var o=new mxRectangle(this.x,this.y,this.width,this.height);this.graph.selectRegion(o,t.getEvent()),t.consume()}},mxRubberband.prototype.reset=function(){null!=this.div&&this.div.parentNode.removeChild(this.div),mxEvent.removeGestureListeners(document,null,this.dragHandler,this.dropHandler),this.dragHandler=null,this.dropHandler=null,this.currentX=0,this.currentY=0,this.first=null,this.div=null},mxRubberband.prototype.update=function(e,t){this.currentX=e,this.currentY=t,this.repaint()},mxRubberband.prototype.repaint=function(){if(null!=this.div){var e=this.currentX-this.graph.panDx,t=this.currentY-this.graph.panDy;this.x=Math.min(this.first.x,e),this.y=Math.min(this.first.y,t),this.width=Math.max(this.first.x,e)-this.x,this.height=Math.max(this.first.y,t)-this.y;var o=mxClient.IS_VML?this.graph.panDy:0;this.div.style.left=this.x+(mxClient.IS_VML?this.graph.panDx:0)+"px",this.div.style.top=this.y+o+"px",this.div.style.width=Math.max(1,this.width)+"px",this.div.style.height=Math.max(1,this.height)+"px"}},mxRubberband.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.graph.removeMouseListener(this),this.graph.removeListener(this.forceRubberbandHandler),this.graph.removeListener(this.panHandler),this.reset(),null!=this.sharedDiv&&(this.sharedDiv=null))},exports.mxRubberband=mxRubberband,mxHandle.prototype.cursor="default",mxHandle.prototype.image=null,mxHandle.prototype.ignoreGrid=!1,mxHandle.prototype.getPosition=function(e){},mxHandle.prototype.setPosition=function(e,t,n){},mxHandle.prototype.execute=function(){},mxHandle.prototype.copyStyle=function(e){this.graph.setCellStyles(e,this.state.style[e],[this.state.cell])},mxHandle.prototype.processEvent=function(e){var t=this.graph.view.scale,n=this.graph.view.translate,o=new mxPoint(e.getGraphX()/t-n.x,e.getGraphY()/t-n.y);null!=this.shape&&null!=this.shape.bounds&&(o.x-=this.shape.bounds.width/t/4,o.y-=this.shape.bounds.height/t/4);var s=-mxUtils.toRadians(this.getRotation()),i=-mxUtils.toRadians(this.getTotalRotation())-s;o=this.flipPoint(this.rotatePoint(this.snapPoint(this.rotatePoint(o,s),this.ignoreGrid||!this.graph.isGridEnabledEvent(e.getEvent())),i)),this.setPosition(this.state.getPaintBounds(),o,e),this.positionChanged(),this.redraw()},mxHandle.prototype.positionChanged=function(){null!=this.state.text&&this.state.text.apply(this.state),null!=this.state.shape&&this.state.shape.apply(this.state),this.graph.cellRenderer.redraw(this.state,!0)},mxHandle.prototype.getRotation=function(){return null!=this.state.shape?this.state.shape.getRotation():0},mxHandle.prototype.getTotalRotation=function(){return null!=this.state.shape?this.state.shape.getShapeRotation():0},mxHandle.prototype.init=function(){var e=this.isHtmlRequired();null!=this.image?(this.shape=new mxImageShape(new mxRectangle(0,0,this.image.width,this.image.height),this.image.src),this.shape.preserveImageAspect=!1):this.shape=this.createShape(e),this.initShape(e)},mxHandle.prototype.createShape=function(e){return new mxRectangleShape(new mxRectangle(0,0,mxConstants.HANDLE_SIZE,mxConstants.HANDLE_SIZE),mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxHandle.prototype.initShape=function(e){e&&this.shape.isHtmlAllowed()?(this.shape.dialect=mxConstants.DIALECT_STRICTHTML,this.shape.init(this.graph.container)):(this.shape.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,null!=this.cursor&&this.shape.init(this.graph.getView().getOverlayPane())),mxEvent.redirectMouseEvents(this.shape.node,this.graph,this.state),this.shape.node.style.cursor=this.cursor},mxHandle.prototype.redraw=function(){if(null!=this.shape&&null!=this.state.shape){var e=this.getPosition(this.state.getPaintBounds());if(null!=e){var t=mxUtils.toRadians(this.getTotalRotation());e=this.rotatePoint(this.flipPoint(e),t);var n=this.graph.view.scale,o=this.graph.view.translate;this.shape.bounds.x=Math.floor((e.x+o.x)*n-this.shape.bounds.width/2),this.shape.bounds.y=Math.floor((e.y+o.y)*n-this.shape.bounds.height/2),this.state.unscaledWidth=null,this.shape.redraw()}}},mxHandle.prototype.isHtmlRequired=function(){return null!=this.state.text&&this.state.text.node.parentNode==this.graph.container},mxHandle.prototype.rotatePoint=function(e,t){var n=this.state.getCellBounds(),o=new mxPoint(n.getCenterX(),n.getCenterY()),s=Math.cos(t),i=Math.sin(t);return mxUtils.getRotatedPoint(e,s,i,o)},mxHandle.prototype.flipPoint=function(e){if(null!=this.state.shape){var t=this.state.getCellBounds();this.state.shape.flipH&&(e.x=2*t.x+t.width-e.x),this.state.shape.flipV&&(e.y=2*t.y+t.height-e.y)}return e},mxHandle.prototype.snapPoint=function(e,t){return t||(e.x=this.graph.snap(e.x),e.y=this.graph.snap(e.y)),e},mxHandle.prototype.setVisible=function(e){null!=this.shape&&null!=this.shape.node&&(this.shape.node.style.display=e?"":"none")},mxHandle.prototype.reset=function(){this.setVisible(!0),this.state.style=this.graph.getCellStyle(this.state.cell),this.positionChanged()},mxHandle.prototype.destroy=function(){null!=this.shape&&(this.shape.destroy(),this.shape=null)},exports.mxHandle=mxHandle,mxVertexHandler.prototype.graph=null,mxVertexHandler.prototype.state=null,mxVertexHandler.prototype.singleSizer=!1,mxVertexHandler.prototype.index=null,mxVertexHandler.prototype.allowHandleBoundsCheck=!0,mxVertexHandler.prototype.handleImage=null,mxVertexHandler.prototype.tolerance=0,mxVertexHandler.prototype.rotationEnabled=!1,mxVertexHandler.prototype.parentHighlightEnabled=!1,mxVertexHandler.prototype.rotationRaster=!0,mxVertexHandler.prototype.rotationCursor="crosshair",mxVertexHandler.prototype.livePreview=!1,mxVertexHandler.prototype.manageSizers=!1,mxVertexHandler.prototype.constrainGroupByChildren=!1,mxVertexHandler.prototype.rotationHandleVSpacing=-16,mxVertexHandler.prototype.horizontalOffset=0,mxVertexHandler.prototype.verticalOffset=0,mxVertexHandler.prototype.init=function(){if(this.graph=this.state.view.graph,this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.selectionBorder=this.createSelectionShape(this.bounds),this.selectionBorder.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.selectionBorder.pointerEvents=!1,this.selectionBorder.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0"),this.selectionBorder.init(this.graph.getView().getOverlayPane()),mxEvent.redirectMouseEvents(this.selectionBorder.node,this.graph,this.state),this.graph.isCellMovable(this.state.cell)&&this.selectionBorder.setCursor(mxConstants.CURSOR_MOVABLE_VERTEX),mxGraphHandler.prototype.maxCells<=0||this.graph.getSelectionCount()<mxGraphHandler.prototype.maxCells){var e=this.graph.isCellResizable(this.state.cell);if(this.sizers=[],e||this.graph.isLabelMovable(this.state.cell)&&this.state.width>=2&&this.state.height>=2){var t=0;e&&(this.singleSizer||(this.sizers.push(this.createSizer("nw-resize",t++)),this.sizers.push(this.createSizer("n-resize",t++)),this.sizers.push(this.createSizer("ne-resize",t++)),this.sizers.push(this.createSizer("w-resize",t++)),this.sizers.push(this.createSizer("e-resize",t++)),this.sizers.push(this.createSizer("sw-resize",t++)),this.sizers.push(this.createSizer("s-resize",t++))),this.sizers.push(this.createSizer("se-resize",t++)));var n=this.graph.model.getGeometry(this.state.cell);null==n||n.relative||this.graph.isSwimlane(this.state.cell)||!this.graph.isLabelMovable(this.state.cell)||(this.labelShape=this.createSizer(mxConstants.CURSOR_LABEL_HANDLE,mxEvent.LABEL_HANDLE,mxConstants.LABEL_HANDLE_SIZE,mxConstants.LABEL_HANDLE_FILLCOLOR),this.sizers.push(this.labelShape))}else this.graph.isCellMovable(this.state.cell)&&!this.graph.isCellResizable(this.state.cell)&&this.state.width<2&&this.state.height<2&&(this.labelShape=this.createSizer(mxConstants.CURSOR_MOVABLE_VERTEX,mxEvent.LABEL_HANDLE,null,mxConstants.LABEL_HANDLE_FILLCOLOR),this.sizers.push(this.labelShape))}this.isRotationHandleVisible()&&(this.rotationShape=this.createSizer(this.rotationCursor,mxEvent.ROTATION_HANDLE,mxConstants.HANDLE_SIZE+3,mxConstants.HANDLE_FILLCOLOR),this.sizers.push(this.rotationShape)),this.customHandles=this.createCustomHandles(),this.redraw(),this.constrainGroupByChildren&&this.updateMinBounds()},mxVertexHandler.prototype.isRotationHandleVisible=function(){return this.graph.isEnabled()&&this.rotationEnabled&&this.graph.isCellRotatable(this.state.cell)&&(mxGraphHandler.prototype.maxCells<=0||this.graph.getSelectionCount()<mxGraphHandler.prototype.maxCells)&&this.state.width>=2&&this.state.height>=2},mxVertexHandler.prototype.isConstrainedEvent=function(e){return mxEvent.isShiftDown(e.getEvent())||"fixed"==this.state.style[mxConstants.STYLE_ASPECT]},mxVertexHandler.prototype.isCenteredEvent=function(e,t){return!1},mxVertexHandler.prototype.createCustomHandles=function(){return null},mxVertexHandler.prototype.updateMinBounds=function(){var e=this.graph.getChildCells(this.state.cell);if(e.length>0&&(this.minBounds=this.graph.view.getBounds(e),null!=this.minBounds)){var t=this.state.view.scale,n=this.state.view.translate;this.minBounds.x-=this.state.x,this.minBounds.y-=this.state.y,this.minBounds.x/=t,this.minBounds.y/=t,this.minBounds.width/=t,this.minBounds.height/=t,this.x0=this.state.x/t-n.x,this.y0=this.state.y/t-n.y}},mxVertexHandler.prototype.getSelectionBounds=function(e){return new mxRectangle(Math.round(e.x),Math.round(e.y),Math.round(e.width),Math.round(e.height))},mxVertexHandler.prototype.createParentHighlightShape=function(e){return this.createSelectionShape(e)},mxVertexHandler.prototype.createSelectionShape=function(e){var t=new mxRectangleShape(e,null,this.getSelectionColor());return t.strokewidth=this.getSelectionStrokeWidth(),t.isDashed=this.isSelectionDashed(),t},mxVertexHandler.prototype.getSelectionColor=function(){return mxConstants.VERTEX_SELECTION_COLOR},mxVertexHandler.prototype.getSelectionStrokeWidth=function(){return mxConstants.VERTEX_SELECTION_STROKEWIDTH},mxVertexHandler.prototype.isSelectionDashed=function(){return mxConstants.VERTEX_SELECTION_DASHED},mxVertexHandler.prototype.createSizer=function(e,t,n,o){var s=new mxRectangle(0,0,n=n||mxConstants.HANDLE_SIZE,n),i=this.createSizerShape(s,t,o);return i.isHtmlAllowed()&&null!=this.state.text&&this.state.text.node.parentNode==this.graph.container?(i.bounds.height-=1,i.bounds.width-=1,i.dialect=mxConstants.DIALECT_STRICTHTML,i.init(this.graph.container)):(i.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,i.init(this.graph.getView().getOverlayPane())),mxEvent.redirectMouseEvents(i.node,this.graph,this.state),this.graph.isEnabled()&&i.setCursor(e),this.isSizerVisible(t)||(i.visible=!1),i},mxVertexHandler.prototype.isSizerVisible=function(e){return!0},mxVertexHandler.prototype.createSizerShape=function(e,t,n){if(null!=this.handleImage){var o=new mxImageShape(e=new mxRectangle(e.x,e.y,this.handleImage.width,this.handleImage.height),this.handleImage.src);return o.preserveImageAspect=!1,o}return t==mxEvent.ROTATION_HANDLE?new mxEllipse(e,n||mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR):new mxRectangleShape(e,n||mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxVertexHandler.prototype.moveSizerTo=function(e,t,n){null!=e&&(e.bounds.x=Math.floor(t-e.bounds.width/2),e.bounds.y=Math.floor(n-e.bounds.height/2),null!=e.node&&"none"!=e.node.style.display&&e.redraw())},mxVertexHandler.prototype.getHandleForEvent=function(e){function t(i){return null!=i&&(e.isSource(i)||null!=o&&mxUtils.intersects(i.bounds,o)&&"none"!=i.node.style.display&&"hidden"!=i.node.style.visibility)}var n=mxEvent.isMouseEvent(e.getEvent())?1:this.tolerance,o=this.allowHandleBoundsCheck&&(mxClient.IS_IE||n>0)?new mxRectangle(e.getGraphX()-n,e.getGraphY()-n,2*n,2*n):null;if(null!=this.customHandles&&this.isCustomHandleEvent(e))for(var s=this.customHandles.length-1;s>=0;s--)if(t(this.customHandles[s].shape))return mxEvent.CUSTOM_HANDLE-s;if(t(this.rotationShape))return mxEvent.ROTATION_HANDLE;if(t(this.labelShape))return mxEvent.LABEL_HANDLE;if(null!=this.sizers)for(s=0;s<this.sizers.length;s++)if(t(this.sizers[s]))return s;return null},mxVertexHandler.prototype.isCustomHandleEvent=function(e){return!0},mxVertexHandler.prototype.mouseDown=function(e,t){var n=mxEvent.isMouseEvent(t.getEvent())?0:this.tolerance;if(!t.isConsumed()&&this.graph.isEnabled()&&(n>0||t.getState()==this.state)){var o=this.getHandleForEvent(t);null!=o&&(this.start(t.getGraphX(),t.getGraphY(),o),t.consume())}},mxVertexHandler.prototype.isLivePreviewBorder=function(){return null!=this.state.shape&&null==this.state.shape.fill&&null==this.state.shape.stroke},mxVertexHandler.prototype.start=function(e,t,n){this.inTolerance=!0,this.childOffsetX=0,this.childOffsetY=0,this.index=n,this.startX=e,this.startY=t;var o=this.state.view.graph.model,s=o.getParent(this.state.cell);if(this.state.view.currentRoot!=s&&(o.isVertex(s)||o.isEdge(s))&&(this.parentState=this.state.view.graph.view.getState(s)),this.selectionBorder.node.style.display=n==mxEvent.ROTATION_HANDLE?"inline":"none",this.livePreview&&!this.isLivePreviewBorder()||(this.preview=this.createSelectionShape(this.bounds),mxClient.IS_SVG&&0!=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0")||null==this.state.text||this.state.text.node.parentNode!=this.graph.container?(this.preview.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.preview.init(this.graph.view.getOverlayPane())):(this.preview.dialect=mxConstants.DIALECT_STRICTHTML,this.preview.init(this.graph.container))),this.livePreview){this.hideSizers(),n==mxEvent.ROTATION_HANDLE?this.rotationShape.node.style.display="":n==mxEvent.LABEL_HANDLE?this.labelShape.node.style.display="":null!=this.sizers&&null!=this.sizers[n]?this.sizers[n].node.style.display="":n<=mxEvent.CUSTOM_HANDLE&&null!=this.customHandles&&this.customHandles[mxEvent.CUSTOM_HANDLE-n].setVisible(!0);var i=this.graph.getEdges(this.state.cell);this.edgeHandlers=[];for(var a=0;a<i.length;a++){var l=this.graph.selectionCellsHandler.getHandler(i[a]);null!=l&&this.edgeHandlers.push(l)}}},mxVertexHandler.prototype.setHandlesVisible=function(e){if(null!=this.sizers)for(var t=0;t<this.sizers.length;t++)this.sizers[t].node.style.display=e?"":"none";if(null!=this.customHandles)for(t=0;t<this.customHandles.length;t++)this.customHandles[t].setVisible(e)},mxVertexHandler.prototype.hideSizers=function(){this.setHandlesVisible(!1)},mxVertexHandler.prototype.checkTolerance=function(e){this.inTolerance&&null!=this.startX&&null!=this.startY&&(mxEvent.isMouseEvent(e.getEvent())||Math.abs(e.getGraphX()-this.startX)>this.graph.tolerance||Math.abs(e.getGraphY()-this.startY)>this.graph.tolerance)&&(this.inTolerance=!1)},mxVertexHandler.prototype.updateHint=function(e){},mxVertexHandler.prototype.removeHint=function(){},mxVertexHandler.prototype.roundAngle=function(e){return Math.round(10*e)/10},mxVertexHandler.prototype.roundLength=function(e){return Math.round(e)},mxVertexHandler.prototype.mouseMove=function(e,t){t.isConsumed()||null==this.index?this.graph.isMouseDown||null==this.getHandleForEvent(t)||t.consume(!1):(this.checkTolerance(t),this.inTolerance||(this.index<=mxEvent.CUSTOM_HANDLE?null!=this.customHandles&&this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].processEvent(t):this.index==mxEvent.LABEL_HANDLE?this.moveLabel(t):this.index==mxEvent.ROTATION_HANDLE?this.rotateVertex(t):this.resizeVertex(t),this.updateHint(t)),t.consume())},mxVertexHandler.prototype.moveLabel=function(e){var t=new mxPoint(e.getGraphX(),e.getGraphY()),n=this.graph.view.translate,o=this.graph.view.scale;this.graph.isGridEnabledEvent(e.getEvent())&&(t.x=(this.graph.snap(t.x/o-n.x)+n.x)*o,t.y=(this.graph.snap(t.y/o-n.y)+n.y)*o),this.moveSizerTo(this.sizers[null!=this.rotationShape?this.sizers.length-2:this.sizers.length-1],t.x,t.y)},mxVertexHandler.prototype.rotateVertex=function(e){var t=new mxPoint(e.getGraphX(),e.getGraphY()),o=this.state.y+this.state.height/2-t.y;if(this.currentAlpha=0!=(n=this.state.x+this.state.width/2-t.x)?180*Math.atan(o/n)/Math.PI+90:o<0?180:0,n>0&&(this.currentAlpha-=180),this.rotationRaster&&this.graph.isGridEnabledEvent(e.getEvent())){var n=t.x-this.state.getCenterX(),s=(o=t.y-this.state.getCenterY(),3*Math.abs(Math.sqrt(n*n+o*o)-20)),i=Math.max(1,5*Math.min(3,Math.max(0,Math.round(80/Math.abs(s)))));this.currentAlpha=Math.round(this.currentAlpha/i)*i}else this.currentAlpha=this.roundAngle(this.currentAlpha);this.selectionBorder.rotation=this.currentAlpha,this.selectionBorder.redraw(),this.livePreview&&this.redrawHandles()},mxVertexHandler.prototype.resizeVertex=function(e){var t=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),n=mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),o=new mxPoint(e.getGraphX(),e.getGraphY()),s=this.graph.view.translate,i=this.graph.view.scale,a=Math.cos(-n),l=Math.sin(-n),g=l*(r=o.x-this.startX)+a*(d=o.y-this.startY);r=a*r-l*d,d=g;var f=this.graph.getCellGeometry(this.state.cell);if(this.unscaledBounds=this.union(f,r/i,d/i,this.index,this.graph.isGridEnabledEvent(e.getEvent()),1,new mxPoint(0,0),this.isConstrainedEvent(e),this.isCenteredEvent(this.state,e)),!f.relative){var v=this.graph.getMaximumGraphBounds();if(null!=v&&null!=this.parentState&&((v=mxRectangle.fromRectangle(v)).x-=(this.parentState.x-s.x*i)/i,v.y-=(this.parentState.y-s.y*i)/i),this.graph.isConstrainChild(this.state.cell)){var x=this.graph.getCellContainmentArea(this.state.cell);if(null!=x){var z=this.graph.getOverlap(this.state.cell);z>0&&((x=mxRectangle.fromRectangle(x)).x-=x.width*z,x.y-=x.height*z,x.width+=2*x.width*z,x.height+=2*x.height*z),null==v?v=x:(v=mxRectangle.fromRectangle(v)).intersect(x)}}null!=v&&(this.unscaledBounds.x<v.x&&(this.unscaledBounds.width-=v.x-this.unscaledBounds.x,this.unscaledBounds.x=v.x),this.unscaledBounds.y<v.y&&(this.unscaledBounds.height-=v.y-this.unscaledBounds.y,this.unscaledBounds.y=v.y),this.unscaledBounds.x+this.unscaledBounds.width>v.x+v.width&&(this.unscaledBounds.width-=this.unscaledBounds.x+this.unscaledBounds.width-v.x-v.width),this.unscaledBounds.y+this.unscaledBounds.height>v.y+v.height&&(this.unscaledBounds.height-=this.unscaledBounds.y+this.unscaledBounds.height-v.y-v.height))}this.bounds=new mxRectangle((null!=this.parentState?this.parentState.x:s.x*i)+this.unscaledBounds.x*i,(null!=this.parentState?this.parentState.y:s.y*i)+this.unscaledBounds.y*i,this.unscaledBounds.width*i,this.unscaledBounds.height*i),f.relative&&null!=this.parentState&&(this.bounds.x+=this.state.x-this.parentState.x,this.bounds.y+=this.state.y-this.parentState.y),a=Math.cos(n),l=Math.sin(n);var r,d,b=new mxPoint(this.bounds.getCenterX(),this.bounds.getCenterY()),T=a*(r=b.x-t.x)-l*(d=b.y-t.y)-r,L=l*r+a*d-d,V=this.bounds.x-this.state.x,Y=this.bounds.y-this.state.y,J=a*V-l*Y,K=l*V+a*Y;this.bounds.x+=T,this.bounds.y+=L,this.unscaledBounds.x=this.roundLength(this.unscaledBounds.x+T/i),this.unscaledBounds.y=this.roundLength(this.unscaledBounds.y+L/i),this.unscaledBounds.width=this.roundLength(this.unscaledBounds.width),this.unscaledBounds.height=this.roundLength(this.unscaledBounds.height),this.graph.isCellCollapsed(this.state.cell)||0==T&&0==L?(this.childOffsetX=0,this.childOffsetY=0):(this.childOffsetX=this.state.x-this.bounds.x+J,this.childOffsetY=this.state.y-this.bounds.y+K),this.livePreview&&this.updateLivePreview(e),null!=this.preview&&this.drawPreview()},mxVertexHandler.prototype.updateLivePreview=function(e){var t=this.graph.view.scale,n=this.graph.view.translate,o=this.state.clone();this.state.x=this.bounds.x,this.state.y=this.bounds.y,this.state.origin=new mxPoint(this.state.x/t-n.x,this.state.y/t-n.y),this.state.width=this.bounds.width,this.state.height=this.bounds.height,this.state.unscaledWidth=null;var s=this.state.absoluteOffset;s=new mxPoint(s.x,s.y),this.state.absoluteOffset.x=0,this.state.absoluteOffset.y=0;var i=this.graph.getCellGeometry(this.state.cell);if(null!=i){var a=i.offset||this.EMPTY_POINT;null==a||i.relative||(this.state.absoluteOffset.x=this.state.view.scale*a.x,this.state.absoluteOffset.y=this.state.view.scale*a.y),this.state.view.updateVertexLabelOffset(this.state)}this.state.view.graph.cellRenderer.redraw(this.state,!0),this.state.view.invalidate(this.state.cell),this.state.invalid=!1,this.state.view.validate(),this.redrawHandles(),this.state.setState(o)},mxVertexHandler.prototype.mouseUp=function(e,t){if(null!=this.index&&null!=this.state){var n=new mxPoint(t.getGraphX(),t.getGraphY());this.graph.getModel().beginUpdate();try{if(this.index<=mxEvent.CUSTOM_HANDLE)null!=this.customHandles&&this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].execute();else if(this.index==mxEvent.ROTATION_HANDLE)if(null!=this.currentAlpha){var o=this.currentAlpha-(this.state.style[mxConstants.STYLE_ROTATION]||0);0!=o&&this.rotateCell(this.state.cell,o)}else this.rotateClick();else{var s=this.graph.isGridEnabledEvent(t.getEvent()),i=mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),a=Math.cos(-i),l=Math.sin(-i),r=n.x-this.startX,d=n.y-this.startY,g=l*r+a*d;r=a*r-l*d,d=g;var f=this.graph.view.scale,v=this.isRecursiveResize(this.state,t);this.resizeCell(this.state.cell,this.roundLength(r/f),this.roundLength(d/f),this.index,s,this.isConstrainedEvent(t),v)}}finally{this.graph.getModel().endUpdate()}t.consume(),this.reset()}},mxVertexHandler.prototype.isRecursiveResize=function(e,t){return this.graph.isRecursiveResize(this.state)},mxVertexHandler.prototype.rotateClick=function(){},mxVertexHandler.prototype.rotateCell=function(e,t,n){if(0!=t){var o=this.graph.getModel();if(o.isVertex(e)||o.isEdge(e)){if(!o.isEdge(e)){var s=this.graph.view.getState(e),i=null!=s?s.style:this.graph.getCellStyle(e);null!=i&&this.graph.setCellStyles(mxConstants.STYLE_ROTATION,(i[mxConstants.STYLE_ROTATION]||0)+t,[e])}var l=this.graph.getCellGeometry(e);if(null!=l){var r=this.graph.getCellGeometry(n);if(null==r||o.isEdge(n)||((l=l.clone()).rotate(t,new mxPoint(r.width/2,r.height/2)),o.setGeometry(e,l)),o.isVertex(e)&&!l.relative||o.isEdge(e))for(var d=o.getChildCount(e),u=0;u<d;u++)this.rotateCell(o.getChildAt(e,u),t,e)}}}},mxVertexHandler.prototype.reset=function(){if(null!=this.sizers&&null!=this.index&&null!=this.sizers[this.index]&&"none"==this.sizers[this.index].node.style.display&&(this.sizers[this.index].node.style.display=""),this.currentAlpha=null,this.inTolerance=null,this.index=null,null!=this.preview&&(this.preview.destroy(),this.preview=null),this.livePreview&&null!=this.sizers)for(var e=0;e<this.sizers.length;e++)null!=this.sizers[e]&&(this.sizers[e].node.style.display="");if(null!=this.customHandles)for(e=0;e<this.customHandles.length;e++)this.customHandles[e].reset();null!=this.selectionBorder&&(this.selectionBorder.node.style.display="inline",this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.drawPreview()),this.removeHint(),this.redrawHandles(),this.edgeHandlers=null,this.unscaledBounds=null},mxVertexHandler.prototype.resizeCell=function(e,t,n,o,s,i,a){var l=this.graph.model.getGeometry(e);if(null!=l)if(o==mxEvent.LABEL_HANDLE){var r=this.graph.view.scale;t=Math.round((this.labelShape.bounds.getCenterX()-this.startX)/r),n=Math.round((this.labelShape.bounds.getCenterY()-this.startY)/r),null==(l=l.clone()).offset?l.offset=new mxPoint(t,n):(l.offset.x+=t,l.offset.y+=n),this.graph.model.setGeometry(e,l)}else null!=this.unscaledBounds&&(r=this.graph.view.scale,0==this.childOffsetX&&0==this.childOffsetY||this.moveChildren(e,Math.round(this.childOffsetX/r),Math.round(this.childOffsetY/r)),this.graph.resizeCell(e,this.unscaledBounds,a))},mxVertexHandler.prototype.moveChildren=function(e,t,n){for(var o=this.graph.getModel(),s=o.getChildCount(e),i=0;i<s;i++){var a=o.getChildAt(e,i),l=this.graph.getCellGeometry(a);null!=l&&((l=l.clone()).translate(t,n),o.setGeometry(a,l))}},mxVertexHandler.prototype.union=function(e,t,n,o,s,i,a,l,r){if(this.singleSizer){var d=e.x+e.width+t,u=e.y+e.height+n;s&&(d=this.graph.snap(d/i)*i,u=this.graph.snap(u/i)*i);var g=new mxRectangle(e.x,e.y,0,0);return g.add(new mxRectangle(d,u,0,0)),g}var f=e.width,v=e.height,x=e.x-a.x*i,z=x+f,b=e.y-a.y*i,_=b+v,H=x+f/2,T=b+v/2;o>4?(_+=n,s&&(_=this.graph.snap(_/i)*i)):o<3&&(b+=n,s&&(b=this.graph.snap(b/i)*i)),0==o||3==o||5==o?(x+=t,s&&(x=this.graph.snap(x/i)*i)):2!=o&&4!=o&&7!=o||(z+=t,s&&(z=this.graph.snap(z/i)*i));var L=z-x,V=_-b;if(l){var Y=this.graph.getCellGeometry(this.state.cell);if(null!=Y){var J=Y.width/Y.height;1==o||2==o||7==o||6==o?L=V*J:V=L/J,0==o&&(x=z-L,b=_-V)}}if(r){var K=H-(x+(L+=L-f)/2),re=T-(b+(V+=V-v)/2);x+=K,b+=re,z+=K,_+=re}L<0&&(x+=L,L=Math.abs(L)),V<0&&(b+=V,V=Math.abs(V));var X=new mxRectangle(x+a.x*i,b+a.y*i,L,V);return null!=this.minBounds&&(X.width=Math.max(X.width,this.minBounds.x*i+this.minBounds.width*i+Math.max(0,this.x0*i-X.x)),X.height=Math.max(X.height,this.minBounds.y*i+this.minBounds.height*i+Math.max(0,this.y0*i-X.y))),X},mxVertexHandler.prototype.redraw=function(){this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.redrawHandles(),this.drawPreview()},mxVertexHandler.prototype.getHandlePadding=function(){var e=new mxPoint(0,0),t=this.tolerance;return null!=this.sizers&&this.sizers.length>0&&null!=this.sizers[0]&&(this.bounds.width<2*this.sizers[0].bounds.width+2*t||this.bounds.height<2*this.sizers[0].bounds.height+2*t)&&(e.x=this.sizers[0].bounds.width+(t/=2),e.y=this.sizers[0].bounds.height+t),e},mxVertexHandler.prototype.redrawHandles=function(){var e=this.tolerance;this.horizontalOffset=0,this.verticalOffset=0;var t=this.bounds;if(null!=this.sizers&&this.sizers.length>0&&null!=this.sizers[0]){if(null==this.index&&this.manageSizers&&this.sizers.length>=8){var n=this.getHandlePadding();this.horizontalOffset=n.x,this.verticalOffset=n.y,0==this.horizontalOffset&&0==this.verticalOffset||((t=new mxRectangle(t.x,t.y,t.width,t.height)).x-=this.horizontalOffset/2,t.width+=this.horizontalOffset,t.y-=this.verticalOffset/2,t.height+=this.verticalOffset),this.sizers.length>=8&&(t.width<2*this.sizers[0].bounds.width+2*e||t.height<2*this.sizers[0].bounds.height+2*e?(this.sizers[0].node.style.display="none",this.sizers[2].node.style.display="none",this.sizers[5].node.style.display="none",this.sizers[7].node.style.display="none"):(this.sizers[0].node.style.display="",this.sizers[2].node.style.display="",this.sizers[5].node.style.display="",this.sizers[7].node.style.display=""))}var o=t.x+t.width,s=t.y+t.height;if(this.singleSizer)this.moveSizerTo(this.sizers[0],o,s);else{var i=t.x+t.width/2,a=t.y+t.height/2;if(this.sizers.length>=8){var l=["nw-resize","n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize"],r=mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),d=Math.cos(r),u=Math.sin(r),g=Math.round(4*r/Math.PI),f=new mxPoint(t.getCenterX(),t.getCenterY()),v=mxUtils.getRotatedPoint(new mxPoint(t.x,t.y),d,u,f);this.moveSizerTo(this.sizers[0],v.x,v.y),this.sizers[0].setCursor(l[mxUtils.mod(0+g,l.length)]),v.x=i,v.y=t.y,v=mxUtils.getRotatedPoint(v,d,u,f),this.moveSizerTo(this.sizers[1],v.x,v.y),this.sizers[1].setCursor(l[mxUtils.mod(1+g,l.length)]),v.x=o,v.y=t.y,v=mxUtils.getRotatedPoint(v,d,u,f),this.moveSizerTo(this.sizers[2],v.x,v.y),this.sizers[2].setCursor(l[mxUtils.mod(2+g,l.length)]),v.x=t.x,v.y=a,v=mxUtils.getRotatedPoint(v,d,u,f),this.moveSizerTo(this.sizers[3],v.x,v.y),this.sizers[3].setCursor(l[mxUtils.mod(7+g,l.length)]),v.x=o,v.y=a,v=mxUtils.getRotatedPoint(v,d,u,f),this.moveSizerTo(this.sizers[4],v.x,v.y),this.sizers[4].setCursor(l[mxUtils.mod(3+g,l.length)]),v.x=t.x,v.y=s,v=mxUtils.getRotatedPoint(v,d,u,f),this.moveSizerTo(this.sizers[5],v.x,v.y),this.sizers[5].setCursor(l[mxUtils.mod(6+g,l.length)]),v.x=i,v.y=s,v=mxUtils.getRotatedPoint(v,d,u,f),this.moveSizerTo(this.sizers[6],v.x,v.y),this.sizers[6].setCursor(l[mxUtils.mod(5+g,l.length)]),v.x=o,v.y=s,v=mxUtils.getRotatedPoint(v,d,u,f),this.moveSizerTo(this.sizers[7],v.x,v.y),this.sizers[7].setCursor(l[mxUtils.mod(4+g,l.length)]),this.moveSizerTo(this.sizers[8],i+this.state.absoluteOffset.x,a+this.state.absoluteOffset.y)}else this.state.width>=2&&this.state.height>=2?this.moveSizerTo(this.sizers[0],i+this.state.absoluteOffset.x,a+this.state.absoluteOffset.y):this.moveSizerTo(this.sizers[0],this.state.x,this.state.y)}}if(null!=this.rotationShape&&(r=mxUtils.toRadians(null!=this.currentAlpha?this.currentAlpha:this.state.style[mxConstants.STYLE_ROTATION]||"0"),d=Math.cos(r),u=Math.sin(r),f=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),v=mxUtils.getRotatedPoint(new mxPoint(t.x+t.width/2,t.y+this.rotationHandleVSpacing),d,u,f),null!=this.rotationShape.node&&this.moveSizerTo(this.rotationShape,v.x,v.y)),null!=this.selectionBorder&&(this.selectionBorder.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0")),null!=this.edgeHandlers)for(var x=0;x<this.edgeHandlers.length;x++)this.edgeHandlers[x].redraw();if(null!=this.customHandles)for(x=0;x<this.customHandles.length;x++)this.customHandles[x].redraw();this.updateParentHighlight()},mxVertexHandler.prototype.updateParentHighlight=function(){if(null!=this.selectionBorder)if(null!=this.parentHighlight){var e=this.graph.model.getParent(this.state.cell);if(this.graph.model.isVertex(e)){var t=this.graph.view.getState(e),n=this.parentHighlight.bounds;null==t||n.x==t.x&&n.y==t.y&&n.width==t.width&&n.height==t.height||(this.parentHighlight.bounds=t,this.parentHighlight.redraw())}else this.parentHighlight.destroy(),this.parentHighlight=null}else this.parentHighlightEnabled&&(e=this.graph.model.getParent(this.state.cell),this.graph.model.isVertex(e)&&null!=(t=this.graph.view.getState(e))&&(this.parentHighlight=this.createParentHighlightShape(t),this.parentHighlight.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.parentHighlight.pointerEvents=!1,this.parentHighlight.rotation=Number(t.style[mxConstants.STYLE_ROTATION]||"0"),this.parentHighlight.init(this.graph.getView().getOverlayPane())))},mxVertexHandler.prototype.drawPreview=function(){null!=this.preview&&(this.preview.bounds=this.bounds,this.preview.node.parentNode==this.graph.container&&(this.preview.bounds.width=Math.max(0,this.preview.bounds.width-1),this.preview.bounds.height=Math.max(0,this.preview.bounds.height-1)),this.preview.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0"),this.preview.redraw()),this.selectionBorder.bounds=this.bounds,this.selectionBorder.redraw(),null!=this.parentHighlight&&this.parentHighlight.redraw()},mxVertexHandler.prototype.destroy=function(){if(null!=this.escapeHandler&&(this.state.view.graph.removeListener(this.escapeHandler),this.escapeHandler=null),null!=this.preview&&(this.preview.destroy(),this.preview=null),null!=this.parentHighlight&&(this.parentHighlight.destroy(),this.parentHighlight=null),null!=this.selectionBorder&&(this.selectionBorder.destroy(),this.selectionBorder=null),this.labelShape=null,this.removeHint(),null!=this.sizers){for(var e=0;e<this.sizers.length;e++)this.sizers[e].destroy();this.sizers=null}if(null!=this.customHandles){for(e=0;e<this.customHandles.length;e++)this.customHandles[e].destroy();this.customHandles=null}},exports.mxVertexHandler=mxVertexHandler,mxEdgeHandler.prototype.graph=null,mxEdgeHandler.prototype.state=null,mxEdgeHandler.prototype.marker=null,mxEdgeHandler.prototype.constraintHandler=null,mxEdgeHandler.prototype.error=null,mxEdgeHandler.prototype.shape=null,mxEdgeHandler.prototype.bends=null,mxEdgeHandler.prototype.labelShape=null,mxEdgeHandler.prototype.cloneEnabled=!0,mxEdgeHandler.prototype.addEnabled=!1,mxEdgeHandler.prototype.removeEnabled=!1,mxEdgeHandler.prototype.dblClickRemoveEnabled=!1,mxEdgeHandler.prototype.mergeRemoveEnabled=!1,mxEdgeHandler.prototype.straightRemoveEnabled=!1,mxEdgeHandler.prototype.virtualBendsEnabled=!1,mxEdgeHandler.prototype.virtualBendOpacity=20,mxEdgeHandler.prototype.parentHighlightEnabled=!1,mxEdgeHandler.prototype.preferHtml=!1,mxEdgeHandler.prototype.allowHandleBoundsCheck=!0,mxEdgeHandler.prototype.snapToTerminals=!1,mxEdgeHandler.prototype.handleImage=null,mxEdgeHandler.prototype.tolerance=0,mxEdgeHandler.prototype.outlineConnect=!1,mxEdgeHandler.prototype.manageLabelHandle=!1,mxEdgeHandler.prototype.init=function(){if(this.graph=this.state.view.graph,this.marker=this.createMarker(),this.constraintHandler=new mxConstraintHandler(this.graph),this.points=[],this.abspoints=this.getSelectionPoints(this.state),this.shape=this.createSelectionShape(this.abspoints),this.shape.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,this.shape.init(this.graph.getView().getOverlayPane()),this.shape.pointerEvents=!1,this.shape.setCursor(mxConstants.CURSOR_MOVABLE_EDGE),mxEvent.redirectMouseEvents(this.shape.node,this.graph,this.state),this.preferHtml=null!=this.state.text&&this.state.text.node.parentNode==this.graph.container,!this.preferHtml){var e=this.state.getVisibleTerminalState(!0);if(null!=e&&(this.preferHtml=null!=e.text&&e.text.node.parentNode==this.graph.container),!this.preferHtml){var t=this.state.getVisibleTerminalState(!1);null!=t&&(this.preferHtml=null!=t.text&&t.text.node.parentNode==this.graph.container)}}if(this.parentHighlightEnabled){var n=this.graph.model.getParent(this.state.cell);if(this.graph.model.isVertex(n)){var o=this.graph.view.getState(n);null!=o&&(this.parentHighlight=this.createParentHighlightShape(o),this.parentHighlight.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.parentHighlight.pointerEvents=!1,this.parentHighlight.rotation=Number(o.style[mxConstants.STYLE_ROTATION]||"0"),this.parentHighlight.init(this.graph.getView().getOverlayPane()))}}(this.graph.getSelectionCount()<mxGraphHandler.prototype.maxCells||mxGraphHandler.prototype.maxCells<=0)&&(this.bends=this.createBends(),this.isVirtualBendsEnabled()&&(this.virtualBends=this.createVirtualBends())),this.label=new mxPoint(this.state.absoluteOffset.x,this.state.absoluteOffset.y),this.labelShape=this.createLabelHandleShape(),this.initBend(this.labelShape),this.labelShape.setCursor(mxConstants.CURSOR_LABEL_HANDLE),this.customHandles=this.createCustomHandles(),this.redraw()},mxEdgeHandler.prototype.createCustomHandles=function(){return null},mxEdgeHandler.prototype.isVirtualBendsEnabled=function(e){return this.virtualBendsEnabled&&(null==this.state.style[mxConstants.STYLE_EDGE]||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.NONE||1==this.state.style[mxConstants.STYLE_NOEDGESTYLE])&&"arrow"!=mxUtils.getValue(this.state.style,mxConstants.STYLE_SHAPE,null)},mxEdgeHandler.prototype.isAddPointEvent=function(e){return mxEvent.isShiftDown(e)},mxEdgeHandler.prototype.isRemovePointEvent=function(e){return mxEvent.isShiftDown(e)},mxEdgeHandler.prototype.getSelectionPoints=function(e){return e.absolutePoints},mxEdgeHandler.prototype.createParentHighlightShape=function(e){var t=new mxRectangleShape(e,null,this.getSelectionColor());return t.strokewidth=this.getSelectionStrokeWidth(),t.isDashed=this.isSelectionDashed(),t},mxEdgeHandler.prototype.createSelectionShape=function(e){var t=new this.state.shape.constructor;return t.outline=!0,t.apply(this.state),t.isDashed=this.isSelectionDashed(),t.stroke=this.getSelectionColor(),t.isShadow=!1,t},mxEdgeHandler.prototype.getSelectionColor=function(){return mxConstants.EDGE_SELECTION_COLOR},mxEdgeHandler.prototype.getSelectionStrokeWidth=function(){return mxConstants.EDGE_SELECTION_STROKEWIDTH},mxEdgeHandler.prototype.isSelectionDashed=function(){return mxConstants.EDGE_SELECTION_DASHED},mxEdgeHandler.prototype.isConnectableCell=function(e){return!0},mxEdgeHandler.prototype.getCellAt=function(e,t){return this.outlineConnect?null:this.graph.getCellAt(e,t)},mxEdgeHandler.prototype.createMarker=function(){var e=new mxCellMarker(this.graph),t=this;return e.getCell=function(n){var o=mxCellMarker.prototype.getCell.apply(this,arguments);if(o!=t.state.cell&&null!=o||null==t.currentPoint||(o=t.graph.getCellAt(t.currentPoint.x,t.currentPoint.y)),null!=o&&!this.graph.isCellConnectable(o)){var s=this.graph.getModel().getParent(o);this.graph.getModel().isVertex(s)&&this.graph.isCellConnectable(s)&&(o=s)}var i=t.graph.getModel();return(this.graph.isSwimlane(o)&&null!=t.currentPoint&&this.graph.hitsSwimlaneContent(o,t.currentPoint.x,t.currentPoint.y)||!t.isConnectableCell(o)||o==t.state.cell||null!=o&&!t.graph.connectableEdges&&i.isEdge(o)||i.isAncestor(t.state.cell,o))&&(o=null),this.graph.isCellConnectable(o)||(o=null),o},e.isValidState=function(n){var o=t.graph.getModel(),s=t.graph.view.getTerminalPort(n,t.graph.view.getState(o.getTerminal(t.state.cell,!t.isSource)),!t.isSource),i=null!=s?s.cell:null;return t.error=t.validateConnection(t.isSource?n.cell:i,t.isSource?i:n.cell),null==t.error},e},mxEdgeHandler.prototype.validateConnection=function(e,t){return this.graph.getEdgeValidationError(this.state.cell,e,t)},mxEdgeHandler.prototype.createBends=function(){for(var e=this.state.cell,t=[],n=0;n<this.abspoints.length;n++)if(this.isHandleVisible(n)){var i=0==n||n==this.abspoints.length-1;(i||this.graph.isCellBendable(e))&&mxUtils.bind(this,function(a){var l=this.createHandleShape(a);this.initBend(l,mxUtils.bind(this,mxUtils.bind(this,function(){this.dblClickRemoveEnabled&&this.removePoint(this.state,a)}))),this.isHandleEnabled(n)&&l.setCursor(i?mxConstants.CURSOR_TERMINAL_HANDLE:mxConstants.CURSOR_BEND_HANDLE),t.push(l),i||(this.points.push(new mxPoint(0,0)),l.node.style.visibility="hidden")})(n)}return t},mxEdgeHandler.prototype.createVirtualBends=function(){var t=[];if(this.graph.isCellBendable(this.state.cell))for(var n=1;n<this.abspoints.length;n++)mxUtils.bind(this,function(o){this.initBend(o),o.setCursor(mxConstants.CURSOR_VIRTUAL_BEND_HANDLE),t.push(o)})(this.createHandleShape());return t},mxEdgeHandler.prototype.isHandleEnabled=function(e){return!0},mxEdgeHandler.prototype.isHandleVisible=function(e){var t=this.state.getVisibleTerminalState(!0),n=this.state.getVisibleTerminalState(!1),o=this.graph.getCellGeometry(this.state.cell);return(null!=o?this.graph.view.getEdgeStyle(this.state,o.points,t,n):null)!=mxEdgeStyle.EntityRelation||0==e||e==this.abspoints.length-1},mxEdgeHandler.prototype.createHandleShape=function(e){if(null!=this.handleImage){var t=new mxImageShape(new mxRectangle(0,0,this.handleImage.width,this.handleImage.height),this.handleImage.src);return t.preserveImageAspect=!1,t}var n=mxConstants.HANDLE_SIZE;return this.preferHtml&&(n-=1),new mxRectangleShape(new mxRectangle(0,0,n,n),mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxEdgeHandler.prototype.createLabelHandleShape=function(){if(null!=this.labelHandleImage){var e=new mxImageShape(new mxRectangle(0,0,this.labelHandleImage.width,this.labelHandleImage.height),this.labelHandleImage.src);return e.preserveImageAspect=!1,e}var t=mxConstants.LABEL_HANDLE_SIZE;return new mxRectangleShape(new mxRectangle(0,0,t,t),mxConstants.LABEL_HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxEdgeHandler.prototype.initBend=function(e,t){this.preferHtml?(e.dialect=mxConstants.DIALECT_STRICTHTML,e.init(this.graph.container)):(e.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,e.init(this.graph.getView().getOverlayPane())),mxEvent.redirectMouseEvents(e.node,this.graph,this.state,null,null,null,t),(mxClient.IS_QUIRKS||8==document.documentMode)&&mxEvent.addListener(e.node,"dragstart",function(n){return mxEvent.consume(n),!1}),mxClient.IS_TOUCH&&e.node.setAttribute("pointer-events","none")},mxEdgeHandler.prototype.getHandleForEvent=function(e){function t(l){if(null!=l&&"none"!=l.node.style.display&&"hidden"!=l.node.style.visibility&&(e.isSource(l)||null!=o&&mxUtils.intersects(l.bounds,o))){var r=e.getGraphX()-l.bounds.getCenterX(),d=e.getGraphY()-l.bounds.getCenterY(),u=r*r+d*d;if(null==s||u<=s)return s=u,!0}return!1}var n=mxEvent.isMouseEvent(e.getEvent())?1:this.tolerance,o=this.allowHandleBoundsCheck&&(mxClient.IS_IE||n>0)?new mxRectangle(e.getGraphX()-n,e.getGraphY()-n,2*n,2*n):null,s=null,i=null;if(null!=this.customHandles&&this.isCustomHandleEvent(e))for(var a=this.customHandles.length-1;a>=0;a--)if(t(this.customHandles[a].shape))return mxEvent.CUSTOM_HANDLE-a;if((e.isSource(this.state.text)||t(this.labelShape))&&(i=mxEvent.LABEL_HANDLE),null!=this.bends)for(a=0;a<this.bends.length;a++)t(this.bends[a])&&(i=a);if(null!=this.virtualBends&&this.isAddVirtualBendEvent(e))for(a=0;a<this.virtualBends.length;a++)t(this.virtualBends[a])&&(i=mxEvent.VIRTUAL_HANDLE-a);return i},mxEdgeHandler.prototype.isAddVirtualBendEvent=function(e){return!0},mxEdgeHandler.prototype.isCustomHandleEvent=function(e){return!0},mxEdgeHandler.prototype.mouseDown=function(e,t){var n=this.getHandleForEvent(t);if(null!=this.bends&&null!=this.bends[n]){var o=this.bends[n].bounds;this.snapPoint=new mxPoint(o.getCenterX(),o.getCenterY())}this.addEnabled&&null==n&&this.isAddPointEvent(t.getEvent())?(this.addPoint(this.state,t.getEvent()),t.consume()):null!=n&&!t.isConsumed()&&this.graph.isEnabled()&&(this.removeEnabled&&this.isRemovePointEvent(t.getEvent())?this.removePoint(this.state,n):(n!=mxEvent.LABEL_HANDLE||this.graph.isLabelMovable(t.getCell()))&&(n<=mxEvent.VIRTUAL_HANDLE&&mxUtils.setOpacity(this.virtualBends[mxEvent.VIRTUAL_HANDLE-n].node,100),this.start(t.getX(),t.getY(),n)),t.consume())},mxEdgeHandler.prototype.start=function(e,t,n){if(this.startX=e,this.startY=t,this.isSource=null!=this.bends&&0==n,this.isTarget=null!=this.bends&&n==this.bends.length-1,this.isLabel=n==mxEvent.LABEL_HANDLE,this.isSource||this.isTarget){var o=this.state.cell,s=this.graph.model.getTerminal(o,this.isSource);(null==s&&this.graph.isTerminalPointMovable(o,this.isSource)||null!=s&&this.graph.isCellDisconnectable(o,s,this.isSource))&&(this.index=n)}else this.index=n;if(this.index<=mxEvent.CUSTOM_HANDLE&&this.index>mxEvent.VIRTUAL_HANDLE&&null!=this.customHandles)for(var i=0;i<this.customHandles.length;i++)i!=mxEvent.CUSTOM_HANDLE-this.index&&this.customHandles[i].setVisible(!1)},mxEdgeHandler.prototype.clonePreviewState=function(e,t){return this.state.clone()},mxEdgeHandler.prototype.getSnapToTerminalTolerance=function(){return this.graph.gridSize*this.graph.view.scale/2},mxEdgeHandler.prototype.updateHint=function(e,t){},mxEdgeHandler.prototype.removeHint=function(){},mxEdgeHandler.prototype.roundLength=function(e){return Math.round(e)},mxEdgeHandler.prototype.isSnapToTerminalsEvent=function(e){return this.snapToTerminals&&!mxEvent.isAltDown(e.getEvent())},mxEdgeHandler.prototype.getPointForEvent=function(e){function t(g){if(null!=g){var f=g.x;Math.abs(i.x-f)<a&&(i.x=f,l=!0);var v=g.y;Math.abs(i.y-v)<a&&(i.y=v,r=!0)}}function n(g){null!=g&&t.call(this,new mxPoint(o.getRoutingCenterX(g),o.getRoutingCenterY(g)))}var o=this.graph.getView(),s=o.scale,i=new mxPoint(this.roundLength(e.getGraphX()/s)*s,this.roundLength(e.getGraphY()/s)*s),a=this.getSnapToTerminalTolerance(),l=!1,r=!1;if(a>0&&this.isSnapToTerminalsEvent(e)&&(n.call(this,this.state.getVisibleTerminalState(!0)),n.call(this,this.state.getVisibleTerminalState(!1)),null!=this.state.absolutePoints))for(var d=0;d<this.state.absolutePoints.length;d++)t.call(this,this.state.absolutePoints[d]);if(this.graph.isGridEnabledEvent(e.getEvent())){var u=o.translate;l||(i.x=(this.graph.snap(i.x/s-u.x)+u.x)*s),r||(i.y=(this.graph.snap(i.y/s-u.y)+u.y)*s)}return i},mxEdgeHandler.prototype.getPreviewTerminalState=function(e){if(this.constraintHandler.update(e,this.isSource,!0,e.isSource(this.marker.highlight.shape)?null:this.currentPoint),null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentConstraint){null!=this.marker.highlight&&null!=this.marker.highlight.state&&this.marker.highlight.state.cell==this.constraintHandler.currentFocus.cell?"transparent"!=this.marker.highlight.shape.stroke&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint()):this.marker.markCell(this.constraintHandler.currentFocus.cell,"transparent");var t=this.graph.getModel(),n=this.graph.view.getTerminalPort(this.state,this.graph.view.getState(t.getTerminal(this.state.cell,!this.isSource)),!this.isSource),o=null!=n?n.cell:null;this.error=this.validateConnection(this.isSource?this.constraintHandler.currentFocus.cell:o,this.isSource?o:this.constraintHandler.currentFocus.cell);var a=null;return null==this.error?a=this.constraintHandler.currentFocus:this.constraintHandler.reset(),a}return this.graph.isIgnoreTerminalEvent(e.getEvent())?(this.marker.reset(),null):(this.marker.process(e),this.marker.getValidState())},mxEdgeHandler.prototype.getPreviewPoints=function(e,t){var x,z,o=this.graph.getCellGeometry(this.state.cell),s=null!=o.points?o.points.slice():null,i=new mxPoint(e.x,e.y),a=null;if(this.isSource||this.isTarget)this.graph.resetEdgesOnConnect&&(s=null);else if(this.convertPoint(i,!1),null==s)s=[i];else{if(this.index<=mxEvent.VIRTUAL_HANDLE&&s.splice(mxEvent.VIRTUAL_HANDLE-this.index,0,i),!this.isSource&&!this.isTarget){for(var l=0;l<this.bends.length;l++)if(l!=this.index){var r=this.bends[l];null!=r&&mxUtils.contains(r.bounds,e.x,e.y)&&(s.splice(this.index<=mxEvent.VIRTUAL_HANDLE?mxEvent.VIRTUAL_HANDLE-this.index:this.index-1,1),a=s)}if(null==a&&this.straightRemoveEnabled&&(null==t||!mxEvent.isAltDown(t.getEvent()))){var d=this.graph.tolerance*this.graph.tolerance,u=this.state.absolutePoints.slice();u[this.index]=e;var g=this.state.getVisibleTerminalState(!0);null!=g&&(null!=(f=this.graph.getConnectionConstraint(this.state,g,!0))&&null!=this.graph.getConnectionPoint(g,f)||(u[0]=new mxPoint(g.view.getRoutingCenterX(g),g.view.getRoutingCenterY(g))));var f,v=this.state.getVisibleTerminalState(!1);null!=v&&(null!=(f=this.graph.getConnectionConstraint(this.state,v,!1))&&null!=this.graph.getConnectionPoint(v,f)||(u[u.length-1]=new mxPoint(v.view.getRoutingCenterX(v),v.view.getRoutingCenterY(v)))),z=e,(x=this.index)>0&&x<u.length-1&&mxUtils.ptSegDistSq(u[x-1].x,u[x-1].y,u[x+1].x,u[x+1].y,z.x,z.y)<d&&(s.splice(x-1,1),a=s)}}null==a&&this.index>mxEvent.VIRTUAL_HANDLE&&(s[this.index-1]=i)}return null!=a?a:s},mxEdgeHandler.prototype.isOutlineConnectEvent=function(e){var t=mxUtils.getOffset(this.graph.container),n=e.getEvent(),o=mxEvent.getClientX(n),s=mxEvent.getClientY(n),i=document.documentElement,a=(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0),l=(window.pageYOffset||i.scrollTop)-(i.clientTop||0),r=this.currentPoint.x-this.graph.container.scrollLeft+t.x-a,d=this.currentPoint.y-this.graph.container.scrollTop+t.y-l;return this.outlineConnect&&!mxEvent.isShiftDown(e.getEvent())&&(e.isSource(this.marker.highlight.shape)||mxEvent.isAltDown(e.getEvent())&&null!=e.getState()||this.marker.highlight.isHighlightAt(o,s)||(r!=o||d!=s)&&null==e.getState()&&this.marker.highlight.isHighlightAt(r,d))},mxEdgeHandler.prototype.updatePreviewState=function(e,t,n,o,s){var i=this.isSource?n:this.state.getVisibleTerminalState(!0),a=this.isTarget?n:this.state.getVisibleTerminalState(!1),l=this.graph.getConnectionConstraint(e,i,!0),r=this.graph.getConnectionConstraint(e,a,!1),d=this.constraintHandler.currentConstraint;if(null==d&&s&&(null!=n?(o.isSource(this.marker.highlight.shape)&&(t=new mxPoint(o.getGraphX(),o.getGraphY())),d=this.graph.getOutlineConstraint(t,n,o),this.constraintHandler.setFocus(o,n,this.isSource),this.constraintHandler.currentConstraint=d,this.constraintHandler.currentPoint=t):d=new mxConnectionConstraint),this.outlineConnect&&null!=this.marker.highlight&&null!=this.marker.highlight.shape){var u=this.graph.view.scale;null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus?(this.marker.highlight.shape.stroke=s?mxConstants.OUTLINE_HIGHLIGHT_COLOR:"transparent",this.marker.highlight.shape.strokewidth=mxConstants.OUTLINE_HIGHLIGHT_STROKEWIDTH/u/u,this.marker.highlight.repaint()):this.marker.hasValidState()&&(this.marker.highlight.shape.stroke=this.marker.getValidState()==o.getState()?mxConstants.DEFAULT_VALID_COLOR:"transparent",this.marker.highlight.shape.strokewidth=mxConstants.HIGHLIGHT_STROKEWIDTH/u/u,this.marker.highlight.repaint())}this.isSource?l=d:this.isTarget&&(r=d),(this.isSource||this.isTarget)&&(null!=d&&null!=d.point?(e.style[this.isSource?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X]=d.point.x,e.style[this.isSource?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y]=d.point.y):(delete e.style[this.isSource?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X],delete e.style[this.isSource?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y])),e.setVisibleTerminalState(i,!0),e.setVisibleTerminalState(a,!1),this.isSource&&null==i||e.view.updateFixedTerminalPoint(e,i,!0,l),this.isTarget&&null==a||e.view.updateFixedTerminalPoint(e,a,!1,r),(this.isSource||this.isTarget)&&null==n&&(e.setAbsoluteTerminalPoint(t,this.isSource),null==this.marker.getMarkedState()&&(this.error=this.graph.allowDanglingEdges?null:"")),e.view.updatePoints(e,this.points,i,a),e.view.updateFloatingTerminalPoints(e,i,a)},mxEdgeHandler.prototype.mouseMove=function(e,t){if(null!=this.index&&null!=this.marker){if(this.currentPoint=this.getPointForEvent(t),this.error=null,!this.graph.isIgnoreTerminalEvent(t.getEvent())&&mxEvent.isShiftDown(t.getEvent())&&null!=this.snapPoint&&(Math.abs(this.snapPoint.x-this.currentPoint.x)<Math.abs(this.snapPoint.y-this.currentPoint.y)?this.currentPoint.x=this.snapPoint.x:this.currentPoint.y=this.snapPoint.y),this.index<=mxEvent.CUSTOM_HANDLE&&this.index>mxEvent.VIRTUAL_HANDLE)null!=this.customHandles&&this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].processEvent(t);else if(this.isLabel)this.label.x=this.currentPoint.x,this.label.y=this.currentPoint.y;else{this.points=this.getPreviewPoints(this.currentPoint,t);var n=this.isSource||this.isTarget?this.getPreviewTerminalState(t):null;if(null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentPoint)this.currentPoint=this.constraintHandler.currentPoint.clone();else if(this.outlineConnect){var o=!(!this.isSource&&!this.isTarget)&&this.isOutlineConnectEvent(t);o?n=this.marker.highlight.state:null!=n&&n!=t.getState()&&null!=this.marker.highlight.shape&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint(),n=null)}var s=this.clonePreviewState(this.currentPoint,null!=n?n.cell:null);this.updatePreviewState(s,this.currentPoint,n,t,o),this.setPreviewColor(null==this.error?this.marker.validColor:this.marker.invalidColor),this.abspoints=s.absolutePoints,this.active=!0}this.updateHint(t,this.currentPoint),this.drawPreview(),mxEvent.consume(t.getEvent()),t.consume()}else mxClient.IS_IE&&null!=this.getHandleForEvent(t)&&t.consume(!1)},mxEdgeHandler.prototype.mouseUp=function(e,t){if(null!=this.index&&null!=this.marker){var n=this.state.cell;if(t.getX()!=this.startX||t.getY()!=this.startY){var o=!this.graph.isIgnoreTerminalEvent(t.getEvent())&&this.graph.isCloneEvent(t.getEvent())&&this.cloneEnabled&&this.graph.isCellsCloneable();if(null!=this.error)this.error.length>0&&this.graph.validationAlert(this.error);else if(this.index<=mxEvent.CUSTOM_HANDLE&&this.index>mxEvent.VIRTUAL_HANDLE){if(null!=this.customHandles){var s=this.graph.getModel();s.beginUpdate();try{this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].execute()}finally{s.endUpdate()}}}else if(this.isLabel)this.moveLabel(this.state,this.label.x,this.label.y);else if(this.isSource||this.isTarget){var i=null;if(null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&(i=this.constraintHandler.currentFocus.cell),null==i&&this.marker.hasValidState()&&null!=this.marker.highlight&&null!=this.marker.highlight.shape&&"transparent"!=this.marker.highlight.shape.stroke&&"white"!=this.marker.highlight.shape.stroke&&(i=this.marker.validState.cell),null!=i)n=this.connect(n,i,this.isSource,o,t);else if(this.graph.isAllowDanglingEdges()){var a=this.abspoints[this.isSource?0:this.abspoints.length-1];a.x=this.roundLength(a.x/this.graph.view.scale-this.graph.view.translate.x),a.y=this.roundLength(a.y/this.graph.view.scale-this.graph.view.translate.y);var l=this.graph.getView().getState(this.graph.getModel().getParent(n));null!=l&&(a.x-=l.origin.x,a.y-=l.origin.y),a.x-=this.graph.panDx/this.graph.view.scale,a.y-=this.graph.panDy/this.graph.view.scale,n=this.changeTerminalPoint(n,a,this.isSource,o)}}else this.active?n=this.changePoints(n,this.points,o):(this.graph.getView().invalidate(this.state.cell),this.graph.getView().validate(this.state.cell))}null!=this.marker&&(this.reset(),n!=this.state.cell&&this.graph.setSelectionCell(n)),t.consume()}},mxEdgeHandler.prototype.reset=function(){if(this.error=null,this.index=null,this.label=null,this.points=null,this.snapPoint=null,this.active=!1,this.isLabel=!1,this.isSource=!1,this.isTarget=!1,this.livePreview&&null!=this.sizers)for(var e=0;e<this.sizers.length;e++)null!=this.sizers[e]&&(this.sizers[e].node.style.display="");if(null!=this.marker&&this.marker.reset(),null!=this.constraintHandler&&this.constraintHandler.reset(),null!=this.customHandles)for(e=0;e<this.customHandles.length;e++)this.customHandles[e].reset();this.setPreviewColor(mxConstants.EDGE_SELECTION_COLOR),this.removeHint(),this.redraw()},mxEdgeHandler.prototype.setPreviewColor=function(e){null!=this.shape&&(this.shape.stroke=e)},mxEdgeHandler.prototype.convertPoint=function(e,t){var n=this.graph.getView().getScale(),o=this.graph.getView().getTranslate();t&&(e.x=this.graph.snap(e.x),e.y=this.graph.snap(e.y)),e.x=Math.round(e.x/n-o.x),e.y=Math.round(e.y/n-o.y);var s=this.graph.getView().getState(this.graph.getModel().getParent(this.state.cell));return null!=s&&(e.x-=s.origin.x,e.y-=s.origin.y),e},mxEdgeHandler.prototype.moveLabel=function(e,t,n){var o=this.graph.getModel(),s=o.getGeometry(e.cell);if(null!=s){var i=this.graph.getView().scale;if((s=s.clone()).relative){var a=this.graph.getView().getRelativePoint(e,t,n);s.x=Math.round(1e4*a.x)/1e4,s.y=Math.round(a.y),s.offset=new mxPoint(0,0),a=this.graph.view.getPoint(e,s),s.offset=new mxPoint(Math.round((t-a.x)/i),Math.round((n-a.y)/i))}else{var l=e.absolutePoints,r=l[0],d=l[l.length-1];if(null!=r&&null!=d){var g=r.y+(d.y-r.y)/2;s.offset=new mxPoint(Math.round((t-(r.x+(d.x-r.x)/2))/i),Math.round((n-g)/i)),s.x=0,s.y=0}}o.setGeometry(e.cell,s)}},mxEdgeHandler.prototype.connect=function(e,t,n,o,s){var i=this.graph.getModel(),a=i.getParent(e);i.beginUpdate();try{if(o){var l=this.graph.cloneCells([e])[0];i.add(a,l,i.getChildCount(a));var r=i.getTerminal(e,!n);this.graph.connectCell(l,r,!n),e=l}var d=this.constraintHandler.currentConstraint;null==d&&(d=new mxConnectionConstraint),this.graph.connectCell(e,t,n,d)}finally{i.endUpdate()}return e},mxEdgeHandler.prototype.changeTerminalPoint=function(e,t,n,o){var s=this.graph.getModel();s.beginUpdate();try{if(o){var i=s.getParent(e),a=s.getTerminal(e,!n);e=this.graph.cloneCells([e])[0],s.add(i,e,s.getChildCount(i)),s.setTerminal(e,a,!n)}var l=s.getGeometry(e);null!=l&&((l=l.clone()).setTerminalPoint(t,n),s.setGeometry(e,l),this.graph.connectCell(e,null,n,new mxConnectionConstraint))}finally{s.endUpdate()}return e},mxEdgeHandler.prototype.changePoints=function(e,t,n){var o=this.graph.getModel();o.beginUpdate();try{if(n){var s=o.getParent(e),i=o.getTerminal(e,!0),a=o.getTerminal(e,!1);e=this.graph.cloneCells([e])[0],o.add(s,e,o.getChildCount(s)),o.setTerminal(e,i,!0),o.setTerminal(e,a,!1)}var l=o.getGeometry(e);null!=l&&((l=l.clone()).points=t,o.setGeometry(e,l))}finally{o.endUpdate()}return e},mxEdgeHandler.prototype.addPoint=function(e,t){var n=mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(t),mxEvent.getClientY(t)),o=this.graph.isGridEnabledEvent(t);this.convertPoint(n,o),this.addPointAt(e,n.x,n.y),mxEvent.consume(t)},mxEdgeHandler.prototype.addPointAt=function(e,t,n){var o=this.graph.getCellGeometry(e.cell),s=new mxPoint(t,n);if(null!=o){o=o.clone();var i=this.graph.view.translate,a=this.graph.view.scale,l=new mxPoint(i.x*a,i.y*a),r=this.graph.model.getParent(this.state.cell);if(this.graph.model.isVertex(r)){var d=this.graph.view.getState(r);l=new mxPoint(d.x,d.y)}var u=mxUtils.findNearestSegment(e,s.x*a+l.x,s.y*a+l.y);null==o.points?o.points=[s]:o.points.splice(u,0,s),this.graph.getModel().setGeometry(e.cell,o),this.refresh(),this.redraw()}},mxEdgeHandler.prototype.removePoint=function(e,t){if(t>0&&t<this.abspoints.length-1){var n=this.graph.getCellGeometry(this.state.cell);null!=n&&null!=n.points&&((n=n.clone()).points.splice(t-1,1),this.graph.getModel().setGeometry(e.cell,n),this.refresh(),this.redraw())}},mxEdgeHandler.prototype.getHandleFillColor=function(e){var t=0==e,n=this.state.cell,o=this.graph.getModel().getTerminal(n,t),s=mxConstants.HANDLE_FILLCOLOR;return null!=o&&!this.graph.isCellDisconnectable(n,o,t)||null==o&&!this.graph.isTerminalPointMovable(n,t)?s=mxConstants.LOCKED_HANDLE_FILLCOLOR:null!=o&&this.graph.isCellDisconnectable(n,o,t)&&(s=mxConstants.CONNECT_HANDLE_FILLCOLOR),s},mxEdgeHandler.prototype.redraw=function(){this.abspoints=this.state.absolutePoints.slice(),this.redrawHandles();var t=this.graph.getModel().getGeometry(this.state.cell).points;if(null!=this.bends&&this.bends.length>0&&null!=t){null==this.points&&(this.points=[]);for(var n=1;n<this.bends.length-1;n++)null!=this.bends[n]&&null!=this.abspoints[n]&&(this.points[n-1]=t[n-1])}this.drawPreview()},mxEdgeHandler.prototype.redrawHandles=function(){var e=this.state.cell,t=this.labelShape.bounds;this.label=new mxPoint(this.state.absoluteOffset.x,this.state.absoluteOffset.y),this.labelShape.bounds=new mxRectangle(Math.round(this.label.x-t.width/2),Math.round(this.label.y-t.height/2),t.width,t.height);var n=this.graph.getLabel(e);if(this.labelShape.visible=null!=n&&n.length>0&&this.graph.isLabelMovable(e),null!=this.bends&&this.bends.length>0){var o=this.abspoints.length-1,s=this.abspoints[0],a=s.y;t=this.bends[0].bounds,this.bends[0].bounds=new mxRectangle(Math.floor(s.x-t.width/2),Math.floor(a-t.height/2),t.width,t.height),this.bends[0].fill=this.getHandleFillColor(0),this.bends[0].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[0].bounds);var l=this.abspoints[o],d=l.y,u=this.bends.length-1;t=this.bends[u].bounds,this.bends[u].bounds=new mxRectangle(Math.floor(l.x-t.width/2),Math.floor(d-t.height/2),t.width,t.height),this.bends[u].fill=this.getHandleFillColor(u),this.bends[u].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[u].bounds),this.redrawInnerBends(s,l)}if(null!=this.abspoints&&null!=this.virtualBends&&this.virtualBends.length>0)for(var g=this.abspoints[0],f=0;f<this.virtualBends.length;f++)if(null!=this.virtualBends[f]&&null!=this.abspoints[f+1]){var v=this.abspoints[f+1],z=g.y+(v.y-g.y)/2;(t=this.virtualBends[f]).bounds=new mxRectangle(Math.floor(g.x+(v.x-g.x)/2-t.bounds.width/2),Math.floor(z-t.bounds.height/2),t.bounds.width,t.bounds.height),t.redraw(),mxUtils.setOpacity(t.node,this.virtualBendOpacity),g=v,this.manageLabelHandle&&this.checkLabelHandle(t.bounds)}if(null!=this.labelShape&&this.labelShape.redraw(),null!=this.customHandles)for(f=0;f<this.customHandles.length;f++)this.customHandles[f].redraw()},mxEdgeHandler.prototype.setHandlesVisible=function(e){if(null!=this.bends)for(var t=0;t<this.bends.length;t++)this.bends[t].node.style.display=e?"":"none";if(null!=this.virtualBends)for(t=0;t<this.virtualBends.length;t++)this.virtualBends[t].node.style.display=e?"":"none";if(null!=this.labelShape&&(this.labelShape.node.style.display=e?"":"none"),null!=this.customHandles)for(t=0;t<this.customHandles.length;t++)this.customHandles[t].setVisible(e)},mxEdgeHandler.prototype.redrawInnerBends=function(e,t){for(var n=1;n<this.bends.length-1;n++)if(null!=this.bends[n])if(null!=this.abspoints[n]){var o=this.abspoints[n].x,s=this.abspoints[n].y,i=this.bends[n].bounds;this.bends[n].node.style.visibility="visible",this.bends[n].bounds=new mxRectangle(Math.round(o-i.width/2),Math.round(s-i.height/2),i.width,i.height),this.manageLabelHandle?this.checkLabelHandle(this.bends[n].bounds):null==this.handleImage&&this.labelShape.visible&&mxUtils.intersects(this.bends[n].bounds,this.labelShape.bounds)&&(w=mxConstants.HANDLE_SIZE+3,h=mxConstants.HANDLE_SIZE+3,this.bends[n].bounds=new mxRectangle(Math.round(o-w/2),Math.round(s-h/2),w,h)),this.bends[n].redraw()}else this.bends[n].destroy(),this.bends[n]=null},mxEdgeHandler.prototype.checkLabelHandle=function(e){if(null!=this.labelShape){var t=this.labelShape.bounds;mxUtils.intersects(e,t)&&(t.y=e.getCenterY()<t.getCenterY()?e.y+e.height:e.y-t.height)}},mxEdgeHandler.prototype.drawPreview=function(){if(this.isLabel){var e=this.labelShape.bounds,t=new mxRectangle(Math.round(this.label.x-e.width/2),Math.round(this.label.y-e.height/2),e.width,e.height);this.labelShape.bounds=t,this.labelShape.redraw()}else null!=this.shape&&(this.shape.apply(this.state),this.shape.points=this.abspoints,this.shape.scale=this.state.view.scale,this.shape.isDashed=this.isSelectionDashed(),this.shape.stroke=this.getSelectionColor(),this.shape.strokewidth=this.getSelectionStrokeWidth()/this.shape.scale/this.shape.scale,this.shape.arrowStrokewidth=this.getSelectionStrokeWidth(),this.shape.isShadow=!1,this.shape.redraw());null!=this.parentHighlight&&this.parentHighlight.redraw()},mxEdgeHandler.prototype.refresh=function(){this.abspoints=this.getSelectionPoints(this.state),this.points=[],null!=this.shape&&(this.shape.points=this.abspoints),null!=this.bends&&(this.destroyBends(this.bends),this.bends=this.createBends()),null!=this.virtualBends&&(this.destroyBends(this.virtualBends),this.virtualBends=this.createVirtualBends()),null!=this.customHandles&&(this.destroyBends(this.customHandles),this.customHandles=this.createCustomHandles()),null!=this.labelShape&&null!=this.labelShape.node&&null!=this.labelShape.node.parentNode&&this.labelShape.node.parentNode.appendChild(this.labelShape.node)},mxEdgeHandler.prototype.destroyBends=function(e){if(null!=e)for(var t=0;t<e.length;t++)null!=e[t]&&e[t].destroy()},mxEdgeHandler.prototype.destroy=function(){null!=this.escapeHandler&&(this.state.view.graph.removeListener(this.escapeHandler),this.escapeHandler=null),null!=this.marker&&(this.marker.destroy(),this.marker=null),null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.parentHighlight&&(this.parentHighlight.destroy(),this.parentHighlight=null),null!=this.labelShape&&(this.labelShape.destroy(),this.labelShape=null),null!=this.constraintHandler&&(this.constraintHandler.destroy(),this.constraintHandler=null),this.destroyBends(this.virtualBends),this.virtualBends=null,this.destroyBends(this.customHandles),this.customHandles=null,this.destroyBends(this.bends),this.bends=null,this.removeHint()},exports.mxEdgeHandler=mxEdgeHandler,mxUtils.extend(mxElbowEdgeHandler,mxEdgeHandler),mxElbowEdgeHandler.prototype.flipEnabled=!0,mxElbowEdgeHandler.prototype.doubleClickOrientationResource="none"!=mxClient.language?"doubleClickOrientation":"",mxElbowEdgeHandler.prototype.createBends=function(){var e=[],t=this.createHandleShape(0);return this.initBend(t),t.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),e.push(t),e.push(this.createVirtualBend(mxUtils.bind(this,function(n){!mxEvent.isConsumed(n)&&this.flipEnabled&&(this.graph.flipEdge(this.state.cell,n),mxEvent.consume(n))}))),this.points.push(new mxPoint(0,0)),t=this.createHandleShape(2),this.initBend(t),t.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),e.push(t),e},mxElbowEdgeHandler.prototype.createVirtualBend=function(e){var t=this.createHandleShape();return this.initBend(t,e),t.setCursor(this.getCursorForBend()),this.graph.isCellBendable(this.state.cell)||(t.node.style.display="none"),t},mxElbowEdgeHandler.prototype.getCursorForBend=function(){return this.state.style[mxConstants.STYLE_EDGE]==mxEdgeStyle.TopToBottom||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.EDGESTYLE_TOPTOBOTTOM||(this.state.style[mxConstants.STYLE_EDGE]==mxEdgeStyle.ElbowConnector||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.EDGESTYLE_ELBOW)&&this.state.style[mxConstants.STYLE_ELBOW]==mxConstants.ELBOW_VERTICAL?"row-resize":"col-resize"},mxElbowEdgeHandler.prototype.getTooltipForNode=function(e){var t=null;return null==this.bends||null==this.bends[1]||e!=this.bends[1].node&&e.parentNode!=this.bends[1].node||(t=mxResources.get(t=this.doubleClickOrientationResource)||t),t},mxElbowEdgeHandler.prototype.convertPoint=function(e,t){var n=this.graph.getView().getScale(),o=this.graph.getView().getTranslate(),s=this.state.origin;return t&&(e.x=this.graph.snap(e.x),e.y=this.graph.snap(e.y)),e.x=Math.round(e.x/n-o.x-s.x),e.y=Math.round(e.y/n-o.y-s.y),e},mxElbowEdgeHandler.prototype.redrawInnerBends=function(e,t){var n=this.graph.getModel().getGeometry(this.state.cell),o=this.state.absolutePoints,s=null;o.length>1?(e=o[1],t=o[o.length-2]):null!=n.points&&n.points.length>0&&(s=o[0]),s=null==s?new mxPoint(e.x+(t.x-e.x)/2,e.y+(t.y-e.y)/2):new mxPoint(this.graph.getView().scale*(s.x+this.graph.getView().translate.x+this.state.origin.x),this.graph.getView().scale*(s.y+this.graph.getView().translate.y+this.state.origin.y));var i=this.bends[1].bounds,a=i.width,l=i.height,r=new mxRectangle(Math.round(s.x-a/2),Math.round(s.y-l/2),a,l);this.manageLabelHandle?this.checkLabelHandle(r):null==this.handleImage&&this.labelShape.visible&&mxUtils.intersects(r,this.labelShape.bounds)&&(a=mxConstants.HANDLE_SIZE+3,l=mxConstants.HANDLE_SIZE+3,r=new mxRectangle(Math.floor(s.x-a/2),Math.floor(s.y-l/2),a,l)),this.bends[1].bounds=r,this.bends[1].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[1].bounds)},exports.mxElbowEdgeHandler=mxElbowEdgeHandler,mxUtils.extend(mxEdgeSegmentHandler,mxElbowEdgeHandler),mxEdgeSegmentHandler.prototype.getCurrentPoints=function(){var e=this.state.absolutePoints;if(null!=e&&(2==e.length||3==e.length&&(e[0].x==e[1].x&&e[1].x==e[2].x||e[0].y==e[1].y&&e[1].y==e[2].y))){var t=e[0].x+(e[e.length-1].x-e[0].x)/2,n=e[0].y+(e[e.length-1].y-e[0].y)/2;e=[e[0],new mxPoint(t,n),new mxPoint(t,n),e[e.length-1]]}return e},mxEdgeSegmentHandler.prototype.getPreviewPoints=function(e){if(this.isSource||this.isTarget)return mxElbowEdgeHandler.prototype.getPreviewPoints.apply(this,arguments);var t=this.getCurrentPoints(),n=this.convertPoint(t[0].clone(),!1);e=this.convertPoint(e.clone(),!1);for(var o=[],s=1;s<t.length;s++){var i=this.convertPoint(t[s].clone(),!1);s==this.index&&(0==Math.round(n.x-i.x)&&(n.x=e.x,i.x=e.x),0==Math.round(n.y-i.y)&&(n.y=e.y,i.y=e.y)),s<t.length-1&&o.push(i),n=i}if(1==o.length){var a=this.state.getVisibleTerminalState(!0),l=this.state.getVisibleTerminalState(!1),r=this.state.view.getScale(),d=this.state.view.getTranslate(),u=o[0].x*r+d.x,g=o[0].y*r+d.y;(null!=a&&mxUtils.contains(a,u,g)||null!=l&&mxUtils.contains(l,u,g))&&(o=[e,e])}return o},mxEdgeSegmentHandler.prototype.updatePreviewState=function(e,t,n,o){if(mxEdgeHandler.prototype.updatePreviewState.apply(this,arguments),!this.isSource&&!this.isTarget){t=this.convertPoint(t.clone(),!1);for(var s=e.absolutePoints,i=s[0],a=s[1],l=[],r=2;r<s.length;r++){var d=s[r];0==Math.round(i.x-a.x)&&0==Math.round(a.x-d.x)||0==Math.round(i.y-a.y)&&0==Math.round(a.y-d.y)||l.push(this.convertPoint(a.clone(),!1)),i=a,a=d}var u=this.state.getVisibleTerminalState(!0),g=this.state.getVisibleTerminalState(!1),f=this.state.absolutePoints;if(0!=l.length||0!=Math.round(s[0].x-s[s.length-1].x)&&0!=Math.round(s[0].y-s[s.length-1].y)){if(5==s.length&&2==l.length&&null!=u&&null!=g&&null!=f&&0==Math.round(f[0].x-f[f.length-1].x)){var v=this.graph.getView(),x=v.getScale(),z=v.getTranslate(),b=v.getRoutingCenterY(u)/x-z.y,_=this.graph.getConnectionConstraint(e,u,!0);null!=_&&null!=(H=this.graph.getConnectionPoint(u,_))&&(this.convertPoint(H,!1),b=H.y);var H,T=v.getRoutingCenterY(g)/x-z.y,L=this.graph.getConnectionConstraint(e,g,!1);L&&null!=(H=this.graph.getConnectionPoint(g,L))&&(this.convertPoint(H,!1),T=H.y),l=[new mxPoint(t.x,b),new mxPoint(t.x,T)]}}else l=[t,t];this.points=l,e.view.updateFixedTerminalPoints(e,u,g),e.view.updatePoints(e,this.points,u,g),e.view.updateFloatingTerminalPoints(e,u,g)}},mxEdgeSegmentHandler.prototype.connect=function(e,t,n,o,s){for(var i=this.abspoints,a=i[0],l=i[1],r=[],d=2;d<i.length;d++){var u=i[d];0==Math.round(a.x-l.x)&&0==Math.round(l.x-u.x)||0==Math.round(a.y-l.y)&&0==Math.round(l.y-u.y)||r.push(this.convertPoint(l.clone(),!1)),a=l,l=u}var g=this.graph.getModel();g.beginUpdate();try{var f=g.getGeometry(e);null!=f&&((f=f.clone()).points=r,g.setGeometry(e,f)),e=mxEdgeHandler.prototype.connect.apply(this,arguments)}finally{g.endUpdate()}return e},mxEdgeSegmentHandler.prototype.getTooltipForNode=function(e){return null},mxEdgeSegmentHandler.prototype.start=function(e,t,n){mxEdgeHandler.prototype.start.apply(this,arguments),null==this.bends[n]||this.isSource||this.isTarget||mxUtils.setOpacity(this.bends[n].node,100)},mxEdgeSegmentHandler.prototype.createBends=function(){var e=[],t=this.createHandleShape(0);this.initBend(t),t.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),e.push(t);var n=this.getCurrentPoints();if(this.graph.isCellBendable(this.state.cell)){null==this.points&&(this.points=[]);for(var o=0;o<n.length-1;o++){t=this.createVirtualBend(),e.push(t);var s=0==Math.round(n[o].x-n[o+1].x);0==Math.round(n[o].y-n[o+1].y)&&o<n.length-2&&(s=0==Math.round(n[o].x-n[o+2].x)),t.setCursor(s?"col-resize":"row-resize"),this.points.push(new mxPoint(0,0))}}return t=this.createHandleShape(n.length),this.initBend(t),t.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),e.push(t),e},mxEdgeSegmentHandler.prototype.redraw=function(){this.refresh(),mxEdgeHandler.prototype.redraw.apply(this,arguments)},mxEdgeSegmentHandler.prototype.redrawInnerBends=function(e,t){if(this.graph.isCellBendable(this.state.cell)){var n=this.getCurrentPoints();if(null!=n&&n.length>1){var o=!1;if(4==n.length&&0==Math.round(n[1].x-n[2].x)&&0==Math.round(n[1].y-n[2].y))if(o=!0,0==Math.round(n[0].y-n[n.length-1].y)){var s=n[0].x+(n[n.length-1].x-n[0].x)/2;n[1]=new mxPoint(s,n[1].y),n[2]=new mxPoint(s,n[2].y)}else{var i=n[0].y+(n[n.length-1].y-n[0].y)/2;n[1]=new mxPoint(n[1].x,i),n[2]=new mxPoint(n[2].x,i)}for(var a=0;a<n.length-1;a++)if(null!=this.bends[a+1]){var l=new mxPoint((e=n[a]).x+((t=n[a+1]).x-e.x)/2,e.y+(t.y-e.y)/2),r=this.bends[a+1].bounds;this.bends[a+1].bounds=new mxRectangle(Math.floor(l.x-r.width/2),Math.floor(l.y-r.height/2),r.width,r.height),this.bends[a+1].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[a+1].bounds)}o&&(mxUtils.setOpacity(this.bends[1].node,this.virtualBendOpacity),mxUtils.setOpacity(this.bends[3].node,this.virtualBendOpacity))}}},exports.mxEdgeSegmentHandler=mxEdgeSegmentHandler,mxKeyHandler.prototype.graph=null,mxKeyHandler.prototype.target=null,mxKeyHandler.prototype.normalKeys=null,mxKeyHandler.prototype.shiftKeys=null,mxKeyHandler.prototype.controlKeys=null,mxKeyHandler.prototype.controlShiftKeys=null,mxKeyHandler.prototype.enabled=!0,mxKeyHandler.prototype.isEnabled=function(){return this.enabled},mxKeyHandler.prototype.setEnabled=function(e){this.enabled=e},mxKeyHandler.prototype.bindKey=function(e,t){this.normalKeys[e]=t},mxKeyHandler.prototype.bindShiftKey=function(e,t){this.shiftKeys[e]=t},mxKeyHandler.prototype.bindControlKey=function(e,t){this.controlKeys[e]=t},mxKeyHandler.prototype.bindControlShiftKey=function(e,t){this.controlShiftKeys[e]=t},mxKeyHandler.prototype.isControlDown=function(e){return mxEvent.isControlDown(e)},mxKeyHandler.prototype.getFunction=function(e){return null==e||mxEvent.isAltDown(e)?null:this.isControlDown(e)?mxEvent.isShiftDown(e)?this.controlShiftKeys[e.keyCode]:this.controlKeys[e.keyCode]:mxEvent.isShiftDown(e)?this.shiftKeys[e.keyCode]:this.normalKeys[e.keyCode]},mxKeyHandler.prototype.isGraphEvent=function(e){var t=mxEvent.getSource(e);return!!(t==this.target||t.parentNode==this.target||null!=this.graph.cellEditor&&this.graph.cellEditor.isEventSource(e))||mxUtils.isAncestorNode(this.graph.container,t)},mxKeyHandler.prototype.keyDown=function(e){if(this.isEnabledForEvent(e))if(27==e.keyCode)this.escape(e);else if(!this.isEventIgnored(e)){var t=this.getFunction(e);null!=t&&(t(e),mxEvent.consume(e))}},mxKeyHandler.prototype.isEnabledForEvent=function(e){return this.graph.isEnabled()&&!mxEvent.isConsumed(e)&&this.isGraphEvent(e)&&this.isEnabled()},mxKeyHandler.prototype.isEventIgnored=function(e){return this.graph.isEditing()},mxKeyHandler.prototype.escape=function(e){this.graph.isEscapeEnabled()&&this.graph.escape(e)},mxKeyHandler.prototype.destroy=function(){null!=this.target&&null!=this.keydownHandler&&(mxEvent.removeListener(this.target,"keydown",this.keydownHandler),this.keydownHandler=null),this.target=null},exports.mxKeyHandler=mxKeyHandler,mxTooltipHandler.prototype.zIndex=10005,mxTooltipHandler.prototype.graph=null,mxTooltipHandler.prototype.delay=null,mxTooltipHandler.prototype.ignoreTouchEvents=!0,mxTooltipHandler.prototype.hideOnHover=!1,mxTooltipHandler.prototype.destroyed=!1,mxTooltipHandler.prototype.enabled=!0,mxTooltipHandler.prototype.isEnabled=function(){return this.enabled},mxTooltipHandler.prototype.setEnabled=function(e){this.enabled=e},mxTooltipHandler.prototype.isHideOnHover=function(){return this.hideOnHover},mxTooltipHandler.prototype.setHideOnHover=function(e){this.hideOnHover=e},mxTooltipHandler.prototype.init=function(){null!=document.body&&(this.div=document.createElement("div"),this.div.className="mxTooltip",this.div.style.visibility="hidden",document.body.appendChild(this.div),mxEvent.addGestureListeners(this.div,mxUtils.bind(this,function(e){this.hideTooltip()})))},mxTooltipHandler.prototype.mouseDown=function(e,t){this.reset(t,!1),this.hideTooltip()},mxTooltipHandler.prototype.mouseMove=function(e,t){t.getX()==this.lastX&&t.getY()==this.lastY||(this.reset(t,!0),(this.isHideOnHover()||t.getState()!=this.state||t.getSource()!=this.node&&(!this.stateSource||null!=t.getState()&&this.stateSource==(t.isSource(t.getState().shape)||!t.isSource(t.getState().text))))&&this.hideTooltip()),this.lastX=t.getX(),this.lastY=t.getY()},mxTooltipHandler.prototype.mouseUp=function(e,t){this.reset(t,!0),this.hideTooltip()},mxTooltipHandler.prototype.resetTimer=function(){null!=this.thread&&(window.clearTimeout(this.thread),this.thread=null)},mxTooltipHandler.prototype.reset=function(e,t){if((!this.ignoreTouchEvents||mxEvent.isMouseEvent(e.getEvent()))&&(this.resetTimer(),t&&this.isEnabled()&&null!=e.getState()&&(null==this.div||"hidden"==this.div.style.visibility))){var n=e.getState(),o=e.getSource(),s=e.getX(),i=e.getY(),a=e.isSource(n.shape)||e.isSource(n.text);this.thread=window.setTimeout(mxUtils.bind(this,function(){if(!this.graph.isEditing()&&!this.graph.popupMenuHandler.isMenuShowing()&&!this.graph.isMouseDown){var l=this.graph.getTooltip(n,o,s,i);this.show(l,s,i),this.state=n,this.node=o,this.stateSource=a}}),this.delay)}},mxTooltipHandler.prototype.hide=function(){this.resetTimer(),this.hideTooltip()},mxTooltipHandler.prototype.hideTooltip=function(){null!=this.div&&(this.div.style.visibility="hidden")},mxTooltipHandler.prototype.show=function(e,t,n){if(!this.destroyed&&null!=e&&e.length>0){null==this.div&&this.init();var o=mxUtils.getScrollOrigin();this.div.style.zIndex=this.zIndex,this.div.style.left=t+o.x+"px",this.div.style.top=n+mxConstants.TOOLTIP_VERTICAL_OFFSET+o.y+"px",mxUtils.isNode(e)?(this.div.innerHTML="",this.div.appendChild(e)):this.div.innerHTML=e.replace(/\n/g,"<br>"),this.div.style.visibility="",mxUtils.fit(this.div)}},mxTooltipHandler.prototype.destroy=function(){this.destroyed||(this.graph.removeMouseListener(this),mxEvent.release(this.div),null!=this.div&&null!=this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.destroyed=!0,this.div=null)},exports.mxTooltipHandler=mxTooltipHandler,mxUtils.extend(mxCellTracker,mxCellMarker),mxCellTracker.prototype.mouseDown=function(e,t){},mxCellTracker.prototype.mouseMove=function(e,t){this.isEnabled()&&this.process(t)},mxCellTracker.prototype.mouseUp=function(e,t){},mxCellTracker.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.graph.removeMouseListener(this),mxCellMarker.prototype.destroy.apply(this))},exports.mxCellTracker=mxCellTracker,mxCellHighlight.prototype.keepOnTop=!1,mxCellHighlight.prototype.graph=!0,mxCellHighlight.prototype.state=null,mxCellHighlight.prototype.spacing=2,mxCellHighlight.prototype.resetHandler=null,mxCellHighlight.prototype.setHighlightColor=function(e){this.highlightColor=e,null!=this.shape&&(this.shape.stroke=e)},mxCellHighlight.prototype.drawHighlight=function(){this.shape=this.createShape(),this.repaint(),this.keepOnTop||this.shape.node.parentNode.firstChild==this.shape.node||this.shape.node.parentNode.insertBefore(this.shape.node,this.shape.node.parentNode.firstChild)},mxCellHighlight.prototype.createShape=function(){var e=this.graph.cellRenderer.createShape(this.state);return e.svgStrokeTolerance=this.graph.tolerance,e.scale=this.state.view.scale,e.outline=!0,e.points=this.state.absolutePoints,e.apply(this.state),e.strokewidth=this.strokeWidth/this.state.view.scale/this.state.view.scale,e.arrowStrokewidth=this.strokeWidth,e.stroke=this.highlightColor,e.opacity=this.opacity,e.isDashed=this.dashed,e.isShadow=!1,e.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,e.init(this.graph.getView().getOverlayPane()),mxEvent.redirectMouseEvents(e.node,this.graph,this.state),this.graph.dialect!=mxConstants.DIALECT_SVG?e.pointerEvents=!1:e.svgPointerEvents="stroke",e},mxCellHighlight.prototype.repaint=function(){null!=this.state&&null!=this.shape&&(this.graph.model.isEdge(this.state.cell)?this.shape.points=this.state.absolutePoints:(this.shape.bounds=new mxRectangle(this.state.x-this.spacing,this.state.y-this.spacing,this.state.width+2*this.spacing,this.state.height+2*this.spacing),this.shape.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0")),null!=this.state.shape&&this.shape.setCursor(this.state.shape.getCursor()),(mxClient.IS_QUIRKS||8==document.documentMode)&&("transparent"==this.shape.stroke?(this.shape.stroke="white",this.shape.opacity=1):this.shape.opacity=this.opacity),this.shape.redraw())},mxCellHighlight.prototype.hide=function(){this.highlight(null)},mxCellHighlight.prototype.highlight=function(e){this.state!=e&&(null!=this.shape&&(this.shape.destroy(),this.shape=null),this.state=e,null!=this.state&&this.drawHighlight())},mxCellHighlight.prototype.isHighlightAt=function(e,t){var n=!1;if(null!=this.shape&&null!=document.elementFromPoint&&!mxClient.IS_QUIRKS)for(var o=document.elementFromPoint(e,t);null!=o;){if(o==this.shape.node){n=!0;break}o=o.parentNode}return n},mxCellHighlight.prototype.destroy=function(){this.graph.getView().removeListener(this.resetHandler),this.graph.getView().removeListener(this.repaintHandler),this.graph.getModel().removeListener(this.repaintHandler),null!=this.shape&&(this.shape.destroy(),this.shape=null)},exports.mxCellHighlight=mxCellHighlight,mxDefaultKeyHandler.prototype.editor=null,mxDefaultKeyHandler.prototype.handler=null,mxDefaultKeyHandler.prototype.bindAction=function(e,t,n){var o=mxUtils.bind(this,function(){this.editor.execute(t)});n?this.handler.bindControlKey(e,o):this.handler.bindKey(e,o)},mxDefaultKeyHandler.prototype.destroy=function(){this.handler.destroy(),this.handler=null},exports.mxDefaultKeyHandler=mxDefaultKeyHandler,mxDefaultPopupMenu.prototype.imageBasePath=null,mxDefaultPopupMenu.prototype.config=null,mxDefaultPopupMenu.prototype.createMenu=function(e,t,n,o){if(null!=this.config){var s=this.createConditions(e,n,o);this.addItems(e,t,n,o,s,this.config.firstChild,null)}},mxDefaultPopupMenu.prototype.addItems=function(e,t,n,o,s,i,a){for(var l=!1;null!=i;){if("add"==i.nodeName){var r=i.getAttribute("if");if(null==r||s[r]){var d=i.getAttribute("as");d=mxResources.get(d)||d;var u=mxUtils.eval(mxUtils.getTextContent(i)),g=i.getAttribute("action"),f=i.getAttribute("icon"),v=i.getAttribute("iconCls"),x=i.getAttribute("enabled-if"),z=null==x||s[x];l&&(t.addSeparator(a),l=!1),null!=f&&this.imageBasePath&&(f=this.imageBasePath+f);var b=this.addAction(t,e,d,f,u,g,n,a,v,z);this.addItems(e,t,n,o,s,i.firstChild,b)}}else"separator"==i.nodeName&&(l=!0);i=i.nextSibling}},mxDefaultPopupMenu.prototype.addAction=function(e,t,n,o,s,i,a,l,r,d){return e.addItem(n,o,function(g){"function"==typeof s&&s.call(t,t,a,g),null!=i&&t.execute(i,a,g)},l,r,d)},mxDefaultPopupMenu.prototype.createConditions=function(e,t,n){var o=e.graph.getModel(),s=o.getChildCount(t),i=[];i.nocell=null==t,i.ncells=e.graph.getSelectionCount()>1,i.notRoot=o.getRoot()!=o.getParent(e.graph.getDefaultParent()),i.cell=null!=t;var a=null!=t&&1==e.graph.getSelectionCount();i.nonEmpty=a&&s>0,i.expandable=a&&e.graph.isCellFoldable(t,!1),i.collapsable=a&&e.graph.isCellFoldable(t,!0),i.validRoot=a&&e.graph.isValidRoot(t),i.emptyValidRoot=i.validRoot&&0==s,i.swimlane=a&&e.graph.isSwimlane(t);for(var l=this.config.getElementsByTagName("condition"),r=0;r<l.length;r++){var d=mxUtils.eval(mxUtils.getTextContent(l[r])),u=l[r].getAttribute("name");null!=u&&"function"==typeof d&&(i[u]=d(e,t,n))}return i},exports.mxDefaultPopupMenu=mxDefaultPopupMenu,mxDefaultToolbar.prototype.editor=null,mxDefaultToolbar.prototype.toolbar=null,mxDefaultToolbar.prototype.resetHandler=null,mxDefaultToolbar.prototype.spacing=4,mxDefaultToolbar.prototype.connectOnDrop=!1,mxDefaultToolbar.prototype.init=function(e){null!=e&&(this.toolbar=new mxToolbar(e),this.toolbar.addListener(mxEvent.SELECT,mxUtils.bind(this,function(t,n){var o=n.getProperty("function");this.editor.insertFunction=null!=o?mxUtils.bind(this,function(){o.apply(this,arguments),this.toolbar.resetMode()}):null})),this.resetHandler=mxUtils.bind(this,function(){null!=this.toolbar&&this.toolbar.resetMode(!0)}),this.editor.graph.addListener(mxEvent.DOUBLE_CLICK,this.resetHandler),this.editor.addListener(mxEvent.ESCAPE,this.resetHandler))},mxDefaultToolbar.prototype.addItem=function(e,t,n,o){var s=mxUtils.bind(this,function(){null!=n&&n.length>0&&this.editor.execute(n)});return this.toolbar.addItem(e,t,s,o)},mxDefaultToolbar.prototype.addSeparator=function(e){this.toolbar.addSeparator(e=e||mxClient.imageBasePath+"/separator.gif")},mxDefaultToolbar.prototype.addCombo=function(){return this.toolbar.addCombo()},mxDefaultToolbar.prototype.addActionCombo=function(e){return this.toolbar.addActionCombo(e)},mxDefaultToolbar.prototype.addActionOption=function(e,t,n){var o=mxUtils.bind(this,function(){this.editor.execute(n)});this.addOption(e,t,o)},mxDefaultToolbar.prototype.addOption=function(e,t,n){return this.toolbar.addOption(e,t,n)},mxDefaultToolbar.prototype.addMode=function(e,t,n,o,s){var i=mxUtils.bind(this,function(){this.editor.setMode(n),null!=s&&s(this.editor)});return this.toolbar.addSwitchMode(e,t,i,o)},mxDefaultToolbar.prototype.addPrototype=function(e,t,n,o,s,i){var a=mxUtils.bind(this,function(){return"function"==typeof n?n():null!=n?this.editor.graph.cloneCells([n])[0]:null}),l=mxUtils.bind(this,function(u,g){"function"==typeof s?s(this.editor,a(),u,g):this.drop(a(),u,g),this.toolbar.resetMode(),mxEvent.consume(u)}),r=this.toolbar.addMode(e,t,l,o,null,i);return this.installDropHandler(r,function(u,g,f){l(g,f)}),r},mxDefaultToolbar.prototype.drop=function(e,t,n){var o=this.editor.graph,s=o.getModel();if(null!=n&&!s.isEdge(n)&&this.connectOnDrop&&o.isCellConnectable(n))this.connect(e,t,n);else{for(;null!=n&&!o.isValidDropTarget(n,[e],t);)n=s.getParent(n);this.insert(e,t,n)}},mxDefaultToolbar.prototype.insert=function(e,t,n){var o=this.editor.graph;if(o.canImportCell(e)){var s=mxEvent.getClientX(t),i=mxEvent.getClientY(t),a=mxUtils.convertPoint(o.container,s,i);return o.isSplitEnabled()&&o.isSplitTarget(n,[e],t)?o.splitEdge(n,[e],null,a.x,a.y):this.editor.addVertex(n,e,a.x,a.y)}return null},mxDefaultToolbar.prototype.connect=function(e,t,n){var o=this.editor.graph,s=o.getModel();if(null!=n&&o.isCellConnectable(e)&&o.isEdgeValid(null,n,e)){var i=null;s.beginUpdate();try{var a=s.getGeometry(n),l=s.getGeometry(e).clone();l.x=a.x+(a.width-l.width)/2,l.y=a.y+(a.height-l.height)/2;var r=this.spacing*o.gridSize,d=20*s.getDirectedEdgeCount(n,!0);this.editor.horizontalFlow?l.x+=(l.width+a.width)/2+r+d:l.y+=(l.height+a.height)/2+r+d,e.setGeometry(l);var u=s.getParent(n);if(o.addCell(e,u),o.constrainChild(e),i=this.editor.createEdge(n,e),null==s.getGeometry(i)){var g=new mxGeometry;g.relative=!0,s.setGeometry(i,g)}o.addEdge(i,u,n,e)}finally{s.endUpdate()}o.setSelectionCells([e,i]),o.scrollCellToVisible(e)}},mxDefaultToolbar.prototype.installDropHandler=function(e,t){var n=document.createElement("img");n.setAttribute("src",e.getAttribute("src"));var o=mxUtils.bind(this,function(s){n.style.width=2*e.offsetWidth+"px",n.style.height=2*e.offsetHeight+"px",mxUtils.makeDraggable(e,this.editor.graph,t,n),mxEvent.removeListener(n,"load",o)});mxClient.IS_IE?o():mxEvent.addListener(n,"load",o)},mxDefaultToolbar.prototype.destroy=function(){null!=this.resetHandler&&(this.editor.graph.removeListener("dblclick",this.resetHandler),this.editor.removeListener("escape",this.resetHandler),this.resetHandler=null),null!=this.toolbar&&(this.toolbar.destroy(),this.toolbar=null)},exports.mxDefaultToolbar=mxDefaultToolbar,mxLoadResources&&mxResources.add(mxClient.basePath+"/resources/editor"),mxEditor.prototype=new mxEventSource,mxEditor.prototype.constructor=mxEditor,mxEditor.prototype.askZoomResource="none"!=mxClient.language?"askZoom":"",mxEditor.prototype.lastSavedResource="none"!=mxClient.language?"lastSaved":"",mxEditor.prototype.currentFileResource="none"!=mxClient.language?"currentFile":"",mxEditor.prototype.propertiesResource="none"!=mxClient.language?"properties":"",mxEditor.prototype.tasksResource="none"!=mxClient.language?"tasks":"",mxEditor.prototype.helpResource="none"!=mxClient.language?"help":"",mxEditor.prototype.outlineResource="none"!=mxClient.language?"outline":"",mxEditor.prototype.outline=null,mxEditor.prototype.graph=null,mxEditor.prototype.graphRenderHint=null,mxEditor.prototype.toolbar=null,mxEditor.prototype.status=null,mxEditor.prototype.popupHandler=null,mxEditor.prototype.undoManager=null,mxEditor.prototype.keyHandler=null,mxEditor.prototype.actions=null,mxEditor.prototype.dblClickAction="edit",mxEditor.prototype.swimlaneRequired=!1,mxEditor.prototype.disableContextMenu=!0,mxEditor.prototype.insertFunction=null,mxEditor.prototype.forcedInserting=!1,mxEditor.prototype.templates=null,mxEditor.prototype.defaultEdge=null,mxEditor.prototype.defaultEdgeStyle=null,mxEditor.prototype.defaultGroup=null,mxEditor.prototype.groupBorderSize=null,mxEditor.prototype.filename=null,mxEditor.prototype.linefeed="&#xa;",mxEditor.prototype.postParameterName="xml",mxEditor.prototype.escapePostData=!0,mxEditor.prototype.urlPost=null,mxEditor.prototype.urlImage=null,mxEditor.prototype.horizontalFlow=!1,mxEditor.prototype.layoutDiagram=!1,mxEditor.prototype.swimlaneSpacing=0,mxEditor.prototype.maintainSwimlanes=!1,mxEditor.prototype.layoutSwimlanes=!1,mxEditor.prototype.cycleAttributeValues=null,mxEditor.prototype.cycleAttributeIndex=0,mxEditor.prototype.cycleAttributeName="fillColor",mxEditor.prototype.tasks=null,mxEditor.prototype.tasksWindowImage=null,mxEditor.prototype.tasksTop=20,mxEditor.prototype.help=null,mxEditor.prototype.helpWindowImage=null,mxEditor.prototype.urlHelp=null,mxEditor.prototype.helpWidth=300,mxEditor.prototype.helpHeight=260,mxEditor.prototype.propertiesWidth=240,mxEditor.prototype.propertiesHeight=null,mxEditor.prototype.movePropertiesDialog=!1,mxEditor.prototype.validating=!1,mxEditor.prototype.modified=!1,mxEditor.prototype.isModified=function(){return this.modified},mxEditor.prototype.setModified=function(e){this.modified=e},mxEditor.prototype.addActions=function(){this.addAction("save",function(e){e.save()}),this.addAction("print",function(e){new mxPrintPreview(e.graph,1).open()}),this.addAction("show",function(e){mxUtils.show(e.graph,null,10,10)}),this.addAction("exportImage",function(e){var t=e.getUrlImage();if(null==t||mxClient.IS_LOCAL)e.execute("show");else{var n=mxUtils.getViewXml(e.graph,1),o=mxUtils.getXml(n,"\n");mxUtils.submit(t,e.postParameterName+"="+encodeURIComponent(o),document,"_blank")}}),this.addAction("refresh",function(e){e.graph.refresh()}),this.addAction("cut",function(e){e.graph.isEnabled()&&mxClipboard.cut(e.graph)}),this.addAction("copy",function(e){e.graph.isEnabled()&&mxClipboard.copy(e.graph)}),this.addAction("paste",function(e){e.graph.isEnabled()&&mxClipboard.paste(e.graph)}),this.addAction("delete",function(e){e.graph.isEnabled()&&e.graph.removeCells()}),this.addAction("group",function(e){e.graph.isEnabled()&&e.graph.setSelectionCell(e.groupCells())}),this.addAction("ungroup",function(e){e.graph.isEnabled()&&e.graph.setSelectionCells(e.graph.ungroupCells())}),this.addAction("removeFromParent",function(e){e.graph.isEnabled()&&e.graph.removeCellsFromParent()}),this.addAction("undo",function(e){e.graph.isEnabled()&&e.undo()}),this.addAction("redo",function(e){e.graph.isEnabled()&&e.redo()}),this.addAction("zoomIn",function(e){e.graph.zoomIn()}),this.addAction("zoomOut",function(e){e.graph.zoomOut()}),this.addAction("actualSize",function(e){e.graph.zoomActual()}),this.addAction("fit",function(e){e.graph.fit()}),this.addAction("showProperties",function(e,t){e.showProperties(t)}),this.addAction("selectAll",function(e){e.graph.isEnabled()&&e.graph.selectAll()}),this.addAction("selectNone",function(e){e.graph.isEnabled()&&e.graph.clearSelection()}),this.addAction("selectVertices",function(e){e.graph.isEnabled()&&e.graph.selectVertices()}),this.addAction("selectEdges",function(e){e.graph.isEnabled()&&e.graph.selectEdges()}),this.addAction("edit",function(e,t){e.graph.isEnabled()&&e.graph.isCellEditable(t)&&e.graph.startEditingAtCell(t)}),this.addAction("toBack",function(e,t){e.graph.isEnabled()&&e.graph.orderCells(!0)}),this.addAction("toFront",function(e,t){e.graph.isEnabled()&&e.graph.orderCells(!1)}),this.addAction("enterGroup",function(e,t){e.graph.enterGroup(t)}),this.addAction("exitGroup",function(e){e.graph.exitGroup()}),this.addAction("home",function(e){e.graph.home()}),this.addAction("selectPrevious",function(e){e.graph.isEnabled()&&e.graph.selectPreviousCell()}),this.addAction("selectNext",function(e){e.graph.isEnabled()&&e.graph.selectNextCell()}),this.addAction("selectParent",function(e){e.graph.isEnabled()&&e.graph.selectParentCell()}),this.addAction("selectChild",function(e){e.graph.isEnabled()&&e.graph.selectChildCell()}),this.addAction("collapse",function(e){e.graph.isEnabled()&&e.graph.foldCells(!0)}),this.addAction("collapseAll",function(e){if(e.graph.isEnabled()){var t=e.graph.getChildVertices();e.graph.foldCells(!0,!1,t)}}),this.addAction("expand",function(e){e.graph.isEnabled()&&e.graph.foldCells(!1)}),this.addAction("expandAll",function(e){if(e.graph.isEnabled()){var t=e.graph.getChildVertices();e.graph.foldCells(!1,!1,t)}}),this.addAction("bold",function(e){e.graph.isEnabled()&&e.graph.toggleCellStyleFlags(mxConstants.STYLE_FONTSTYLE,mxConstants.FONT_BOLD)}),this.addAction("italic",function(e){e.graph.isEnabled()&&e.graph.toggleCellStyleFlags(mxConstants.STYLE_FONTSTYLE,mxConstants.FONT_ITALIC)}),this.addAction("underline",function(e){e.graph.isEnabled()&&e.graph.toggleCellStyleFlags(mxConstants.STYLE_FONTSTYLE,mxConstants.FONT_UNDERLINE)}),this.addAction("alignCellsLeft",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants.ALIGN_LEFT)}),this.addAction("alignCellsCenter",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants.ALIGN_CENTER)}),this.addAction("alignCellsRight",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants.ALIGN_RIGHT)}),this.addAction("alignCellsTop",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants.ALIGN_TOP)}),this.addAction("alignCellsMiddle",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants.ALIGN_MIDDLE)}),this.addAction("alignCellsBottom",function(e){e.graph.isEnabled()&&e.graph.alignCells(mxConstants.ALIGN_BOTTOM)}),this.addAction("alignFontLeft",function(e){e.graph.setCellStyles(mxConstants.STYLE_ALIGN,mxConstants.ALIGN_LEFT)}),this.addAction("alignFontCenter",function(e){e.graph.isEnabled()&&e.graph.setCellStyles(mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER)}),this.addAction("alignFontRight",function(e){e.graph.isEnabled()&&e.graph.setCellStyles(mxConstants.STYLE_ALIGN,mxConstants.ALIGN_RIGHT)}),this.addAction("alignFontTop",function(e){e.graph.isEnabled()&&e.graph.setCellStyles(mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_TOP)}),this.addAction("alignFontMiddle",function(e){e.graph.isEnabled()&&e.graph.setCellStyles(mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE)}),this.addAction("alignFontBottom",function(e){e.graph.isEnabled()&&e.graph.setCellStyles(mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_BOTTOM)}),this.addAction("zoom",function(e){var t=100*e.graph.getView().scale,n=parseFloat(mxUtils.prompt(mxResources.get(e.askZoomResource)||e.askZoomResource,t))/100;isNaN(n)||e.graph.getView().setScale(n)}),this.addAction("toggleTasks",function(e){null!=e.tasks?e.tasks.setVisible(!e.tasks.isVisible()):e.showTasks()}),this.addAction("toggleHelp",function(e){null!=e.help?e.help.setVisible(!e.help.isVisible()):e.showHelp()}),this.addAction("toggleOutline",function(e){null==e.outline?e.showOutline():e.outline.setVisible(!e.outline.isVisible())}),this.addAction("toggleConsole",function(e){mxLog.setVisible(!mxLog.isVisible())})},mxEditor.prototype.configure=function(e){null!=e&&(new mxCodec(e.ownerDocument).decode(e,this),this.resetHistory())},mxEditor.prototype.resetFirstTime=function(){document.cookie="mxgraph=seen; expires=Fri, 27 Jul 2001 02:47:11 UTC; path=/"},mxEditor.prototype.resetHistory=function(){this.lastSnapshot=(new Date).getTime(),this.undoManager.clear(),this.ignoredChanges=0,this.setModified(!1)},mxEditor.prototype.addAction=function(e,t){this.actions[e]=t},mxEditor.prototype.execute=function(e,t,n){var o=this.actions[e];if(null!=o)try{var s=arguments;s[0]=this,o.apply(this,s)}catch(i){throw mxUtils.error("Cannot execute "+e+": "+i.message,280,!0),i}else mxUtils.error("Cannot find action "+e,280,!0)},mxEditor.prototype.addTemplate=function(e,t){this.templates[e]=t},mxEditor.prototype.getTemplate=function(e){return this.templates[e]},mxEditor.prototype.createGraph=function(){var e=new mxGraph(null,null,this.graphRenderHint);return e.setTooltips(!0),e.setPanning(!0),this.installDblClickHandler(e),this.installUndoHandler(e),this.installDrillHandler(e),this.installChangeHandler(e),this.installInsertHandler(e),e.popupMenuHandler.factoryMethod=mxUtils.bind(this,function(t,n,o){return this.createPopupMenu(t,n,o)}),e.connectionHandler.factoryMethod=mxUtils.bind(this,function(t,n){return this.createEdge(t,n)}),this.createSwimlaneManager(e),this.createLayoutManager(e),e},mxEditor.prototype.createSwimlaneManager=function(e){var t=new mxSwimlaneManager(e,!1);return t.isHorizontal=mxUtils.bind(this,function(){return this.horizontalFlow}),t.isEnabled=mxUtils.bind(this,function(){return this.maintainSwimlanes}),t},mxEditor.prototype.createLayoutManager=function(e){var t=new mxLayoutManager(e),n=this;return t.getLayout=function(o){var s=null,i=n.graph.getModel();return null!=i.getParent(o)&&(n.layoutSwimlanes&&e.isSwimlane(o)?(null==n.swimlaneLayout&&(n.swimlaneLayout=n.createSwimlaneLayout()),s=n.swimlaneLayout):n.layoutDiagram&&(e.isValidRoot(o)||null==i.getParent(i.getParent(o)))&&(null==n.diagramLayout&&(n.diagramLayout=n.createDiagramLayout()),s=n.diagramLayout)),s},t},mxEditor.prototype.setGraphContainer=function(e){null==this.graph.container&&(this.graph.init(e),this.rubberband=new mxRubberband(this.graph),this.disableContextMenu&&mxEvent.disableContextMenu(e),mxClient.IS_QUIRKS&&new mxDivResizer(e))},mxEditor.prototype.installDblClickHandler=function(e){e.addListener(mxEvent.DOUBLE_CLICK,mxUtils.bind(this,function(t,n){var o=n.getProperty("cell");null!=o&&e.isEnabled()&&null!=this.dblClickAction&&(this.execute(this.dblClickAction,o),n.consume())}))},mxEditor.prototype.installUndoHandler=function(e){var t=mxUtils.bind(this,function(o,s){var i=s.getProperty("edit");this.undoManager.undoableEditHappened(i)});e.getModel().addListener(mxEvent.UNDO,t),e.getView().addListener(mxEvent.UNDO,t);var n=function(o,s){var i=s.getProperty("edit").changes;e.setSelectionCells(e.getSelectionCellsForChanges(i))};this.undoManager.addListener(mxEvent.UNDO,n),this.undoManager.addListener(mxEvent.REDO,n)},mxEditor.prototype.installDrillHandler=function(e){var t=mxUtils.bind(this,function(n){this.fireEvent(new mxEventObject(mxEvent.ROOT))});e.getView().addListener(mxEvent.DOWN,t),e.getView().addListener(mxEvent.UP,t)},mxEditor.prototype.installChangeHandler=function(e){var t=mxUtils.bind(this,function(n,o){this.setModified(!0),1==this.validating&&e.validateGraph();for(var s=o.getProperty("edit").changes,i=0;i<s.length;i++){var a=s[i];if(a instanceof mxRootChange||a instanceof mxValueChange&&a.cell==this.graph.model.root||a instanceof mxCellAttributeChange&&a.cell==this.graph.model.root){this.fireEvent(new mxEventObject(mxEvent.ROOT));break}}});e.getModel().addListener(mxEvent.CHANGE,t)},mxEditor.prototype.installInsertHandler=function(e){var t=this;e.addMouseListener({mouseDown:function(o,s){null==t.insertFunction||s.isPopupTrigger()||!t.forcedInserting&&null!=s.getState()||(t.graph.clearSelection(),t.insertFunction(s.getEvent(),s.getCell()),this.isActive=!0,s.consume())},mouseMove:function(o,s){this.isActive&&s.consume()},mouseUp:function(o,s){this.isActive&&(this.isActive=!1,s.consume())}})},mxEditor.prototype.createDiagramLayout=function(){var e=this.graph.gridSize,t=new mxStackLayout(this.graph,!this.horizontalFlow,this.swimlaneSpacing,2*e,2*e);return t.isVertexIgnored=function(n){return!t.graph.isSwimlane(n)},t},mxEditor.prototype.createSwimlaneLayout=function(){return new mxCompactTreeLayout(this.graph,this.horizontalFlow)},mxEditor.prototype.createToolbar=function(){return new mxDefaultToolbar(null,this)},mxEditor.prototype.setToolbarContainer=function(e){this.toolbar.init(e),mxClient.IS_QUIRKS&&new mxDivResizer(e)},mxEditor.prototype.setStatusContainer=function(e){null==this.status&&(this.status=e,this.addListener(mxEvent.SAVE,mxUtils.bind(this,function(){var t=(new Date).toLocaleString();this.setStatus((mxResources.get(this.lastSavedResource)||this.lastSavedResource)+": "+t)})),this.addListener(mxEvent.OPEN,mxUtils.bind(this,function(){this.setStatus((mxResources.get(this.currentFileResource)||this.currentFileResource)+": "+this.filename)})),mxClient.IS_QUIRKS&&new mxDivResizer(e))},mxEditor.prototype.setStatus=function(e){null!=this.status&&null!=e&&(this.status.innerHTML=e)},mxEditor.prototype.setTitleContainer=function(e){this.addListener(mxEvent.ROOT,mxUtils.bind(this,function(t){e.innerHTML=this.getTitle()})),mxClient.IS_QUIRKS&&new mxDivResizer(e)},mxEditor.prototype.treeLayout=function(e,t){null!=e&&new mxCompactTreeLayout(this.graph,t).execute(e)},mxEditor.prototype.getTitle=function(){for(var e="",t=this.graph,n=t.getCurrentRoot();null!=n&&null!=t.getModel().getParent(t.getModel().getParent(n));)t.isValidRoot(n)&&(e=" > "+t.convertValueToString(n)+e),n=t.getModel().getParent(n);return this.getRootTitle()+e},mxEditor.prototype.getRootTitle=function(){var e=this.graph.getModel().getRoot();return this.graph.convertValueToString(e)},mxEditor.prototype.undo=function(){this.undoManager.undo()},mxEditor.prototype.redo=function(){this.undoManager.redo()},mxEditor.prototype.groupCells=function(){var e=null!=this.groupBorderSize?this.groupBorderSize:this.graph.gridSize;return this.graph.groupCells(this.createGroup(),e)},mxEditor.prototype.createGroup=function(){return this.graph.getModel().cloneCell(this.defaultGroup)},mxEditor.prototype.open=function(e){if(null!=e){var t=mxUtils.load(e).getXml();this.readGraphModel(t.documentElement),this.filename=e,this.fireEvent(new mxEventObject(mxEvent.OPEN,"filename",e))}},mxEditor.prototype.readGraphModel=function(e){new mxCodec(e.ownerDocument).decode(e,this.graph.getModel()),this.resetHistory()},mxEditor.prototype.save=function(e,t){if(null!=(e=e||this.getUrlPost())&&e.length>0){var n=this.writeGraphModel(t);this.postDiagram(e,n),this.setModified(!1)}this.fireEvent(new mxEventObject(mxEvent.SAVE,"url",e))},mxEditor.prototype.postDiagram=function(e,t){this.escapePostData&&(t=encodeURIComponent(t)),mxUtils.post(e,this.postParameterName+"="+t,mxUtils.bind(this,function(n){this.fireEvent(new mxEventObject(mxEvent.POST,"request",n,"url",e,"data",t))}))},mxEditor.prototype.writeGraphModel=function(e){e=null!=e?e:this.linefeed;var n=(new mxCodec).encode(this.graph.getModel());return mxUtils.getXml(n,e)},mxEditor.prototype.getUrlPost=function(){return this.urlPost},mxEditor.prototype.getUrlImage=function(){return this.urlImage},mxEditor.prototype.swapStyles=function(e,t){var n=this.graph.getStylesheet().styles[t];this.graph.getView().getStylesheet().putCellStyle(t,this.graph.getStylesheet().styles[e]),this.graph.getStylesheet().putCellStyle(e,n),this.graph.refresh()},mxEditor.prototype.showProperties=function(e){if(null==(e=e||this.graph.getSelectionCell())&&null==(e=this.graph.getCurrentRoot())&&(e=this.graph.getModel().getRoot()),null!=e){this.graph.stopEditing(!0);var t=mxUtils.getOffset(this.graph.container),n=t.x+10,o=t.y;if(null==this.properties||this.movePropertiesDialog){var s=this.graph.getCellBounds(e);null!=s&&(n+=s.x+Math.min(200,s.width),o+=s.y)}else n=this.properties.getX(),o=this.properties.getY();this.hideProperties();var i=this.createProperties(e);null!=i&&(this.properties=new mxWindow(mxResources.get(this.propertiesResource)||this.propertiesResource,i,n,o,this.propertiesWidth,this.propertiesHeight,!1),this.properties.setVisible(!0))}},mxEditor.prototype.isPropertiesVisible=function(){return null!=this.properties},mxEditor.prototype.createProperties=function(e){var t=this.graph.getModel(),n=t.getValue(e);if(mxUtils.isNode(n)){var o=new mxForm("properties");o.addText("ID",e.getId()).setAttribute("readonly","true");var i=null,a=null,l=null,r=null,d=null;t.isVertex(e)&&null!=(i=t.getGeometry(e))&&(a=o.addText("top",i.y),l=o.addText("left",i.x),r=o.addText("width",i.width),d=o.addText("height",i.height));for(var u=t.getStyle(e),g=o.addText("Style",u||""),f=n.attributes,v=[],x=0;x<f.length;x++)v[x]=o.addTextarea(f[x].nodeName,f[x].value,"label"==f[x].nodeName?4:2);var b=mxUtils.bind(this,function(){this.hideProperties(),t.beginUpdate();try{null!=i&&((i=i.clone()).x=parseFloat(l.value),i.y=parseFloat(a.value),i.width=parseFloat(r.value),i.height=parseFloat(d.value),t.setGeometry(e,i)),t.setStyle(e,g.value.length>0?g.value:null);for(var H=0;H<f.length;H++){var T=new mxCellAttributeChange(e,f[H].nodeName,v[H].value);t.execute(T)}this.graph.isAutoSizeCell(e)&&this.graph.updateCellSize(e)}finally{t.endUpdate()}}),_=mxUtils.bind(this,function(){this.hideProperties()});return o.addButtons(b,_),o.table}return null},mxEditor.prototype.hideProperties=function(){null!=this.properties&&(this.properties.destroy(),this.properties=null)},mxEditor.prototype.showTasks=function(){if(null==this.tasks){var e=document.createElement("div");e.style.padding="4px",e.style.paddingLeft="20px";var t=document.body.clientWidth,n=new mxWindow(mxResources.get(this.tasksResource)||this.tasksResource,e,t-220,this.tasksTop,200);n.setClosable(!0),n.destroyOnClose=!1;var o=mxUtils.bind(this,function(s){mxEvent.release(e),e.innerHTML="",this.createTasks(e)});this.graph.getModel().addListener(mxEvent.CHANGE,o),this.graph.getSelectionModel().addListener(mxEvent.CHANGE,o),this.graph.addListener(mxEvent.ROOT,o),null!=this.tasksWindowImage&&n.setImage(this.tasksWindowImage),this.tasks=n,this.createTasks(e)}this.tasks.setVisible(!0)},mxEditor.prototype.refreshTasks=function(e){null!=this.tasks&&(mxEvent.release(e=this.tasks.content),e.innerHTML="",this.createTasks(e))},mxEditor.prototype.createTasks=function(e){},mxEditor.prototype.showHelp=function(e){if(null==this.help){var t=document.createElement("iframe");t.setAttribute("src",mxResources.get("urlHelp")||this.urlHelp),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("frameBorder","0"),t.style.backgroundColor="white";var n=document.body.clientWidth,o=document.body.clientHeight||document.documentElement.clientHeight,s=new mxWindow(mxResources.get(this.helpResource)||this.helpResource,t,(n-this.helpWidth)/2,(o-this.helpHeight)/3,this.helpWidth,this.helpHeight);if(s.setMaximizable(!0),s.setClosable(!0),s.destroyOnClose=!1,s.setResizable(!0),null!=this.helpWindowImage&&s.setImage(this.helpWindowImage),mxClient.IS_NS){var i=function(a){t.setAttribute("height",s.div.offsetHeight-26+"px")};s.addListener(mxEvent.RESIZE_END,i),s.addListener(mxEvent.MAXIMIZE,i),s.addListener(mxEvent.NORMALIZE,i),s.addListener(mxEvent.SHOW,i)}this.help=s}this.help.setVisible(!0)},mxEditor.prototype.showOutline=function(){if(null==this.outline){var t=document.createElement("div");t.style.overflow="hidden",t.style.position="relative",t.style.width="100%",t.style.height="100%",t.style.background="white",t.style.cursor="move",8==document.documentMode&&(t.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=100)");var n=new mxWindow(mxResources.get(this.outlineResource)||this.outlineResource,t,600,480,200,200,!1),o=new mxOutline(this.graph,t);n.setClosable(!0),n.setResizable(!0),n.destroyOnClose=!1,n.addListener(mxEvent.RESIZE_END,function(){o.update()}),this.outline=n,this.outline.outline=o}this.outline.setVisible(!0),this.outline.outline.update(!0)},mxEditor.prototype.setMode=function(e){"select"==e?(this.graph.panningHandler.useLeftButtonForPanning=!1,this.graph.setConnectable(!1)):"connect"==e?(this.graph.panningHandler.useLeftButtonForPanning=!1,this.graph.setConnectable(!0)):"pan"==e&&(this.graph.panningHandler.useLeftButtonForPanning=!0,this.graph.setConnectable(!1))},mxEditor.prototype.createPopupMenu=function(e,t,n){this.popupHandler.createMenu(this,e,t,n)},mxEditor.prototype.createEdge=function(e,t){var n=null;if(null!=this.defaultEdge)n=this.graph.getModel().cloneCell(this.defaultEdge);else{(n=new mxCell("")).setEdge(!0);var s=new mxGeometry;s.relative=!0,n.setGeometry(s)}var i=this.getEdgeStyle();return null!=i&&n.setStyle(i),n},mxEditor.prototype.getEdgeStyle=function(){return this.defaultEdgeStyle},mxEditor.prototype.consumeCycleAttribute=function(e){return null!=this.cycleAttributeValues&&this.cycleAttributeValues.length>0&&this.graph.isSwimlane(e)?this.cycleAttributeValues[this.cycleAttributeIndex++%this.cycleAttributeValues.length]:null},mxEditor.prototype.cycleAttribute=function(e){if(null!=this.cycleAttributeName){var t=this.consumeCycleAttribute(e);null!=t&&e.setStyle(e.getStyle()+";"+this.cycleAttributeName+"="+t)}},mxEditor.prototype.addVertex=function(e,t,n,o){for(var s=this.graph.getModel();null!=e&&!this.graph.isValidDropTarget(e);)e=s.getParent(e);e=null!=e?e:this.graph.getSwimlaneAt(n,o);var i=this.graph.getView().scale,a=s.getGeometry(t),l=s.getGeometry(e);if(this.graph.isSwimlane(t)&&!this.graph.swimlaneNesting)e=null;else{if(null==e&&this.swimlaneRequired)return null;if(null!=e&&null!=l){var r=this.graph.getView().getState(e);if(null!=r){if(n-=r.origin.x*i,o-=r.origin.y*i,this.graph.isConstrainedMoving){var d=a.width,u=a.height,g=r.x+r.width;n+d>g&&(n-=n+d-g),o+u>(g=r.y+r.height)&&(o-=o+u-g)}}else null!=l&&(n-=l.x*i,o-=l.y*i)}}(a=a.clone()).x=this.graph.snap(n/i-this.graph.getView().translate.x-this.graph.gridSize/2),a.y=this.graph.snap(o/i-this.graph.getView().translate.y-this.graph.gridSize/2),t.setGeometry(a),null==e&&(e=this.graph.getDefaultParent()),this.cycleAttribute(t),this.fireEvent(new mxEventObject(mxEvent.BEFORE_ADD_VERTEX,"vertex",t,"parent",e)),s.beginUpdate();try{null!=(t=this.graph.addCell(t,e))&&(this.graph.constrainChild(t),this.fireEvent(new mxEventObject(mxEvent.ADD_VERTEX,"vertex",t)))}finally{s.endUpdate()}return null!=t&&(this.graph.setSelectionCell(t),this.graph.scrollCellToVisible(t),this.fireEvent(new mxEventObject(mxEvent.AFTER_ADD_VERTEX,"vertex",t))),t},mxEditor.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,null!=this.tasks&&this.tasks.destroy(),null!=this.outline&&this.outline.destroy(),null!=this.properties&&this.properties.destroy(),null!=this.keyHandler&&this.keyHandler.destroy(),null!=this.rubberband&&this.rubberband.destroy(),null!=this.toolbar&&this.toolbar.destroy(),null!=this.graph&&this.graph.destroy(),this.status=null,this.templates=null)},exports.mxEditor=mxEditor;var mxCodecRegistry={codecs:[],aliases:[],register:function(e){if(null!=e){var t=e.getName();mxCodecRegistry.codecs[t]=e;var n=mxUtils.getFunctionName(e.template.constructor);n!=t&&mxCodecRegistry.addAlias(n,t)}return e},addAlias:function(e,t){mxCodecRegistry.aliases[e]=t},getCodec:function(e){var t=null;if(null!=e){var n=mxUtils.getFunctionName(e),o=mxCodecRegistry.aliases[n];if(null!=o&&(n=o),null==(t=mxCodecRegistry.codecs[n]))try{t=new mxObjectCodec(new e),mxCodecRegistry.register(t)}catch(s){}}return t}};exports.mxCodecRegistry=mxCodecRegistry,mxCodec.prototype.document=null,mxCodec.prototype.objects=null,mxCodec.prototype.elements=null,mxCodec.prototype.encodeDefaults=!1,mxCodec.prototype.putObject=function(e,t){return this.objects[e]=t,t},mxCodec.prototype.getObject=function(e){var t=null;if(null!=e&&null==(t=this.objects[e])&&null==(t=this.lookup(e))){var n=this.getElementById(e);null!=n&&(t=this.decode(n))}return t},mxCodec.prototype.lookup=function(e){return null},mxCodec.prototype.getElementById=function(e){return null==this.elements&&(this.elements=new Object,this.addElement(this.document.documentElement)),this.elements[e]},mxCodec.prototype.addElement=function(e){if(e.nodeType==mxConstants.NODETYPE_ELEMENT){var t=e.getAttribute("id");null!=t&&null==this.elements[t]&&(this.elements[t]=e)}for(e=e.firstChild;null!=e;)this.addElement(e),e=e.nextSibling},mxCodec.prototype.getId=function(e){var t=null;return null!=e&&null==(t=this.reference(e))&&e instanceof mxCell&&null==(t=e.getId())&&0==(t=mxCellPath.create(e)).length&&(t="root"),t},mxCodec.prototype.reference=function(e){return null},mxCodec.prototype.encode=function(e){var t=null;if(null!=e&&null!=e.constructor){var n=mxCodecRegistry.getCodec(e.constructor);null!=n?t=n.encode(this,e):mxUtils.isNode(e)?t=mxUtils.importNode(this.document,e,!0):mxLog.warn("mxCodec.encode: No codec for "+mxUtils.getFunctionName(e.constructor))}return t},mxCodec.prototype.decode=function(e,t){var n=null;if(null!=e&&e.nodeType==mxConstants.NODETYPE_ELEMENT){var o=null;try{o=window[e.nodeName]}catch(i){}var s=mxCodecRegistry.getCodec(o);null!=s?n=s.decode(this,e,t):(n=e.cloneNode(!0)).removeAttribute("as")}return n},mxCodec.prototype.encodeCell=function(e,t,n){if(t.appendChild(this.encode(e)),null==n||n)for(var o=e.getChildCount(),s=0;s<o;s++)this.encodeCell(e.getChildAt(s),t)},mxCodec.prototype.isCellCodec=function(e){return null!=e&&"function"==typeof e.isCellCodec&&e.isCellCodec()},mxCodec.prototype.decodeCell=function(e,t){t=null==t||t;var n=null;if(null!=e&&e.nodeType==mxConstants.NODETYPE_ELEMENT){var o=mxCodecRegistry.getCodec(e.nodeName);if(!this.isCellCodec(o))for(var s=e.firstChild;null!=s&&!this.isCellCodec(o);)o=mxCodecRegistry.getCodec(s.nodeName),s=s.nextSibling;this.isCellCodec(o)||(o=mxCodecRegistry.getCodec(mxCell)),n=o.decode(this,e),t&&this.insertIntoGraph(n)}return n},mxCodec.prototype.insertIntoGraph=function(e){var t=e.parent,n=e.getTerminal(!0),o=e.getTerminal(!1);e.setTerminal(null,!1),e.setTerminal(null,!0),e.parent=null,null!=t&&t.insert(e),null!=n&&n.insertEdge(e,!0),null!=o&&o.insertEdge(e,!1)},mxCodec.prototype.setAttribute=function(e,t,n){null!=t&&null!=n&&e.setAttribute(t,n)},exports.mxCodec=mxCodec,mxObjectCodec.allowEval=!1,mxObjectCodec.prototype.template=null,mxObjectCodec.prototype.exclude=null,mxObjectCodec.prototype.idrefs=null,mxObjectCodec.prototype.mapping=null,mxObjectCodec.prototype.reverse=null,mxObjectCodec.prototype.getName=function(){return mxUtils.getFunctionName(this.template.constructor)},mxObjectCodec.prototype.cloneTemplate=function(){return new this.template.constructor},mxObjectCodec.prototype.getFieldName=function(e){if(null!=e){var t=this.reverse[e];null!=t&&(e=t)}return e},mxObjectCodec.prototype.getAttributeName=function(e){if(null!=e){var t=this.mapping[e];null!=t&&(e=t)}return e},mxObjectCodec.prototype.isExcluded=function(e,t,n,o){return t==mxObjectIdentity.FIELD_NAME||mxUtils.indexOf(this.exclude,t)>=0},mxObjectCodec.prototype.isReference=function(e,t,n,o){return mxUtils.indexOf(this.idrefs,t)>=0},mxObjectCodec.prototype.encode=function(e,t){var n=e.document.createElement(this.getName());return t=this.beforeEncode(e,t,n),this.encodeObject(e,t,n),this.afterEncode(e,t,n)},mxObjectCodec.prototype.encodeObject=function(e,t,n){for(var o in e.setAttribute(n,"id",e.getId(t)),t){var s=o,i=t[s];null==i||this.isExcluded(t,s,i,!0)||(mxUtils.isInteger(s)&&(s=null),this.encodeValue(e,t,s,i,n))}},mxObjectCodec.prototype.encodeValue=function(e,t,n,o,s){if(null!=o){if(this.isReference(t,n,o,!0)){var i=e.getId(o);if(null==i)return void mxLog.warn("mxObjectCodec.encode: No ID for "+this.getName()+"."+n+"="+o);o=i}(null==n||e.encodeDefaults||this.template[n]!=o)&&(n=this.getAttributeName(n),this.writeAttribute(e,t,n,o,s))}},mxObjectCodec.prototype.writeAttribute=function(e,t,n,o,s){"object"!=typeof o?this.writePrimitiveAttribute(e,t,n,o,s):this.writeComplexAttribute(e,t,n,o,s)},mxObjectCodec.prototype.writePrimitiveAttribute=function(e,t,n,o,s){if(o=this.convertAttributeToXml(e,t,n,o,s),null==n){var i=e.document.createElement("add");"function"==typeof o?i.appendChild(e.document.createTextNode(o)):e.setAttribute(i,"value",o),s.appendChild(i)}else"function"!=typeof o&&e.setAttribute(s,n,o)},mxObjectCodec.prototype.writeComplexAttribute=function(e,t,n,o,s){var i=e.encode(o);null!=i?(null!=n&&i.setAttribute("as",n),s.appendChild(i)):mxLog.warn("mxObjectCodec.encode: No node for "+this.getName()+"."+n+": "+o)},mxObjectCodec.prototype.convertAttributeToXml=function(e,t,n,o){return this.isBooleanAttribute(e,t,n,o)&&(o=1==o?"1":"0"),o},mxObjectCodec.prototype.isBooleanAttribute=function(e,t,n,o){return void 0===o.length&&(1==o||0==o)},mxObjectCodec.prototype.convertAttributeFromXml=function(e,t,n){var o=t.value;return this.isNumericAttribute(e,t,n)&&(o=parseFloat(o)),o},mxObjectCodec.prototype.isNumericAttribute=function(e,t,n){return mxUtils.isNumeric(t.value)},mxObjectCodec.prototype.beforeEncode=function(e,t,n){return t},mxObjectCodec.prototype.afterEncode=function(e,t,n){return n},mxObjectCodec.prototype.decode=function(e,t,n){var o=t.getAttribute("id"),s=e.objects[o];return null==s&&(s=n||this.cloneTemplate(),null!=o&&e.putObject(o,s)),t=this.beforeDecode(e,t,s),this.decodeNode(e,t,s),this.afterDecode(e,t,s)},mxObjectCodec.prototype.decodeNode=function(e,t,n){null!=t&&(this.decodeAttributes(e,t,n),this.decodeChildren(e,t,n))},mxObjectCodec.prototype.decodeAttributes=function(e,t,n){var o=t.attributes;if(null!=o)for(var s=0;s<o.length;s++)this.decodeAttribute(e,o[s],n)},mxObjectCodec.prototype.isIgnoredAttribute=function(e,t,n){return"as"==t.nodeName||"id"==t.nodeName},mxObjectCodec.prototype.decodeAttribute=function(e,t,n){if(!this.isIgnoredAttribute(e,t,n)){var o=t.nodeName,s=this.convertAttributeFromXml(e,t,n),i=this.getFieldName(o);if(this.isReference(n,i,s,!1)){var a=e.getObject(s);if(null==a)return void mxLog.warn("mxObjectCodec.decode: No object for "+this.getName()+"."+o+"="+s);s=a}this.isExcluded(n,o,s,!1)||(n[o]=s)}},mxObjectCodec.prototype.decodeChildren=function(e,t,n){for(var o=t.firstChild;null!=o;){var s=o.nextSibling;o.nodeType!=mxConstants.NODETYPE_ELEMENT||this.processInclude(e,o,n)||this.decodeChild(e,o,n),o=s}},mxObjectCodec.prototype.decodeChild=function(e,t,n){var o=this.getFieldName(t.getAttribute("as"));if(null==o||!this.isExcluded(n,o,t,!1)){var s=this.getFieldTemplate(n,o,t),i=null;"add"==t.nodeName?null==(i=t.getAttribute("value"))&&mxObjectCodec.allowEval&&(i=mxUtils.eval(mxUtils.getTextContent(t))):i=e.decode(t,s),this.addObjectValue(n,o,i,s)}},mxObjectCodec.prototype.getFieldTemplate=function(e,t,n){var o=e[t];return o instanceof Array&&o.length>0&&(o=null),o},mxObjectCodec.prototype.addObjectValue=function(e,t,n,o){null!=n&&n!=o&&(null!=t&&t.length>0?e[t]=n:e.push(n))},mxObjectCodec.prototype.processInclude=function(e,t,n){if("include"==t.nodeName){var o=t.getAttribute("name");if(null!=o)try{var s=mxUtils.load(o).getDocumentElement();null!=s&&e.decode(s,n)}catch(i){}return!0}return!1},mxObjectCodec.prototype.beforeDecode=function(e,t,n){return t},mxObjectCodec.prototype.afterDecode=function(e,t,n){return n},exports.mxObjectCodec=mxObjectCodec,mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxCell,["children","edges","overlays","mxTransient"],["parent","source","target"]);return e.isCellCodec=function(){return!0},e.isNumericAttribute=function(t,n,o){return"value"!==n.nodeName&&mxObjectCodec.prototype.isNumericAttribute.apply(this,arguments)},e.isExcluded=function(t,n,o,s){return mxObjectCodec.prototype.isExcluded.apply(this,arguments)||s&&"value"==n&&o.nodeType==mxConstants.NODETYPE_ELEMENT},e.afterEncode=function(t,n,o){if(null!=n.value&&n.value.nodeType==mxConstants.NODETYPE_ELEMENT){var s=o;(o=mxUtils.importNode(t.document,n.value,!0)).appendChild(s);var i=s.getAttribute("id");o.setAttribute("id",i),s.removeAttribute("id")}return o},e.beforeDecode=function(t,n,o){var s=n.cloneNode(!0),i=this.getName();if(n.nodeName!=i){var a=n.getElementsByTagName(i)[0];null!=a&&a.parentNode==n?(mxUtils.removeWhitespace(a,!0),mxUtils.removeWhitespace(a,!1),a.parentNode.removeChild(a),s=a):s=null,o.value=n.cloneNode(!0);var l=o.value.getAttribute("id");null!=l&&(o.setId(l),o.value.removeAttribute("id"))}else o.setId(n.getAttribute("id"));if(null!=s)for(var r=0;r<this.idrefs.length;r++){var d=this.idrefs[r],u=s.getAttribute(d);if(null!=u){s.removeAttribute(d);var g=t.objects[u]||t.lookup(u);if(null==g){var f=t.getElementById(u);null!=f&&(g=(mxCodecRegistry.codecs[f.nodeName]||this).decode(t,f))}o[d]=g}}return s},e}()),mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxGraphModel);return e.encodeObject=function(t,n,o){var s=t.document.createElement("root");t.encodeCell(n.getRoot(),s),o.appendChild(s)},e.decodeChild=function(t,n,o){"root"==n.nodeName?this.decodeRoot(t,n,o):mxObjectCodec.prototype.decodeChild.apply(this,arguments)},e.decodeRoot=function(t,n,o){for(var s=null,i=n.firstChild;null!=i;){var a=t.decodeCell(i);null!=a&&null==a.getParent()&&(s=a),i=i.nextSibling}null!=s&&o.setRoot(s)},e}()),mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxRootChange,["model","previous","root"]);return e.afterEncode=function(t,n,o){return t.encodeCell(n.root,o),o},e.beforeDecode=function(t,n,o){if(null!=n.firstChild&&n.firstChild.nodeType==mxConstants.NODETYPE_ELEMENT){var s=(n=n.cloneNode(!0)).firstChild;o.root=t.decodeCell(s,!1);var i=s.nextSibling;for(s.parentNode.removeChild(s),s=i;null!=s;)i=s.nextSibling,t.decodeCell(s),s.parentNode.removeChild(s),s=i}return n},e.afterDecode=function(t,n,o){return o.previous=o.root,o},e}()),mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxChildChange,["model","child","previousIndex"],["parent","previous"]);return e.isReference=function(t,n,o,s){return!("child"!=n||null==t.previous&&s)||mxUtils.indexOf(this.idrefs,n)>=0},e.afterEncode=function(t,n,o){return this.isReference(n,"child",n.child,!0)?o.setAttribute("child",t.getId(n.child)):t.encodeCell(n.child,o),o},e.beforeDecode=function(t,n,o){if(null!=n.firstChild&&n.firstChild.nodeType==mxConstants.NODETYPE_ELEMENT){var s=(n=n.cloneNode(!0)).firstChild;o.child=t.decodeCell(s,!1);var i=s.nextSibling;for(s.parentNode.removeChild(s),s=i;null!=s;){if(i=s.nextSibling,s.nodeType==mxConstants.NODETYPE_ELEMENT){var a=s.getAttribute("id");null==t.lookup(a)&&t.decodeCell(s)}s.parentNode.removeChild(s),s=i}}else{var l=n.getAttribute("child");o.child=t.getObject(l)}return n},e.afterDecode=function(t,n,o){return o.child.parent=o.previous,o.previous=o.parent,o.previousIndex=o.index,o},e}()),mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxTerminalChange,["model","previous"],["cell","terminal"]);return e.afterDecode=function(t,n,o){return o.previous=o.terminal,o},e}());var mxGenericChangeCodec=function(e,t){var n=new mxObjectCodec(e,["model","previous"],["cell"]);return n.afterDecode=function(o,s,i){return mxUtils.isNode(i.cell)&&(i.cell=o.decodeCell(i.cell,!1)),i.previous=i[t],i},n};mxCodecRegistry.register(mxGenericChangeCodec(new mxValueChange,"value")),mxCodecRegistry.register(mxGenericChangeCodec(new mxStyleChange,"style")),mxCodecRegistry.register(mxGenericChangeCodec(new mxGeometryChange,"geometry")),mxCodecRegistry.register(mxGenericChangeCodec(new mxCollapseChange,"collapsed")),mxCodecRegistry.register(mxGenericChangeCodec(new mxVisibleChange,"visible")),mxCodecRegistry.register(mxGenericChangeCodec(new mxCellAttributeChange,"value")),exports.mxGenericChangeCodec=mxGenericChangeCodec,mxCodecRegistry.register(new mxObjectCodec(new mxGraph,["graphListeners","eventListeners","view","container","cellRenderer","editor","selection"])),mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxGraphView);return e.encode=function(t,n){return this.encodeCell(t,n,n.graph.getModel().getRoot())},e.encodeCell=function(t,n,o){var s=n.graph.getModel(),i=n.getState(o),a=s.getParent(o);if(null==a||null!=i){var l=s.getChildCount(o),r=n.graph.getCellGeometry(o),d=null;if(a==s.getRoot()?d="layer":null==a?d="graph":s.isEdge(o)?d="edge":l>0&&null!=r?d="group":s.isVertex(o)&&(d="vertex"),null!=d){var u=t.document.createElement(d);if(null!=n.graph.getLabel(o)&&(u.setAttribute("label",n.graph.getLabel(o)),n.graph.isHtmlLabel(o)&&u.setAttribute("html",!0)),null==a){var f=n.getGraphBounds();null!=f&&(u.setAttribute("x",Math.round(f.x)),u.setAttribute("y",Math.round(f.y)),u.setAttribute("width",Math.round(f.width)),u.setAttribute("height",Math.round(f.height))),u.setAttribute("scale",n.scale)}else if(null!=i&&null!=r){for(var v in i.style){var x=i.style[v];"function"==typeof x&&"object"==typeof x&&(x=mxStyleRegistry.getName(x)),null!=x&&"function"!=typeof x&&"object"!=typeof x&&u.setAttribute(v,x)}var z=i.absolutePoints;if(null!=z&&z.length>0){var b=Math.round(z[0].x)+","+Math.round(z[0].y);for(v=1;v<z.length;v++)b+=" "+Math.round(z[v].x)+","+Math.round(z[v].y);u.setAttribute("points",b)}else u.setAttribute("x",Math.round(i.x)),u.setAttribute("y",Math.round(i.y)),u.setAttribute("width",Math.round(i.width)),u.setAttribute("height",Math.round(i.height));var _=i.absoluteOffset;null!=_&&(0!=_.x&&u.setAttribute("dx",Math.round(_.x)),0!=_.y&&u.setAttribute("dy",Math.round(_.y)))}for(v=0;v<l;v++){var H=this.encodeCell(t,n,s.getChildAt(o,v));null!=H&&u.appendChild(H)}}}return u},e}());var mxStylesheetCodec=mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxStylesheet);return e.encode=function(t,n){var o=t.document.createElement(this.getName());for(var s in n.styles){var i=n.styles[s],a=t.document.createElement("add");if(null!=s){for(var l in a.setAttribute("as",s),i){var r=this.getStringValue(l,i[l]);if(null!=r){var d=t.document.createElement("add");d.setAttribute("value",r),d.setAttribute("as",l),a.appendChild(d)}}a.childNodes.length>0&&o.appendChild(a)}}return o},e.getStringValue=function(t,n){var o=typeof n;return"function"==o?n=mxStyleRegistry.getName(style[j]):"object"==o&&(n=null),n},e.decode=function(t,n,o){var s=o||new this.template.constructor,i=n.getAttribute("id");for(null!=i&&(t.objects[i]=s),n=n.firstChild;null!=n;){if(!this.processInclude(t,n,s)&&"add"==n.nodeName){var a=n.getAttribute("as");if(null!=a){var l=n.getAttribute("extend"),r=null!=l?mxUtils.clone(s.styles[l]):null;null==r&&(null!=l&&mxLog.warn("mxStylesheetCodec.decode: stylesheet "+l+" not found to extend"),r=new Object);for(var d=n.firstChild;null!=d;){if(d.nodeType==mxConstants.NODETYPE_ELEMENT){var u=d.getAttribute("as");if("add"==d.nodeName){var g=mxUtils.getTextContent(d),f=null;null!=g&&g.length>0&&mxStylesheetCodec.allowEval?f=mxUtils.eval(g):(f=d.getAttribute("value"),mxUtils.isNumeric(f)&&(f=parseFloat(f))),null!=f&&(r[u]=f)}else"remove"==d.nodeName&&delete r[u]}d=d.nextSibling}s.putCellStyle(a,r)}}n=n.nextSibling}return s},e}());mxStylesheetCodec.allowEval=!0,exports.mxStylesheetCodec=mxStylesheetCodec,mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxDefaultKeyHandler);return e.encode=function(t,n){return null},e.decode=function(t,n,o){if(null!=o)for(n=n.firstChild;null!=n;){if(!this.processInclude(t,n,o)&&"add"==n.nodeName){var s=n.getAttribute("as"),i=n.getAttribute("action"),a=n.getAttribute("control");o.bindAction(s,i,a)}n=n.nextSibling}return o},e}());var mxDefaultToolbarCodec=mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxDefaultToolbar);return e.encode=function(t,n){return null},e.decode=function(t,n,o){if(null!=o){var s=o.editor;for(n=n.firstChild;null!=n;){if(n.nodeType==mxConstants.NODETYPE_ELEMENT&&!this.processInclude(t,n,o))if("separator"==n.nodeName)o.addSeparator();else if("br"==n.nodeName)o.toolbar.addBreak();else if("hr"==n.nodeName)o.toolbar.addLine();else if("add"==n.nodeName){var i=n.getAttribute("as");i=mxResources.get(i)||i;var a=n.getAttribute("icon"),l=n.getAttribute("pressedIcon"),r=n.getAttribute("action"),d=n.getAttribute("mode"),u=n.getAttribute("template"),g="0"!=n.getAttribute("toggle"),f=mxUtils.getTextContent(n),v=null;if(null!=r)v=o.addItem(i,a,r,l);else if(null!=d){var x=mxDefaultToolbarCodec.allowEval?mxUtils.eval(f):null;v=o.addMode(i,a,d,l,x)}else if(null!=u||null!=f&&f.length>0){var z=s.templates[u],b=n.getAttribute("style");null!=z&&null!=b&&(z=s.graph.cloneCells([z])[0]).setStyle(b);var _=null;null!=f&&f.length>0&&mxDefaultToolbarCodec.allowEval&&(_=mxUtils.eval(f)),v=o.addPrototype(i,a,z,l,_,g)}else{var H=mxUtils.getChildNodes(n);if(H.length>0)if(null==a){for(var T=o.addActionCombo(i),L=0;L<H.length;L++)if("separator"==(V=H[L]).nodeName)o.addOption(T,"---");else if("add"==V.nodeName){var Y=V.getAttribute("as"),J=V.getAttribute("action");o.addActionOption(T,Y,J)}}else{var K=null,X=o.addPrototype(i,a,function(){var ye=s.templates[K.value];if(null!=ye){var Le=ye.clone(),lt=K.options[K.selectedIndex].cellStyle;return null!=lt&&Le.setStyle(lt),Le}return mxLog.warn("Template "+ye+" not found"),null},null,null,g);for(K=o.addCombo(),mxEvent.addListener(K,"change",function(){o.toolbar.selectMode(X,function(ye){var Le=mxUtils.convertPoint(s.graph.container,mxEvent.getClientX(ye),mxEvent.getClientY(ye));return s.addVertex(null,x(),Le.x,Le.y)}),o.toolbar.noReset=!1}),L=0;L<H.length;L++){var V;if("separator"==(V=H[L]).nodeName)o.addOption(K,"---");else if("add"==V.nodeName){Y=V.getAttribute("as");var ne=V.getAttribute("template");o.addOption(K,Y,ne||u).cellStyle=V.getAttribute("style")}}}}if(null!=v){var Q=n.getAttribute("id");null!=Q&&Q.length>0&&v.setAttribute("id",Q)}}n=n.nextSibling}}return o},e}());mxDefaultToolbarCodec.allowEval=!0,exports.mxDefaultToolbarCodec=mxDefaultToolbarCodec,mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxDefaultPopupMenu);return e.encode=function(t,n){return null},e.decode=function(t,n,o){var s=n.getElementsByTagName("include")[0];return null!=s?this.processInclude(t,s,o):null!=o&&(o.config=n),o},e}()),mxCodecRegistry.register(function(){var e=new mxObjectCodec(new mxEditor,["modified","lastSnapshot","ignoredChanges","undoManager","graphContainer","toolbarContainer"]);return e.afterDecode=function(t,n,o){var s=n.getAttribute("defaultEdge");null!=s&&(n.removeAttribute("defaultEdge"),o.defaultEdge=o.templates[s]);var i=n.getAttribute("defaultGroup");return null!=i&&(n.removeAttribute("defaultGroup"),o.defaultGroup=o.templates[i]),o},e.decodeChild=function(t,n,o){if("Array"==n.nodeName){var s=n.getAttribute("as");if("templates"==s)return void this.decodeTemplates(t,n,o)}else if("ui"==n.nodeName)return void this.decodeUi(t,n,o);mxObjectCodec.prototype.decodeChild.apply(this,arguments)},e.decodeUi=function(t,n,o){for(var s=n.firstChild;null!=s;){if("add"==s.nodeName){var i=s.getAttribute("as"),a=s.getAttribute("element"),l=s.getAttribute("style"),r=null;if(null!=a)null!=(r=document.getElementById(a))&&null!=l&&(r.style.cssText+=";"+l);else{var d=parseInt(s.getAttribute("x")),u=parseInt(s.getAttribute("y")),g=s.getAttribute("width"),f=s.getAttribute("height");(r=document.createElement("div")).style.cssText=l,new mxWindow(mxResources.get(i)||i,r,d,u,g,f,!1,!0).setVisible(!0)}"graph"==i?o.setGraphContainer(r):"toolbar"==i?o.setToolbarContainer(r):"title"==i?o.setTitleContainer(r):"status"==i?o.setStatusContainer(r):"map"==i&&o.setMapContainer(r)}else"resource"==s.nodeName?mxResources.add(s.getAttribute("basename")):"stylesheet"==s.nodeName&&mxClient.link("stylesheet",s.getAttribute("name"));s=s.nextSibling}},e.decodeTemplates=function(t,n,o){null==o.templates&&(o.templates=[]);for(var s=mxUtils.getChildNodes(n),i=0;i<s.length;i++){for(var a=s[i].getAttribute("as"),l=s[i].firstChild;null!=l&&1!=l.nodeType;)l=l.nextSibling;null!=l&&(o.templates[a]=t.decodeCell(l))}},e}())}])},module.exports=t()},14453:(e,t,n)=>{"use strict";n.d(t,{ix:()=>V,fY:()=>Y,sL:()=>J});var o=n(64762),s=n(70946),i=n(37716),a=n(79765),l=n(22759),r=n(46782),d=n(39761),u=n(45435),g=n(32729),f=n(96182),v=n(53599),x=n(38583),z=n(84514),b=n(29374);const _=["nz-button",""];function H(K,re){1&K&&i._UZ(0,"i",1)}const T=["*"],L="button";let V=(()=>{class K{constructor(X,ne,he,Q,ye,Le){this.ngZone=X,this.elementRef=ne,this.cdr=he,this.renderer=Q,this.nzConfigService=ye,this.directionality=Le,this._nzModuleName=L,this.nzBlock=!1,this.nzGhost=!1,this.nzSearch=!1,this.nzLoading=!1,this.nzDanger=!1,this.disabled=!1,this.tabIndex=null,this.nzType=null,this.nzShape=null,this.nzSize="default",this.dir="ltr",this.destroy$=new a.xQ,this.loading$=new a.xQ,this.elementRef.nativeElement.classList.add("ant-btn"),this.nzConfigService.getConfigChangeEventForComponent(L).pipe((0,r.R)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}insertSpan(X,ne){X.forEach(he=>{if("#text"===he.nodeName){const Q=ne.createElement("span"),ye=ne.parentNode(he);ne.insertBefore(ye,Q,he),ne.appendChild(Q,he)}})}assertIconOnly(X,ne){const he=Array.from(X.childNodes),Q=he.filter(Me=>"I"===Me.nodeName).length,ye=he.every(Me=>"#text"!==Me.nodeName);he.every(Me=>"SPAN"!==Me.nodeName)&&ye&&Q>=1&&ne.addClass(X,"ant-btn-icon-only")}ngOnInit(){var X;null===(X=this.directionality.change)||void 0===X||X.pipe((0,r.R)(this.destroy$)).subscribe(ne=>{this.dir=ne,this.cdr.detectChanges()}),this.dir=this.directionality.value,this.ngZone.runOutsideAngular(()=>{(0,l.R)(this.elementRef.nativeElement,"click").pipe((0,r.R)(this.destroy$)).subscribe(ne=>{var he;this.disabled&&"A"===(null===(he=ne.target)||void 0===he?void 0:he.tagName)&&(ne.preventDefault(),ne.stopImmediatePropagation())})})}ngOnChanges(X){const{nzLoading:ne}=X;ne&&this.loading$.next(this.nzLoading)}ngAfterViewInit(){this.assertIconOnly(this.elementRef.nativeElement,this.renderer),this.insertSpan(this.elementRef.nativeElement.childNodes,this.renderer)}ngAfterContentInit(){this.loading$.pipe((0,d.O)(this.nzLoading),(0,u.h)(()=>!!this.nzIconDirectiveElement),(0,r.R)(this.destroy$)).subscribe(X=>{const ne=this.nzIconDirectiveElement.nativeElement;X?this.renderer.setStyle(ne,"display","none"):this.renderer.removeStyle(ne,"display")})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return K.\u0275fac=function(X){return new(X||K)(i.Y36(i.R0b),i.Y36(i.SBq),i.Y36(i.sBO),i.Y36(i.Qsj),i.Y36(g.jY),i.Y36(s.Is,8))},K.\u0275cmp=i.Xpm({type:K,selectors:[["button","nz-button",""],["a","nz-button",""]],contentQueries:function(X,ne,he){if(1&X&&i.Suo(he,v.Ls,5,i.SBq),2&X){let Q;i.iGM(Q=i.CRH())&&(ne.nzIconDirectiveElement=Q.first)}},hostVars:30,hostBindings:function(X,ne){2&X&&(i.uIk("tabindex",ne.disabled?-1:null===ne.tabIndex?null:ne.tabIndex)("disabled",ne.disabled||null),i.ekj("ant-btn-primary","primary"===ne.nzType)("ant-btn-dashed","dashed"===ne.nzType)("ant-btn-link","link"===ne.nzType)("ant-btn-text","text"===ne.nzType)("ant-btn-circle","circle"===ne.nzShape)("ant-btn-round","round"===ne.nzShape)("ant-btn-lg","large"===ne.nzSize)("ant-btn-sm","small"===ne.nzSize)("ant-btn-dangerous",ne.nzDanger)("ant-btn-loading",ne.nzLoading)("ant-btn-background-ghost",ne.nzGhost)("ant-btn-block",ne.nzBlock)("ant-input-search-button",ne.nzSearch)("ant-btn-rtl","rtl"===ne.dir))},inputs:{nzBlock:"nzBlock",nzGhost:"nzGhost",nzSearch:"nzSearch",nzLoading:"nzLoading",nzDanger:"nzDanger",disabled:"disabled",tabIndex:"tabIndex",nzType:"nzType",nzShape:"nzShape",nzSize:"nzSize"},exportAs:["nzButton"],features:[i.TTD],attrs:_,ngContentSelectors:T,decls:2,vars:1,consts:[["nz-icon","","nzType","loading",4,"ngIf"],["nz-icon","","nzType","loading"]],template:function(X,ne){1&X&&(i.F$t(),i.YNc(0,H,1,0,"i",0),i.Hsn(1)),2&X&&i.Q6J("ngIf",ne.nzLoading)},directives:[x.O5,v.Ls,z.w],encapsulation:2,changeDetection:0}),(0,o.gn)([(0,f.yF)()],K.prototype,"nzBlock",void 0),(0,o.gn)([(0,f.yF)()],K.prototype,"nzGhost",void 0),(0,o.gn)([(0,f.yF)()],K.prototype,"nzSearch",void 0),(0,o.gn)([(0,f.yF)()],K.prototype,"nzLoading",void 0),(0,o.gn)([(0,f.yF)()],K.prototype,"nzDanger",void 0),(0,o.gn)([(0,f.yF)()],K.prototype,"disabled",void 0),(0,o.gn)([(0,g.oS)()],K.prototype,"nzSize",void 0),K})(),Y=(()=>{class K{constructor(X,ne){this.elementRef=X,this.directionality=ne,this.nzSize="default",this.dir="ltr",this.destroy$=new a.xQ,this.elementRef.nativeElement.classList.add("ant-btn-group")}ngOnInit(){var X;this.dir=this.directionality.value,null===(X=this.directionality.change)||void 0===X||X.pipe((0,r.R)(this.destroy$)).subscribe(ne=>{this.dir=ne})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return K.\u0275fac=function(X){return new(X||K)(i.Y36(i.SBq),i.Y36(s.Is,8))},K.\u0275cmp=i.Xpm({type:K,selectors:[["nz-button-group"]],hostVars:6,hostBindings:function(X,ne){2&X&&i.ekj("ant-btn-group-lg","large"===ne.nzSize)("ant-btn-group-sm","small"===ne.nzSize)("ant-btn-group-rtl","rtl"===ne.dir)},inputs:{nzSize:"nzSize"},exportAs:["nzButtonGroup"],ngContentSelectors:T,decls:1,vars:0,template:function(X,ne){1&X&&(i.F$t(),i.Hsn(0))},encapsulation:2,changeDetection:0}),K})(),J=(()=>{class K{}return K.\u0275fac=function(X){return new(X||K)},K.\u0275mod=i.oAB({type:K}),K.\u0275inj=i.cJS({imports:[[s.vT,x.ez,b.vG,v.PV,z.a],z.a,b.vG]}),K})()},47618:(e,t,n)=>{"use strict";n.d(t,{D3:()=>u,y7:()=>f});var o=n(37716),a=(n(64762),n(96182),n(39490)),l=n(67574),r=n(79765);let d=(()=>{class v{create(z){return"undefined"==typeof ResizeObserver?null:new ResizeObserver(z)}}return v.\u0275fac=function(z){return new(z||v)},v.\u0275prov=o.Yz7({factory:function(){return new v},token:v,providedIn:"root"}),v})(),u=(()=>{class v{constructor(z){this.nzResizeObserverFactory=z,this.observedElements=new Map}ngOnDestroy(){this.observedElements.forEach((z,b)=>this.cleanupObserver(b))}observe(z){const b=(0,a.fI)(z);return new l.y(_=>{const T=this.observeElement(b).subscribe(_);return()=>{T.unsubscribe(),this.unobserveElement(b)}})}observeElement(z){if(this.observedElements.has(z))this.observedElements.get(z).count++;else{const b=new r.xQ,_=this.nzResizeObserverFactory.create(H=>b.next(H));_&&_.observe(z),this.observedElements.set(z,{observer:_,stream:b,count:1})}return this.observedElements.get(z).stream}unobserveElement(z){this.observedElements.has(z)&&(this.observedElements.get(z).count--,this.observedElements.get(z).count||this.cleanupObserver(z))}cleanupObserver(z){if(this.observedElements.has(z)){const{observer:b,stream:_}=this.observedElements.get(z);b&&b.disconnect(),_.complete(),this.observedElements.delete(z)}}}return v.\u0275fac=function(z){return new(z||v)(o.LFG(d))},v.\u0275prov=o.Yz7({factory:function(){return new v(o.LFG(d))},token:v,providedIn:"root"}),v})(),f=(()=>{class v{}return v.\u0275fac=function(z){return new(z||v)},v.\u0275mod=o.oAB({type:v}),v.\u0275inj=o.cJS({providers:[d]}),v})()},47070:(e,t,n)=>{"use strict";n.d(t,{J_:()=>a,mF:()=>x,$C:()=>b});var o=n(17238);let s=(()=>{class H{}return H.SLOW="0.3s",H.BASE="0.2s",H.FAST="0.1s",H})(),i=(()=>{class H{}return H.EASE_BASE_OUT="cubic-bezier(0.7, 0.3, 0.1, 1)",H.EASE_BASE_IN="cubic-bezier(0.9, 0, 0.3, 0.7)",H.EASE_OUT="cubic-bezier(0.215, 0.61, 0.355, 1)",H.EASE_IN="cubic-bezier(0.55, 0.055, 0.675, 0.19)",H.EASE_IN_OUT="cubic-bezier(0.645, 0.045, 0.355, 1)",H.EASE_OUT_BACK="cubic-bezier(0.12, 0.4, 0.29, 1.46)",H.EASE_IN_BACK="cubic-bezier(0.71, -0.46, 0.88, 0.6)",H.EASE_IN_OUT_BACK="cubic-bezier(0.71, -0.46, 0.29, 1.46)",H.EASE_OUT_CIRC="cubic-bezier(0.08, 0.82, 0.17, 1)",H.EASE_IN_CIRC="cubic-bezier(0.6, 0.04, 0.98, 0.34)",H.EASE_IN_OUT_CIRC="cubic-bezier(0.78, 0.14, 0.15, 0.86)",H.EASE_OUT_QUINT="cubic-bezier(0.23, 1, 0.32, 1)",H.EASE_IN_QUINT="cubic-bezier(0.755, 0.05, 0.855, 0.06)",H.EASE_IN_OUT_QUINT="cubic-bezier(0.86, 0, 0.07, 1)",H})();const a=(0,o.X$)("collapseMotion",[(0,o.SB)("expanded",(0,o.oB)({height:"*"})),(0,o.SB)("collapsed",(0,o.oB)({height:0,overflow:"hidden"})),(0,o.SB)("hidden",(0,o.oB)({height:0,overflow:"hidden",borderTopWidth:"0"})),(0,o.eR)("expanded => collapsed",(0,o.jt)(`150ms ${i.EASE_IN_OUT}`)),(0,o.eR)("expanded => hidden",(0,o.jt)(`150ms ${i.EASE_IN_OUT}`)),(0,o.eR)("collapsed => expanded",(0,o.jt)(`150ms ${i.EASE_IN_OUT}`)),(0,o.eR)("hidden => expanded",(0,o.jt)(`150ms ${i.EASE_IN_OUT}`))]),f=((0,o.X$)("treeCollapseMotion",[(0,o.eR)("* => *",[(0,o.IO)("nz-tree-node:leave,nz-tree-builtin-node:leave",[(0,o.oB)({overflow:"hidden"}),(0,o.EY)(0,[(0,o.jt)(`150ms ${i.EASE_IN_OUT}`,(0,o.oB)({height:0,opacity:0,"padding-bottom":0}))])],{optional:!0}),(0,o.IO)("nz-tree-node:enter,nz-tree-builtin-node:enter",[(0,o.oB)({overflow:"hidden",height:0,opacity:0,"padding-bottom":0}),(0,o.EY)(0,[(0,o.jt)(`150ms ${i.EASE_IN_OUT}`,(0,o.oB)({overflow:"hidden",height:"*",opacity:"*","padding-bottom":"*"}))])],{optional:!0})])]),(0,o.X$)("fadeMotion",[(0,o.eR)(":enter",[(0,o.oB)({opacity:0}),(0,o.jt)(`${s.BASE}`,(0,o.oB)({opacity:1}))]),(0,o.eR)(":leave",[(0,o.oB)({opacity:1}),(0,o.jt)(`${s.BASE}`,(0,o.oB)({opacity:0}))])]),(0,o.X$)("helpMotion",[(0,o.eR)(":enter",[(0,o.oB)({opacity:0,transform:"translateY(-5px)"}),(0,o.jt)(`${s.SLOW} ${i.EASE_IN_OUT}`,(0,o.oB)({opacity:1,transform:"translateY(0)"}))]),(0,o.eR)(":leave",[(0,o.oB)({opacity:1,transform:"translateY(0)"}),(0,o.jt)(`${s.SLOW} ${i.EASE_IN_OUT}`,(0,o.oB)({opacity:0,transform:"translateY(-5px)"}))])]),(0,o.X$)("moveUpMotion",[(0,o.eR)("* => enter",[(0,o.oB)({transformOrigin:"0 0",transform:"translateY(-100%)",opacity:0}),(0,o.jt)(`${s.BASE}`,(0,o.oB)({transformOrigin:"0 0",transform:"translateY(0%)",opacity:1}))]),(0,o.eR)("* => leave",[(0,o.oB)({transformOrigin:"0 0",transform:"translateY(0%)",opacity:1}),(0,o.jt)(`${s.BASE}`,(0,o.oB)({transformOrigin:"0 0",transform:"translateY(-100%)",opacity:0}))])]),(0,o.X$)("notificationMotion",[(0,o.SB)("enterRight",(0,o.oB)({opacity:1,transform:"translateX(0)"})),(0,o.eR)("* => enterRight",[(0,o.oB)({opacity:0,transform:"translateX(5%)"}),(0,o.jt)("100ms linear")]),(0,o.SB)("enterLeft",(0,o.oB)({opacity:1,transform:"translateX(0)"})),(0,o.eR)("* => enterLeft",[(0,o.oB)({opacity:0,transform:"translateX(-5%)"}),(0,o.jt)("100ms linear")]),(0,o.SB)("leave",(0,o.oB)({opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 0%"})),(0,o.eR)("* => leave",[(0,o.oB)({opacity:1,transform:"scaleY(1)",transformOrigin:"0% 0%"}),(0,o.jt)("100ms linear")])]),`${s.BASE} ${i.EASE_OUT_QUINT}`),v=`${s.BASE} ${i.EASE_IN_QUINT}`,x=(0,o.X$)("slideMotion",[(0,o.SB)("void",(0,o.oB)({opacity:0,transform:"scaleY(0.8)"})),(0,o.SB)("enter",(0,o.oB)({opacity:1,transform:"scaleY(1)"})),(0,o.eR)("void => *",[(0,o.jt)(f)]),(0,o.eR)("* => void",[(0,o.jt)(v)])]),b=((0,o.X$)("slideAlertMotion",[(0,o.eR)(":leave",[(0,o.oB)({opacity:1,transform:"scaleY(1)",transformOrigin:"0% 0%"}),(0,o.jt)(`${s.SLOW} ${i.EASE_IN_OUT_CIRC}`,(0,o.oB)({opacity:0,transform:"scaleY(0)",transformOrigin:"0% 0%"}))])]),(0,o.X$)("zoomBigMotion",[(0,o.eR)("void => active",[(0,o.oB)({opacity:0,transform:"scale(0.8)"}),(0,o.jt)(`${s.BASE} ${i.EASE_OUT_CIRC}`,(0,o.oB)({opacity:1,transform:"scale(1)"}))]),(0,o.eR)("active => void",[(0,o.oB)({opacity:1,transform:"scale(1)"}),(0,o.jt)(`${s.BASE} ${i.EASE_IN_OUT_CIRC}`,(0,o.oB)({opacity:0,transform:"scale(0.8)"}))])]));(0,o.X$)("zoomBadgeMotion",[(0,o.eR)(":enter",[(0,o.oB)({opacity:0,transform:"scale(0) translate(50%, -50%)"}),(0,o.jt)(`${s.SLOW} ${i.EASE_OUT_BACK}`,(0,o.oB)({opacity:1,transform:"scale(1) translate(50%, -50%)"}))]),(0,o.eR)(":leave",[(0,o.oB)({opacity:1,transform:"scale(1) translate(50%, -50%)"}),(0,o.jt)(`${s.SLOW} ${i.EASE_IN_BACK}`,(0,o.oB)({opacity:0,transform:"scale(0) translate(50%, -50%)"}))])])},32729:(e,t,n)=>{"use strict";n.d(t,{jY:()=>u,oS:()=>g});var o=n(37716),s=n(79765),i=n(45435),a=n(96736);const l=new o.OlP("nz-config"),r=function(f){return void 0!==f};let u=(()=>{class f{constructor(x){this.configUpdated$=new s.xQ,this.config=x||{}}getConfig(){return this.config}getConfigForComponent(x){return this.config[x]}getConfigChangeEventForComponent(x){return this.configUpdated$.pipe((0,i.h)(z=>z===x),(0,a.h)(void 0))}set(x,z){this.config[x]=Object.assign(Object.assign({},this.config[x]),z),this.configUpdated$.next(x)}}return f.\u0275fac=function(x){return new(x||f)(o.LFG(l,8))},f.\u0275prov=o.Yz7({factory:function(){return new f(o.LFG(l,8))},token:f,providedIn:"root"}),f})();function g(){return function(v,x,z){const b=`$$__zorroConfigDecorator__${x}`;return Object.defineProperty(v,b,{configurable:!0,writable:!0,enumerable:!1}),{get(){var _,H;const T=(null==z?void 0:z.get)?z.get.bind(this)():this[b],L=((null===(_=this.propertyAssignCounter)||void 0===_?void 0:_[x])||0)>1,V=null===(H=this.nzConfigService.getConfigForComponent(this._nzModuleName))||void 0===H?void 0:H[x];return L&&r(T)?T:r(V)?V:T},set(_){this.propertyAssignCounter=this.propertyAssignCounter||{},this.propertyAssignCounter[x]=(this.propertyAssignCounter[x]||0)+1,(null==z?void 0:z.set)?z.set.bind(this)(_):this[b]=_},configurable:!0,enumerable:!0}}}},90641:(e,t,n)=>{"use strict";n.d(t,{P:()=>u,g:()=>g});var o=n(38583),s=n(64762),i=n(39490),a=n(46237),l=n(96182),r=n(37716);const d="nz-animate-disabled";let u=(()=>{class f{constructor(x,z,b){this.element=x,this.renderer=z,this.animationType=b,this.nzNoAnimation=!1}ngOnChanges(){this.updateClass()}ngAfterViewInit(){this.updateClass()}updateClass(){const x=(0,i.fI)(this.element);!x||(this.nzNoAnimation||"NoopAnimations"===this.animationType?this.renderer.addClass(x,d):this.renderer.removeClass(x,d))}}return f.\u0275fac=function(x){return new(x||f)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(a.Qb,8))},f.\u0275dir=r.lG2({type:f,selectors:[["","nzNoAnimation",""]],inputs:{nzNoAnimation:"nzNoAnimation"},exportAs:["nzNoAnimation"],features:[r.TTD]}),(0,s.gn)([(0,l.yF)()],f.prototype,"nzNoAnimation",void 0),f})(),g=(()=>{class f{}return f.\u0275fac=function(x){return new(x||f)},f.\u0275mod=r.oAB({type:f}),f.\u0275inj=r.cJS({imports:[[o.ez]]}),f})()},68178:(e,t,n)=>{"use strict";n.d(t,{T:()=>l,f:()=>i});var o=n(38583),s=n(37716);let i=(()=>{class r{constructor(u,g){this.viewContainer=u,this.templateRef=g,this.embeddedViewRef=null,this.context=new a,this.nzStringTemplateOutletContext=null,this.nzStringTemplateOutlet=null}static ngTemplateContextGuard(u,g){return!0}recreateView(){this.viewContainer.clear();const u=this.nzStringTemplateOutlet instanceof s.Rgc;this.embeddedViewRef=this.viewContainer.createEmbeddedView(u?this.nzStringTemplateOutlet:this.templateRef,u?this.nzStringTemplateOutletContext:this.context)}updateContext(){const g=this.nzStringTemplateOutlet instanceof s.Rgc?this.nzStringTemplateOutletContext:this.context,f=this.embeddedViewRef.context;if(g)for(const v of Object.keys(g))f[v]=g[v]}ngOnChanges(u){const{nzStringTemplateOutletContext:g,nzStringTemplateOutlet:f}=u;f&&(this.context.$implicit=f.currentValue),(()=>{let z=!1;if(f)if(f.firstChange)z=!0;else{const T=f.currentValue instanceof s.Rgc;z=f.previousValue instanceof s.Rgc||T}return g&&(H=>{const T=Object.keys(H.previousValue||{}),L=Object.keys(H.currentValue||{});if(T.length===L.length){for(const V of L)if(-1===T.indexOf(V))return!0;return!1}return!0})(g)||z})()?this.recreateView():this.updateContext()}}return r.\u0275fac=function(u){return new(u||r)(s.Y36(s.s_b),s.Y36(s.Rgc))},r.\u0275dir=s.lG2({type:r,selectors:[["","nzStringTemplateOutlet",""]],inputs:{nzStringTemplateOutletContext:"nzStringTemplateOutletContext",nzStringTemplateOutlet:"nzStringTemplateOutlet"},exportAs:["nzStringTemplateOutlet"],features:[s.TTD]}),r})();class a{}let l=(()=>{class r{}return r.\u0275fac=function(u){return new(u||r)},r.\u0275mod=s.oAB({type:r}),r.\u0275inj=s.cJS({imports:[[o.ez]]}),r})()},86911:(e,t,n)=>{"use strict";n.d(t,{Ek:()=>u,hQ:()=>z,e4:()=>b,yW:()=>d,d_:()=>x});var o=n(64762),s=n(90625),i=n(46782),a=n(36102),l=n(96182),r=n(37716);const d={top:new s.tR({originX:"center",originY:"top"},{overlayX:"center",overlayY:"bottom"}),topCenter:new s.tR({originX:"center",originY:"top"},{overlayX:"center",overlayY:"bottom"}),topLeft:new s.tR({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"}),topRight:new s.tR({originX:"end",originY:"top"},{overlayX:"end",overlayY:"bottom"}),right:new s.tR({originX:"end",originY:"center"},{overlayX:"start",overlayY:"center"}),rightTop:new s.tR({originX:"end",originY:"top"},{overlayX:"start",overlayY:"top"}),rightBottom:new s.tR({originX:"end",originY:"bottom"},{overlayX:"start",overlayY:"bottom"}),bottom:new s.tR({originX:"center",originY:"bottom"},{overlayX:"center",overlayY:"top"}),bottomCenter:new s.tR({originX:"center",originY:"bottom"},{overlayX:"center",overlayY:"top"}),bottomLeft:new s.tR({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),bottomRight:new s.tR({originX:"end",originY:"bottom"},{overlayX:"end",overlayY:"top"}),left:new s.tR({originX:"start",originY:"center"},{overlayX:"end",overlayY:"center"}),leftTop:new s.tR({originX:"start",originY:"top"},{overlayX:"end",overlayY:"top"}),leftBottom:new s.tR({originX:"start",originY:"bottom"},{overlayX:"end",overlayY:"bottom"})},u=[d.top,d.right,d.bottom,d.left];function x(_){for(const H in d)if(_.connectionPair.originX===d[H].originX&&_.connectionPair.originY===d[H].originY&&_.connectionPair.overlayX===d[H].overlayX&&_.connectionPair.overlayY===d[H].overlayY)return H}new s.tR({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"bottom"}),new s.tR({originX:"start",originY:"bottom"},{overlayX:"end",overlayY:"bottom"}),new s.tR({originX:"start",originY:"bottom"},{overlayX:"end",overlayY:"top"});let z=(()=>{class _{constructor(T,L){this.cdkConnectedOverlay=T,this.nzDestroyService=L,this.nzArrowPointAtCenter=!1,this.cdkConnectedOverlay.backdropClass="nz-overlay-transparent-backdrop",this.cdkConnectedOverlay.positionChange.pipe((0,i.R)(this.nzDestroyService)).subscribe(V=>{this.nzArrowPointAtCenter&&this.updateArrowPosition(V)})}updateArrowPosition(T){const V=this.cdkConnectedOverlay.origin.elementRef.nativeElement.getBoundingClientRect(),Y=x(T);let J=0,K=0;"topLeft"===Y||"bottomLeft"===Y?J=V.width/2-14:"topRight"===Y||"bottomRight"===Y?J=-(V.width/2-14):"leftTop"===Y||"rightTop"===Y?K=V.height/2-10:("leftBottom"===Y||"rightBottom"===Y)&&(K=-(V.height/2-10)),(this.cdkConnectedOverlay.offsetX!==J||this.cdkConnectedOverlay.offsetY!==K)&&(this.cdkConnectedOverlay.offsetY=K,this.cdkConnectedOverlay.offsetX=J,this.cdkConnectedOverlay.overlayRef.updatePosition())}}return _.\u0275fac=function(T){return new(T||_)(r.Y36(s.pI),r.Y36(a.kn))},_.\u0275dir=r.lG2({type:_,selectors:[["","cdkConnectedOverlay","","nzConnectedOverlay",""]],inputs:{nzArrowPointAtCenter:"nzArrowPointAtCenter"},exportAs:["nzConnectedOverlay"],features:[r._Bn([a.kn])]}),(0,o.gn)([(0,l.yF)()],_.prototype,"nzArrowPointAtCenter",void 0),_})(),b=(()=>{class _{}return _.\u0275fac=function(T){return new(T||_)},_.\u0275mod=r.oAB({type:_}),_.\u0275inj=r.cJS({}),_})()},26169:(e,t,n)=>{"use strict";n.d(t,{h:()=>a,e:()=>l});const o=["moz","ms","webkit"];function a(r){if("undefined"==typeof window)return null;if(window.cancelAnimationFrame)return window.cancelAnimationFrame(r);const d=o.filter(u=>`${u}CancelAnimationFrame`in window||`${u}CancelRequestAnimationFrame`in window)[0];return d?(window[`${d}CancelAnimationFrame`]||window[`${d}CancelRequestAnimationFrame`]).call(this,r):clearTimeout(r)}const l=function(){if("undefined"==typeof window)return()=>0;if(window.requestAnimationFrame)return window.requestAnimationFrame.bind(window);const r=o.filter(d=>`${d}RequestAnimationFrame`in window)[0];return r?window[`${r}RequestAnimationFrame`]:function(){let r=0;return function(d){const u=(new Date).getTime(),g=Math.max(0,16-(u-r)),f=setTimeout(()=>{d(u+g)},g);return r=u+g,f}}()}()},36102:(e,t,n)=>{"use strict";n.d(t,{G_:()=>L,r3:()=>J,kn:()=>K,rI:()=>v,WV:()=>V,ow:()=>Y});var o=n(37716),s=n(79765),i=n(80013),a=n(68939),l=n(88002),r=n(39761),d=n(87519),u=n(65072);const g=()=>{};let v=(()=>{class X{constructor(he,Q){this.ngZone=he,this.rendererFactory2=Q,this.resizeSource$=new s.xQ,this.listeners=0,this.disposeHandle=g,this.handler=()=>{this.ngZone.run(()=>{this.resizeSource$.next()})},this.renderer=this.rendererFactory2.createRenderer(null,null)}ngOnDestroy(){this.handler=g}subscribe(){return this.registerListener(),this.resizeSource$.pipe((0,i.e)(16),(0,a.x)(()=>this.unregisterListener()))}unsubscribe(){this.unregisterListener()}registerListener(){0===this.listeners&&this.ngZone.runOutsideAngular(()=>{this.disposeHandle=this.renderer.listen("window","resize",this.handler)}),this.listeners+=1}unregisterListener(){this.listeners-=1,0===this.listeners&&(this.disposeHandle(),this.disposeHandle=g)}}return X.\u0275fac=function(he){return new(he||X)(o.LFG(o.R0b),o.LFG(o.FYo))},X.\u0275prov=o.Yz7({factory:function(){return new X(o.LFG(o.R0b),o.LFG(o.FYo))},token:X,providedIn:"root"}),X})();new Map;var L=(()=>{return(X=L||(L={})).xxl="xxl",X.xl="xl",X.lg="lg",X.md="md",X.sm="sm",X.xs="xs",L;var X})();const V={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"},Y={xs:"(max-width: 479.98px)",sm:"(max-width: 575.98px)",md:"(max-width: 767.98px)",lg:"(max-width: 991.98px)",xl:"(max-width: 1199.98px)",xxl:"(max-width: 1599.98px)"};let J=(()=>{class X{constructor(he,Q){this.resizeService=he,this.mediaMatcher=Q,this.resizeService.subscribe().subscribe(()=>{})}subscribe(he,Q){if(Q){const ye=()=>this.matchMedia(he,!0);return this.resizeService.subscribe().pipe((0,l.U)(ye),(0,r.O)(ye()),(0,d.x)((Le,lt)=>Le[0]===lt[0]),(0,l.U)(Le=>Le[1]))}{const ye=()=>this.matchMedia(he);return this.resizeService.subscribe().pipe((0,l.U)(ye),(0,r.O)(ye()),(0,d.x)())}}matchMedia(he,Q){let ye=L.md;const Le={};return Object.keys(he).map(lt=>{const Me=lt,De=this.mediaMatcher.matchMedia(V[Me]).matches;Le[lt]=De,De&&(ye=Me)}),Q?[ye,Le]:ye}}return X.\u0275fac=function(he){return new(he||X)(o.LFG(v),o.LFG(u.vx))},X.\u0275prov=o.Yz7({factory:function(){return new X(o.LFG(v),o.LFG(u.vx))},token:X,providedIn:"root"}),X})(),K=(()=>{class X extends s.xQ{ngOnDestroy(){this.next(),this.complete()}}return X.\u0275fac=function(){let ne;return function(Q){return(ne||(ne=o.n5z(X)))(Q||X)}}(),X.\u0275prov=o.Yz7({token:X,factory:X.\u0275fac}),X})()},84514:(e,t,n)=>{"use strict";n.d(t,{w:()=>i,a:()=>a});var o=n(80521),s=n(37716);let i=(()=>{class l{constructor(d,u){this.elementRef=d,this.renderer=u,this.hidden=null,this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","")}setHiddenAttribute(){this.hidden?this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","string"==typeof this.hidden?this.hidden:""):this.renderer.removeAttribute(this.elementRef.nativeElement,"hidden")}ngOnChanges(){this.setHiddenAttribute()}ngAfterViewInit(){this.setHiddenAttribute()}}return l.\u0275fac=function(d){return new(d||l)(s.Y36(s.SBq),s.Y36(s.Qsj))},l.\u0275dir=s.lG2({type:l,selectors:[["","nz-button",""],["nz-button-group"],["","nz-icon",""],["","nz-menu-item",""],["","nz-submenu",""],["nz-select-top-control"],["nz-select-placeholder"],["nz-input-group"]],inputs:{hidden:"hidden"},features:[s.TTD]}),l})(),a=(()=>{class l{}return l.\u0275fac=function(d){return new(d||l)},l.\u0275mod=s.oAB({type:l}),l.\u0275inj=s.cJS({imports:[[o.ud]]}),l})()},96182:(e,t,n)=>{"use strict";n.d(t,{yF:()=>J,Rn:()=>re,cO:()=>g,xV:()=>tt,pW:()=>ne,OY:()=>Oe,p8:()=>k,ov:()=>Ce,kK:()=>x,DX:()=>v,D8:()=>N,jJ:()=>X,sw:()=>H,WX:()=>L,He:()=>T,lN:()=>Be});var o=n(39490),s=n(96526),i=n(79765),a=n(95639),l=n(94402),r=n(25917),d=n(15257);function g(Z,we){if(!Z||!we||Z.length!==we.length)return!1;const Fe=Z.length;for(let Ue=0;Ue<Fe;Ue++)if(Z[Ue]!==we[Ue])return!1;return!0}function v(Z){return null!=Z}function x(Z){return null==Z}function H(Z){return(0,o.Ig)(Z)}function T(Z,we=0){return(0,o.t6)(Z)?Number(Z):we}function L(Z){return(0,o.HM)(Z)}function Y(Z,we){return function(Ue,qe,de){const Ie=`$$__zorroPropDecorator__${qe}`;return Object.prototype.hasOwnProperty.call(Ue,Ie)&&(0,s.ZK)(`The prop "${Ie}" is already exist, it will be overrided by ${Z} decorator.`),Object.defineProperty(Ue,Ie,{configurable:!0,writable:!0}),{get(){return de&&de.get?de.get.bind(this)():this[Ie]},set(W){de&&de.set&&de.set.bind(this)(we(W)),this[Ie]=we(W)}}}}function J(){return Y("InputBoolean",H)}function re(Z){return Y("InputNumber",we=>T(we,Z))}function X(Z){Z.stopPropagation(),Z.preventDefault()}function ne(Z){if(!Z.getClientRects().length)return{top:0,left:0};const we=Z.getBoundingClientRect(),Fe=Z.ownerDocument.defaultView;return{top:we.top+Fe.pageYOffset,left:we.left+Fe.pageXOffset}}function Oe(Z,we,Fe){return(Fe-Z)/(we-Z)*100}function k(Z){const we=Z.toString(),Fe=we.indexOf(".");return Fe>=0?we.length-Fe-1:0}function tt(Z,we,Fe){return isNaN(Z)||Z<we?we:Z>Fe?Fe:Z}let Gt,le;"undefined"!=typeof window&&window;const Ge={position:"absolute",top:"-9999px",width:"50px",height:"50px"};function N(Z="vertical",we="ant"){if("undefined"==typeof document||"undefined"==typeof window)return 0;const Fe="vertical"===Z;if(Fe&&Gt)return Gt;if(!Fe&&le)return le;const Ue=document.createElement("div");Object.keys(Ge).forEach(de=>{Ue.style[de]=Ge[de]}),Ue.className=`${we}-hide-scrollbar scroll-div-append-to-body`,Fe?Ue.style.overflowY="scroll":Ue.style.overflowX="scroll",document.body.appendChild(Ue);let qe=0;return Fe?(qe=Ue.offsetWidth-Ue.clientWidth,Gt=qe):(qe=Ue.offsetHeight-Ue.clientHeight,le=qe),document.body.removeChild(Ue),qe}function Ce(){const Z=new i.xQ;return Promise.resolve().then(()=>Z.next()),Z.pipe((0,d.q)(1))}function Be(Z){return(0,a.b)(Z)?Z:function(Z){return!!Z&&"function"==typeof Z.then&&"function"==typeof Z.catch}(Z)?(0,l.D)(Promise.resolve(Z)):(0,r.of)(Z)}},29374:(e,t,n)=>{"use strict";n.d(t,{dQ:()=>u,vG:()=>g});var o=n(80521),s=n(37716),i=n(46237);class a{constructor(v,x,z,b){this.triggerElement=v,this.ngZone=x,this.insertExtraNode=z,this.platformId=b,this.waveTransitionDuration=400,this.styleForPseudo=null,this.extraNode=null,this.lastTime=0,this.onClick=_=>{!this.triggerElement||!this.triggerElement.getAttribute||this.triggerElement.getAttribute("disabled")||"INPUT"===_.target.tagName||this.triggerElement.className.indexOf("disabled")>=0||this.fadeOutWave()},this.platform=new o.t4(this.platformId),this.clickHandler=this.onClick.bind(this),this.bindTriggerEvent()}get waveAttributeName(){return this.insertExtraNode?"ant-click-animating":"ant-click-animating-without-extra-node"}bindTriggerEvent(){this.platform.isBrowser&&this.ngZone.runOutsideAngular(()=>{this.removeTriggerEvent(),this.triggerElement&&this.triggerElement.addEventListener("click",this.clickHandler,!0)})}removeTriggerEvent(){this.triggerElement&&this.triggerElement.removeEventListener("click",this.clickHandler,!0)}removeStyleAndExtraNode(){this.styleForPseudo&&document.body.contains(this.styleForPseudo)&&(document.body.removeChild(this.styleForPseudo),this.styleForPseudo=null),this.insertExtraNode&&this.triggerElement.contains(this.extraNode)&&this.triggerElement.removeChild(this.extraNode)}destroy(){this.removeTriggerEvent(),this.removeStyleAndExtraNode()}fadeOutWave(){const v=this.triggerElement,x=this.getWaveColor(v);v.setAttribute(this.waveAttributeName,"true"),!(Date.now()<this.lastTime+this.waveTransitionDuration)&&(this.isValidColor(x)&&(this.styleForPseudo||(this.styleForPseudo=document.createElement("style")),this.styleForPseudo.innerHTML=`\n      [ant-click-animating-without-extra-node='true']::after, .ant-click-animating-node {\n        --antd-wave-shadow-color: ${x};\n      }`,document.body.appendChild(this.styleForPseudo)),this.insertExtraNode&&(this.extraNode||(this.extraNode=document.createElement("div")),this.extraNode.className="ant-click-animating-node",v.appendChild(this.extraNode)),this.lastTime=Date.now(),this.runTimeoutOutsideZone(()=>{v.removeAttribute(this.waveAttributeName),this.removeStyleAndExtraNode()},this.waveTransitionDuration))}isValidColor(v){return!!v&&"#ffffff"!==v&&"rgb(255, 255, 255)"!==v&&this.isNotGrey(v)&&!/rgba\(\d*, \d*, \d*, 0\)/.test(v)&&"transparent"!==v}isNotGrey(v){const x=v.match(/rgba?\((\d*), (\d*), (\d*)(, [\.\d]*)?\)/);return!(x&&x[1]&&x[2]&&x[3]&&x[1]===x[2]&&x[2]===x[3])}getWaveColor(v){const x=getComputedStyle(v);return x.getPropertyValue("border-top-color")||x.getPropertyValue("border-color")||x.getPropertyValue("background-color")}runTimeoutOutsideZone(v,x){this.ngZone.runOutsideAngular(()=>setTimeout(v,x))}}const l={disabled:!1},r=new s.OlP("nz-wave-global-options",{providedIn:"root",factory:function(){return l}});let u=(()=>{class f{constructor(x,z,b,_,H){this.ngZone=x,this.elementRef=z,this.config=b,this.animationType=_,this.platformId=H,this.nzWaveExtraNode=!1,this.waveDisabled=!1,this.waveDisabled=this.isConfigDisabled()}get disabled(){return this.waveDisabled}get rendererRef(){return this.waveRenderer}isConfigDisabled(){let x=!1;return this.config&&"boolean"==typeof this.config.disabled&&(x=this.config.disabled),"NoopAnimations"===this.animationType&&(x=!0),x}ngOnDestroy(){this.waveRenderer&&this.waveRenderer.destroy()}ngOnInit(){this.renderWaveIfEnabled()}renderWaveIfEnabled(){!this.waveDisabled&&this.elementRef.nativeElement&&(this.waveRenderer=new a(this.elementRef.nativeElement,this.ngZone,this.nzWaveExtraNode,this.platformId))}disable(){this.waveDisabled=!0,this.waveRenderer&&(this.waveRenderer.removeTriggerEvent(),this.waveRenderer.removeStyleAndExtraNode())}enable(){this.waveDisabled=this.isConfigDisabled()||!1,this.waveRenderer&&this.waveRenderer.bindTriggerEvent()}}return f.\u0275fac=function(x){return new(x||f)(s.Y36(s.R0b),s.Y36(s.SBq),s.Y36(r,8),s.Y36(i.Qb,8),s.Y36(s.Lbi))},f.\u0275dir=s.lG2({type:f,selectors:[["","nz-wave",""],["button","nz-button","",3,"nzType","link",3,"nzType","text"]],inputs:{nzWaveExtraNode:"nzWaveExtraNode"},exportAs:["nzWave"]}),f})(),g=(()=>{class f{}return f.\u0275fac=function(x){return new(x||f)},f.\u0275mod=s.oAB({type:f}),f.\u0275inj=s.cJS({imports:[[o.ud]]}),f})()},83385:(e,t,n)=>{"use strict";n.d(t,{g:()=>g,S:()=>f});var o=n(64762),s=n(96182),i=n(70946),a=n(38583),l=n(68178),r=n(37716);function d(v,x){if(1&v&&(r.ynx(0),r._uU(1),r.BQk()),2&v){const z=r.oxw(2);r.xp6(1),r.Oqu(z.nzText)}}function u(v,x){if(1&v&&(r.TgZ(0,"span",1),r.YNc(1,d,2,1,"ng-container",2),r.qZA()),2&v){const z=r.oxw();r.xp6(1),r.Q6J("nzStringTemplateOutlet",z.nzText)}}let g=(()=>{class v{constructor(z){this.elementRef=z,this.nzType="horizontal",this.nzOrientation="center",this.nzDashed=!1,this.nzPlain=!1,this.elementRef.nativeElement.classList.add("ant-divider")}}return v.\u0275fac=function(z){return new(z||v)(r.Y36(r.SBq))},v.\u0275cmp=r.Xpm({type:v,selectors:[["nz-divider"]],hostVars:16,hostBindings:function(z,b){2&z&&r.ekj("ant-divider-horizontal","horizontal"===b.nzType)("ant-divider-vertical","vertical"===b.nzType)("ant-divider-with-text",b.nzText)("ant-divider-plain",b.nzPlain)("ant-divider-with-text-left",b.nzText&&"left"===b.nzOrientation)("ant-divider-with-text-right",b.nzText&&"right"===b.nzOrientation)("ant-divider-with-text-center",b.nzText&&"center"===b.nzOrientation)("ant-divider-dashed",b.nzDashed)},inputs:{nzType:"nzType",nzOrientation:"nzOrientation",nzDashed:"nzDashed",nzPlain:"nzPlain",nzText:"nzText"},exportAs:["nzDivider"],decls:1,vars:1,consts:[["class","ant-divider-inner-text",4,"ngIf"],[1,"ant-divider-inner-text"],[4,"nzStringTemplateOutlet"]],template:function(z,b){1&z&&r.YNc(0,u,2,1,"span",0),2&z&&r.Q6J("ngIf",b.nzText)},directives:[a.O5,l.f],encapsulation:2,changeDetection:0}),(0,o.gn)([(0,s.yF)()],v.prototype,"nzDashed",void 0),(0,o.gn)([(0,s.yF)()],v.prototype,"nzPlain",void 0),v})(),f=(()=>{class v{}return v.\u0275fac=function(z){return new(z||v)},v.\u0275mod=r.oAB({type:v}),v.\u0275inj=r.cJS({imports:[[i.vT,a.ez,l.T]]}),v})()},94401:(e,t,n)=>{"use strict";n.d(t,{cm:()=>nt,b1:()=>gt,RR:()=>ot});var o=n(64762),s=n(36461),i=n(90625),a=n(80521),l=n(87636),r=n(37716),d=n(79765),u=n(26215),g=n(66682),f=n(22759),v=n(59193),x=n(90739),z=n(96736),b=n(88002),_=n(43190),H=n(45435),T=n(80013),L=n(87519),V=n(46782),Y=n(32729),J=n(96526),K=n(86911),re=n(96182),X=n(70946),ne=n(38583),he=n(90665),Q=n(14453),ye=n(90641),Le=n(68178),lt=n(53599),Me=n(83730),De=n(47070);function xe(je,Ze){if(1&je){const ke=r.EpF();r.TgZ(0,"div",0),r.NdJ("@slideMotion.done",function(st){return r.CHM(ke),r.oxw().onAnimationEvent(st)})("mouseenter",function(){return r.CHM(ke),r.oxw().setMouseState(!0)})("mouseleave",function(){return r.CHM(ke),r.oxw().setMouseState(!1)}),r.Hsn(1),r.qZA()}if(2&je){const ke=r.oxw();r.ekj("ant-dropdown-rtl","rtl"===ke.dir),r.Q6J("ngClass",ke.nzOverlayClassName)("ngStyle",ke.nzOverlayStyle)("@slideMotion",void 0)("@.disabled",null==ke.noAnimation?null:ke.noAnimation.nzNoAnimation)("nzNoAnimation",null==ke.noAnimation?null:ke.noAnimation.nzNoAnimation)}}const Oe=["*"],tt=[K.yW.bottomLeft,K.yW.bottomRight,K.yW.topRight,K.yW.topLeft];let nt=(()=>{class je{constructor(ke,vt,st,_t,rt,At){this.nzConfigService=ke,this.elementRef=vt,this.overlay=st,this.renderer=_t,this.viewContainerRef=rt,this.platform=At,this._nzModuleName="dropDown",this.overlayRef=null,this.destroy$=new d.xQ,this.positionStrategy=this.overlay.position().flexibleConnectedTo(this.elementRef.nativeElement).withLockedPosition().withTransformOriginOn(".ant-dropdown"),this.inputVisible$=new u.X(!1),this.nzTrigger$=new u.X("hover"),this.overlayClose$=new d.xQ,this.nzDropdownMenu=null,this.nzTrigger="hover",this.nzMatchWidthElement=null,this.nzHasBackdrop=!1,this.nzBackdrop=!1,this.nzClickHide=!0,this.nzDisabled=!1,this.nzVisible=!1,this.nzOverlayClassName="",this.nzOverlayStyle={},this.nzPlacement="bottomLeft",this.nzVisibleChange=new r.vpe,this.elementRef.nativeElement.classList.add("ant-dropdown-trigger")}setDropdownMenuValue(ke,vt){this.nzDropdownMenu&&this.nzDropdownMenu.setValue(ke,vt)}ngAfterViewInit(){if(this.nzDropdownMenu){const ke=this.elementRef.nativeElement,vt=(0,g.T)((0,f.R)(ke,"mouseenter").pipe((0,z.h)(!0)),(0,f.R)(ke,"mouseleave").pipe((0,z.h)(!1))),_t=(0,g.T)(this.nzDropdownMenu.mouseState$,vt),rt=(0,f.R)(ke,"click").pipe((0,b.U)(()=>!this.nzVisible)),At=this.nzTrigger$.pipe((0,_.w)(Lt=>"hover"===Lt?_t:"click"===Lt?rt:v.E)),$e=this.nzDropdownMenu.descendantMenuItemClick$.pipe((0,H.h)(()=>this.nzClickHide),(0,z.h)(!1)),yt=(0,g.T)(At,$e,this.overlayClose$).pipe((0,H.h)(()=>!this.nzDisabled)),Bt=(0,g.T)(this.inputVisible$,yt);(0,x.aj)([Bt,this.nzDropdownMenu.isChildSubMenuOpen$]).pipe((0,b.U)(([Lt,Vt])=>Lt||Vt),(0,T.e)(150),(0,L.x)(),(0,H.h)(()=>this.platform.isBrowser),(0,V.R)(this.destroy$)).subscribe(Lt=>{const Zt=(this.nzMatchWidthElement?this.nzMatchWidthElement.nativeElement:ke).getBoundingClientRect().width;this.nzVisible!==Lt&&this.nzVisibleChange.emit(Lt),this.nzVisible=Lt,Lt?(this.overlayRef?this.overlayRef.getConfig().minWidth=Zt:(this.overlayRef=this.overlay.create({positionStrategy:this.positionStrategy,minWidth:Zt,disposeOnNavigation:!0,hasBackdrop:(this.nzHasBackdrop||this.nzBackdrop)&&"click"===this.nzTrigger,scrollStrategy:this.overlay.scrollStrategies.reposition()}),(0,g.T)(this.overlayRef.backdropClick(),this.overlayRef.detachments(),this.overlayRef.outsidePointerEvents().pipe((0,H.h)(Gt=>!this.elementRef.nativeElement.contains(Gt.target))),this.overlayRef.keydownEvents().pipe((0,H.h)(Gt=>Gt.keyCode===s.hY&&!(0,s.Vb)(Gt)))).pipe((0,V.R)(this.destroy$)).subscribe(()=>{this.overlayClose$.next(!1)})),this.positionStrategy.withPositions([K.yW[this.nzPlacement],...tt]),(!this.portal||this.portal.templateRef!==this.nzDropdownMenu.templateRef)&&(this.portal=new l.UE(this.nzDropdownMenu.templateRef,this.viewContainerRef)),this.overlayRef.attach(this.portal)):this.overlayRef&&this.overlayRef.detach()}),this.nzDropdownMenu.animationStateChange$.pipe((0,V.R)(this.destroy$)).subscribe(Lt=>{"void"===Lt.toState&&(this.overlayRef&&this.overlayRef.dispose(),this.overlayRef=null)})}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null)}ngOnChanges(ke){const{nzVisible:vt,nzDisabled:st,nzOverlayClassName:_t,nzOverlayStyle:rt,nzTrigger:At,nzHasBackdrop:$e}=ke;if(At&&this.nzTrigger$.next(this.nzTrigger),vt&&this.inputVisible$.next(this.nzVisible),st){const yt=this.elementRef.nativeElement;this.nzDisabled?(this.renderer.setAttribute(yt,"disabled",""),this.inputVisible$.next(!1)):this.renderer.removeAttribute(yt,"disabled")}_t&&this.setDropdownMenuValue("nzOverlayClassName",this.nzOverlayClassName),rt&&this.setDropdownMenuValue("nzOverlayStyle",this.nzOverlayStyle),$e&&(0,J.iX)("`nzHasBackdrop` in dropdown component will be removed in 13.0.0, please use `nzBackdrop` instead.")}}return je.\u0275fac=function(ke){return new(ke||je)(r.Y36(Y.jY),r.Y36(r.SBq),r.Y36(i.aV),r.Y36(r.Qsj),r.Y36(r.s_b),r.Y36(a.t4))},je.\u0275dir=r.lG2({type:je,selectors:[["","nz-dropdown",""]],inputs:{nzDropdownMenu:"nzDropdownMenu",nzTrigger:"nzTrigger",nzMatchWidthElement:"nzMatchWidthElement",nzHasBackdrop:"nzHasBackdrop",nzBackdrop:"nzBackdrop",nzClickHide:"nzClickHide",nzDisabled:"nzDisabled",nzVisible:"nzVisible",nzOverlayClassName:"nzOverlayClassName",nzOverlayStyle:"nzOverlayStyle",nzPlacement:"nzPlacement"},outputs:{nzVisibleChange:"nzVisibleChange"},exportAs:["nzDropdown"],features:[r.TTD]}),(0,o.gn)([(0,re.yF)()],je.prototype,"nzHasBackdrop",void 0),(0,o.gn)([(0,Y.oS)(),(0,re.yF)()],je.prototype,"nzBackdrop",void 0),(0,o.gn)([(0,re.yF)()],je.prototype,"nzClickHide",void 0),(0,o.gn)([(0,re.yF)()],je.prototype,"nzDisabled",void 0),(0,o.gn)([(0,re.yF)()],je.prototype,"nzVisible",void 0),je})(),St=(()=>{class je{}return je.\u0275fac=function(ke){return new(ke||je)},je.\u0275mod=r.oAB({type:je}),je.\u0275inj=r.cJS({}),je})(),ot=(()=>{class je{constructor(ke,vt,st,_t,rt,At,$e){this.cdr=ke,this.elementRef=vt,this.renderer=st,this.viewContainerRef=_t,this.nzMenuService=rt,this.directionality=At,this.noAnimation=$e,this.mouseState$=new u.X(!1),this.isChildSubMenuOpen$=this.nzMenuService.isChildSubMenuOpen$,this.descendantMenuItemClick$=this.nzMenuService.descendantMenuItemClick$,this.animationStateChange$=new r.vpe,this.nzOverlayClassName="",this.nzOverlayStyle={},this.dir="ltr",this.destroy$=new d.xQ}onAnimationEvent(ke){this.animationStateChange$.emit(ke)}setMouseState(ke){this.mouseState$.next(ke)}setValue(ke,vt){this[ke]=vt,this.cdr.markForCheck()}ngOnInit(){var ke;null===(ke=this.directionality.change)||void 0===ke||ke.pipe((0,V.R)(this.destroy$)).subscribe(vt=>{this.dir=vt,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngAfterContentInit(){this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),this.elementRef.nativeElement)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return je.\u0275fac=function(ke){return new(ke||je)(r.Y36(r.sBO),r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(r.s_b),r.Y36(Me.hl),r.Y36(X.Is,8),r.Y36(ye.P,9))},je.\u0275cmp=r.Xpm({type:je,selectors:[["nz-dropdown-menu"]],viewQuery:function(ke,vt){if(1&ke&&r.Gf(r.Rgc,7),2&ke){let st;r.iGM(st=r.CRH())&&(vt.templateRef=st.first)}},exportAs:["nzDropdownMenu"],features:[r._Bn([Me.hl,{provide:Me.Cc,useValue:!0}])],ngContentSelectors:Oe,decls:1,vars:0,consts:[[1,"ant-dropdown",3,"ngClass","ngStyle","nzNoAnimation","mouseenter","mouseleave"]],template:function(ke,vt){1&ke&&(r.F$t(),r.YNc(0,xe,2,7,"ng-template"))},directives:[ne.mk,ne.PC,ye.P],encapsulation:2,data:{animation:[De.mF]},changeDetection:0}),je})(),gt=(()=>{class je{}return je.\u0275fac=function(ke){return new(ke||je)},je.\u0275mod=r.oAB({type:je}),je.\u0275inj=r.cJS({imports:[[X.vT,ne.ez,i.U8,he.u5,Q.sL,Me.ip,lt.PV,ye.g,a.ud,K.e4,St,Le.T],Me.ip]}),je})();new i.tR({originX:"start",originY:"top"},{overlayX:"start",overlayY:"top"}),new i.tR({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"}),new i.tR({originX:"start",originY:"top"},{overlayX:"end",overlayY:"bottom"}),new i.tR({originX:"start",originY:"top"},{overlayX:"end",overlayY:"top"})},53599:(e,t,n)=>{"use strict";n.d(t,{Ls:()=>Ra,PV:()=>Va});var o=n(80521),s=n(37716),i=n(64762),a=n(79765),l=n(94402),r=n(46782),d=n(38583);function u(D,F){(function(D){return"string"==typeof D&&-1!==D.indexOf(".")&&1===parseFloat(D)})(D)&&(D="100%");var O=function(D){return"string"==typeof D&&-1!==D.indexOf("%")}(D);return D=360===F?D:Math.min(F,Math.max(0,parseFloat(D))),O&&(D=parseInt(String(D*F),10)/100),Math.abs(D-F)<1e-6?1:D=360===F?(D<0?D%F+F:D%F)/parseFloat(String(F)):D%F/parseFloat(String(F))}function g(D){return Math.min(1,Math.max(0,D))}function x(D){return D=parseFloat(D),(isNaN(D)||D<0||D>1)&&(D=1),D}function z(D){return D<=1?"".concat(100*Number(D),"%"):D}function b(D){return 1===D.length?"0"+D:String(D)}function H(D,F,O){D=u(D,255),F=u(F,255),O=u(O,255);var oe=Math.max(D,F,O),Ee=Math.min(D,F,O),Re=0,Qe=0,mt=(oe+Ee)/2;if(oe===Ee)Qe=0,Re=0;else{var Pt=oe-Ee;switch(Qe=mt>.5?Pt/(2-oe-Ee):Pt/(oe+Ee),oe){case D:Re=(F-O)/Pt+(F<O?6:0);break;case F:Re=(O-D)/Pt+2;break;case O:Re=(D-F)/Pt+4}Re/=6}return{h:Re,s:Qe,l:mt}}function T(D,F,O){return O<0&&(O+=1),O>1&&(O-=1),O<1/6?D+6*O*(F-D):O<.5?F:O<2/3?D+(F-D)*(2/3-O)*6:D}function V(D,F,O){D=u(D,255),F=u(F,255),O=u(O,255);var oe=Math.max(D,F,O),Ee=Math.min(D,F,O),Re=0,Qe=oe,mt=oe-Ee,Pt=0===oe?0:mt/oe;if(oe===Ee)Re=0;else{switch(oe){case D:Re=(F-O)/mt+(F<O?6:0);break;case F:Re=(O-D)/mt+2;break;case O:Re=(D-F)/mt+4}Re/=6}return{h:Re,s:Pt,v:Qe}}function J(D,F,O,oe){var Ee=[b(Math.round(D).toString(16)),b(Math.round(F).toString(16)),b(Math.round(O).toString(16))];return oe&&Ee[0].startsWith(Ee[0].charAt(1))&&Ee[1].startsWith(Ee[1].charAt(1))&&Ee[2].startsWith(Ee[2].charAt(1))?Ee[0].charAt(0)+Ee[1].charAt(0)+Ee[2].charAt(0):Ee.join("")}function X(D){return Math.round(255*parseFloat(D)).toString(16)}function ne(D){return he(D)/255}function he(D){return parseInt(D,16)}var ye={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};var De="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),xe="[\\s|\\(]+(".concat(De,")[,|\\s]+(").concat(De,")[,|\\s]+(").concat(De,")\\s*\\)?"),Oe="[\\s|\\(]+(".concat(De,")[,|\\s]+(").concat(De,")[,|\\s]+(").concat(De,")[,|\\s]+(").concat(De,")\\s*\\)?"),k={CSS_UNIT:new RegExp(De),rgb:new RegExp("rgb"+xe),rgba:new RegExp("rgba"+Oe),hsl:new RegExp("hsl"+xe),hsla:new RegExp("hsla"+Oe),hsv:new RegExp("hsv"+xe),hsva:new RegExp("hsva"+Oe),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function nt(D){return Boolean(k.CSS_UNIT.exec(String(D)))}var St=function(){function D(F,O){var oe;if(void 0===F&&(F=""),void 0===O&&(O={}),F instanceof D)return F;"number"==typeof F&&(F=function(D){return{r:D>>16,g:(65280&D)>>8,b:255&D}}(F)),this.originalInput=F;var Ee=function(D){var F={r:0,g:0,b:0},O=1,oe=null,Ee=null,Re=null,Qe=!1,mt=!1;return"string"==typeof D&&(D=function(D){if(0===(D=D.trim().toLowerCase()).length)return!1;var F=!1;if(ye[D])D=ye[D],F=!0;else if("transparent"===D)return{r:0,g:0,b:0,a:0,format:"name"};var O=k.rgb.exec(D);return O?{r:O[1],g:O[2],b:O[3]}:(O=k.rgba.exec(D))?{r:O[1],g:O[2],b:O[3],a:O[4]}:(O=k.hsl.exec(D))?{h:O[1],s:O[2],l:O[3]}:(O=k.hsla.exec(D))?{h:O[1],s:O[2],l:O[3],a:O[4]}:(O=k.hsv.exec(D))?{h:O[1],s:O[2],v:O[3]}:(O=k.hsva.exec(D))?{h:O[1],s:O[2],v:O[3],a:O[4]}:(O=k.hex8.exec(D))?{r:he(O[1]),g:he(O[2]),b:he(O[3]),a:ne(O[4]),format:F?"name":"hex8"}:(O=k.hex6.exec(D))?{r:he(O[1]),g:he(O[2]),b:he(O[3]),format:F?"name":"hex"}:(O=k.hex4.exec(D))?{r:he(O[1]+O[1]),g:he(O[2]+O[2]),b:he(O[3]+O[3]),a:ne(O[4]+O[4]),format:F?"name":"hex8"}:!!(O=k.hex3.exec(D))&&{r:he(O[1]+O[1]),g:he(O[2]+O[2]),b:he(O[3]+O[3]),format:F?"name":"hex"}}(D)),"object"==typeof D&&(nt(D.r)&&nt(D.g)&&nt(D.b)?(F=function(D,F,O){return{r:255*u(D,255),g:255*u(F,255),b:255*u(O,255)}}(D.r,D.g,D.b),Qe=!0,mt="%"===String(D.r).substr(-1)?"prgb":"rgb"):nt(D.h)&&nt(D.s)&&nt(D.v)?(oe=z(D.s),Ee=z(D.v),F=function(D,F,O){D=6*u(D,360),F=u(F,100),O=u(O,100);var oe=Math.floor(D),Ee=D-oe,Re=O*(1-F),Qe=O*(1-Ee*F),mt=O*(1-(1-Ee)*F),Pt=oe%6;return{r:255*[O,Qe,Re,Re,mt,O][Pt],g:255*[mt,O,O,Qe,Re,Re][Pt],b:255*[Re,Re,mt,O,O,Qe][Pt]}}(D.h,oe,Ee),Qe=!0,mt="hsv"):nt(D.h)&&nt(D.s)&&nt(D.l)&&(oe=z(D.s),Re=z(D.l),F=function(D,F,O){var oe,Ee,Re;if(D=u(D,360),F=u(F,100),O=u(O,100),0===F)Ee=O,Re=O,oe=O;else{var Qe=O<.5?O*(1+F):O+F-O*F,mt=2*O-Qe;oe=T(mt,Qe,D+1/3),Ee=T(mt,Qe,D),Re=T(mt,Qe,D-1/3)}return{r:255*oe,g:255*Ee,b:255*Re}}(D.h,oe,Re),Qe=!0,mt="hsl"),Object.prototype.hasOwnProperty.call(D,"a")&&(O=D.a)),O=x(O),{ok:Qe,format:D.format||mt,r:Math.min(255,Math.max(F.r,0)),g:Math.min(255,Math.max(F.g,0)),b:Math.min(255,Math.max(F.b,0)),a:O}}(F);this.originalInput=F,this.r=Ee.r,this.g=Ee.g,this.b=Ee.b,this.a=Ee.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(oe=O.format)&&void 0!==oe?oe:Ee.format,this.gradientType=O.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=Ee.ok}return D.prototype.isDark=function(){return this.getBrightness()<128},D.prototype.isLight=function(){return!this.isDark()},D.prototype.getBrightness=function(){var F=this.toRgb();return(299*F.r+587*F.g+114*F.b)/1e3},D.prototype.getLuminance=function(){var F=this.toRgb(),Re=F.r/255,Qe=F.g/255,mt=F.b/255;return.2126*(Re<=.03928?Re/12.92:Math.pow((Re+.055)/1.055,2.4))+.7152*(Qe<=.03928?Qe/12.92:Math.pow((Qe+.055)/1.055,2.4))+.0722*(mt<=.03928?mt/12.92:Math.pow((mt+.055)/1.055,2.4))},D.prototype.getAlpha=function(){return this.a},D.prototype.setAlpha=function(F){return this.a=x(F),this.roundA=Math.round(100*this.a)/100,this},D.prototype.toHsv=function(){var F=V(this.r,this.g,this.b);return{h:360*F.h,s:F.s,v:F.v,a:this.a}},D.prototype.toHsvString=function(){var F=V(this.r,this.g,this.b),O=Math.round(360*F.h),oe=Math.round(100*F.s),Ee=Math.round(100*F.v);return 1===this.a?"hsv(".concat(O,", ").concat(oe,"%, ").concat(Ee,"%)"):"hsva(".concat(O,", ").concat(oe,"%, ").concat(Ee,"%, ").concat(this.roundA,")")},D.prototype.toHsl=function(){var F=H(this.r,this.g,this.b);return{h:360*F.h,s:F.s,l:F.l,a:this.a}},D.prototype.toHslString=function(){var F=H(this.r,this.g,this.b),O=Math.round(360*F.h),oe=Math.round(100*F.s),Ee=Math.round(100*F.l);return 1===this.a?"hsl(".concat(O,", ").concat(oe,"%, ").concat(Ee,"%)"):"hsla(".concat(O,", ").concat(oe,"%, ").concat(Ee,"%, ").concat(this.roundA,")")},D.prototype.toHex=function(F){return void 0===F&&(F=!1),J(this.r,this.g,this.b,F)},D.prototype.toHexString=function(F){return void 0===F&&(F=!1),"#"+this.toHex(F)},D.prototype.toHex8=function(F){return void 0===F&&(F=!1),function(D,F,O,oe,Ee){var Re=[b(Math.round(D).toString(16)),b(Math.round(F).toString(16)),b(Math.round(O).toString(16)),b(X(oe))];return Ee&&Re[0].startsWith(Re[0].charAt(1))&&Re[1].startsWith(Re[1].charAt(1))&&Re[2].startsWith(Re[2].charAt(1))&&Re[3].startsWith(Re[3].charAt(1))?Re[0].charAt(0)+Re[1].charAt(0)+Re[2].charAt(0)+Re[3].charAt(0):Re.join("")}(this.r,this.g,this.b,this.a,F)},D.prototype.toHex8String=function(F){return void 0===F&&(F=!1),"#"+this.toHex8(F)},D.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},D.prototype.toRgbString=function(){var F=Math.round(this.r),O=Math.round(this.g),oe=Math.round(this.b);return 1===this.a?"rgb(".concat(F,", ").concat(O,", ").concat(oe,")"):"rgba(".concat(F,", ").concat(O,", ").concat(oe,", ").concat(this.roundA,")")},D.prototype.toPercentageRgb=function(){var F=function(O){return"".concat(Math.round(100*u(O,255)),"%")};return{r:F(this.r),g:F(this.g),b:F(this.b),a:this.a}},D.prototype.toPercentageRgbString=function(){var F=function(O){return Math.round(100*u(O,255))};return 1===this.a?"rgb(".concat(F(this.r),"%, ").concat(F(this.g),"%, ").concat(F(this.b),"%)"):"rgba(".concat(F(this.r),"%, ").concat(F(this.g),"%, ").concat(F(this.b),"%, ").concat(this.roundA,")")},D.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var F="#"+J(this.r,this.g,this.b,!1),O=0,oe=Object.entries(ye);O<oe.length;O++){var Ee=oe[O];if(F===Ee[1])return Ee[0]}return!1},D.prototype.toString=function(F){var O=Boolean(F);F=null!=F?F:this.format;var oe=!1;return!O&&this.a<1&&this.a>=0&&(F.startsWith("hex")||"name"===F)?"name"===F&&0===this.a?this.toName():this.toRgbString():("rgb"===F&&(oe=this.toRgbString()),"prgb"===F&&(oe=this.toPercentageRgbString()),("hex"===F||"hex6"===F)&&(oe=this.toHexString()),"hex3"===F&&(oe=this.toHexString(!0)),"hex4"===F&&(oe=this.toHex8String(!0)),"hex8"===F&&(oe=this.toHex8String()),"name"===F&&(oe=this.toName()),"hsl"===F&&(oe=this.toHslString()),"hsv"===F&&(oe=this.toHsvString()),oe||this.toHexString())},D.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},D.prototype.clone=function(){return new D(this.toString())},D.prototype.lighten=function(F){void 0===F&&(F=10);var O=this.toHsl();return O.l+=F/100,O.l=g(O.l),new D(O)},D.prototype.brighten=function(F){void 0===F&&(F=10);var O=this.toRgb();return O.r=Math.max(0,Math.min(255,O.r-Math.round(-F/100*255))),O.g=Math.max(0,Math.min(255,O.g-Math.round(-F/100*255))),O.b=Math.max(0,Math.min(255,O.b-Math.round(-F/100*255))),new D(O)},D.prototype.darken=function(F){void 0===F&&(F=10);var O=this.toHsl();return O.l-=F/100,O.l=g(O.l),new D(O)},D.prototype.tint=function(F){return void 0===F&&(F=10),this.mix("white",F)},D.prototype.shade=function(F){return void 0===F&&(F=10),this.mix("black",F)},D.prototype.desaturate=function(F){void 0===F&&(F=10);var O=this.toHsl();return O.s-=F/100,O.s=g(O.s),new D(O)},D.prototype.saturate=function(F){void 0===F&&(F=10);var O=this.toHsl();return O.s+=F/100,O.s=g(O.s),new D(O)},D.prototype.greyscale=function(){return this.desaturate(100)},D.prototype.spin=function(F){var O=this.toHsl(),oe=(O.h+F)%360;return O.h=oe<0?360+oe:oe,new D(O)},D.prototype.mix=function(F,O){void 0===O&&(O=50);var oe=this.toRgb(),Ee=new D(F).toRgb(),Re=O/100;return new D({r:(Ee.r-oe.r)*Re+oe.r,g:(Ee.g-oe.g)*Re+oe.g,b:(Ee.b-oe.b)*Re+oe.b,a:(Ee.a-oe.a)*Re+oe.a})},D.prototype.analogous=function(F,O){void 0===F&&(F=6),void 0===O&&(O=30);var oe=this.toHsl(),Ee=360/O,Re=[this];for(oe.h=(oe.h-(Ee*F>>1)+720)%360;--F;)oe.h=(oe.h+Ee)%360,Re.push(new D(oe));return Re},D.prototype.complement=function(){var F=this.toHsl();return F.h=(F.h+180)%360,new D(F)},D.prototype.monochromatic=function(F){void 0===F&&(F=6);for(var O=this.toHsv(),oe=O.h,Ee=O.s,Re=O.v,Qe=[],mt=1/F;F--;)Qe.push(new D({h:oe,s:Ee,v:Re})),Re=(Re+mt)%1;return Qe},D.prototype.splitcomplement=function(){var F=this.toHsl(),O=F.h;return[this,new D({h:(O+72)%360,s:F.s,l:F.l}),new D({h:(O+216)%360,s:F.s,l:F.l})]},D.prototype.onBackground=function(F){var O=this.toRgb(),oe=new D(F).toRgb();return new D({r:oe.r+(O.r-oe.r)*O.a,g:oe.g+(O.g-oe.g)*O.a,b:oe.b+(O.b-oe.b)*O.a})},D.prototype.triad=function(){return this.polyad(3)},D.prototype.tetrad=function(){return this.polyad(4)},D.prototype.polyad=function(F){for(var O=this.toHsl(),oe=O.h,Ee=[this],Re=360/F,Qe=1;Qe<F;Qe++)Ee.push(new D({h:(oe+Qe*Re)%360,s:O.s,l:O.l}));return Ee},D.prototype.equals=function(F){return this.toRgbString()===new D(F).toRgbString()},D}(),ke=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function vt(D,F,O){var oe;return(oe=Math.round(D.h)>=60&&Math.round(D.h)<=240?O?Math.round(D.h)-2*F:Math.round(D.h)+2*F:O?Math.round(D.h)+2*F:Math.round(D.h)-2*F)<0?oe+=360:oe>=360&&(oe-=360),oe}function st(D,F,O){return 0===D.h&&0===D.s?D.s:((oe=O?D.s-.16*F:4===F?D.s+.16:D.s+.05*F)>1&&(oe=1),O&&5===F&&oe>.1&&(oe=.1),oe<.06&&(oe=.06),Number(oe.toFixed(2)));var oe}function _t(D,F,O){var oe;return(oe=O?D.v+.05*F:D.v-.15*F)>1&&(oe=1),Number(oe.toFixed(2))}function rt(D){for(var F=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},O=[],oe=new St(D),Ee=5;Ee>0;Ee-=1){var Re=oe.toHsv(),Qe=new St({h:vt(Re,Ee,!0),s:st(Re,Ee,!0),v:_t(Re,Ee,!0)}).toHexString();O.push(Qe)}O.push(oe.toHexString());for(var mt=1;mt<=4;mt+=1){var Pt=oe.toHsv(),an=new St({h:vt(Pt,mt),s:st(Pt,mt),v:_t(Pt,mt)}).toHexString();O.push(an)}return"dark"===F.theme?ke.map(function(bn){var vn=bn.index,Ba=bn.opacity;return new St(F.backgroundColor||"#141414").mix(O[vn],100*Ba).toHexString()}):O}var At={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},$e={},yt={};Object.keys(At).forEach(function(D){$e[D]=rt(At[D]),$e[D].primary=$e[D][5],yt[D]=rt(At[D],{theme:"dark",backgroundColor:"#141414"}),yt[D].primary=yt[D][5]});var Fe=n(91841),Ue=n(25917),qe=n(67574),de=n(88002),Ie=n(93342),W=n(68939),G=n(5304),Ye=n(18819),Je=n(45435),Ht=n(15257),kt=n(39075);const Mt="[@ant-design/icons-angular]:";function Xt(D){(0,s.X6Q)()&&console.warn(`${Mt} ${D}.`)}function ve(D){return rt(D)[0]}function q(D,F){switch(F){case"fill":return`${D}-fill`;case"outline":return`${D}-o`;case"twotone":return`${D}-twotone`;case void 0:return D;default:throw new Error(`${Mt}Theme "${F}" is not a recognized theme!`)}}function Xe(D){return"object"==typeof D&&"string"==typeof D.name&&("string"==typeof D.theme||void 0===D.theme)&&"string"==typeof D.icon}function U(D){const F=D.split(":");switch(F.length){case 1:return[D,""];case 2:return[F[1],F[0]];default:throw new Error(`${Mt}The icon type ${D} is not valid!`)}}function Ft(){return new Error(`${Mt}<svg> tag not found.`)}let Jt=(()=>{class D{constructor(O,oe,Ee,Re){this._rendererFactory=O,this._handler=oe,this._document=Ee,this.sanitizer=Re,this.defaultTheme="outline",this._svgDefinitions=new Map,this._svgRenderedDefinitions=new Map,this._inProgressFetches=new Map,this._assetsUrlRoot="",this._twoToneColorPalette={primaryColor:"#333333",secondaryColor:"#E6E6E6"},this._enableJsonpLoading=!1,this._jsonpIconLoad$=new a.xQ,this._renderer=this._rendererFactory.createRenderer(null,null),this._handler&&(this._http=new Fe.eN(this._handler))}set twoToneColor({primaryColor:O,secondaryColor:oe}){this._twoToneColorPalette.primaryColor=O,this._twoToneColorPalette.secondaryColor=oe||ve(O)}get twoToneColor(){return Object.assign({},this._twoToneColorPalette)}useJsonpLoading(){this._enableJsonpLoading?Xt("You are already using jsonp loading."):(this._enableJsonpLoading=!0,window.__ant_icon_load=O=>{this._jsonpIconLoad$.next(O)})}changeAssetsSource(O){this._assetsUrlRoot=O.endsWith("/")?O:O+"/"}addIcon(...O){O.forEach(oe=>{this._svgDefinitions.set(q(oe.name,oe.theme),oe)})}addIconLiteral(O,oe){const[Ee,Re]=U(O);if(!Re)throw new Error(`${Mt}Type should have a namespace. Try "namespace:${name}".`);this.addIcon({name:O,icon:oe})}clear(){this._svgDefinitions.clear(),this._svgRenderedDefinitions.clear()}getRenderedContent(O,oe){const Ee=Xe(O)?O:this._svgDefinitions.get(O)||null;return(Ee?(0,Ue.of)(Ee):this._loadIconDynamically(O)).pipe((0,de.U)(Qe=>{if(!Qe)throw function(D){return new Error(`${Mt}the icon ${D} does not exist or is not registered.`)}(O);return this._loadSVGFromCacheOrCreateNew(Qe,oe)}))}getCachedIcons(){return this._svgDefinitions}_loadIconDynamically(O){if(!this._http&&!this._enableJsonpLoading)return(0,Ue.of)((console.error(`${Mt} you need to import "HttpClientModule" to use dynamic importing..`),null));let oe=this._inProgressFetches.get(O);if(!oe){const[Ee,Re]=U(O),Qe=Re?{name:O,icon:""}:function(D){const F=D.split("-"),O=function(D){return"o"===D?"outline":D}(F.splice(F.length-1,1)[0]);return{name:F.join("-"),theme:O,icon:""}}(Ee),Pt=(Re?`${this._assetsUrlRoot}assets/${Re}/${Ee}`:`${this._assetsUrlRoot}assets/${Qe.theme}/${Qe.name}`)+(this._enableJsonpLoading?".js":".svg"),an=this.sanitizer.sanitize(s.q3G.URL,Pt);if(!an)throw function(D){return new Error(`${Mt}The url "${D}" is unsafe.`)}(Pt);oe=(this._enableJsonpLoading?this._loadIconDynamicallyWithJsonp(Qe,an):this._http.get(an,{responseType:"text"}).pipe((0,de.U)(vn=>Object.assign(Object.assign({},Qe),{icon:vn})))).pipe((0,Ie.b)(vn=>this.addIcon(vn)),(0,W.x)(()=>this._inProgressFetches.delete(O)),(0,G.K)(()=>(0,Ue.of)(null)),(0,Ye.B)()),this._inProgressFetches.set(O,oe)}return oe}_loadIconDynamicallyWithJsonp(O,oe){return new qe.y(Ee=>{const Re=this._document.createElement("script"),Qe=setTimeout(()=>{mt(),Ee.error(new Error(`${Mt}Importing timeout error.`))},6e3);function mt(){Re.parentNode.removeChild(Re),clearTimeout(Qe)}Re.src=oe,this._document.body.appendChild(Re),this._jsonpIconLoad$.pipe((0,Je.h)(Pt=>Pt.name===O.name&&Pt.theme===O.theme),(0,Ht.q)(1)).subscribe(Pt=>{Ee.next(Pt),mt()})})}_loadSVGFromCacheOrCreateNew(O,oe){let Ee;const Re=oe||this._twoToneColorPalette.primaryColor,Qe=ve(Re)||this._twoToneColorPalette.secondaryColor,mt="twotone"===O.theme?function(D,F,O,oe){return`${q(D,F)}-${O}-${oe}`}(O.name,O.theme,Re,Qe):void 0===O.theme?O.name:q(O.name,O.theme),Pt=this._svgRenderedDefinitions.get(mt);return Pt?Ee=Pt.icon:(Ee=this._setSVGAttribute(this._colorizeSVGIcon(this._createSVGElementFromString(function(D){return""!==U(D)[1]}(O.name)?O.icon:function(D){return D.replace(/['"]#333['"]/g,'"primaryColor"').replace(/['"]#E6E6E6['"]/g,'"secondaryColor"').replace(/['"]#D9D9D9['"]/g,'"secondaryColor"').replace(/['"]#D8D8D8['"]/g,'"secondaryColor"')}(O.icon)),"twotone"===O.theme,Re,Qe)),this._svgRenderedDefinitions.set(mt,Object.assign(Object.assign({},O),{icon:Ee}))),function(D){return D.cloneNode(!0)}(Ee)}_createSVGElementFromString(O){const oe=this._document.createElement("div");oe.innerHTML=O;const Ee=oe.querySelector("svg");if(!Ee)throw Ft;return Ee}_setSVGAttribute(O){return this._renderer.setAttribute(O,"width","1em"),this._renderer.setAttribute(O,"height","1em"),O}_colorizeSVGIcon(O,oe,Ee,Re){if(oe){const Qe=O.childNodes,mt=Qe.length;for(let Pt=0;Pt<mt;Pt++){const an=Qe[Pt];"secondaryColor"===an.getAttribute("fill")?this._renderer.setAttribute(an,"fill",Re):this._renderer.setAttribute(an,"fill",Ee)}}return this._renderer.setAttribute(O,"fill","currentColor"),O}}return D.\u0275fac=function(O){return new(O||D)(s.LFG(s.FYo),s.LFG(Fe.jN,8),s.LFG(d.K0,8),s.LFG(kt.H7))},D.\u0275prov=s.Yz7({token:D,factory:D.\u0275fac}),D})(),dn=(()=>{class D{constructor(O,oe,Ee){this._iconService=O,this._elementRef=oe,this._renderer=Ee}ngOnChanges(O){(O.type||O.theme||O.twoToneColor)&&this._changeIcon()}_changeIcon(){return new Promise(O=>{if(this.type){const oe=this._getSelfRenderMeta();this._iconService.getRenderedContent(this._parseIconType(this.type,this.theme),this.twoToneColor).subscribe(Ee=>{!function(D,F){return D.type===F.type&&D.theme===F.theme&&D.twoToneColor===F.twoToneColor}(oe,this._getSelfRenderMeta())?O(null):(this._setSVGElement(Ee),O(Ee))})}else this._clearSVGElement(),O(null)})}_getSelfRenderMeta(){return{type:this.type,theme:this.theme,twoToneColor:this.twoToneColor}}_parseIconType(O,oe){if(Xe(O))return O;{const[Ee,Re]=U(O);return Re?O:function(D){return D.endsWith("-fill")||D.endsWith("-o")||D.endsWith("-twotone")}(Ee)?(oe&&Xt(`'type' ${Ee} already gets a theme inside so 'theme' ${oe} would be ignored`),Ee):q(Ee,oe||this._iconService.defaultTheme)}}_setSVGElement(O){this._clearSVGElement(),this._renderer.appendChild(this._elementRef.nativeElement,O)}_clearSVGElement(){var O;const oe=this._elementRef.nativeElement,Ee=oe.childNodes;for(let Qe=Ee.length-1;Qe>=0;Qe--){const mt=Ee[Qe];"svg"===(null===(O=mt.tagName)||void 0===O?void 0:O.toLowerCase())&&this._renderer.removeChild(oe,mt)}}}return D.\u0275fac=function(O){return new(O||D)(s.Y36(Jt),s.Y36(s.SBq),s.Y36(s.Qsj))},D.\u0275dir=s.lG2({type:D,selectors:[["","antIcon",""]],inputs:{type:"type",theme:"theme",twoToneColor:"twoToneColor"},features:[s.TTD]}),D})();var Wt=n(96182),en=n(32729),ln=n(96526);const ta={name:"star",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z" /></svg>'},Pa=[{name:"bars",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z" /></svg>'},{name:"calendar",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z" /></svg>'},{name:"caret-up",theme:"fill",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z" /></svg>'},{name:"caret-up",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z" /></svg>'},{name:"caret-down",theme:"fill",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z" /></svg>'},{name:"caret-down",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z" /></svg>'},{name:"check-circle",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z" /></svg>'},{name:"check-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z" /><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /></svg>'},{name:"check",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z" /></svg>'},{name:"clock-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /><path d="M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z" /></svg>'},{name:"close-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z" /><path d="M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /></svg>'},{name:"close-circle",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z" /></svg>'},{name:"close",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z" /></svg>'},{name:"copy",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z" /></svg>'},{name:"double-left",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z" /></svg>'},{name:"double-right",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z" /></svg>'},{name:"down",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z" /></svg>'},{name:"edit",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z" /></svg>'},{name:"ellipsis",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z" /></svg>'},{name:"exclamation-circle",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z" /></svg>'},{name:"exclamation-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /><path d="M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z" /></svg>'},{name:"eye",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z" /></svg>'},{name:"file",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M854.6 288.7c6 6 9.4 14.1 9.4 22.6V928c0 17.7-14.3 32-32 32H192c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32h424.7c8.5 0 16.7 3.4 22.7 9.4l215.2 215.3zM790.2 326L602 137.8V326h188.2z" /></svg>'},{name:"file",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z" /></svg>'},{name:"filter",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M349 838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V642H349v196zm531.1-684H143.9c-24.5 0-39.8 26.7-27.5 48l221.3 376h348.8l221.3-376c12.1-21.3-3.2-48-27.7-48z" /></svg>'},{name:"info-circle",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z" /></svg>'},{name:"info-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /><path d="M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z" /></svg>'},{name:"left",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z" /></svg>'},{name:"loading",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z" /></svg>'},{name:"paper-clip",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z" /></svg>'},{name:"question-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /><path d="M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z" /></svg>'},{name:"right",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z" /></svg>'},{name:"rotate-right",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><defs><style /></defs><path d="M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z" /><path d="M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z" /></svg>'},{name:"rotate-left",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><defs><style /></defs><path d="M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z" /><path d="M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z" /></svg>'},ta,{name:"search",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z" /></svg>'},ta,{name:"upload",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z" /></svg>'},{name:"vertical-align-top",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z" /></svg>'},{name:"up",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z" /></svg>'},{name:"swap-right",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M873.1 596.2l-164-208A32 32 0 00684 376h-64.8c-6.7 0-10.4 7.7-6.3 13l144.3 183H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h695.9c26.8 0 41.7-30.8 25.2-51.8z" /></svg>'},{name:"zoom-in",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z" /></svg>'},{name:"zoom-out",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z" /></svg>'}],di=new s.OlP("nz_icons"),na=(new s.OlP("nz_icon_default_twotone_color"),"#1890ff");let ia=(()=>{class D extends Jt{constructor(O,oe,Ee,Re,Qe,mt){super(O,Re,Qe,oe),this.nzConfigService=Ee,this.configUpdated$=new a.xQ,this.iconfontCache=new Set,this.subscription=null,this.onConfigChange(),this.addIcon(...Pa,...mt||[]),this.configDefaultTwotoneColor(),this.configDefaultTheme()}ngOnDestroy(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)}normalizeSvgElement(O){O.getAttribute("viewBox")||this._renderer.setAttribute(O,"viewBox","0 0 1024 1024"),(!O.getAttribute("width")||!O.getAttribute("height"))&&(this._renderer.setAttribute(O,"width","1em"),this._renderer.setAttribute(O,"height","1em")),O.getAttribute("fill")||this._renderer.setAttribute(O,"fill","currentColor")}fetchFromIconfont(O){const{scriptUrl:oe}=O;if(this._document&&!this.iconfontCache.has(oe)){const Ee=this._renderer.createElement("script");this._renderer.setAttribute(Ee,"src",oe),this._renderer.setAttribute(Ee,"data-namespace",oe.replace(/^(https?|http):/g,"")),this._renderer.appendChild(this._document.body,Ee),this.iconfontCache.add(oe)}}createIconfontIcon(O){return this._createSVGElementFromString(`<svg><use xlink:href="${O}"></svg>`)}onConfigChange(){this.subscription=this.nzConfigService.getConfigChangeEventForComponent("icon").subscribe(()=>{this.configDefaultTwotoneColor(),this.configDefaultTheme(),this.configUpdated$.next()})}configDefaultTheme(){const O=this.getConfig();this.defaultTheme=O.nzTheme||"outline"}configDefaultTwotoneColor(){const oe=this.getConfig().nzTwotoneColor||na;let Ee=na;oe&&(oe.startsWith("#")?Ee=oe:(0,ln.ZK)("Twotone color must be a hex color!")),this.twoToneColor={primaryColor:Ee}}getConfig(){return this.nzConfigService.getConfigForComponent("icon")||{}}}return D.\u0275fac=function(O){return new(O||D)(s.LFG(s.FYo),s.LFG(kt.H7),s.LFG(en.jY),s.LFG(Fe.jN,8),s.LFG(d.K0,8),s.LFG(di,8))},D.\u0275prov=s.Yz7({factory:function(){return new D(s.LFG(s.FYo),s.LFG(kt.H7),s.LFG(en.jY),s.LFG(Fe.jN,8),s.LFG(d.K0,8),s.LFG(di,8))},token:D,providedIn:"root"}),D})();const oa=new s.OlP("nz_icons_patch");let sa=(()=>{class D{constructor(O,oe){this.extraIcons=O,this.rootIconService=oe,this.patched=!1}doPatch(){this.patched||(this.extraIcons.forEach(O=>this.rootIconService.addIcon(O)),this.patched=!0)}}return D.\u0275fac=function(O){return new(O||D)(s.LFG(oa,2),s.LFG(ia))},D.\u0275prov=s.Yz7({token:D,factory:D.\u0275fac}),D})(),Ra=(()=>{class D extends dn{constructor(O,oe,Ee,Re,Qe){super(Ee,oe,Re),this.ngZone=O,this.iconService=Ee,this.renderer=Re,this.cacheClassName=null,this.nzRotate=0,this.spin=!1,this.destroy$=new a.xQ,Qe&&Qe.doPatch(),this.el=oe.nativeElement}set nzSpin(O){this.spin=O}set nzType(O){this.type=O}set nzTheme(O){this.theme=O}set nzTwotoneColor(O){this.twoToneColor=O}set nzIconfont(O){this.iconfont=O}ngOnChanges(O){const{nzType:oe,nzTwotoneColor:Ee,nzSpin:Re,nzTheme:Qe,nzRotate:mt}=O;oe||Ee||Re||Qe?this.changeIcon2():mt?this.handleRotate(this.el.firstChild):this._setSVGElement(this.iconService.createIconfontIcon(`#${this.iconfont}`))}ngOnInit(){this.renderer.setAttribute(this.el,"class",`anticon ${this.el.className}`.trim())}ngAfterContentChecked(){if(!this.type){const O=this.el.children;let oe=O.length;if(!this.type&&O.length)for(;oe--;){const Ee=O[oe];"svg"===Ee.tagName.toLowerCase()&&this.iconService.normalizeSvgElement(Ee)}}}ngOnDestroy(){this.destroy$.next()}changeIcon2(){this.setClassName(),this.ngZone.runOutsideAngular(()=>{(0,l.D)(this._changeIcon()).pipe((0,r.R)(this.destroy$)).subscribe(O=>{O&&(this.setSVGData(O),this.handleSpin(O),this.handleRotate(O))})})}handleSpin(O){this.spin||"loading"===this.type?this.renderer.addClass(O,"anticon-spin"):this.renderer.removeClass(O,"anticon-spin")}handleRotate(O){this.nzRotate?this.renderer.setAttribute(O,"style",`transform: rotate(${this.nzRotate}deg)`):this.renderer.removeAttribute(O,"style")}setClassName(){this.cacheClassName&&this.renderer.removeClass(this.el,this.cacheClassName),this.cacheClassName=`anticon-${this.type}`,this.renderer.addClass(this.el,this.cacheClassName)}setSVGData(O){this.renderer.setAttribute(O,"data-icon",this.type),this.renderer.setAttribute(O,"aria-hidden","true")}}return D.\u0275fac=function(O){return new(O||D)(s.Y36(s.R0b),s.Y36(s.SBq),s.Y36(ia),s.Y36(s.Qsj),s.Y36(sa,8))},D.\u0275dir=s.lG2({type:D,selectors:[["","nz-icon",""]],hostVars:2,hostBindings:function(O,oe){2&O&&s.ekj("anticon",!0)},inputs:{nzRotate:"nzRotate",nzSpin:"nzSpin",nzType:"nzType",nzTheme:"nzTheme",nzTwotoneColor:"nzTwotoneColor",nzIconfont:"nzIconfont"},exportAs:["nzIcon"],features:[s.qOj,s.TTD]}),(0,i.gn)([(0,Wt.yF)()],D.prototype,"nzSpin",null),D})(),Va=(()=>{class D{static forRoot(O){return{ngModule:D,providers:[{provide:di,useValue:O}]}}static forChild(O){return{ngModule:D,providers:[sa,{provide:oa,useValue:O}]}}}return D.\u0275fac=function(O){return new(O||D)},D.\u0275mod=s.oAB({type:D}),D.\u0275inj=s.cJS({imports:[[o.ud]]}),D})()},90343:(e,t,n)=>{"use strict";n.d(t,{_:()=>z,Z:()=>b});var o=n(64762),s=n(70946),i=n(36461),a=n(37716),l=n(90665),r=n(79765),d=n(46782),u=n(96182),g=n(38583),f=n(53599),v=n(19238);const x=["inputElement"];let z=(()=>{class _{constructor(T,L,V,Y){this.elementRef=T,this.cdr=L,this.focusMonitor=V,this.directionality=Y,this.destroy$=new r.xQ,this.isFocused=!1,this.disabledUp=!1,this.disabledDown=!1,this.dir="ltr",this.onChange=()=>{},this.onTouched=()=>{},this.nzBlur=new a.vpe,this.nzFocus=new a.vpe,this.nzSize="default",this.nzMin=-1/0,this.nzMax=1/0,this.nzParser=J=>J.trim().replace(/\u3002/g,".").replace(/[^\w\.-]+/g,""),this.nzPrecisionMode="toFixed",this.nzPlaceHolder="",this.nzStep=1,this.nzInputMode="decimal",this.nzId=null,this.nzDisabled=!1,this.nzAutoFocus=!1,this.nzFormatter=J=>J,this.elementRef.nativeElement.classList.add("ant-input-number")}onModelChange(T){this.parsedValue=this.nzParser(T),this.inputElement.nativeElement.value=`${this.parsedValue}`;const L=this.getCurrentValidValue(this.parsedValue);this.setValue(L)}getCurrentValidValue(T){let L=T;return L=""===L?"":this.isNotCompleteNumber(L)?this.value:`${this.getValidValue(L)}`,this.toNumber(L)}isNotCompleteNumber(T){return isNaN(T)||""===T||null===T||!(!T||T.toString().indexOf(".")!==T.toString().length-1)}getValidValue(T){let L=parseFloat(T);return isNaN(L)?T:(L<this.nzMin&&(L=this.nzMin),L>this.nzMax&&(L=this.nzMax),L)}toNumber(T){if(this.isNotCompleteNumber(T))return T;const L=String(T);if(L.indexOf(".")>=0&&(0,u.DX)(this.nzPrecision)){if("function"==typeof this.nzPrecisionMode)return this.nzPrecisionMode(T,this.nzPrecision);if("cut"===this.nzPrecisionMode){const V=L.split(".");return V[1]=V[1].slice(0,this.nzPrecision),Number(V.join("."))}return Number(Number(T).toFixed(this.nzPrecision))}return Number(T)}getRatio(T){let L=1;return T.metaKey||T.ctrlKey?L=.1:T.shiftKey&&(L=10),L}down(T,L){this.isFocused||this.focus(),this.step("down",T,L)}up(T,L){this.isFocused||this.focus(),this.step("up",T,L)}getPrecision(T){const L=T.toString();if(L.indexOf("e-")>=0)return parseInt(L.slice(L.indexOf("e-")+2),10);let V=0;return L.indexOf(".")>=0&&(V=L.length-L.indexOf(".")-1),V}getMaxPrecision(T,L){if((0,u.DX)(this.nzPrecision))return this.nzPrecision;const V=this.getPrecision(L),Y=this.getPrecision(this.nzStep),J=this.getPrecision(T);return T?Math.max(J,V+Y):V+Y}getPrecisionFactor(T,L){const V=this.getMaxPrecision(T,L);return Math.pow(10,V)}upStep(T,L){const V=this.getPrecisionFactor(T,L),Y=Math.abs(this.getMaxPrecision(T,L));let J;return J="number"==typeof T?((V*T+V*this.nzStep*L)/V).toFixed(Y):this.nzMin===-1/0?this.nzStep:this.nzMin,this.toNumber(J)}downStep(T,L){const V=this.getPrecisionFactor(T,L),Y=Math.abs(this.getMaxPrecision(T,L));let J;return J="number"==typeof T?((V*T-V*this.nzStep*L)/V).toFixed(Y):this.nzMin===-1/0?-this.nzStep:this.nzMin,this.toNumber(J)}step(T,L,V=1){if(this.stop(),L.preventDefault(),this.nzDisabled)return;const Y=this.getCurrentValidValue(this.parsedValue)||0;let J=0;"up"===T?J=this.upStep(Y,V):"down"===T&&(J=this.downStep(Y,V));const K=J>this.nzMax||J<this.nzMin;J>this.nzMax?J=this.nzMax:J<this.nzMin&&(J=this.nzMin),this.setValue(J),this.updateDisplayValue(J),this.isFocused=!0,!K&&(this.autoStepTimer=setTimeout(()=>{this[T](L,V)},300))}stop(){this.autoStepTimer&&clearTimeout(this.autoStepTimer)}setValue(T){if(`${this.value}`!=`${T}`&&this.onChange(T),this.value=T,this.parsedValue=T,this.disabledUp=this.disabledDown=!1,T||0===T){const L=Number(T);L>=this.nzMax&&(this.disabledUp=!0),L<=this.nzMin&&(this.disabledDown=!0)}}updateDisplayValue(T){const L=(0,u.DX)(this.nzFormatter(T))?this.nzFormatter(T):"";this.displayValue=L,this.inputElement.nativeElement.value=`${L}`}onKeyDown(T){if(T.keyCode===i.LH){const L=this.getRatio(T);this.up(T,L),this.stop()}else if(T.keyCode===i.JH){const L=this.getRatio(T);this.down(T,L),this.stop()}else T.keyCode===i.K5&&this.updateDisplayValue(this.value)}writeValue(T){this.value=T,this.setValue(T),this.updateDisplayValue(T),this.cdr.markForCheck()}registerOnChange(T){this.onChange=T}registerOnTouched(T){this.onTouched=T}setDisabledState(T){this.nzDisabled=T,this.cdr.markForCheck()}focus(){this.focusMonitor.focusVia(this.inputElement,"keyboard")}blur(){this.inputElement.nativeElement.blur()}ngOnInit(){var T;this.focusMonitor.monitor(this.elementRef,!0).pipe((0,d.R)(this.destroy$)).subscribe(L=>{L?(this.isFocused=!0,this.nzFocus.emit()):(this.isFocused=!1,this.updateDisplayValue(this.value),this.nzBlur.emit(),Promise.resolve().then(()=>this.onTouched()))}),this.dir=this.directionality.value,null===(T=this.directionality.change)||void 0===T||T.pipe((0,d.R)(this.destroy$)).subscribe(L=>{this.dir=L})}ngOnChanges(T){if(T.nzFormatter&&!T.nzFormatter.isFirstChange()){const L=this.getCurrentValidValue(this.parsedValue);this.setValue(L),this.updateDisplayValue(L)}}ngAfterViewInit(){this.nzAutoFocus&&this.focus()}ngOnDestroy(){this.focusMonitor.stopMonitoring(this.elementRef),this.destroy$.next(),this.destroy$.complete()}}return _.\u0275fac=function(T){return new(T||_)(a.Y36(a.SBq),a.Y36(a.sBO),a.Y36(v.tE),a.Y36(s.Is,8))},_.\u0275cmp=a.Xpm({type:_,selectors:[["nz-input-number"]],viewQuery:function(T,L){if(1&T&&a.Gf(x,7),2&T){let V;a.iGM(V=a.CRH())&&(L.inputElement=V.first)}},hostVars:10,hostBindings:function(T,L){2&T&&a.ekj("ant-input-number-focused",L.isFocused)("ant-input-number-lg","large"===L.nzSize)("ant-input-number-sm","small"===L.nzSize)("ant-input-number-disabled",L.nzDisabled)("ant-input-number-rtl","rtl"===L.dir)},inputs:{nzSize:"nzSize",nzMin:"nzMin",nzMax:"nzMax",nzParser:"nzParser",nzPrecisionMode:"nzPrecisionMode",nzPlaceHolder:"nzPlaceHolder",nzStep:"nzStep",nzInputMode:"nzInputMode",nzId:"nzId",nzDisabled:"nzDisabled",nzAutoFocus:"nzAutoFocus",nzFormatter:"nzFormatter",nzPrecision:"nzPrecision"},outputs:{nzBlur:"nzBlur",nzFocus:"nzFocus"},exportAs:["nzInputNumber"],features:[a._Bn([{provide:l.JU,useExisting:(0,a.Gpc)(()=>_),multi:!0}]),a.TTD],decls:8,vars:13,consts:[[1,"ant-input-number-handler-wrap"],["unselectable","unselectable",1,"ant-input-number-handler","ant-input-number-handler-up",3,"mousedown","mouseup","mouseleave"],["nz-icon","","nzType","up",1,"ant-input-number-handler-up-inner"],["unselectable","unselectable",1,"ant-input-number-handler","ant-input-number-handler-down",3,"mousedown","mouseup","mouseleave"],["nz-icon","","nzType","down",1,"ant-input-number-handler-down-inner"],[1,"ant-input-number-input-wrap"],["autocomplete","off",1,"ant-input-number-input",3,"disabled","placeholder","ngModel","keydown","keyup","ngModelChange"],["inputElement",""]],template:function(T,L){1&T&&(a.TgZ(0,"div",0),a.TgZ(1,"span",1),a.NdJ("mousedown",function(Y){return L.up(Y)})("mouseup",function(){return L.stop()})("mouseleave",function(){return L.stop()}),a._UZ(2,"i",2),a.qZA(),a.TgZ(3,"span",3),a.NdJ("mousedown",function(Y){return L.down(Y)})("mouseup",function(){return L.stop()})("mouseleave",function(){return L.stop()}),a._UZ(4,"i",4),a.qZA(),a.qZA(),a.TgZ(5,"div",5),a.TgZ(6,"input",6,7),a.NdJ("keydown",function(Y){return L.onKeyDown(Y)})("keyup",function(){return L.stop()})("ngModelChange",function(Y){return L.onModelChange(Y)}),a.qZA(),a.qZA()),2&T&&(a.xp6(1),a.ekj("ant-input-number-handler-up-disabled",L.disabledUp),a.xp6(2),a.ekj("ant-input-number-handler-down-disabled",L.disabledDown),a.xp6(3),a.Q6J("disabled",L.nzDisabled)("placeholder",L.nzPlaceHolder)("ngModel",L.displayValue),a.uIk("id",L.nzId)("autofocus",L.nzAutoFocus?"autofocus":null)("min",L.nzMin)("max",L.nzMax)("step",L.nzStep)("inputmode",L.nzInputMode))},directives:[f.Ls,l.Fj,l.JJ,l.On],encapsulation:2,changeDetection:0}),(0,o.gn)([(0,u.yF)()],_.prototype,"nzDisabled",void 0),(0,o.gn)([(0,u.yF)()],_.prototype,"nzAutoFocus",void 0),_})(),b=(()=>{class _{}return _.\u0275fac=function(T){return new(T||_)},_.\u0275mod=a.oAB({type:_}),_.\u0275inj=a.cJS({imports:[[s.vT,g.ez,l.u5,f.PV]]}),_})()},12746:(e,t,n)=>{"use strict";n.d(t,{OK:()=>X,E8:()=>he,hw:()=>ye,wm:()=>lt,t7:()=>Q});var o=n(37716),s=n(70946),i=n(79765),a=n(46782),l=n(64762),r=n(80521),d=n(36102),u=n(96182),g=n(83730),f=n(65072),v=n(38583),x=n(53599);const z=["*"];function b(Me,De){if(1&Me){const xe=o.EpF();o.TgZ(0,"div",2),o.NdJ("click",function(){o.CHM(xe);const k=o.oxw();return k.setCollapsed(!k.nzCollapsed)}),o.qZA()}if(2&Me){const xe=o.oxw();o.Q6J("matchBreakPoint",xe.matchBreakPoint)("nzCollapsedWidth",xe.nzCollapsedWidth)("nzCollapsed",xe.nzCollapsed)("nzBreakpoint",xe.nzBreakpoint)("nzReverseArrow",xe.nzReverseArrow)("nzTrigger",xe.nzTrigger)("nzZeroTrigger",xe.nzZeroTrigger)("siderWidth",xe.widthSetting)}}const _=["nz-sider-trigger",""];function H(Me,De){}function T(Me,De){if(1&Me&&(o.ynx(0),o.YNc(1,H,0,0,"ng-template",3),o.BQk()),2&Me){const xe=o.oxw(),Oe=o.MAs(5);o.xp6(1),o.Q6J("ngTemplateOutlet",xe.nzZeroTrigger||Oe)}}function L(Me,De){}function V(Me,De){if(1&Me&&(o.ynx(0),o.YNc(1,L,0,0,"ng-template",3),o.BQk()),2&Me){const xe=o.oxw(),Oe=o.MAs(3);o.xp6(1),o.Q6J("ngTemplateOutlet",xe.nzTrigger||Oe)}}function Y(Me,De){if(1&Me&&o._UZ(0,"i",5),2&Me){const xe=o.oxw(2);o.Q6J("nzType",xe.nzCollapsed?"right":"left")}}function J(Me,De){if(1&Me&&o._UZ(0,"i",5),2&Me){const xe=o.oxw(2);o.Q6J("nzType",xe.nzCollapsed?"left":"right")}}function K(Me,De){if(1&Me&&(o.YNc(0,Y,1,1,"i",4),o.YNc(1,J,1,1,"i",4)),2&Me){const xe=o.oxw();o.Q6J("ngIf",!xe.nzReverseArrow),o.xp6(1),o.Q6J("ngIf",xe.nzReverseArrow)}}function re(Me,De){1&Me&&o._UZ(0,"i",6)}let X=(()=>{class Me{constructor(xe,Oe){this.elementRef=xe,this.renderer=Oe,this.renderer.addClass(this.elementRef.nativeElement,"ant-layout-content")}}return Me.\u0275fac=function(xe){return new(xe||Me)(o.Y36(o.SBq),o.Y36(o.Qsj))},Me.\u0275cmp=o.Xpm({type:Me,selectors:[["nz-content"]],exportAs:["nzContent"],ngContentSelectors:z,decls:1,vars:0,template:function(xe,Oe){1&xe&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),Me})(),he=(()=>{class Me{constructor(xe,Oe){this.elementRef=xe,this.renderer=Oe,this.renderer.addClass(this.elementRef.nativeElement,"ant-layout-header")}}return Me.\u0275fac=function(xe){return new(xe||Me)(o.Y36(o.SBq),o.Y36(o.Qsj))},Me.\u0275cmp=o.Xpm({type:Me,selectors:[["nz-header"]],exportAs:["nzHeader"],ngContentSelectors:z,decls:1,vars:0,template:function(xe,Oe){1&xe&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),Me})(),Q=(()=>{class Me{constructor(xe,Oe,k,tt){this.platform=xe,this.cdr=Oe,this.breakpointService=k,this.elementRef=tt,this.destroy$=new i.xQ,this.nzMenuDirective=null,this.nzCollapsedChange=new o.vpe,this.nzWidth=200,this.nzTheme="dark",this.nzCollapsedWidth=80,this.nzBreakpoint=null,this.nzZeroTrigger=null,this.nzTrigger=void 0,this.nzReverseArrow=!1,this.nzCollapsible=!1,this.nzCollapsed=!1,this.matchBreakPoint=!1,this.flexSetting=null,this.widthSetting=null,this.elementRef.nativeElement.classList.add("ant-layout-sider")}updateStyleMap(){this.widthSetting=this.nzCollapsed?`${this.nzCollapsedWidth}px`:(0,u.WX)(this.nzWidth),this.flexSetting=`0 0 ${this.widthSetting}`,this.cdr.markForCheck()}updateMenuInlineCollapsed(){this.nzMenuDirective&&"inline"===this.nzMenuDirective.nzMode&&0!==this.nzCollapsedWidth&&this.nzMenuDirective.setInlineCollapsed(this.nzCollapsed)}setCollapsed(xe){xe!==this.nzCollapsed&&(this.nzCollapsed=xe,this.nzCollapsedChange.emit(xe),this.updateMenuInlineCollapsed(),this.updateStyleMap(),this.cdr.markForCheck())}ngOnInit(){this.updateStyleMap(),this.platform.isBrowser&&this.breakpointService.subscribe(d.ow,!0).pipe((0,a.R)(this.destroy$)).subscribe(xe=>{const Oe=this.nzBreakpoint;Oe&&(0,u.ov)().subscribe(()=>{this.matchBreakPoint=!xe[Oe],this.setCollapsed(this.matchBreakPoint),this.cdr.markForCheck()})})}ngOnChanges(xe){const{nzCollapsed:Oe,nzCollapsedWidth:k,nzWidth:tt}=xe;(Oe||k||tt)&&this.updateStyleMap(),Oe&&this.updateMenuInlineCollapsed()}ngAfterContentInit(){this.updateMenuInlineCollapsed()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return Me.\u0275fac=function(xe){return new(xe||Me)(o.Y36(r.t4),o.Y36(o.sBO),o.Y36(d.r3),o.Y36(o.SBq))},Me.\u0275cmp=o.Xpm({type:Me,selectors:[["nz-sider"]],contentQueries:function(xe,Oe,k){if(1&xe&&o.Suo(k,g.wO,5),2&xe){let tt;o.iGM(tt=o.CRH())&&(Oe.nzMenuDirective=tt.first)}},hostVars:16,hostBindings:function(xe,Oe){2&xe&&(o.Udp("flex",Oe.flexSetting)("max-width",Oe.widthSetting)("min-width",Oe.widthSetting)("width",Oe.widthSetting),o.ekj("ant-layout-sider-zero-width",Oe.nzCollapsed&&0===Oe.nzCollapsedWidth)("ant-layout-sider-light","light"===Oe.nzTheme)("ant-layout-sider-dark","dark"===Oe.nzTheme)("ant-layout-sider-collapsed",Oe.nzCollapsed))},inputs:{nzWidth:"nzWidth",nzTheme:"nzTheme",nzCollapsedWidth:"nzCollapsedWidth",nzBreakpoint:"nzBreakpoint",nzZeroTrigger:"nzZeroTrigger",nzTrigger:"nzTrigger",nzReverseArrow:"nzReverseArrow",nzCollapsible:"nzCollapsible",nzCollapsed:"nzCollapsed"},outputs:{nzCollapsedChange:"nzCollapsedChange"},exportAs:["nzSider"],features:[o.TTD],ngContentSelectors:z,decls:3,vars:1,consts:[[1,"ant-layout-sider-children"],["nz-sider-trigger","",3,"matchBreakPoint","nzCollapsedWidth","nzCollapsed","nzBreakpoint","nzReverseArrow","nzTrigger","nzZeroTrigger","siderWidth","click",4,"ngIf"],["nz-sider-trigger","",3,"matchBreakPoint","nzCollapsedWidth","nzCollapsed","nzBreakpoint","nzReverseArrow","nzTrigger","nzZeroTrigger","siderWidth","click"]],template:function(xe,Oe){1&xe&&(o.F$t(),o.TgZ(0,"div",0),o.Hsn(1),o.qZA(),o.YNc(2,b,1,8,"div",1)),2&xe&&(o.xp6(2),o.Q6J("ngIf",Oe.nzCollapsible&&null!==Oe.nzTrigger))},directives:function(){return[v.O5,Le]},encapsulation:2,changeDetection:0}),(0,l.gn)([(0,u.yF)()],Me.prototype,"nzReverseArrow",void 0),(0,l.gn)([(0,u.yF)()],Me.prototype,"nzCollapsible",void 0),(0,l.gn)([(0,u.yF)()],Me.prototype,"nzCollapsed",void 0),Me})(),ye=(()=>{class Me{constructor(xe,Oe){this.elementRef=xe,this.directionality=Oe,this.dir="ltr",this.destroy$=new i.xQ,this.elementRef.nativeElement.classList.add("ant-layout")}ngOnInit(){var xe;this.dir=this.directionality.value,null===(xe=this.directionality.change)||void 0===xe||xe.pipe((0,a.R)(this.destroy$)).subscribe(Oe=>{this.dir=Oe})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return Me.\u0275fac=function(xe){return new(xe||Me)(o.Y36(o.SBq),o.Y36(s.Is,8))},Me.\u0275cmp=o.Xpm({type:Me,selectors:[["nz-layout"]],contentQueries:function(xe,Oe,k){if(1&xe&&o.Suo(k,Q,4),2&xe){let tt;o.iGM(tt=o.CRH())&&(Oe.listOfNzSiderComponent=tt)}},hostVars:4,hostBindings:function(xe,Oe){2&xe&&o.ekj("ant-layout-rtl","rtl"===Oe.dir)("ant-layout-has-sider",Oe.listOfNzSiderComponent.length>0)},exportAs:["nzLayout"],ngContentSelectors:z,decls:1,vars:0,template:function(xe,Oe){1&xe&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),Me})(),Le=(()=>{class Me{constructor(){this.nzCollapsed=!1,this.nzReverseArrow=!1,this.nzZeroTrigger=null,this.nzTrigger=void 0,this.matchBreakPoint=!1,this.nzCollapsedWidth=null,this.siderWidth=null,this.nzBreakpoint=null,this.isZeroTrigger=!1,this.isNormalTrigger=!1}updateTriggerType(){this.isZeroTrigger=0===this.nzCollapsedWidth&&(this.nzBreakpoint&&this.matchBreakPoint||!this.nzBreakpoint),this.isNormalTrigger=0!==this.nzCollapsedWidth}ngOnInit(){this.updateTriggerType()}ngOnChanges(){this.updateTriggerType()}}return Me.\u0275fac=function(xe){return new(xe||Me)},Me.\u0275cmp=o.Xpm({type:Me,selectors:[["","nz-sider-trigger",""]],hostVars:10,hostBindings:function(xe,Oe){2&xe&&(o.Udp("width",Oe.isNormalTrigger?Oe.siderWidth:null),o.ekj("ant-layout-sider-trigger",Oe.isNormalTrigger)("ant-layout-sider-zero-width-trigger",Oe.isZeroTrigger)("ant-layout-sider-zero-width-trigger-right",Oe.isZeroTrigger&&Oe.nzReverseArrow)("ant-layout-sider-zero-width-trigger-left",Oe.isZeroTrigger&&!Oe.nzReverseArrow))},inputs:{nzCollapsed:"nzCollapsed",nzReverseArrow:"nzReverseArrow",nzZeroTrigger:"nzZeroTrigger",nzTrigger:"nzTrigger",matchBreakPoint:"matchBreakPoint",nzCollapsedWidth:"nzCollapsedWidth",siderWidth:"siderWidth",nzBreakpoint:"nzBreakpoint"},exportAs:["nzSiderTrigger"],features:[o.TTD],attrs:_,decls:6,vars:2,consts:[[4,"ngIf"],["defaultTrigger",""],["defaultZeroTrigger",""],[3,"ngTemplateOutlet"],["nz-icon","",3,"nzType",4,"ngIf"],["nz-icon","",3,"nzType"],["nz-icon","","nzType","bars"]],template:function(xe,Oe){1&xe&&(o.YNc(0,T,2,1,"ng-container",0),o.YNc(1,V,2,1,"ng-container",0),o.YNc(2,K,2,2,"ng-template",null,1,o.W1O),o.YNc(4,re,1,0,"ng-template",null,2,o.W1O)),2&xe&&(o.Q6J("ngIf",Oe.isZeroTrigger),o.xp6(1),o.Q6J("ngIf",Oe.isNormalTrigger))},directives:[v.O5,v.tP,x.Ls],encapsulation:2,changeDetection:0}),Me})(),lt=(()=>{class Me{}return Me.\u0275fac=function(xe){return new(xe||Me)},Me.\u0275mod=o.oAB({type:Me}),Me.\u0275inj=o.cJS({imports:[[s.vT,v.ez,x.PV,f.xu,r.ud]]}),Me})()},83730:(e,t,n)=>{"use strict";n.d(t,{hl:()=>$e,Cc:()=>yt,wO:()=>ee,r9:()=>Vt,ip:()=>qe});var o=n(64762),s=n(70946),i=n(37716),a=n(79765),l=n(26215),r=n(66682),d=n(90739),u=n(88002),g=n(19773),f=n(45435),v=n(96736),x=n(80013),z=n(87519),b=n(46782),_=n(39761),H=n(43190),T=n(96182),L=n(29838),V=n(90625),Y=n(80521),J=n(90641),K=n(86911),re=n(47070),X=n(38583),ne=n(68178),he=n(53599);const Q=["nz-submenu",""];function ye(de,Ie){1&de&&i.Hsn(0,0,["*ngIf","!nzTitle"])}function Le(de,Ie){if(1&de&&i._UZ(0,"div",6),2&de){const W=i.oxw(),G=i.MAs(7);i.Q6J("mode",W.mode)("nzOpen",W.nzOpen)("@.disabled",null==W.noAnimation?null:W.noAnimation.nzNoAnimation)("nzNoAnimation",null==W.noAnimation?null:W.noAnimation.nzNoAnimation)("menuClass",W.nzMenuClassName)("templateOutlet",G)}}function lt(de,Ie){if(1&de){const W=i.EpF();i.TgZ(0,"div",8),i.NdJ("subMenuMouseState",function(Ye){return i.CHM(W),i.oxw(2).setMouseEnterState(Ye)}),i.qZA()}if(2&de){const W=i.oxw(2),G=i.MAs(7);i.Q6J("theme",W.theme)("mode",W.mode)("nzOpen",W.nzOpen)("position",W.position)("nzDisabled",W.nzDisabled)("isMenuInsideDropDown",W.isMenuInsideDropDown)("templateOutlet",G)("menuClass",W.nzMenuClassName)("@.disabled",null==W.noAnimation?null:W.noAnimation.nzNoAnimation)("nzNoAnimation",null==W.noAnimation?null:W.noAnimation.nzNoAnimation)}}function Me(de,Ie){if(1&de){const W=i.EpF();i.YNc(0,lt,1,10,"ng-template",7),i.NdJ("positionChange",function(Ye){return i.CHM(W),i.oxw().onPositionChange(Ye)})}if(2&de){const W=i.oxw(),G=i.MAs(1);i.Q6J("cdkConnectedOverlayPositions",W.overlayPositions)("cdkConnectedOverlayOrigin",G)("cdkConnectedOverlayWidth",W.triggerWidth)("cdkConnectedOverlayOpen",W.nzOpen)("cdkConnectedOverlayTransformOriginOn",".ant-menu-submenu")}}function De(de,Ie){1&de&&i.Hsn(0,1)}const xe=[[["","title",""]],"*"],Oe=["[title]","*"],ot=["nz-submenu-title",""];function gt(de,Ie){if(1&de&&i._UZ(0,"i",4),2&de){const W=i.oxw();i.Q6J("nzType",W.nzIcon)}}function ut(de,Ie){if(1&de&&(i.ynx(0),i.TgZ(1,"span"),i._uU(2),i.qZA(),i.BQk()),2&de){const W=i.oxw();i.xp6(2),i.Oqu(W.nzTitle)}}function Nt(de,Ie){1&de&&i._UZ(0,"i",8)}function je(de,Ie){1&de&&i._UZ(0,"i",9)}function Ze(de,Ie){if(1&de&&(i.TgZ(0,"span",5),i.YNc(1,Nt,1,0,"i",6),i.YNc(2,je,1,0,"i",7),i.qZA()),2&de){const W=i.oxw();i.Q6J("ngSwitch",W.dir),i.xp6(1),i.Q6J("ngSwitchCase","rtl")}}function ke(de,Ie){1&de&&i._UZ(0,"i",10)}const vt=["*"],st=["nz-submenu-inline-child",""];function _t(de,Ie){}const rt=["nz-submenu-none-inline-child",""];function At(de,Ie){}let $e=(()=>{class de{constructor(){this.descendantMenuItemClick$=new a.xQ,this.childMenuItemClick$=new a.xQ,this.theme$=new l.X("light"),this.mode$=new l.X("vertical"),this.inlineIndent$=new l.X(24),this.isChildSubMenuOpen$=new l.X(!1)}onDescendantMenuItemClick(W){this.descendantMenuItemClick$.next(W)}onChildMenuItemClick(W){this.childMenuItemClick$.next(W)}setMode(W){this.mode$.next(W)}setTheme(W){this.theme$.next(W)}setInlineIndent(W){this.inlineIndent$.next(W)}}return de.\u0275fac=function(W){return new(W||de)},de.\u0275prov=i.Yz7({token:de,factory:de.\u0275fac}),de})();const yt=new i.OlP("NzIsInDropDownMenuToken"),Bt=new i.OlP("NzMenuServiceLocalToken");let Lt=(()=>{class de{constructor(W,G,Ye){this.nzHostSubmenuService=W,this.nzMenuService=G,this.isMenuInsideDropDown=Ye,this.mode$=this.nzMenuService.mode$.pipe((0,u.U)(Mt=>"inline"===Mt?"inline":"vertical"===Mt||this.nzHostSubmenuService?"vertical":"horizontal")),this.level=1,this.isCurrentSubMenuOpen$=new l.X(!1),this.isChildSubMenuOpen$=new l.X(!1),this.isMouseEnterTitleOrOverlay$=new a.xQ,this.childMenuItemClick$=new a.xQ,this.destroy$=new a.xQ,this.nzHostSubmenuService&&(this.level=this.nzHostSubmenuService.level+1);const Je=this.childMenuItemClick$.pipe((0,g.zg)(()=>this.mode$),(0,f.h)(Mt=>"inline"!==Mt||this.isMenuInsideDropDown),(0,v.h)(!1)),Ht=(0,r.T)(this.isMouseEnterTitleOrOverlay$,Je);(0,d.aj)([this.isChildSubMenuOpen$,Ht]).pipe((0,u.U)(([Mt,jt])=>Mt||jt),(0,x.e)(150),(0,z.x)(),(0,b.R)(this.destroy$)).pipe((0,z.x)()).subscribe(Mt=>{this.setOpenStateWithoutDebounce(Mt),this.nzHostSubmenuService?this.nzHostSubmenuService.isChildSubMenuOpen$.next(Mt):this.nzMenuService.isChildSubMenuOpen$.next(Mt)})}onChildMenuItemClick(W){this.childMenuItemClick$.next(W)}setOpenStateWithoutDebounce(W){this.isCurrentSubMenuOpen$.next(W)}setMouseEnterTitleOrOverlayState(W){this.isMouseEnterTitleOrOverlay$.next(W)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return de.\u0275fac=function(W){return new(W||de)(i.LFG(de,12),i.LFG($e),i.LFG(yt))},de.\u0275prov=i.Yz7({token:de,factory:de.\u0275fac}),de})(),Vt=(()=>{class de{constructor(W,G,Ye,Je,Ht,kt,Mt,jt){this.nzMenuService=W,this.cdr=G,this.nzSubmenuService=Ye,this.isMenuInsideDropDown=Je,this.directionality=Ht,this.routerLink=kt,this.routerLinkWithHref=Mt,this.router=jt,this.destroy$=new a.xQ,this.level=this.nzSubmenuService?this.nzSubmenuService.level+1:1,this.selected$=new a.xQ,this.inlinePaddingLeft=null,this.dir="ltr",this.nzDisabled=!1,this.nzSelected=!1,this.nzDanger=!1,this.nzMatchRouterExact=!1,this.nzMatchRouter=!1,jt&&this.router.events.pipe((0,b.R)(this.destroy$),(0,f.h)(Xt=>Xt instanceof L.m2)).subscribe(()=>{this.updateRouterActive()})}clickMenuItem(W){this.nzDisabled?(W.preventDefault(),W.stopPropagation()):(this.nzMenuService.onDescendantMenuItemClick(this),this.nzSubmenuService?this.nzSubmenuService.onChildMenuItemClick(this):this.nzMenuService.onChildMenuItemClick(this))}setSelectedState(W){this.nzSelected=W,this.selected$.next(W)}updateRouterActive(){!this.listOfRouterLink||!this.listOfRouterLinkWithHref||!this.router||!this.router.navigated||!this.nzMatchRouter||Promise.resolve().then(()=>{const W=this.hasActiveLinks();this.nzSelected!==W&&(this.nzSelected=W,this.setSelectedState(this.nzSelected),this.cdr.markForCheck())})}hasActiveLinks(){const W=this.isLinkActive(this.router);return this.routerLink&&W(this.routerLink)||this.routerLinkWithHref&&W(this.routerLinkWithHref)||this.listOfRouterLink.some(W)||this.listOfRouterLinkWithHref.some(W)}isLinkActive(W){return G=>W.isActive(G.urlTree,this.nzMatchRouterExact)}ngOnInit(){var W;(0,d.aj)([this.nzMenuService.mode$,this.nzMenuService.inlineIndent$]).pipe((0,b.R)(this.destroy$)).subscribe(([G,Ye])=>{this.inlinePaddingLeft="inline"===G?this.level*Ye:null}),this.dir=this.directionality.value,null===(W=this.directionality.change)||void 0===W||W.pipe((0,b.R)(this.destroy$)).subscribe(G=>{this.dir=G})}ngAfterContentInit(){this.listOfRouterLink.changes.pipe((0,b.R)(this.destroy$)).subscribe(()=>this.updateRouterActive()),this.listOfRouterLinkWithHref.changes.pipe((0,b.R)(this.destroy$)).subscribe(()=>this.updateRouterActive()),this.updateRouterActive()}ngOnChanges(W){W.nzSelected&&this.setSelectedState(this.nzSelected)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return de.\u0275fac=function(W){return new(W||de)(i.Y36($e),i.Y36(i.sBO),i.Y36(Lt,8),i.Y36(yt),i.Y36(s.Is,8),i.Y36(L.rH,8),i.Y36(L.yS,8),i.Y36(L.F0,8))},de.\u0275dir=i.lG2({type:de,selectors:[["","nz-menu-item",""]],contentQueries:function(W,G,Ye){if(1&W&&(i.Suo(Ye,L.rH,5),i.Suo(Ye,L.yS,5)),2&W){let Je;i.iGM(Je=i.CRH())&&(G.listOfRouterLink=Je),i.iGM(Je=i.CRH())&&(G.listOfRouterLinkWithHref=Je)}},hostVars:20,hostBindings:function(W,G){1&W&&i.NdJ("click",function(Je){return G.clickMenuItem(Je)}),2&W&&(i.Udp("padding-left","rtl"===G.dir?null:G.nzPaddingLeft||G.inlinePaddingLeft,"px")("padding-right","rtl"===G.dir?G.nzPaddingLeft||G.inlinePaddingLeft:null,"px"),i.ekj("ant-dropdown-menu-item",G.isMenuInsideDropDown)("ant-dropdown-menu-item-selected",G.isMenuInsideDropDown&&G.nzSelected)("ant-dropdown-menu-item-danger",G.isMenuInsideDropDown&&G.nzDanger)("ant-dropdown-menu-item-disabled",G.isMenuInsideDropDown&&G.nzDisabled)("ant-menu-item",!G.isMenuInsideDropDown)("ant-menu-item-selected",!G.isMenuInsideDropDown&&G.nzSelected)("ant-menu-item-danger",!G.isMenuInsideDropDown&&G.nzDanger)("ant-menu-item-disabled",!G.isMenuInsideDropDown&&G.nzDisabled))},inputs:{nzDisabled:"nzDisabled",nzSelected:"nzSelected",nzDanger:"nzDanger",nzMatchRouterExact:"nzMatchRouterExact",nzMatchRouter:"nzMatchRouter",nzPaddingLeft:"nzPaddingLeft"},exportAs:["nzMenuItem"],features:[i.TTD]}),(0,o.gn)([(0,T.yF)()],de.prototype,"nzDisabled",void 0),(0,o.gn)([(0,T.yF)()],de.prototype,"nzSelected",void 0),(0,o.gn)([(0,T.yF)()],de.prototype,"nzDanger",void 0),(0,o.gn)([(0,T.yF)()],de.prototype,"nzMatchRouterExact",void 0),(0,o.gn)([(0,T.yF)()],de.prototype,"nzMatchRouter",void 0),de})();const Zt=[K.yW.rightTop,K.yW.right,K.yW.rightBottom,K.yW.leftTop,K.yW.left,K.yW.leftBottom],Gt=[K.yW.bottomLeft];let le=(()=>{class de{constructor(W,G,Ye,Je,Ht,kt,Mt){this.nzMenuService=W,this.cdr=G,this.nzSubmenuService=Ye,this.platform=Je,this.isMenuInsideDropDown=Ht,this.directionality=kt,this.noAnimation=Mt,this.nzMenuClassName="",this.nzPaddingLeft=null,this.nzTitle=null,this.nzIcon=null,this.nzOpen=!1,this.nzDisabled=!1,this.nzOpenChange=new i.vpe,this.cdkOverlayOrigin=null,this.listOfNzSubMenuComponent=null,this.listOfNzMenuItemDirective=null,this.level=this.nzSubmenuService.level,this.destroy$=new a.xQ,this.position="right",this.triggerWidth=null,this.theme="light",this.mode="vertical",this.inlinePaddingLeft=null,this.overlayPositions=Zt,this.isSelected=!1,this.isActive=!1,this.dir="ltr"}setOpenStateWithoutDebounce(W){this.nzSubmenuService.setOpenStateWithoutDebounce(W)}toggleSubMenu(){this.setOpenStateWithoutDebounce(!this.nzOpen)}setMouseEnterState(W){this.isActive=W,"inline"!==this.mode&&this.nzSubmenuService.setMouseEnterTitleOrOverlayState(W)}setTriggerWidth(){"horizontal"===this.mode&&this.platform.isBrowser&&this.cdkOverlayOrigin&&(this.triggerWidth=this.cdkOverlayOrigin.nativeElement.getBoundingClientRect().width)}onPositionChange(W){const G=(0,K.d_)(W);"rightTop"===G||"rightBottom"===G||"right"===G?this.position="right":("leftTop"===G||"leftBottom"===G||"left"===G)&&(this.position="left")}ngOnInit(){var W;this.nzMenuService.theme$.pipe((0,b.R)(this.destroy$)).subscribe(G=>{this.theme=G,this.cdr.markForCheck()}),this.nzSubmenuService.mode$.pipe((0,b.R)(this.destroy$)).subscribe(G=>{this.mode=G,"horizontal"===G?this.overlayPositions=Gt:"vertical"===G&&(this.overlayPositions=Zt),this.cdr.markForCheck()}),(0,d.aj)([this.nzSubmenuService.mode$,this.nzMenuService.inlineIndent$]).pipe((0,b.R)(this.destroy$)).subscribe(([G,Ye])=>{this.inlinePaddingLeft="inline"===G?this.level*Ye:null,this.cdr.markForCheck()}),this.nzSubmenuService.isCurrentSubMenuOpen$.pipe((0,b.R)(this.destroy$)).subscribe(G=>{this.isActive=G,G!==this.nzOpen&&(this.setTriggerWidth(),this.nzOpen=G,this.nzOpenChange.emit(this.nzOpen),this.cdr.markForCheck())}),this.dir=this.directionality.value,null===(W=this.directionality.change)||void 0===W||W.pipe((0,b.R)(this.destroy$)).subscribe(G=>{this.dir=G,this.cdr.markForCheck()})}ngAfterContentInit(){this.setTriggerWidth();const W=this.listOfNzMenuItemDirective,G=W.changes,Ye=(0,r.T)(G,...W.map(Je=>Je.selected$));G.pipe((0,_.O)(W),(0,H.w)(()=>Ye),(0,_.O)(!0),(0,u.U)(()=>W.some(Je=>Je.nzSelected)),(0,b.R)(this.destroy$)).subscribe(Je=>{this.isSelected=Je,this.cdr.markForCheck()})}ngOnChanges(W){const{nzOpen:G}=W;G&&(this.nzSubmenuService.setOpenStateWithoutDebounce(this.nzOpen),this.setTriggerWidth())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return de.\u0275fac=function(W){return new(W||de)(i.Y36($e),i.Y36(i.sBO),i.Y36(Lt),i.Y36(Y.t4),i.Y36(yt),i.Y36(s.Is,8),i.Y36(J.P,9))},de.\u0275cmp=i.Xpm({type:de,selectors:[["","nz-submenu",""]],contentQueries:function(W,G,Ye){if(1&W&&(i.Suo(Ye,de,5),i.Suo(Ye,Vt,5)),2&W){let Je;i.iGM(Je=i.CRH())&&(G.listOfNzSubMenuComponent=Je),i.iGM(Je=i.CRH())&&(G.listOfNzMenuItemDirective=Je)}},viewQuery:function(W,G){if(1&W&&i.Gf(V.xu,7,i.SBq),2&W){let Ye;i.iGM(Ye=i.CRH())&&(G.cdkOverlayOrigin=Ye.first)}},hostVars:34,hostBindings:function(W,G){2&W&&i.ekj("ant-dropdown-menu-submenu",G.isMenuInsideDropDown)("ant-dropdown-menu-submenu-disabled",G.isMenuInsideDropDown&&G.nzDisabled)("ant-dropdown-menu-submenu-open",G.isMenuInsideDropDown&&G.nzOpen)("ant-dropdown-menu-submenu-selected",G.isMenuInsideDropDown&&G.isSelected)("ant-dropdown-menu-submenu-vertical",G.isMenuInsideDropDown&&"vertical"===G.mode)("ant-dropdown-menu-submenu-horizontal",G.isMenuInsideDropDown&&"horizontal"===G.mode)("ant-dropdown-menu-submenu-inline",G.isMenuInsideDropDown&&"inline"===G.mode)("ant-dropdown-menu-submenu-active",G.isMenuInsideDropDown&&G.isActive)("ant-menu-submenu",!G.isMenuInsideDropDown)("ant-menu-submenu-disabled",!G.isMenuInsideDropDown&&G.nzDisabled)("ant-menu-submenu-open",!G.isMenuInsideDropDown&&G.nzOpen)("ant-menu-submenu-selected",!G.isMenuInsideDropDown&&G.isSelected)("ant-menu-submenu-vertical",!G.isMenuInsideDropDown&&"vertical"===G.mode)("ant-menu-submenu-horizontal",!G.isMenuInsideDropDown&&"horizontal"===G.mode)("ant-menu-submenu-inline",!G.isMenuInsideDropDown&&"inline"===G.mode)("ant-menu-submenu-active",!G.isMenuInsideDropDown&&G.isActive)("ant-menu-submenu-rtl","rtl"===G.dir)},inputs:{nzMenuClassName:"nzMenuClassName",nzPaddingLeft:"nzPaddingLeft",nzTitle:"nzTitle",nzIcon:"nzIcon",nzOpen:"nzOpen",nzDisabled:"nzDisabled"},outputs:{nzOpenChange:"nzOpenChange"},exportAs:["nzSubmenu"],features:[i._Bn([Lt]),i.TTD],attrs:Q,ngContentSelectors:Oe,decls:8,vars:9,consts:[["nz-submenu-title","","cdkOverlayOrigin","",3,"nzIcon","nzTitle","mode","nzDisabled","isMenuInsideDropDown","paddingLeft","subMenuMouseState","toggleSubMenu"],["origin","cdkOverlayOrigin"],[4,"ngIf"],["nz-submenu-inline-child","",3,"mode","nzOpen","nzNoAnimation","menuClass","templateOutlet",4,"ngIf","ngIfElse"],["nonInlineTemplate",""],["subMenuTemplate",""],["nz-submenu-inline-child","",3,"mode","nzOpen","nzNoAnimation","menuClass","templateOutlet"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayPositions","cdkConnectedOverlayOrigin","cdkConnectedOverlayWidth","cdkConnectedOverlayOpen","cdkConnectedOverlayTransformOriginOn","positionChange"],["nz-submenu-none-inline-child","",3,"theme","mode","nzOpen","position","nzDisabled","isMenuInsideDropDown","templateOutlet","menuClass","nzNoAnimation","subMenuMouseState"]],template:function(W,G){if(1&W&&(i.F$t(xe),i.TgZ(0,"div",0,1),i.NdJ("subMenuMouseState",function(Je){return G.setMouseEnterState(Je)})("toggleSubMenu",function(){return G.toggleSubMenu()}),i.YNc(2,ye,1,0,"ng-content",2),i.qZA(),i.YNc(3,Le,1,6,"div",3),i.YNc(4,Me,1,5,"ng-template",null,4,i.W1O),i.YNc(6,De,1,0,"ng-template",null,5,i.W1O)),2&W){const Ye=i.MAs(5);i.Q6J("nzIcon",G.nzIcon)("nzTitle",G.nzTitle)("mode",G.mode)("nzDisabled",G.nzDisabled)("isMenuInsideDropDown",G.isMenuInsideDropDown)("paddingLeft",G.nzPaddingLeft||G.inlinePaddingLeft),i.xp6(2),i.Q6J("ngIf",!G.nzTitle),i.xp6(1),i.Q6J("ngIf","inline"===G.mode)("ngIfElse",Ye)}},directives:function(){return[we,V.xu,X.O5,Fe,J.P,V.pI,Ue]},encapsulation:2,changeDetection:0}),(0,o.gn)([(0,T.yF)()],de.prototype,"nzOpen",void 0),(0,o.gn)([(0,T.yF)()],de.prototype,"nzDisabled",void 0),de})();function Ge(de,Ie){return de||Ie}function N(de){return de||!1}let ee=(()=>{class de{constructor(W,G,Ye,Je){this.nzMenuService=W,this.isMenuInsideDropDown=G,this.cdr=Ye,this.directionality=Je,this.nzInlineIndent=24,this.nzTheme="light",this.nzMode="vertical",this.nzInlineCollapsed=!1,this.nzSelectable=!this.isMenuInsideDropDown,this.nzClick=new i.vpe,this.actualMode="vertical",this.dir="ltr",this.inlineCollapsed$=new l.X(this.nzInlineCollapsed),this.mode$=new l.X(this.nzMode),this.destroy$=new a.xQ,this.listOfOpenedNzSubMenuComponent=[]}setInlineCollapsed(W){this.nzInlineCollapsed=W,this.inlineCollapsed$.next(W)}updateInlineCollapse(){this.listOfNzMenuItemDirective&&(this.nzInlineCollapsed?(this.listOfOpenedNzSubMenuComponent=this.listOfNzSubMenuComponent.filter(W=>W.nzOpen),this.listOfNzSubMenuComponent.forEach(W=>W.setOpenStateWithoutDebounce(!1))):(this.listOfOpenedNzSubMenuComponent.forEach(W=>W.setOpenStateWithoutDebounce(!0)),this.listOfOpenedNzSubMenuComponent=[]))}ngOnInit(){var W;(0,d.aj)([this.inlineCollapsed$,this.mode$]).pipe((0,b.R)(this.destroy$)).subscribe(([G,Ye])=>{this.actualMode=G?"vertical":Ye,this.nzMenuService.setMode(this.actualMode),this.cdr.markForCheck()}),this.nzMenuService.descendantMenuItemClick$.pipe((0,b.R)(this.destroy$)).subscribe(G=>{this.nzClick.emit(G),this.nzSelectable&&!G.nzMatchRouter&&this.listOfNzMenuItemDirective.forEach(Ye=>Ye.setSelectedState(Ye===G))}),this.dir=this.directionality.value,null===(W=this.directionality.change)||void 0===W||W.pipe((0,b.R)(this.destroy$)).subscribe(G=>{this.dir=G,this.nzMenuService.setMode(this.actualMode),this.cdr.markForCheck()})}ngAfterContentInit(){this.inlineCollapsed$.pipe((0,b.R)(this.destroy$)).subscribe(()=>{this.updateInlineCollapse(),this.cdr.markForCheck()})}ngOnChanges(W){const{nzInlineCollapsed:G,nzInlineIndent:Ye,nzTheme:Je,nzMode:Ht}=W;G&&this.inlineCollapsed$.next(this.nzInlineCollapsed),Ye&&this.nzMenuService.setInlineIndent(this.nzInlineIndent),Je&&this.nzMenuService.setTheme(this.nzTheme),Ht&&(this.mode$.next(this.nzMode),!W.nzMode.isFirstChange()&&this.listOfNzSubMenuComponent&&this.listOfNzSubMenuComponent.forEach(kt=>kt.setOpenStateWithoutDebounce(!1)))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return de.\u0275fac=function(W){return new(W||de)(i.Y36($e),i.Y36(yt),i.Y36(i.sBO),i.Y36(s.Is,8))},de.\u0275dir=i.lG2({type:de,selectors:[["","nz-menu",""]],contentQueries:function(W,G,Ye){if(1&W&&(i.Suo(Ye,Vt,5),i.Suo(Ye,le,5)),2&W){let Je;i.iGM(Je=i.CRH())&&(G.listOfNzMenuItemDirective=Je),i.iGM(Je=i.CRH())&&(G.listOfNzSubMenuComponent=Je)}},hostVars:34,hostBindings:function(W,G){2&W&&i.ekj("ant-dropdown-menu",G.isMenuInsideDropDown)("ant-dropdown-menu-root",G.isMenuInsideDropDown)("ant-dropdown-menu-light",G.isMenuInsideDropDown&&"light"===G.nzTheme)("ant-dropdown-menu-dark",G.isMenuInsideDropDown&&"dark"===G.nzTheme)("ant-dropdown-menu-vertical",G.isMenuInsideDropDown&&"vertical"===G.actualMode)("ant-dropdown-menu-horizontal",G.isMenuInsideDropDown&&"horizontal"===G.actualMode)("ant-dropdown-menu-inline",G.isMenuInsideDropDown&&"inline"===G.actualMode)("ant-dropdown-menu-inline-collapsed",G.isMenuInsideDropDown&&G.nzInlineCollapsed)("ant-menu",!G.isMenuInsideDropDown)("ant-menu-root",!G.isMenuInsideDropDown)("ant-menu-light",!G.isMenuInsideDropDown&&"light"===G.nzTheme)("ant-menu-dark",!G.isMenuInsideDropDown&&"dark"===G.nzTheme)("ant-menu-vertical",!G.isMenuInsideDropDown&&"vertical"===G.actualMode)("ant-menu-horizontal",!G.isMenuInsideDropDown&&"horizontal"===G.actualMode)("ant-menu-inline",!G.isMenuInsideDropDown&&"inline"===G.actualMode)("ant-menu-inline-collapsed",!G.isMenuInsideDropDown&&G.nzInlineCollapsed)("ant-menu-rtl","rtl"===G.dir)},inputs:{nzInlineIndent:"nzInlineIndent",nzTheme:"nzTheme",nzMode:"nzMode",nzInlineCollapsed:"nzInlineCollapsed",nzSelectable:"nzSelectable"},outputs:{nzClick:"nzClick"},exportAs:["nzMenu"],features:[i._Bn([{provide:Bt,useClass:$e},{provide:$e,useFactory:Ge,deps:[[new i.tp0,new i.FiY,$e],Bt]},{provide:yt,useFactory:N,deps:[[new i.tp0,new i.FiY,yt]]}]),i.TTD]}),(0,o.gn)([(0,T.yF)()],de.prototype,"nzInlineCollapsed",void 0),(0,o.gn)([(0,T.yF)()],de.prototype,"nzSelectable",void 0),de})(),we=(()=>{class de{constructor(W,G){this.cdr=W,this.directionality=G,this.nzIcon=null,this.nzTitle=null,this.isMenuInsideDropDown=!1,this.nzDisabled=!1,this.paddingLeft=null,this.mode="vertical",this.toggleSubMenu=new i.vpe,this.subMenuMouseState=new i.vpe,this.dir="ltr",this.destroy$=new a.xQ}ngOnInit(){var W;this.dir=this.directionality.value,null===(W=this.directionality.change)||void 0===W||W.pipe((0,b.R)(this.destroy$)).subscribe(G=>{this.dir=G,this.cdr.detectChanges()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setMouseState(W){this.nzDisabled||this.subMenuMouseState.next(W)}clickTitle(){"inline"===this.mode&&!this.nzDisabled&&this.toggleSubMenu.emit()}}return de.\u0275fac=function(W){return new(W||de)(i.Y36(i.sBO),i.Y36(s.Is,8))},de.\u0275cmp=i.Xpm({type:de,selectors:[["","nz-submenu-title",""]],hostVars:8,hostBindings:function(W,G){1&W&&i.NdJ("click",function(){return G.clickTitle()})("mouseenter",function(){return G.setMouseState(!0)})("mouseleave",function(){return G.setMouseState(!1)}),2&W&&(i.Udp("padding-left","rtl"===G.dir?null:G.paddingLeft,"px")("padding-right","rtl"===G.dir?G.paddingLeft:null,"px"),i.ekj("ant-dropdown-menu-submenu-title",G.isMenuInsideDropDown)("ant-menu-submenu-title",!G.isMenuInsideDropDown))},inputs:{nzIcon:"nzIcon",nzTitle:"nzTitle",isMenuInsideDropDown:"isMenuInsideDropDown",nzDisabled:"nzDisabled",paddingLeft:"paddingLeft",mode:"mode"},outputs:{toggleSubMenu:"toggleSubMenu",subMenuMouseState:"subMenuMouseState"},exportAs:["nzSubmenuTitle"],attrs:ot,ngContentSelectors:vt,decls:6,vars:4,consts:[["nz-icon","",3,"nzType",4,"ngIf"],[4,"nzStringTemplateOutlet"],["class","ant-dropdown-menu-submenu-expand-icon",3,"ngSwitch",4,"ngIf","ngIfElse"],["notDropdownTpl",""],["nz-icon","",3,"nzType"],[1,"ant-dropdown-menu-submenu-expand-icon",3,"ngSwitch"],["nz-icon","","nzType","left","class","ant-dropdown-menu-submenu-arrow-icon",4,"ngSwitchCase"],["nz-icon","","nzType","right","class","ant-dropdown-menu-submenu-arrow-icon",4,"ngSwitchDefault"],["nz-icon","","nzType","left",1,"ant-dropdown-menu-submenu-arrow-icon"],["nz-icon","","nzType","right",1,"ant-dropdown-menu-submenu-arrow-icon"],[1,"ant-menu-submenu-arrow"]],template:function(W,G){if(1&W&&(i.F$t(),i.YNc(0,gt,1,1,"i",0),i.YNc(1,ut,3,1,"ng-container",1),i.Hsn(2),i.YNc(3,Ze,3,2,"span",2),i.YNc(4,ke,1,0,"ng-template",null,3,i.W1O)),2&W){const Ye=i.MAs(5);i.Q6J("ngIf",G.nzIcon),i.xp6(1),i.Q6J("nzStringTemplateOutlet",G.nzTitle),i.xp6(2),i.Q6J("ngIf",G.isMenuInsideDropDown)("ngIfElse",Ye)}},directives:[X.O5,ne.f,he.Ls,X.RF,X.n9,X.ED],encapsulation:2,changeDetection:0}),de})(),Fe=(()=>{class de{constructor(W,G,Ye){this.elementRef=W,this.renderer=G,this.directionality=Ye,this.templateOutlet=null,this.menuClass="",this.mode="vertical",this.nzOpen=!1,this.listOfCacheClassName=[],this.expandState="collapsed",this.dir="ltr",this.destroy$=new a.xQ,this.elementRef.nativeElement.classList.add("ant-menu","ant-menu-inline","ant-menu-sub")}calcMotionState(){this.expandState=this.nzOpen?"expanded":"collapsed"}ngOnInit(){var W;this.calcMotionState(),this.dir=this.directionality.value,null===(W=this.directionality.change)||void 0===W||W.pipe((0,b.R)(this.destroy$)).subscribe(G=>{this.dir=G})}ngOnChanges(W){const{mode:G,nzOpen:Ye,menuClass:Je}=W;(G||Ye)&&this.calcMotionState(),Je&&(this.listOfCacheClassName.length&&this.listOfCacheClassName.filter(Ht=>!!Ht).forEach(Ht=>{this.renderer.removeClass(this.elementRef.nativeElement,Ht)}),this.menuClass&&(this.listOfCacheClassName=this.menuClass.split(" "),this.listOfCacheClassName.filter(Ht=>!!Ht).forEach(Ht=>{this.renderer.addClass(this.elementRef.nativeElement,Ht)})))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return de.\u0275fac=function(W){return new(W||de)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(s.Is,8))},de.\u0275cmp=i.Xpm({type:de,selectors:[["","nz-submenu-inline-child",""]],hostVars:3,hostBindings:function(W,G){2&W&&(i.d8E("@collapseMotion",G.expandState),i.ekj("ant-menu-rtl","rtl"===G.dir))},inputs:{templateOutlet:"templateOutlet",menuClass:"menuClass",mode:"mode",nzOpen:"nzOpen"},exportAs:["nzSubmenuInlineChild"],features:[i.TTD],attrs:st,decls:1,vars:1,consts:[[3,"ngTemplateOutlet"]],template:function(W,G){1&W&&i.YNc(0,_t,0,0,"ng-template",0),2&W&&i.Q6J("ngTemplateOutlet",G.templateOutlet)},directives:[X.tP],encapsulation:2,data:{animation:[re.J_]},changeDetection:0}),de})(),Ue=(()=>{class de{constructor(W,G){this.elementRef=W,this.directionality=G,this.menuClass="",this.theme="light",this.templateOutlet=null,this.isMenuInsideDropDown=!1,this.mode="vertical",this.position="right",this.nzDisabled=!1,this.nzOpen=!1,this.subMenuMouseState=new i.vpe,this.expandState="collapsed",this.dir="ltr",this.destroy$=new a.xQ,this.elementRef.nativeElement.classList.add("ant-menu-submenu","ant-menu-submenu-popup")}setMouseState(W){this.nzDisabled||this.subMenuMouseState.next(W)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}calcMotionState(){this.nzOpen?"horizontal"===this.mode?this.expandState="bottom":"vertical"===this.mode&&(this.expandState="active"):this.expandState="collapsed"}ngOnInit(){var W;this.calcMotionState(),this.dir=this.directionality.value,null===(W=this.directionality.change)||void 0===W||W.pipe((0,b.R)(this.destroy$)).subscribe(G=>{this.dir=G})}ngOnChanges(W){const{mode:G,nzOpen:Ye}=W;(G||Ye)&&this.calcMotionState()}}return de.\u0275fac=function(W){return new(W||de)(i.Y36(i.SBq),i.Y36(s.Is,8))},de.\u0275cmp=i.Xpm({type:de,selectors:[["","nz-submenu-none-inline-child",""]],hostVars:14,hostBindings:function(W,G){1&W&&i.NdJ("mouseenter",function(){return G.setMouseState(!0)})("mouseleave",function(){return G.setMouseState(!1)}),2&W&&(i.d8E("@slideMotion",G.expandState)("@zoomBigMotion",G.expandState),i.ekj("ant-menu-light","light"===G.theme)("ant-menu-dark","dark"===G.theme)("ant-menu-submenu-placement-bottom","horizontal"===G.mode)("ant-menu-submenu-placement-right","vertical"===G.mode&&"right"===G.position)("ant-menu-submenu-placement-left","vertical"===G.mode&&"left"===G.position)("ant-menu-submenu-rtl","rtl"===G.dir))},inputs:{menuClass:"menuClass",theme:"theme",templateOutlet:"templateOutlet",isMenuInsideDropDown:"isMenuInsideDropDown",mode:"mode",position:"position",nzDisabled:"nzDisabled",nzOpen:"nzOpen"},outputs:{subMenuMouseState:"subMenuMouseState"},exportAs:["nzSubmenuNoneInlineChild"],features:[i.TTD],attrs:rt,decls:2,vars:16,consts:[[3,"ngClass"],[3,"ngTemplateOutlet"]],template:function(W,G){1&W&&(i.TgZ(0,"div",0),i.YNc(1,At,0,0,"ng-template",1),i.qZA()),2&W&&(i.ekj("ant-dropdown-menu",G.isMenuInsideDropDown)("ant-menu",!G.isMenuInsideDropDown)("ant-dropdown-menu-vertical",G.isMenuInsideDropDown)("ant-menu-vertical",!G.isMenuInsideDropDown)("ant-dropdown-menu-sub",G.isMenuInsideDropDown)("ant-menu-sub",!G.isMenuInsideDropDown)("ant-menu-rtl","rtl"===G.dir),i.Q6J("ngClass",G.menuClass),i.xp6(1),i.Q6J("ngTemplateOutlet",G.templateOutlet))},directives:[X.mk,X.tP],encapsulation:2,data:{animation:[re.$C,re.mF]},changeDetection:0}),de})(),qe=(()=>{class de{}return de.\u0275fac=function(W){return new(W||de)},de.\u0275mod=i.oAB({type:de}),de.\u0275inj=i.cJS({imports:[[s.vT,X.ez,Y.ud,V.U8,he.PV,J.g,ne.T]]}),de})()},57564:(e,t,n)=>{"use strict";n.d(t,{jS:()=>ke,N3:()=>Zt});var o=n(64762),s=n(70946),i=n(36461),a=n(80521),l=n(37716),r=n(90665),d=n(79765),u=n(22759),g=n(66682),f=n(88002);function v(...le){const Ge=le.length;if(0===Ge)throw new Error("list of properties cannot be empty.");return N=>(0,f.U)(function(le,Ge){return ee=>{let Ce=ee;for(let Be=0;Be<Ge;Be++){const Z=null!=Ce?Ce[le[Be]]:void 0;if(void 0===Z)return;Ce=Z}return Ce}}(le,Ge))(N)}var z=n(46782),b=n(45435),_=n(93342),H=n(87519),T=n(96182),L=n(47070);const Y=["pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime"];var re=n(90641),X=n(86911),ne=n(90625),he=n(38583),Q=n(68178),ye=n(32729);const Le=["overlay"];function lt(le,Ge){if(1&le&&(l.ynx(0),l._uU(1),l.BQk()),2&le){const N=l.oxw(2);l.xp6(1),l.Oqu(N.nzTitle)}}function Me(le,Ge){if(1&le&&(l.TgZ(0,"div",2),l.TgZ(1,"div",3),l.TgZ(2,"div",4),l._UZ(3,"span",5),l.qZA(),l.TgZ(4,"div",6),l.YNc(5,lt,2,1,"ng-container",7),l.qZA(),l.qZA(),l.qZA()),2&le){const N=l.oxw();l.ekj("ant-tooltip-rtl","rtl"===N.dir),l.Q6J("ngClass",N._classMap)("ngStyle",N.nzOverlayStyle)("@.disabled",null==N.noAnimation?null:N.noAnimation.nzNoAnimation)("nzNoAnimation",null==N.noAnimation?null:N.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),l.xp6(3),l.Q6J("ngStyle",N._contentStyleMap),l.xp6(1),l.Q6J("ngStyle",N._contentStyleMap),l.xp6(1),l.Q6J("nzStringTemplateOutlet",N.nzTitle)("nzStringTemplateOutletContext",N.nzTitleContext)}}let De=(()=>{class le{constructor(N,ee,Ce,Be,Z,we){this.elementRef=N,this.hostView=ee,this.resolver=Ce,this.renderer=Be,this.noAnimation=Z,this.nzConfigService=we,this.visibleChange=new l.vpe,this.internalVisible=!1,this.destroy$=new d.xQ,this.triggerDisposables=[]}get _title(){return this.title||this.directiveTitle||null}get _content(){return this.content||this.directiveContent||null}get _trigger(){return void 0!==this.trigger?this.trigger:"hover"}get _placement(){const N=this.placement;return Array.isArray(N)&&N.length>0?N:"string"==typeof N&&N?[N]:["top"]}get _visible(){return(void 0!==this.visible?this.visible:this.internalVisible)||!1}get _mouseEnterDelay(){return this.mouseEnterDelay||.15}get _mouseLeaveDelay(){return this.mouseLeaveDelay||.1}get _overlayClassName(){return this.overlayClassName||null}get _overlayStyle(){return this.overlayStyle||null}getProxyPropertyMap(){return{noAnimation:["noAnimation",()=>!!this.noAnimation]}}ngOnChanges(N){const{trigger:ee}=N;ee&&!ee.isFirstChange()&&this.registerTriggers(),this.component&&this.updatePropertiesByChanges(N)}ngAfterViewInit(){this.createComponent(),this.registerTriggers()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.clearTogglingTimer(),this.removeTriggerListeners()}show(){var N;null===(N=this.component)||void 0===N||N.show()}hide(){var N;null===(N=this.component)||void 0===N||N.hide()}updatePosition(){this.component&&this.component.updatePosition()}createComponent(){const N=this.hostView.createComponent(this.componentFactory);this.component=N.instance,this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),N.location.nativeElement),this.component.setOverlayOrigin({elementRef:this.origin||this.elementRef}),this.initProperties(),this.component.nzVisibleChange.pipe((0,H.x)(),(0,z.R)(this.destroy$)).subscribe(ee=>{this.internalVisible=ee,this.visibleChange.emit(ee)})}registerTriggers(){const N=this.elementRef.nativeElement,ee=this.trigger;if(this.removeTriggerListeners(),"hover"===ee){let Ce;this.triggerDisposables.push(this.renderer.listen(N,"mouseenter",()=>{this.delayEnterLeave(!0,!0,this._mouseEnterDelay)})),this.triggerDisposables.push(this.renderer.listen(N,"mouseleave",()=>{var Be;this.delayEnterLeave(!0,!1,this._mouseLeaveDelay),(null===(Be=this.component)||void 0===Be?void 0:Be.overlay.overlayRef)&&!Ce&&(Ce=this.component.overlay.overlayRef.overlayElement,this.triggerDisposables.push(this.renderer.listen(Ce,"mouseenter",()=>{this.delayEnterLeave(!1,!0,this._mouseEnterDelay)})),this.triggerDisposables.push(this.renderer.listen(Ce,"mouseleave",()=>{this.delayEnterLeave(!1,!1,this._mouseLeaveDelay)})))}))}else"focus"===ee?(this.triggerDisposables.push(this.renderer.listen(N,"focusin",()=>this.show())),this.triggerDisposables.push(this.renderer.listen(N,"focusout",()=>this.hide()))):"click"===ee&&this.triggerDisposables.push(this.renderer.listen(N,"click",Ce=>{Ce.preventDefault(),this.show()}))}updatePropertiesByChanges(N){this.updatePropertiesByKeys(Object.keys(N))}updatePropertiesByKeys(N){var ee;const Ce=Object.assign({title:["nzTitle",()=>this._title],directiveTitle:["nzTitle",()=>this._title],content:["nzContent",()=>this._content],directiveContent:["nzContent",()=>this._content],trigger:["nzTrigger",()=>this._trigger],placement:["nzPlacement",()=>this._placement],visible:["nzVisible",()=>this._visible],mouseEnterDelay:["nzMouseEnterDelay",()=>this._mouseEnterDelay],mouseLeaveDelay:["nzMouseLeaveDelay",()=>this._mouseLeaveDelay],overlayClassName:["nzOverlayClassName",()=>this._overlayClassName],overlayStyle:["nzOverlayStyle",()=>this._overlayStyle],arrowPointAtCenter:["nzArrowPointAtCenter",()=>this.arrowPointAtCenter]},this.getProxyPropertyMap());(N||Object.keys(Ce).filter(Be=>!Be.startsWith("directive"))).forEach(Be=>{if(Ce[Be]){const[Z,we]=Ce[Be];this.updateComponentValue(Z,we())}}),null===(ee=this.component)||void 0===ee||ee.updateByDirective()}initProperties(){this.updatePropertiesByKeys()}updateComponentValue(N,ee){void 0!==ee&&(this.component[N]=ee)}delayEnterLeave(N,ee,Ce=-1){this.delayTimer?this.clearTogglingTimer():Ce>0?this.delayTimer=setTimeout(()=>{this.delayTimer=void 0,ee?this.show():this.hide()},1e3*Ce):ee&&N?this.show():this.hide()}removeTriggerListeners(){this.triggerDisposables.forEach(N=>N()),this.triggerDisposables.length=0}clearTogglingTimer(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0)}}return le.\u0275fac=function(N){return new(N||le)(l.Y36(l.SBq),l.Y36(l.s_b),l.Y36(l._Vd),l.Y36(l.Qsj),l.Y36(re.P),l.Y36(ye.jY))},le.\u0275dir=l.lG2({type:le,features:[l.TTD]}),le})(),xe=(()=>{class le{constructor(N,ee,Ce){this.cdr=N,this.directionality=ee,this.noAnimation=Ce,this.nzTitle=null,this.nzContent=null,this.nzArrowPointAtCenter=!1,this.nzOverlayStyle={},this.nzBackdrop=!1,this.nzVisibleChange=new d.xQ,this._visible=!1,this._trigger="hover",this.preferredPlacement="top",this.dir="ltr",this._classMap={},this._prefix="ant-tooltip",this._positions=[...X.Ek],this.destroy$=new d.xQ}set nzVisible(N){const ee=(0,T.sw)(N);this._visible!==ee&&(this._visible=ee,this.nzVisibleChange.next(ee))}get nzVisible(){return this._visible}set nzTrigger(N){this._trigger=N}get nzTrigger(){return this._trigger}set nzPlacement(N){const ee=N.map(Ce=>X.yW[Ce]);this._positions=[...ee,...X.Ek]}ngOnInit(){var N;null===(N=this.directionality.change)||void 0===N||N.pipe((0,z.R)(this.destroy$)).subscribe(ee=>{this.dir=ee,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.nzVisibleChange.complete(),this.destroy$.next(),this.destroy$.complete()}show(){this.nzVisible||(this.isEmpty()||(this.nzVisible=!0,this.nzVisibleChange.next(!0),this.cdr.detectChanges()),this.origin&&this.overlay&&this.overlay.overlayRef&&"rtl"===this.overlay.overlayRef.getDirection()&&this.overlay.overlayRef.setDirection("ltr"))}hide(){!this.nzVisible||(this.nzVisible=!1,this.nzVisibleChange.next(!1),this.cdr.detectChanges())}updateByDirective(){this.updateStyles(),this.cdr.detectChanges(),Promise.resolve().then(()=>{this.updatePosition(),this.updateVisibilityByTitle()})}updatePosition(){this.origin&&this.overlay&&this.overlay.overlayRef&&this.overlay.overlayRef.updatePosition()}onPositionChange(N){this.preferredPlacement=(0,X.d_)(N),this.updateStyles(),this.cdr.detectChanges()}setOverlayOrigin(N){this.origin=N,this.cdr.markForCheck()}onClickOutside(N){!this.origin.elementRef.nativeElement.contains(N.target)&&null!==this.nzTrigger&&this.hide()}updateVisibilityByTitle(){this.isEmpty()&&this.hide()}updateStyles(){this._classMap={[this.nzOverlayClassName]:!0,[`${this._prefix}-placement-${this.preferredPlacement}`]:!0}}}return le.\u0275fac=function(N){return new(N||le)(l.Y36(l.sBO),l.Y36(s.Is,8),l.Y36(re.P))},le.\u0275dir=l.lG2({type:le,viewQuery:function(N,ee){if(1&N&&l.Gf(Le,5),2&N){let Ce;l.iGM(Ce=l.CRH())&&(ee.overlay=Ce.first)}}}),le})(),k=(()=>{class le extends De{constructor(N,ee,Ce,Be,Z){super(N,ee,Ce,Be,Z),this.titleContext=null,this.trigger="hover",this.placement="top",this.visibleChange=new l.vpe,this.componentFactory=this.resolver.resolveComponentFactory(tt)}getProxyPropertyMap(){return Object.assign(Object.assign({},super.getProxyPropertyMap()),{nzTooltipColor:["nzColor",()=>this.nzTooltipColor],nzTooltipTitleContext:["nzTitleContext",()=>this.titleContext]})}}return le.\u0275fac=function(N){return new(N||le)(l.Y36(l.SBq),l.Y36(l.s_b),l.Y36(l._Vd),l.Y36(l.Qsj),l.Y36(re.P,9))},le.\u0275dir=l.lG2({type:le,selectors:[["","nz-tooltip",""]],hostVars:2,hostBindings:function(N,ee){2&N&&l.ekj("ant-tooltip-open",ee.visible)},inputs:{titleContext:["nzTooltipTitleContext","titleContext"],trigger:["nzTooltipTrigger","trigger"],placement:["nzTooltipPlacement","placement"],title:["nzTooltipTitle","title"],directiveTitle:["nz-tooltip","directiveTitle"],origin:["nzTooltipOrigin","origin"],visible:["nzTooltipVisible","visible"],mouseEnterDelay:["nzTooltipMouseEnterDelay","mouseEnterDelay"],mouseLeaveDelay:["nzTooltipMouseLeaveDelay","mouseLeaveDelay"],overlayClassName:["nzTooltipOverlayClassName","overlayClassName"],overlayStyle:["nzTooltipOverlayStyle","overlayStyle"],arrowPointAtCenter:["nzTooltipArrowPointAtCenter","arrowPointAtCenter"],nzTooltipColor:"nzTooltipColor"},outputs:{visibleChange:"nzTooltipVisibleChange"},exportAs:["nzTooltip"],features:[l.qOj]}),(0,o.gn)([(0,T.yF)()],le.prototype,"arrowPointAtCenter",void 0),le})(),tt=(()=>{class le extends xe{constructor(N,ee,Ce){super(N,ee,Ce),this.noAnimation=Ce,this.nzTitle=null,this.nzTitleContext=null,this._contentStyleMap={}}isEmpty(){return function(le){return!(le instanceof l.Rgc||""!==le&&(0,T.DX)(le))}(this.nzTitle)}updateStyles(){const N=this.nzColor&&function(le){return-1!==Y.indexOf(le)}(this.nzColor);this._classMap={[this.nzOverlayClassName]:!0,[`${this._prefix}-placement-${this.preferredPlacement}`]:!0,[`${this._prefix}-${this.nzColor}`]:N},this._contentStyleMap={backgroundColor:this.nzColor&&!N?this.nzColor:null}}}return le.\u0275fac=function(N){return new(N||le)(l.Y36(l.sBO),l.Y36(s.Is,8),l.Y36(re.P,9))},le.\u0275cmp=l.Xpm({type:le,selectors:[["nz-tooltip"]],exportAs:["nzTooltipComponent"],features:[l.qOj],decls:2,vars:5,consts:[["cdkConnectedOverlay","","nzConnectedOverlay","",3,"cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayPush","nzArrowPointAtCenter","overlayOutsideClick","detach","positionChange"],["overlay","cdkConnectedOverlay"],[1,"ant-tooltip",3,"ngClass","ngStyle","nzNoAnimation"],[1,"ant-tooltip-content"],[1,"ant-tooltip-arrow"],[1,"ant-tooltip-arrow-content",3,"ngStyle"],[1,"ant-tooltip-inner",3,"ngStyle"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"]],template:function(N,ee){1&N&&(l.YNc(0,Me,6,11,"ng-template",0,1,l.W1O),l.NdJ("overlayOutsideClick",function(Be){return ee.onClickOutside(Be)})("detach",function(){return ee.hide()})("positionChange",function(Be){return ee.onPositionChange(Be)})),2&N&&l.Q6J("cdkConnectedOverlayOrigin",ee.origin)("cdkConnectedOverlayOpen",ee._visible)("cdkConnectedOverlayPositions",ee._positions)("cdkConnectedOverlayPush",!0)("nzArrowPointAtCenter",ee.nzArrowPointAtCenter)},directives:[ne.pI,X.hQ,he.mk,he.PC,re.P,Q.f],encapsulation:2,data:{animation:[L.$C]},changeDetection:0}),le})(),nt=(()=>{class le{}return le.\u0275fac=function(N){return new(N||le)},le.\u0275mod=l.oAB({type:le}),le.\u0275inj=l.cJS({imports:[[s.vT,he.ez,ne.U8,Q.T,X.e4,re.g]]}),le})();const St=["handle"],zt=["slider"];function et(le,Ge){if(1&le&&l._UZ(0,"nz-slider-step",6),2&le){const N=l.oxw();l.Q6J("vertical",N.nzVertical)("min",N.nzMin)("max",N.nzMax)("lowerBound",N.bounds.lower)("upperBound",N.bounds.upper)("marksArray",N.marksArray)("included",N.nzIncluded)("reverse",N.nzReverse)}}function ot(le,Ge){if(1&le){const N=l.EpF();l.TgZ(0,"nz-slider-handle",7),l.NdJ("focusin",function(){const Be=l.CHM(N).index;return l.oxw().onHandleFocusIn(Be)}),l.qZA()}if(2&le){const N=Ge.$implicit,ee=l.oxw();l.Q6J("vertical",ee.nzVertical)("reverse",ee.nzReverse)("offset",N.offset)("value",N.value)("active",N.active)("tooltipFormatter",ee.nzTipFormatter)("tooltipVisible",ee.nzTooltipVisible)("tooltipPlacement",ee.nzTooltipPlacement)("dir",ee.dir)}}function gt(le,Ge){if(1&le&&l._UZ(0,"nz-slider-marks",6),2&le){const N=l.oxw();l.Q6J("vertical",N.nzVertical)("min",N.nzMin)("max",N.nzMax)("lowerBound",N.bounds.lower)("upperBound",N.bounds.upper)("marksArray",N.marksArray)("included",N.nzIncluded)("reverse",N.nzReverse)}}function ut(le,Ge){if(1&le&&l._UZ(0,"span",2),2&le){const N=Ge.$implicit;l.ekj("ant-slider-mark-active",N.active),l.Q6J("ngStyle",N.style)("innerHTML",N.label,l.oJD)}}function Nt(le,Ge){if(1&le&&l._UZ(0,"span",2),2&le){const N=Ge.$implicit;l.ekj("ant-slider-dot-active",N.active),l.Q6J("ngStyle",N.style)}}let je=(()=>{class le{constructor(){this.isDragging=!1}}return le.\u0275fac=function(N){return new(N||le)},le.\u0275prov=l.Yz7({token:le,factory:le.\u0275fac}),le})(),Ze=(()=>{class le{constructor(N,ee){this.sliderService=N,this.cdr=ee,this.tooltipVisible="default",this.active=!1,this.dir="ltr",this.style={},this.enterHandle=()=>{this.sliderService.isDragging||(this.toggleTooltip(!0),this.updateTooltipPosition(),this.cdr.detectChanges())},this.leaveHandle=()=>{this.sliderService.isDragging||(this.toggleTooltip(!1),this.cdr.detectChanges())}}ngOnChanges(N){const{offset:ee,value:Ce,active:Be,tooltipVisible:Z,reverse:we,dir:Fe}=N;(ee||we||Fe)&&this.updateStyle(),Ce&&(this.updateTooltipTitle(),this.updateTooltipPosition()),Be&&this.toggleTooltip(!!Be.currentValue),"always"===(null==Z?void 0:Z.currentValue)&&Promise.resolve().then(()=>this.toggleTooltip(!0,!0))}focus(){var N;null===(N=this.handleEl)||void 0===N||N.nativeElement.focus()}toggleTooltip(N,ee=!1){var Ce,Be;!ee&&("default"!==this.tooltipVisible||!this.tooltip)||(N?null===(Ce=this.tooltip)||void 0===Ce||Ce.show():null===(Be=this.tooltip)||void 0===Be||Be.hide())}updateTooltipTitle(){this.tooltipTitle=this.tooltipFormatter?this.tooltipFormatter(this.value):`${this.value}`}updateTooltipPosition(){this.tooltip&&Promise.resolve().then(()=>{var N;return null===(N=this.tooltip)||void 0===N?void 0:N.updatePosition()})}updateStyle(){const ee=this.reverse,Be=this.vertical?{[ee?"top":"bottom"]:`${this.offset}%`,[ee?"bottom":"top"]:"auto",transform:ee?null:"translateY(+50%)"}:Object.assign(Object.assign({},this.getHorizontalStylePosition()),{transform:`translateX(${ee?"rtl"===this.dir?"-":"+":"rtl"===this.dir?"+":"-"}50%)`});this.style=Be,this.cdr.markForCheck()}getHorizontalStylePosition(){let N=this.reverse?"auto":`${this.offset}%`,ee=this.reverse?`${this.offset}%`:"auto";if("rtl"===this.dir){const Ce=N;N=ee,ee=Ce}return{left:N,right:ee}}}return le.\u0275fac=function(N){return new(N||le)(l.Y36(je),l.Y36(l.sBO))},le.\u0275cmp=l.Xpm({type:le,selectors:[["nz-slider-handle"]],viewQuery:function(N,ee){if(1&N&&(l.Gf(St,5),l.Gf(k,5)),2&N){let Ce;l.iGM(Ce=l.CRH())&&(ee.handleEl=Ce.first),l.iGM(Ce=l.CRH())&&(ee.tooltip=Ce.first)}},hostBindings:function(N,ee){1&N&&l.NdJ("mouseenter",function(){return ee.enterHandle()})("mouseleave",function(){return ee.leaveHandle()})},inputs:{tooltipVisible:"tooltipVisible",active:"active",dir:"dir",vertical:"vertical",reverse:"reverse",offset:"offset",value:"value",tooltipPlacement:"tooltipPlacement",tooltipFormatter:"tooltipFormatter"},exportAs:["nzSliderHandle"],features:[l.TTD],decls:2,vars:4,consts:[["tabindex","0","nz-tooltip","",1,"ant-slider-handle",3,"ngStyle","nzTooltipTitle","nzTooltipTrigger","nzTooltipPlacement"],["handle",""]],template:function(N,ee){1&N&&l._UZ(0,"div",0,1),2&N&&l.Q6J("ngStyle",ee.style)("nzTooltipTitle",null===ee.tooltipFormatter||"never"===ee.tooltipVisible?null:ee.tooltipTitle)("nzTooltipTrigger",null)("nzTooltipPlacement",ee.tooltipPlacement)},directives:[k,he.PC],encapsulation:2,changeDetection:0}),(0,o.gn)([(0,T.yF)()],le.prototype,"active",void 0),le})(),ke=(()=>{class le{constructor(N,ee,Ce,Be){this.sliderService=N,this.cdr=ee,this.platform=Ce,this.directionality=Be,this.nzDisabled=!1,this.nzDots=!1,this.nzIncluded=!0,this.nzRange=!1,this.nzVertical=!1,this.nzReverse=!1,this.nzMarks=null,this.nzMax=100,this.nzMin=0,this.nzStep=1,this.nzTooltipVisible="default",this.nzTooltipPlacement="top",this.nzOnAfterChange=new l.vpe,this.value=null,this.cacheSliderStart=null,this.cacheSliderLength=null,this.activeValueIndex=void 0,this.track={offset:null,length:null},this.handles=[],this.marksArray=null,this.bounds={lower:null,upper:null},this.dir="ltr",this.destroy$=new d.xQ}ngOnInit(){var N;this.dir=this.directionality.value,null===(N=this.directionality.change)||void 0===N||N.pipe((0,z.R)(this.destroy$)).subscribe(ee=>{this.dir=ee,this.cdr.detectChanges(),this.updateTrackAndHandles(),this.onValueChange(this.getValue(!0))}),this.handles=_t(this.nzRange?2:1),this.marksArray=this.nzMarks?this.generateMarkItems(this.nzMarks):null,this.bindDraggingHandlers(),this.toggleDragDisabled(this.nzDisabled),null===this.getValue()&&this.setValue(this.formatValue(null))}ngOnChanges(N){const{nzDisabled:ee,nzMarks:Ce,nzRange:Be}=N;ee&&!ee.firstChange?this.toggleDragDisabled(ee.currentValue):Ce&&!Ce.firstChange?this.marksArray=this.nzMarks?this.generateMarkItems(this.nzMarks):null:Be&&!Be.firstChange&&(this.handles=_t(Be.currentValue?2:1),this.setValue(this.formatValue(null)))}ngOnDestroy(){this.unsubscribeDrag(),this.destroy$.next(),this.destroy$.complete()}writeValue(N){this.setValue(N,!0)}onValueChange(N){}onTouched(){}registerOnChange(N){this.onValueChange=N}registerOnTouched(N){this.onTouched=N}setDisabledState(N){this.nzDisabled=N,this.toggleDragDisabled(N)}onKeyDown(N){if(this.nzDisabled)return;const ee=N.keyCode,Be=ee===i.oh||ee===i.JH;if(ee!==i.SV&&ee!==i.LH&&!Be)return;N.preventDefault();let Z=(Be?-this.nzStep:this.nzStep)*(this.nzReverse?-1:1);Z="rtl"===this.dir?-1*Z:Z,this.setActiveValue((0,T.xV)(this.nzRange?this.value[this.activeValueIndex]+Z:this.value+Z,this.nzMin,this.nzMax))}onHandleFocusIn(N){this.activeValueIndex=N}setValue(N,ee=!1){ee?(this.value=this.formatValue(N),this.updateTrackAndHandles()):function(le,Ge){return typeof le==typeof Ge&&(st(le)&&st(Ge)?(0,T.cO)(le,Ge):le===Ge)}(this.value,N)||(this.value=N,this.updateTrackAndHandles(),this.onValueChange(this.getValue(!0)))}getValue(N=!1){return N&&this.value&&st(this.value)?[...this.value].sort((ee,Ce)=>ee-Ce):this.value}getValueToOffset(N){let ee=N;return void 0===ee&&(ee=this.getValue(!0)),st(ee)?ee.map(Ce=>this.valueToOffset(Ce)):this.valueToOffset(ee)}setActiveValueIndex(N){const ee=this.getValue();if(st(ee)){let Be,Ce=null,Z=-1;ee.forEach((we,Fe)=>{Be=Math.abs(N-we),(null===Ce||Be<Ce)&&(Ce=Be,Z=Fe)}),this.activeValueIndex=Z,this.handlerComponents.toArray()[Z].focus()}else this.handlerComponents.toArray()[0].focus()}setActiveValue(N){if(st(this.value)){const ee=[...this.value];ee[this.activeValueIndex]=N,this.setValue(ee)}else this.setValue(N)}updateTrackAndHandles(){const N=this.getValue(),ee=this.getValueToOffset(N),Ce=this.getValue(!0),Be=this.getValueToOffset(Ce),Z=st(Ce)?Ce:[0,Ce],we=st(Be)?[Be[0],Be[1]-Be[0]]:[0,Be];this.handles.forEach((Fe,Ue)=>{Fe.offset=st(ee)?ee[Ue]:ee,Fe.value=st(N)?N[Ue]:N||0}),[this.bounds.lower,this.bounds.upper]=Z,[this.track.offset,this.track.length]=we,this.cdr.markForCheck()}onDragStart(N){this.toggleDragMoving(!0),this.cacheSliderProperty(),this.setActiveValueIndex(this.getLogicalValue(N)),this.setActiveValue(this.getLogicalValue(N)),this.showHandleTooltip(this.nzRange?this.activeValueIndex:0)}onDragMove(N){this.setActiveValue(this.getLogicalValue(N)),this.cdr.markForCheck()}getLogicalValue(N){return this.nzReverse?this.nzVertical||"rtl"!==this.dir?this.nzMax-N+this.nzMin:N:this.nzVertical||"rtl"!==this.dir?N:this.nzMax-N+this.nzMin}onDragEnd(){this.nzOnAfterChange.emit(this.getValue(!0)),this.toggleDragMoving(!1),this.cacheSliderProperty(!0),this.hideAllHandleTooltip(),this.cdr.markForCheck()}bindDraggingHandlers(){if(!this.platform.isBrowser)return;const N=this.slider.nativeElement,ee=this.nzVertical?"pageY":"pageX",Ce={start:"mousedown",move:"mousemove",end:"mouseup",pluckKey:[ee]},Be={start:"touchstart",move:"touchmove",end:"touchend",pluckKey:["touches","0",ee],filter:Z=>Z instanceof TouchEvent};[Ce,Be].forEach(Z=>{const{start:we,move:Fe,end:Ue,pluckKey:qe,filter:de=(()=>!0)}=Z;Z.startPlucked$=(0,u.R)(N,we).pipe((0,b.h)(de),(0,_.b)(T.jJ),v(...qe),(0,f.U)(Ie=>this.findClosestValue(Ie))),Z.end$=(0,u.R)(document,Ue),Z.moveResolved$=(0,u.R)(document,Fe).pipe((0,b.h)(de),(0,_.b)(T.jJ),v(...qe),(0,H.x)(),(0,f.U)(Ie=>this.findClosestValue(Ie)),(0,H.x)(),(0,z.R)(Z.end$))}),this.dragStart$=(0,g.T)(Ce.startPlucked$,Be.startPlucked$),this.dragMove$=(0,g.T)(Ce.moveResolved$,Be.moveResolved$),this.dragEnd$=(0,g.T)(Ce.end$,Be.end$)}subscribeDrag(N=["start","move","end"]){-1!==N.indexOf("start")&&this.dragStart$&&!this.dragStart_&&(this.dragStart_=this.dragStart$.subscribe(this.onDragStart.bind(this))),-1!==N.indexOf("move")&&this.dragMove$&&!this.dragMove_&&(this.dragMove_=this.dragMove$.subscribe(this.onDragMove.bind(this))),-1!==N.indexOf("end")&&this.dragEnd$&&!this.dragEnd_&&(this.dragEnd_=this.dragEnd$.subscribe(this.onDragEnd.bind(this)))}unsubscribeDrag(N=["start","move","end"]){-1!==N.indexOf("start")&&this.dragStart_&&(this.dragStart_.unsubscribe(),this.dragStart_=null),-1!==N.indexOf("move")&&this.dragMove_&&(this.dragMove_.unsubscribe(),this.dragMove_=null),-1!==N.indexOf("end")&&this.dragEnd_&&(this.dragEnd_.unsubscribe(),this.dragEnd_=null)}toggleDragMoving(N){const ee=["move","end"];N?(this.sliderService.isDragging=!0,this.subscribeDrag(ee)):(this.sliderService.isDragging=!1,this.unsubscribeDrag(ee))}toggleDragDisabled(N){N?this.unsubscribeDrag():this.subscribeDrag(["start"])}findClosestValue(N){const ee=this.getSliderStartPosition(),Ce=this.getSliderLength(),Be=(0,T.xV)((N-ee)/Ce,0,1),Z=(this.nzMax-this.nzMin)*(this.nzVertical?1-Be:Be)+this.nzMin,we=null===this.nzMarks?[]:Object.keys(this.nzMarks).map(parseFloat).sort((qe,de)=>qe-de);if(0!==this.nzStep&&!this.nzDots){const qe=Math.round(Z/this.nzStep)*this.nzStep;we.push(qe)}const Fe=we.map(qe=>Math.abs(Z-qe)),Ue=we[Fe.indexOf(Math.min(...Fe))];return 0===this.nzStep?Ue:parseFloat(Ue.toFixed((0,T.p8)(this.nzStep)))}valueToOffset(N){return(0,T.OY)(this.nzMin,this.nzMax,N)}getSliderStartPosition(){if(null!==this.cacheSliderStart)return this.cacheSliderStart;const N=(0,T.pW)(this.slider.nativeElement);return this.nzVertical?N.top:N.left}getSliderLength(){if(null!==this.cacheSliderLength)return this.cacheSliderLength;const N=this.slider.nativeElement;return this.nzVertical?N.clientHeight:N.clientWidth}cacheSliderProperty(N=!1){this.cacheSliderStart=N?null:this.getSliderStartPosition(),this.cacheSliderLength=N?null:this.getSliderLength()}formatValue(N){return(0,T.kK)(N)?this.nzRange?[this.nzMin,this.nzMax]:this.nzMin:function(le,Ge){return!(!st(le)&&isNaN(le)||st(le)&&le.some(N=>isNaN(N)))&&function(le,Ge=!1){if(st(le)!==Ge)throw new Error('The "nzRange" can\'t match the "ngModel"\'s type, please check these properties: "nzRange", "ngModel", "nzDefaultValue".');return!0}(le,Ge)}(N,this.nzRange)?st(N)?N.map(ee=>(0,T.xV)(ee,this.nzMin,this.nzMax)):(0,T.xV)(N,this.nzMin,this.nzMax):this.nzDefaultValue?this.nzDefaultValue:this.nzRange?[this.nzMin,this.nzMax]:this.nzMin}showHandleTooltip(N=0){this.handles.forEach((ee,Ce)=>{ee.active=Ce===N})}hideAllHandleTooltip(){this.handles.forEach(N=>N.active=!1)}generateMarkItems(N){const ee=[];for(const Ce in N)if(N.hasOwnProperty(Ce)){const Be=N[Ce],Z="number"==typeof Ce?Ce:parseFloat(Ce);Z>=this.nzMin&&Z<=this.nzMax&&ee.push({value:Z,offset:this.valueToOffset(Z),config:Be})}return ee.length?ee:null}}return le.\u0275fac=function(N){return new(N||le)(l.Y36(je),l.Y36(l.sBO),l.Y36(a.t4),l.Y36(s.Is,8))},le.\u0275cmp=l.Xpm({type:le,selectors:[["nz-slider"]],viewQuery:function(N,ee){if(1&N&&(l.Gf(zt,7),l.Gf(Ze,5)),2&N){let Ce;l.iGM(Ce=l.CRH())&&(ee.slider=Ce.first),l.iGM(Ce=l.CRH())&&(ee.handlerComponents=Ce)}},hostBindings:function(N,ee){1&N&&l.NdJ("keydown",function(Be){return ee.onKeyDown(Be)})},inputs:{nzDisabled:"nzDisabled",nzDots:"nzDots",nzIncluded:"nzIncluded",nzRange:"nzRange",nzVertical:"nzVertical",nzReverse:"nzReverse",nzMarks:"nzMarks",nzMax:"nzMax",nzMin:"nzMin",nzStep:"nzStep",nzTooltipVisible:"nzTooltipVisible",nzTooltipPlacement:"nzTooltipPlacement",nzDefaultValue:"nzDefaultValue",nzTipFormatter:"nzTipFormatter"},outputs:{nzOnAfterChange:"nzOnAfterChange"},exportAs:["nzSlider"],features:[l._Bn([{provide:r.JU,useExisting:(0,l.Gpc)(()=>le),multi:!0},je]),l.TTD],decls:7,vars:17,consts:[[1,"ant-slider"],["slider",""],[1,"ant-slider-rail"],[3,"vertical","included","offset","length","reverse","dir"],[3,"vertical","min","max","lowerBound","upperBound","marksArray","included","reverse",4,"ngIf"],[3,"vertical","reverse","offset","value","active","tooltipFormatter","tooltipVisible","tooltipPlacement","dir","focusin",4,"ngFor","ngForOf"],[3,"vertical","min","max","lowerBound","upperBound","marksArray","included","reverse"],[3,"vertical","reverse","offset","value","active","tooltipFormatter","tooltipVisible","tooltipPlacement","dir","focusin"]],template:function(N,ee){1&N&&(l.TgZ(0,"div",0,1),l._UZ(2,"div",2),l._UZ(3,"nz-slider-track",3),l.YNc(4,et,1,8,"nz-slider-step",4),l.YNc(5,ot,1,9,"nz-slider-handle",5),l.YNc(6,gt,1,8,"nz-slider-marks",4),l.qZA()),2&N&&(l.ekj("ant-slider-rtl","rtl"===ee.dir)("ant-slider-disabled",ee.nzDisabled)("ant-slider-vertical",ee.nzVertical)("ant-slider-with-marks",ee.marksArray),l.xp6(3),l.Q6J("vertical",ee.nzVertical)("included",ee.nzIncluded)("offset",ee.track.offset)("length",ee.track.length)("reverse",ee.nzReverse)("dir",ee.dir),l.xp6(1),l.Q6J("ngIf",ee.marksArray),l.xp6(1),l.Q6J("ngForOf",ee.handles),l.xp6(1),l.Q6J("ngIf",ee.marksArray))},directives:function(){return[Vt,s.Lv,he.O5,he.sg,Lt,Ze,yt]},encapsulation:2,changeDetection:0}),(0,o.gn)([(0,T.yF)()],le.prototype,"nzDisabled",void 0),(0,o.gn)([(0,T.yF)()],le.prototype,"nzDots",void 0),(0,o.gn)([(0,T.yF)()],le.prototype,"nzIncluded",void 0),(0,o.gn)([(0,T.yF)()],le.prototype,"nzRange",void 0),(0,o.gn)([(0,T.yF)()],le.prototype,"nzVertical",void 0),(0,o.gn)([(0,T.yF)()],le.prototype,"nzReverse",void 0),(0,o.gn)([(0,T.Rn)()],le.prototype,"nzMax",void 0),(0,o.gn)([(0,T.Rn)()],le.prototype,"nzMin",void 0),(0,o.gn)([(0,T.Rn)()],le.prototype,"nzStep",void 0),le})();function st(le){return le instanceof Array&&2===le.length}function _t(le){return Array(le).fill(0).map(()=>({offset:null,value:null,active:!1}))}let yt=(()=>{class le{constructor(){this.lowerBound=null,this.upperBound=null,this.marksArray=[],this.vertical=!1,this.included=!1,this.marks=[]}ngOnChanges(N){const{marksArray:ee,lowerBound:Ce,upperBound:Be,reverse:Z}=N;(ee||Z)&&this.buildMarks(),(ee||Ce||Be||Z)&&this.togglePointActive()}trackById(N,ee){return ee.value}buildMarks(){const N=this.max-this.min;this.marks=this.marksArray.map(ee=>{const{value:Ce,offset:Be,config:Z}=ee,we=this.getMarkStyles(Ce,N,Z);return{label:Bt(Z)?Z.label:Z,offset:Be,style:we,value:Ce,config:Z,active:!1}})}getMarkStyles(N,ee,Ce){let Be;const Z=this.reverse?this.max+this.min-N:N;return Be=this.vertical?{marginBottom:"-50%",bottom:(Z-this.min)/ee*100+"%"}:{transform:"translate3d(-50%, 0, 0)",left:(Z-this.min)/ee*100+"%"},Bt(Ce)&&Ce.style&&(Be=Object.assign(Object.assign({},Be),Ce.style)),Be}togglePointActive(){this.marks&&null!==this.lowerBound&&null!==this.upperBound&&this.marks.forEach(N=>{const ee=N.value;N.active=!this.included&&ee===this.upperBound||this.included&&ee<=this.upperBound&&ee>=this.lowerBound})}}return le.\u0275fac=function(N){return new(N||le)},le.\u0275cmp=l.Xpm({type:le,selectors:[["nz-slider-marks"]],inputs:{lowerBound:"lowerBound",upperBound:"upperBound",marksArray:"marksArray",vertical:"vertical",included:"included",min:"min",max:"max",reverse:"reverse"},exportAs:["nzSliderMarks"],features:[l.TTD],decls:2,vars:2,consts:[[1,"ant-slider-mark"],["class","ant-slider-mark-text",3,"ant-slider-mark-active","ngStyle","innerHTML",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ant-slider-mark-text",3,"ngStyle","innerHTML"]],template:function(N,ee){1&N&&(l.TgZ(0,"div",0),l.YNc(1,ut,1,4,"span",1),l.qZA()),2&N&&(l.xp6(1),l.Q6J("ngForOf",ee.marks)("ngForTrackBy",ee.trackById))},directives:[he.sg,he.PC],encapsulation:2,changeDetection:0}),(0,o.gn)([(0,T.yF)()],le.prototype,"vertical",void 0),(0,o.gn)([(0,T.yF)()],le.prototype,"included",void 0),le})();function Bt(le){return"string"!=typeof le}let Lt=(()=>{class le{constructor(){this.lowerBound=null,this.upperBound=null,this.marksArray=[],this.vertical=!1,this.included=!1,this.steps=[]}ngOnChanges(N){const{marksArray:ee,lowerBound:Ce,upperBound:Be,reverse:Z}=N;(ee||Z)&&this.buildSteps(),(ee||Ce||Be||Z)&&this.togglePointActive()}trackById(N,ee){return ee.value}buildSteps(){const N=this.vertical?"bottom":"left";this.steps=this.marksArray.map(ee=>{const{value:Ce,config:Be}=ee;let Z=ee.offset;return this.reverse&&(Z=(this.max-Ce)/(this.max-this.min)*100),{value:Ce,offset:Z,config:Be,active:!1,style:{[N]:`${Z}%`}}})}togglePointActive(){this.steps&&null!==this.lowerBound&&null!==this.upperBound&&this.steps.forEach(N=>{const ee=N.value;N.active=!this.included&&ee===this.upperBound||this.included&&ee<=this.upperBound&&ee>=this.lowerBound})}}return le.\u0275fac=function(N){return new(N||le)},le.\u0275cmp=l.Xpm({type:le,selectors:[["nz-slider-step"]],inputs:{lowerBound:"lowerBound",upperBound:"upperBound",marksArray:"marksArray",vertical:"vertical",included:"included",min:"min",max:"max",reverse:"reverse"},exportAs:["nzSliderStep"],features:[l.TTD],decls:2,vars:2,consts:[[1,"ant-slider-step"],["class","ant-slider-dot",3,"ant-slider-dot-active","ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ant-slider-dot",3,"ngStyle"]],template:function(N,ee){1&N&&(l.TgZ(0,"div",0),l.YNc(1,Nt,1,3,"span",1),l.qZA()),2&N&&(l.xp6(1),l.Q6J("ngForOf",ee.steps)("ngForTrackBy",ee.trackById))},directives:[he.sg,he.PC],encapsulation:2,changeDetection:0}),(0,o.gn)([(0,T.yF)()],le.prototype,"vertical",void 0),(0,o.gn)([(0,T.yF)()],le.prototype,"included",void 0),le})(),Vt=(()=>{class le{constructor(){this.offset=0,this.reverse=!1,this.dir="ltr",this.length=0,this.vertical=!1,this.included=!1,this.style={}}ngOnChanges(){const ee=this.reverse,Ce=this.included?"visible":"hidden",Z=this.length,we=this.vertical?{[ee?"top":"bottom"]:`${this.offset}%`,[ee?"bottom":"top"]:"auto",height:`${Z}%`,visibility:Ce}:Object.assign(Object.assign({},this.getHorizontalStylePosition()),{width:`${Z}%`,visibility:Ce});this.style=we}getHorizontalStylePosition(){let N=this.reverse?"auto":`${this.offset}%`,ee=this.reverse?`${this.offset}%`:"auto";if("rtl"===this.dir){const Ce=N;N=ee,ee=Ce}return{left:N,right:ee}}}return le.\u0275fac=function(N){return new(N||le)},le.\u0275cmp=l.Xpm({type:le,selectors:[["nz-slider-track"]],inputs:{offset:"offset",reverse:"reverse",dir:"dir",length:"length",vertical:"vertical",included:"included"},exportAs:["nzSliderTrack"],features:[l.TTD],decls:1,vars:1,consts:[[1,"ant-slider-track",3,"ngStyle"]],template:function(N,ee){1&N&&l._UZ(0,"div",0),2&N&&l.Q6J("ngStyle",ee.style)},directives:[he.PC],encapsulation:2,changeDetection:0}),(0,o.gn)([(0,T.Rn)()],le.prototype,"offset",void 0),(0,o.gn)([(0,T.yF)()],le.prototype,"reverse",void 0),(0,o.gn)([(0,T.Rn)()],le.prototype,"length",void 0),(0,o.gn)([(0,T.yF)()],le.prototype,"vertical",void 0),(0,o.gn)([(0,T.yF)()],le.prototype,"included",void 0),le})(),Zt=(()=>{class le{}return le.\u0275fac=function(N){return new(N||le)},le.\u0275mod=l.oAB({type:le}),le.\u0275inj=l.cJS({imports:[[s.vT,he.ez,a.ud,nt]]}),le})()},84828:(e,t,n)=>{"use strict";n.d(t,{xw:()=>Xt,xH:()=>se,we:()=>Xe});var o=n(37716),s=n(46237),i=n(26169),a=n(19238),l=n(70946),r=n(39490),d=n(36461),u=n(61927),g=n(64581),f=n(79765),v=n(25917),x=n(66682),z=n(22759),b=n(75319),_=n(46782),H=n(80013),T=n(39761),L=n(28049),V=n(45435),Y=n(71289),J=n(64762),K=n(96182),re=n(29838),X=n(18553),ne=n(80521),he=n(45107),Q=n(38583),ye=n(68178),Le=n(94401),lt=n(53599),Me=n(32729),De=n(96526),xe=n(83730),Oe=n(47618);function k(ie,Ve){if(1&ie&&(o.ynx(0),o._UZ(1,"i",1),o.BQk()),2&ie){const I=Ve.$implicit;o.xp6(1),o.Q6J("nzType",I)}}function tt(ie,Ve){if(1&ie&&(o.ynx(0),o._uU(1),o.BQk()),2&ie){const I=o.oxw().$implicit;o.xp6(1),o.hij(" ",I.tab.label," ")}}const nt=function(){return{visible:!1}};function St(ie,Ve){if(1&ie){const I=o.EpF();o.TgZ(0,"li",8),o.NdJ("click",function(){const He=o.CHM(I).$implicit;return o.oxw(2).onSelect(He)})("contextmenu",function(pe){const ct=o.CHM(I).$implicit;return o.oxw(2).onContextmenu(ct,pe)}),o.YNc(1,tt,2,1,"ng-container",9),o.qZA()}if(2&ie){const I=Ve.$implicit;o.ekj("ant-tabs-dropdown-menu-item-disabled",I.disabled),o.Q6J("nzSelected",I.active)("nzDisabled",I.disabled),o.xp6(1),o.Q6J("nzStringTemplateOutlet",I.tab.label)("nzStringTemplateOutletContext",o.DdM(6,nt))}}function zt(ie,Ve){if(1&ie&&(o.TgZ(0,"ul",6),o.YNc(1,St,2,7,"li",7),o.qZA()),2&ie){const I=o.oxw();o.xp6(1),o.Q6J("ngForOf",I.items)}}function et(ie,Ve){if(1&ie){const I=o.EpF();o.TgZ(0,"button",10),o.NdJ("click",function(){return o.CHM(I),o.oxw().addClicked.emit()}),o.qZA()}if(2&ie){const I=o.oxw();o.Q6J("addIcon",I.addIcon)}}const ot=function(){return{minWidth:"46px"}},gt=["navWarp"],ut=["navList"];function Nt(ie,Ve){if(1&ie){const I=o.EpF();o.TgZ(0,"button",8),o.NdJ("click",function(){return o.CHM(I),o.oxw().addClicked.emit()}),o.qZA()}if(2&ie){const I=o.oxw();o.Q6J("addIcon",I.addIcon)}}function je(ie,Ve){}function Ze(ie,Ve){if(1&ie&&(o.TgZ(0,"div",9),o.YNc(1,je,0,0,"ng-template",10),o.qZA()),2&ie){const I=o.oxw();o.xp6(1),o.Q6J("ngTemplateOutlet",I.extraTemplate)}}const ke=["*"],vt=["nz-tab-body",""];function st(ie,Ve){}function _t(ie,Ve){if(1&ie&&(o.ynx(0),o.YNc(1,st,0,0,"ng-template",1),o.BQk()),2&ie){const I=o.oxw();o.xp6(1),o.Q6J("ngTemplateOutlet",I.content)}}function rt(ie,Ve){if(1&ie&&(o.ynx(0),o._UZ(1,"i",1),o.BQk()),2&ie){const I=Ve.$implicit;o.xp6(1),o.Q6J("nzType",I)}}const At=["contentTemplate"];function $e(ie,Ve){1&ie&&o.Hsn(0)}function yt(ie,Ve){1&ie&&o.Hsn(0,1)}const Bt=[[["","nz-tab-link",""]],"*"],Lt=["[nz-tab-link]","*"];function Vt(ie,Ve){if(1&ie&&(o.ynx(0),o._uU(1),o.BQk()),2&ie){const I=o.oxw().$implicit;o.xp6(1),o.Oqu(I.label)}}function Zt(ie,Ve){if(1&ie){const I=o.EpF();o.TgZ(0,"button",10),o.NdJ("click",function(pe){o.CHM(I);const He=o.oxw().index;return o.oxw(2).onClose(He,pe)}),o.qZA()}if(2&ie){const I=o.oxw().$implicit;o.Q6J("closeIcon",I.nzCloseIcon)}}const Gt=function(){return{visible:!0}};function le(ie,Ve){if(1&ie){const I=o.EpF();o.TgZ(0,"div",6),o.NdJ("click",function(pe){const He=o.CHM(I),ct=He.$implicit,bt=He.index;return o.oxw(2).clickNavItem(ct,bt,pe)})("contextmenu",function(pe){const ct=o.CHM(I).$implicit;return o.oxw(2).contextmenuNavItem(ct,pe)}),o.TgZ(1,"div",7),o.YNc(2,Vt,2,1,"ng-container",8),o.YNc(3,Zt,1,1,"button",9),o.qZA(),o.qZA()}if(2&ie){const I=Ve.$implicit,U=Ve.index,pe=o.oxw(2);o.Udp("margin-right","horizontal"===pe.position?pe.nzTabBarGutter:null,"px")("margin-bottom","vertical"===pe.position?pe.nzTabBarGutter:null,"px"),o.ekj("ant-tabs-tab-active",pe.nzSelectedIndex===U)("ant-tabs-tab-disabled",I.nzDisabled),o.xp6(1),o.Q6J("disabled",I.nzDisabled)("tab",I)("active",pe.nzSelectedIndex===U),o.uIk("tabIndex",pe.getTabIndex(I,U))("aria-disabled",I.nzDisabled)("aria-selected",pe.nzSelectedIndex===U&&!pe.nzHideAll)("aria-controls",pe.getTabContentId(U)),o.xp6(1),o.Q6J("nzStringTemplateOutlet",I.label)("nzStringTemplateOutletContext",o.DdM(18,Gt)),o.xp6(1),o.Q6J("ngIf",I.nzClosable&&pe.closable&&!I.nzDisabled)}}function Ge(ie,Ve){if(1&ie){const I=o.EpF();o.TgZ(0,"nz-tabs-nav",4),o.NdJ("tabScroll",function(pe){return o.CHM(I),o.oxw().nzTabListScroll.emit(pe)})("selectFocusedIndex",function(pe){return o.CHM(I),o.oxw().setSelectedIndex(pe)})("addClicked",function(){return o.CHM(I),o.oxw().onAdd()}),o.YNc(1,le,4,19,"div",5),o.qZA()}if(2&ie){const I=o.oxw();o.Q6J("ngStyle",I.nzTabBarStyle)("selectedIndex",I.nzSelectedIndex||0)("inkBarAnimated",I.inkBarAnimated)("addable",I.addable)("addIcon",I.nzAddIcon)("hideBar",I.nzHideAll)("position",I.position)("extraTemplate",I.nzTabBarExtraContent),o.xp6(1),o.Q6J("ngForOf",I.tabs)}}function N(ie,Ve){if(1&ie&&o._UZ(0,"div",11),2&ie){const I=Ve.$implicit,U=Ve.index,pe=o.oxw();o.Q6J("active",pe.nzSelectedIndex===U&&!pe.nzHideAll)("content",I.content)("forceRender",I.nzForceRender)("tabPaneAnimated",pe.tabPaneAnimated)}}let ee=(()=>{class ie{constructor(I){this.elementRef=I,this.addIcon="plus",this.element=this.elementRef.nativeElement}getElementWidth(){var I;return(null===(I=this.element)||void 0===I?void 0:I.offsetWidth)||0}getElementHeight(){var I;return(null===(I=this.element)||void 0===I?void 0:I.offsetHeight)||0}}return ie.\u0275fac=function(I){return new(I||ie)(o.Y36(o.SBq))},ie.\u0275cmp=o.Xpm({type:ie,selectors:[["nz-tab-add-button"],["button","nz-tab-add-button",""]],hostAttrs:["aria-label","Add tab","type","button",1,"ant-tabs-nav-add"],inputs:{addIcon:"addIcon"},decls:1,vars:1,consts:[[4,"nzStringTemplateOutlet"],["nz-icon","","nzTheme","outline",3,"nzType"]],template:function(I,U){1&I&&o.YNc(0,k,2,1,"ng-container",0),2&I&&o.Q6J("nzStringTemplateOutlet",U.addIcon)},directives:[ye.f,lt.Ls],encapsulation:2}),ie})(),Ce=(()=>{class ie{constructor(I,U,pe){this.elementRef=I,this.ngZone=U,this.animationMode=pe,this.position="horizontal",this.animated=!0}get _animated(){return"NoopAnimations"!==this.animationMode&&this.animated}alignToElement(I){this.ngZone.runOutsideAngular(()=>{(0,i.e)(()=>this.setStyles(I))})}setStyles(I){const U=this.elementRef.nativeElement;"horizontal"===this.position?(U.style.top="",U.style.height="",U.style.left=this.getLeftPosition(I),U.style.width=this.getElementWidth(I)):(U.style.left="",U.style.width="",U.style.top=this.getTopPosition(I),U.style.height=this.getElementHeight(I))}getLeftPosition(I){return I?`${I.offsetLeft||0}px`:"0"}getElementWidth(I){return I?`${I.offsetWidth||0}px`:"0"}getTopPosition(I){return I?`${I.offsetTop||0}px`:"0"}getElementHeight(I){return I?`${I.offsetHeight||0}px`:"0"}}return ie.\u0275fac=function(I){return new(I||ie)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(s.Qb,8))},ie.\u0275dir=o.lG2({type:ie,selectors:[["nz-tabs-ink-bar"],["","nz-tabs-ink-bar",""]],hostAttrs:[1,"ant-tabs-ink-bar"],hostVars:2,hostBindings:function(I,U){2&I&&o.ekj("ant-tabs-ink-bar-animated",U._animated)},inputs:{position:"position",animated:"animated"}}),ie})(),Be=(()=>{class ie{constructor(I){this.elementRef=I,this.disabled=!1,this.active=!1,this.el=I.nativeElement,this.parentElement=this.el.parentElement}focus(){this.el.focus()}get width(){return this.parentElement.offsetWidth}get height(){return this.parentElement.offsetHeight}get left(){return this.parentElement.offsetLeft}get top(){return this.parentElement.offsetTop}}return ie.\u0275fac=function(I){return new(I||ie)(o.Y36(o.SBq))},ie.\u0275dir=o.lG2({type:ie,selectors:[["","nzTabNavItem",""]],inputs:{disabled:"disabled",active:"active",tab:"tab"}}),ie})(),Z=(()=>{class ie{constructor(I,U){this.cdr=I,this.elementRef=U,this.items=[],this.addable=!1,this.addIcon="plus",this.addClicked=new o.vpe,this.selected=new o.vpe,this.closeAnimationWaitTimeoutId=-1,this.menuOpened=!1,this.element=this.elementRef.nativeElement}onSelect(I){I.disabled||(I.tab.nzClick.emit(),this.selected.emit(I))}onContextmenu(I,U){I.disabled||I.tab.nzContextmenu.emit(U)}showItems(){clearTimeout(this.closeAnimationWaitTimeoutId),this.menuOpened=!0,this.cdr.markForCheck()}menuVisChange(I){I||(this.closeAnimationWaitTimeoutId=setTimeout(()=>{this.menuOpened=!1,this.cdr.markForCheck()},150))}getElementWidth(){var I;return(null===(I=this.element)||void 0===I?void 0:I.offsetWidth)||0}getElementHeight(){var I;return(null===(I=this.element)||void 0===I?void 0:I.offsetHeight)||0}ngOnDestroy(){clearTimeout(this.closeAnimationWaitTimeoutId)}}return ie.\u0275fac=function(I){return new(I||ie)(o.Y36(o.sBO),o.Y36(o.SBq))},ie.\u0275cmp=o.Xpm({type:ie,selectors:[["nz-tab-nav-operation"]],hostAttrs:[1,"ant-tabs-nav-operations"],hostVars:2,hostBindings:function(I,U){2&I&&o.ekj("ant-tabs-nav-operations-hidden",0===U.items.length)},inputs:{items:"items",addable:"addable",addIcon:"addIcon"},outputs:{addClicked:"addClicked",selected:"selected"},exportAs:["nzTabNavOperation"],decls:7,vars:6,consts:[["nz-dropdown","","type","button","tabindex","-1","aria-hidden","true","nzOverlayClassName","nz-tabs-dropdown",1,"ant-tabs-nav-more",3,"nzDropdownMenu","nzOverlayStyle","nzMatchWidthElement","nzVisibleChange","mouseenter"],["dropdownTrigger","nzDropdown"],["nz-icon","","nzType","ellipsis"],["menu","nzDropdownMenu"],["nz-menu","",4,"ngIf"],["nz-tab-add-button","",3,"addIcon","click",4,"ngIf"],["nz-menu",""],["nz-menu-item","","class","ant-tabs-dropdown-menu-item",3,"ant-tabs-dropdown-menu-item-disabled","nzSelected","nzDisabled","click","contextmenu",4,"ngFor","ngForOf"],["nz-menu-item","",1,"ant-tabs-dropdown-menu-item",3,"nzSelected","nzDisabled","click","contextmenu"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["nz-tab-add-button","",3,"addIcon","click"]],template:function(I,U){if(1&I&&(o.TgZ(0,"button",0,1),o.NdJ("nzVisibleChange",function(He){return U.menuVisChange(He)})("mouseenter",function(){return U.showItems()}),o._UZ(2,"i",2),o.qZA(),o.TgZ(3,"nz-dropdown-menu",null,3),o.YNc(5,zt,2,1,"ul",4),o.qZA(),o.YNc(6,et,1,1,"button",5)),2&I){const pe=o.MAs(4);o.Q6J("nzDropdownMenu",pe)("nzOverlayStyle",o.DdM(5,ot))("nzMatchWidthElement",null),o.xp6(5),o.Q6J("ngIf",U.menuOpened),o.xp6(1),o.Q6J("ngIf",U.addable)}},directives:[Le.cm,lt.Ls,Le.RR,Q.O5,xe.wO,Q.sg,xe.r9,ye.f,ee],encapsulation:2,changeDetection:0}),ie})();const we="undefined"!=typeof requestAnimationFrame?u.Z:g.E;let Ue=(()=>{class ie{constructor(I,U,pe,He,ct){this.cdr=I,this.ngZone=U,this.viewportRuler=pe,this.nzResizeObserver=He,this.dir=ct,this.indexFocused=new o.vpe,this.selectFocusedIndex=new o.vpe,this.addClicked=new o.vpe,this.tabScroll=new o.vpe,this.position="horizontal",this.addable=!1,this.hideBar=!1,this.addIcon="plus",this.inkBarAnimated=!0,this.translate=null,this.transformX=0,this.transformY=0,this.pingLeft=!1,this.pingRight=!1,this.pingTop=!1,this.pingBottom=!1,this.hiddenItems=[],this.destroy$=new f.xQ,this._selectedIndex=0,this.wrapperWidth=0,this.wrapperHeight=0,this.scrollListWidth=0,this.scrollListHeight=0,this.operationWidth=0,this.operationHeight=0,this.addButtonWidth=0,this.addButtonHeight=0,this.selectedIndexChanged=!1,this.lockAnimationTimeoutId=-1,this.cssTransformTimeWaitingId=-1}get selectedIndex(){return this._selectedIndex}set selectedIndex(I){const U=(0,r.su)(I);this._selectedIndex!==U&&(this._selectedIndex=I,this.selectedIndexChanged=!0,this.keyManager&&this.keyManager.updateActiveItem(I))}get focusIndex(){return this.keyManager?this.keyManager.activeItemIndex:0}set focusIndex(I){!this.isValidIndex(I)||this.focusIndex===I||!this.keyManager||this.keyManager.setActiveItem(I)}get showAddButton(){return 0===this.hiddenItems.length&&this.addable}ngAfterViewInit(){const I=this.dir?this.dir.change:(0,v.of)(null),U=this.viewportRuler.change(150),pe=()=>{this.updateScrollListPosition(),this.alignInkBarToSelectedTab()};this.keyManager=new a.Em(this.items).withHorizontalOrientation(this.getLayoutDirection()).withWrap(),this.keyManager.updateActiveItem(this.selectedIndex),(0,i.e)(pe),(0,x.T)(this.nzResizeObserver.observe(this.navWarpRef),this.nzResizeObserver.observe(this.navListRef)).pipe((0,_.R)(this.destroy$),(0,H.e)(16,we)).subscribe(()=>{pe()}),(0,x.T)(I,U,this.items.changes).pipe((0,_.R)(this.destroy$)).subscribe(()=>{Promise.resolve().then(pe),this.keyManager.withHorizontalOrientation(this.getLayoutDirection())}),this.keyManager.change.pipe((0,_.R)(this.destroy$)).subscribe(He=>{this.indexFocused.emit(He),this.setTabFocus(He),this.scrollToTab(this.keyManager.activeItem)})}ngAfterContentChecked(){this.selectedIndexChanged&&(this.updateScrollListPosition(),this.alignInkBarToSelectedTab(),this.selectedIndexChanged=!1,this.cdr.markForCheck())}ngOnDestroy(){clearTimeout(this.lockAnimationTimeoutId),clearTimeout(this.cssTransformTimeWaitingId),this.destroy$.next(),this.destroy$.complete()}onSelectedFromMenu(I){const U=this.items.toArray().findIndex(pe=>pe===I);-1!==U&&(this.keyManager.updateActiveItem(U),this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this.scrollToTab(I)))}onOffsetChange(I){if("horizontal"===this.position){if(-1===this.lockAnimationTimeoutId&&(this.transformX>=0&&I.x>0||this.transformX<=this.wrapperWidth-this.scrollListWidth&&I.x<0))return;I.event.preventDefault(),this.transformX=this.clampTransformX(this.transformX+I.x),this.setTransform(this.transformX,0)}else{if(-1===this.lockAnimationTimeoutId&&(this.transformY>=0&&I.y>0||this.transformY<=this.wrapperHeight-this.scrollListHeight&&I.y<0))return;I.event.preventDefault(),this.transformY=this.clampTransformY(this.transformY+I.y),this.setTransform(0,this.transformY)}this.lockAnimation(),this.setVisibleRange(),this.setPingStatus()}handleKeydown(I){const U=this.navWarpRef.nativeElement.contains(I.target);if(!(0,d.Vb)(I)&&U)switch(I.keyCode){case d.oh:case d.LH:case d.SV:case d.JH:this.lockAnimation(),this.keyManager.onKeydown(I);break;case d.K5:case d.L_:this.focusIndex!==this.selectedIndex&&this.selectFocusedIndex.emit(this.focusIndex);break;default:this.keyManager.onKeydown(I)}}isValidIndex(I){if(!this.items)return!0;const U=this.items?this.items.toArray()[I]:null;return!!U&&!U.disabled}scrollToTab(I){if(!this.items.find(pe=>pe===I))return;const U=this.items.toArray();if("horizontal"===this.position){let pe=this.transformX;if("rtl"===this.getLayoutDirection()){const He=U[0].left+U[0].width-I.left-I.width;He<this.transformX?pe=He:He+I.width>this.transformX+this.wrapperWidth&&(pe=He+I.width-this.wrapperWidth)}else I.left<-this.transformX?pe=-I.left:I.left+I.width>-this.transformX+this.wrapperWidth&&(pe=-(I.left+I.width-this.wrapperWidth));this.transformX=pe,this.transformY=0,this.setTransform(pe,0)}else{let pe=this.transformY;I.top<-this.transformY?pe=-I.top:I.top+I.height>-this.transformY+this.wrapperHeight&&(pe=-(I.top+I.height-this.wrapperHeight)),this.transformY=pe,this.transformX=0,this.setTransform(0,pe)}clearTimeout(this.cssTransformTimeWaitingId),this.cssTransformTimeWaitingId=setTimeout(()=>{this.setVisibleRange()},150)}lockAnimation(){-1===this.lockAnimationTimeoutId&&this.ngZone.runOutsideAngular(()=>{this.navListRef.nativeElement.style.transition="none",this.lockAnimationTimeoutId=setTimeout(()=>{this.navListRef.nativeElement.style.transition="",this.lockAnimationTimeoutId=-1},150)})}setTransform(I,U){this.navListRef.nativeElement.style.transform=`translate(${I}px, ${U}px)`}clampTransformX(I){const U=this.wrapperWidth-this.scrollListWidth;return"rtl"===this.getLayoutDirection()?Math.max(Math.min(U,I),0):Math.min(Math.max(U,I),0)}clampTransformY(I){return Math.min(Math.max(this.wrapperHeight-this.scrollListHeight,I),0)}updateScrollListPosition(){this.resetSizes(),this.transformX=this.clampTransformX(this.transformX),this.transformY=this.clampTransformY(this.transformY),this.setVisibleRange(),this.setPingStatus(),this.keyManager&&(this.keyManager.updateActiveItem(this.keyManager.activeItemIndex),this.keyManager.activeItem&&this.scrollToTab(this.keyManager.activeItem))}resetSizes(){this.addButtonWidth=this.addBtnRef?this.addBtnRef.getElementWidth():0,this.addButtonHeight=this.addBtnRef?this.addBtnRef.getElementHeight():0,this.operationWidth=this.operationRef.getElementWidth(),this.operationHeight=this.operationRef.getElementHeight(),this.wrapperWidth=this.navWarpRef.nativeElement.offsetWidth||0,this.wrapperHeight=this.navWarpRef.nativeElement.offsetHeight||0,this.scrollListHeight=this.navListRef.nativeElement.offsetHeight||0,this.scrollListWidth=this.navListRef.nativeElement.offsetWidth||0}alignInkBarToSelectedTab(){const I=this.items&&this.items.length?this.items.toArray()[this.selectedIndex]:null,U=I?I.elementRef.nativeElement:null;U&&this.inkBar.alignToElement(U.parentElement)}setPingStatus(){const I={top:!1,right:!1,bottom:!1,left:!1},U=this.navWarpRef.nativeElement;"horizontal"===this.position?"rtl"===this.getLayoutDirection()?(I.right=this.transformX>0,I.left=this.transformX+this.wrapperWidth<this.scrollListWidth):(I.left=this.transformX<0,I.right=-this.transformX+this.wrapperWidth<this.scrollListWidth):(I.top=this.transformY<0,I.bottom=-this.transformY+this.wrapperHeight<this.scrollListHeight),Object.keys(I).forEach(pe=>{const He=`ant-tabs-nav-wrap-ping-${pe}`;I[pe]?U.classList.add(He):U.classList.remove(He)})}setVisibleRange(){let I,U,pe,He,ct,bt;const Ot=this.items.toArray(),Ft={width:0,height:0,left:0,top:0,right:0},Yt=Wt=>{let en;return en="right"===U?Ot[0].left+Ot[0].width-Ot[Wt].left-Ot[Wt].width:(Ot[Wt]||Ft)[U],en};"horizontal"===this.position?(I="width",He=this.wrapperWidth,ct=this.scrollListWidth-(this.hiddenItems.length?this.operationWidth:0),bt=this.addButtonWidth,pe=Math.abs(this.transformX),"rtl"===this.getLayoutDirection()?(U="right",this.pingRight=this.transformX>0,this.pingLeft=this.transformX+this.wrapperWidth<this.scrollListWidth):(this.pingLeft=this.transformX<0,this.pingRight=-this.transformX+this.wrapperWidth<this.scrollListWidth,U="left")):(I="height",He=this.wrapperHeight,ct=this.scrollListHeight-(this.hiddenItems.length?this.operationHeight:0),bt=this.addButtonHeight,U="top",pe=-this.transformY,this.pingTop=this.transformY<0,this.pingBottom=-this.transformY+this.wrapperHeight<this.scrollListHeight);let Qt=He;if(ct+bt>He&&(Qt=He-bt),!Ot.length)return this.hiddenItems=[],void this.cdr.markForCheck();const Jt=Ot.length;let cn=Jt;for(let Wt=0;Wt<Jt;Wt+=1)if(Yt(Wt)+(Ot[Wt]||Ft)[I]>pe+Qt){cn=Wt-1;break}let dn=0;for(let Wt=Jt-1;Wt>=0;Wt-=1)if(Yt(Wt)<pe){dn=Wt+1;break}const fn=Ot.slice(0,dn),xn=Ot.slice(cn+1);this.hiddenItems=[...fn,...xn],this.cdr.markForCheck()}getLayoutDirection(){return this.dir&&"rtl"===this.dir.value?"rtl":"ltr"}setTabFocus(I){}ngOnChanges(I){const{position:U}=I;U&&!U.isFirstChange()&&(this.alignInkBarToSelectedTab(),this.lockAnimation(),this.updateScrollListPosition())}}return ie.\u0275fac=function(I){return new(I||ie)(o.Y36(o.sBO),o.Y36(o.R0b),o.Y36(he.rL),o.Y36(Oe.D3),o.Y36(l.Is,8))},ie.\u0275cmp=o.Xpm({type:ie,selectors:[["nz-tabs-nav"]],contentQueries:function(I,U,pe){if(1&I&&o.Suo(pe,Be,5),2&I){let He;o.iGM(He=o.CRH())&&(U.items=He)}},viewQuery:function(I,U){if(1&I&&(o.Gf(gt,7),o.Gf(ut,7),o.Gf(Z,7),o.Gf(ee,5),o.Gf(Ce,7)),2&I){let pe;o.iGM(pe=o.CRH())&&(U.navWarpRef=pe.first),o.iGM(pe=o.CRH())&&(U.navListRef=pe.first),o.iGM(pe=o.CRH())&&(U.operationRef=pe.first),o.iGM(pe=o.CRH())&&(U.addBtnRef=pe.first),o.iGM(pe=o.CRH())&&(U.inkBar=pe.first)}},hostAttrs:["role","tablist",1,"ant-tabs-nav"],hostBindings:function(I,U){1&I&&o.NdJ("keydown",function(He){return U.handleKeydown(He)})},inputs:{position:"position",addable:"addable",hideBar:"hideBar",addIcon:"addIcon",inkBarAnimated:"inkBarAnimated",selectedIndex:"selectedIndex",extraTemplate:"extraTemplate"},outputs:{indexFocused:"indexFocused",selectFocusedIndex:"selectFocusedIndex",addClicked:"addClicked",tabScroll:"tabScroll"},exportAs:["nzTabsNav"],features:[o.TTD],ngContentSelectors:ke,decls:9,vars:16,consts:[[1,"ant-tabs-nav-wrap"],["navWarp",""],["nzTabScrollList","",1,"ant-tabs-nav-list",3,"offsetChange","tabScroll"],["navList",""],["nz-tab-add-button","",3,"addIcon","click",4,"ngIf"],["nz-tabs-ink-bar","",3,"hidden","position","animated"],[3,"addIcon","addable","items","addClicked","selected"],["class","ant-tabs-extra-content",4,"ngIf"],["nz-tab-add-button","",3,"addIcon","click"],[1,"ant-tabs-extra-content"],[3,"ngTemplateOutlet"]],template:function(I,U){1&I&&(o.F$t(),o.TgZ(0,"div",0,1),o.TgZ(2,"div",2,3),o.NdJ("offsetChange",function(He){return U.onOffsetChange(He)})("tabScroll",function(He){return U.tabScroll.emit(He)}),o.Hsn(4),o.YNc(5,Nt,1,1,"button",4),o._UZ(6,"div",5),o.qZA(),o.qZA(),o.TgZ(7,"nz-tab-nav-operation",6),o.NdJ("addClicked",function(){return U.addClicked.emit()})("selected",function(He){return U.onSelectedFromMenu(He)}),o.qZA(),o.YNc(8,Ze,2,1,"div",7)),2&I&&(o.ekj("ant-tabs-nav-wrap-ping-left",U.pingLeft)("ant-tabs-nav-wrap-ping-right",U.pingRight)("ant-tabs-nav-wrap-ping-top",U.pingTop)("ant-tabs-nav-wrap-ping-bottom",U.pingBottom),o.xp6(5),o.Q6J("ngIf",U.showAddButton),o.xp6(1),o.Q6J("hidden",U.hideBar)("position",U.position)("animated",U.inkBarAnimated),o.xp6(1),o.Q6J("addIcon",U.addIcon)("addable",U.addable)("items",U.hiddenItems),o.xp6(1),o.Q6J("ngIf",U.extraTemplate))},directives:function(){return[Ye,Q.O5,Ce,Z,ee,Q.tP]},encapsulation:2,changeDetection:0}),ie})(),qe=(()=>{class ie{constructor(){this.content=null,this.active=!1,this.tabPaneAnimated=!0,this.forceRender=!1}}return ie.\u0275fac=function(I){return new(I||ie)},ie.\u0275cmp=o.Xpm({type:ie,selectors:[["","nz-tab-body",""]],hostAttrs:[1,"ant-tabs-tabpane"],hostVars:12,hostBindings:function(I,U){2&I&&(o.uIk("tabindex",U.active?0:-1)("aria-hidden",!U.active),o.Udp("visibility",U.tabPaneAnimated?U.active?null:"hidden":null)("height",U.tabPaneAnimated?U.active?null:0:null)("overflow-y",U.tabPaneAnimated?U.active?null:"none":null)("display",U.tabPaneAnimated||U.active?null:"none"),o.ekj("ant-tabs-tabpane-active",U.active))},inputs:{content:"content",active:"active",tabPaneAnimated:"tabPaneAnimated",forceRender:"forceRender"},exportAs:["nzTabBody"],attrs:vt,decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngTemplateOutlet"]],template:function(I,U){1&I&&o.YNc(0,_t,2,1,"ng-container",0),2&I&&o.Q6J("ngIf",U.active||U.forceRender)},directives:[Q.O5,Q.tP],encapsulation:2,changeDetection:0}),ie})();const G=Math.pow(.995,20);let Ye=(()=>{class ie{constructor(I,U){this.ngZone=I,this.elementRef=U,this.lastWheelDirection=null,this.lastWheelTimestamp=0,this.lastTimestamp=0,this.lastTimeDiff=0,this.lastMixedWheel=0,this.lastWheelPrevent=!1,this.touchPosition=null,this.lastOffset=null,this.motion=-1,this.unsubscribe=()=>{},this.offsetChange=new o.vpe,this.tabScroll=new o.vpe,this.onTouchEnd=pe=>{if(!this.touchPosition)return;const He=this.lastOffset,ct=this.lastTimeDiff;if(this.lastOffset=this.touchPosition=null,He){const bt=He.x/ct,Ot=He.y/ct,Ft=Math.abs(bt),Yt=Math.abs(Ot);if(Math.max(Ft,Yt)<.1)return;let Qt=bt,Jt=Ot;this.motion=window.setInterval(()=>{Math.abs(Qt)<.01&&Math.abs(Jt)<.01?window.clearInterval(this.motion):(Qt*=G,Jt*=G,this.onOffset(20*Qt,20*Jt,pe))},20)}},this.onTouchMove=pe=>{if(!this.touchPosition)return;pe.preventDefault();const{screenX:He,screenY:ct}=pe.touches[0],bt=He-this.touchPosition.x,Ot=ct-this.touchPosition.y;this.onOffset(bt,Ot,pe);const Ft=Date.now();this.lastTimeDiff=Ft-this.lastTimestamp,this.lastTimestamp=Ft,this.lastOffset={x:bt,y:Ot},this.touchPosition={x:He,y:ct}},this.onTouchStart=pe=>{const{screenX:He,screenY:ct}=pe.touches[0];this.touchPosition={x:He,y:ct},window.clearInterval(this.motion)},this.onWheel=pe=>{const{deltaX:He,deltaY:ct}=pe;let bt;const Ot=Math.abs(He),Ft=Math.abs(ct);Ot===Ft?bt="x"===this.lastWheelDirection?He:ct:Ot>Ft?(bt=He,this.lastWheelDirection="x"):(bt=ct,this.lastWheelDirection="y");const Yt=Date.now(),Qt=Math.abs(bt);(Yt-this.lastWheelTimestamp>100||Qt-this.lastMixedWheel>10)&&(this.lastWheelPrevent=!1),this.onOffset(-bt,-bt,pe),(pe.defaultPrevented||this.lastWheelPrevent)&&(this.lastWheelPrevent=!0),this.lastWheelTimestamp=Yt,this.lastMixedWheel=Qt}}ngOnInit(){this.unsubscribe=this.ngZone.runOutsideAngular(()=>{const I=this.elementRef.nativeElement,U=(0,z.R)(I,"wheel"),pe=(0,z.R)(I,"touchstart"),He=(0,z.R)(I,"touchmove"),ct=(0,z.R)(I,"touchend"),bt=new b.w;return bt.add(this.subscribeWrap("wheel",U,this.onWheel)),bt.add(this.subscribeWrap("touchstart",pe,this.onTouchStart)),bt.add(this.subscribeWrap("touchmove",He,this.onTouchMove)),bt.add(this.subscribeWrap("touchend",ct,this.onTouchEnd)),()=>{bt.unsubscribe()}})}subscribeWrap(I,U,pe){return U.subscribe(He=>{this.tabScroll.emit({type:I,event:He}),He.defaultPrevented||pe(He)})}onOffset(I,U,pe){this.ngZone.run(()=>{this.offsetChange.emit({x:I,y:U,event:pe})})}ngOnDestroy(){this.unsubscribe()}}return ie.\u0275fac=function(I){return new(I||ie)(o.Y36(o.R0b),o.Y36(o.SBq))},ie.\u0275dir=o.lG2({type:ie,selectors:[["","nzTabScrollList",""]],outputs:{offsetChange:"offsetChange",tabScroll:"tabScroll"}}),ie})(),Je=(()=>{class ie{constructor(){this.closeIcon="close"}}return ie.\u0275fac=function(I){return new(I||ie)},ie.\u0275cmp=o.Xpm({type:ie,selectors:[["nz-tab-close-button"],["button","nz-tab-close-button",""]],hostAttrs:["aria-label","Close tab","type","button",1,"ant-tabs-tab-remove"],inputs:{closeIcon:"closeIcon"},decls:1,vars:1,consts:[[4,"nzStringTemplateOutlet"],["nz-icon","","nzTheme","outline",3,"nzType"]],template:function(I,U){1&I&&o.YNc(0,rt,2,1,"ng-container",0),2&I&&o.Q6J("nzStringTemplateOutlet",U.closeIcon)},directives:[ye.f,lt.Ls],encapsulation:2}),ie})(),Ht=(()=>{class ie{constructor(I){this.templateRef=I}}return ie.\u0275fac=function(I){return new(I||ie)(o.Y36(o.Rgc,1))},ie.\u0275dir=o.lG2({type:ie,selectors:[["ng-template","nzTabLink",""]],exportAs:["nzTabLinkTemplate"]}),ie})(),kt=(()=>{class ie{constructor(I,U,pe){this.elementRef=I,this.routerLink=U,this.routerLinkWithHref=pe}}return ie.\u0275fac=function(I){return new(I||ie)(o.Y36(o.SBq),o.Y36(re.rH,10),o.Y36(re.yS,10))},ie.\u0275dir=o.lG2({type:ie,selectors:[["a","nz-tab-link",""]],exportAs:["nzTabLink"]}),ie})(),Mt=(()=>{class ie{}return ie.\u0275fac=function(I){return new(I||ie)},ie.\u0275dir=o.lG2({type:ie,selectors:[["","nz-tab",""]],exportAs:["nzTab"]}),ie})();const jt=new o.OlP("NZ_TAB_SET");let Xt=(()=>{class ie{constructor(I){this.closestTabSet=I,this.nzTitle="",this.nzClosable=!1,this.nzCloseIcon="close",this.nzDisabled=!1,this.nzForceRender=!1,this.nzSelect=new o.vpe,this.nzDeselect=new o.vpe,this.nzClick=new o.vpe,this.nzContextmenu=new o.vpe,this.template=null,this.isActive=!1,this.position=null,this.origin=null,this.stateChanges=new f.xQ}get content(){return this.template||this.contentTemplate}get label(){var I;return this.nzTitle||(null===(I=this.nzTabLinkTemplateDirective)||void 0===I?void 0:I.templateRef)}ngOnChanges(I){const{nzTitle:U,nzDisabled:pe,nzForceRender:He}=I;(U||pe||He)&&this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete()}}return ie.\u0275fac=function(I){return new(I||ie)(o.Y36(jt))},ie.\u0275cmp=o.Xpm({type:ie,selectors:[["nz-tab"]],contentQueries:function(I,U,pe){if(1&I&&(o.Suo(pe,Mt,5,o.Rgc),o.Suo(pe,Ht,5),o.Suo(pe,kt,5)),2&I){let He;o.iGM(He=o.CRH())&&(U.template=He.first),o.iGM(He=o.CRH())&&(U.nzTabLinkTemplateDirective=He.first),o.iGM(He=o.CRH())&&(U.linkDirective=He.first)}},viewQuery:function(I,U){if(1&I&&o.Gf(At,7),2&I){let pe;o.iGM(pe=o.CRH())&&(U.contentTemplate=pe.first)}},inputs:{nzTitle:"nzTitle",nzClosable:"nzClosable",nzCloseIcon:"nzCloseIcon",nzDisabled:"nzDisabled",nzForceRender:"nzForceRender"},outputs:{nzSelect:"nzSelect",nzDeselect:"nzDeselect",nzClick:"nzClick",nzContextmenu:"nzContextmenu"},exportAs:["nzTab"],features:[o.TTD],ngContentSelectors:Lt,decls:4,vars:0,consts:[["tabLinkTemplate",""],["contentTemplate",""]],template:function(I,U){1&I&&(o.F$t(Bt),o.YNc(0,$e,1,0,"ng-template",null,0,o.W1O),o.YNc(2,yt,1,0,"ng-template",null,1,o.W1O))},encapsulation:2,changeDetection:0}),(0,J.gn)([(0,K.yF)()],ie.prototype,"nzClosable",void 0),(0,J.gn)([(0,K.yF)()],ie.prototype,"nzDisabled",void 0),(0,J.gn)([(0,K.yF)()],ie.prototype,"nzForceRender",void 0),ie})();class ve{}let B=0,se=(()=>{class ie{constructor(I,U,pe,He){this.nzConfigService=I,this.cdr=U,this.directionality=pe,this.router=He,this._nzModuleName="tabs",this.nzTabPosition="top",this.nzCanDeactivate=null,this.nzAddIcon="plus",this.nzTabBarStyle=null,this.nzType="line",this.nzSize="default",this.nzAnimated=!0,this.nzTabBarGutter=void 0,this.nzHideAdd=!1,this.nzCentered=!1,this.nzHideAll=!1,this.nzLinkRouter=!1,this.nzLinkExact=!0,this.nzSelectChange=new o.vpe(!0),this.nzSelectedIndexChange=new o.vpe,this.nzTabListScroll=new o.vpe,this.nzClose=new o.vpe,this.nzAdd=new o.vpe,this.allTabs=new o.n_E,this.tabs=new o.n_E,this.dir="ltr",this.destroy$=new f.xQ,this.indexToSelect=0,this.selectedIndex=null,this.tabLabelSubscription=b.w.EMPTY,this.tabsSubscription=b.w.EMPTY,this.canDeactivateSubscription=b.w.EMPTY,this.tabSetId=B++}get nzSelectedIndex(){return this.selectedIndex}set nzSelectedIndex(I){this.indexToSelect=(0,r.su)(I,null)}get position(){return-1===["top","bottom"].indexOf(this.nzTabPosition)?"vertical":"horizontal"}get addable(){return"editable-card"===this.nzType&&!this.nzHideAdd}get closable(){return"editable-card"===this.nzType}get line(){return"line"===this.nzType}get inkBarAnimated(){return this.line&&("boolean"==typeof this.nzAnimated?this.nzAnimated:this.nzAnimated.inkBar)}get tabPaneAnimated(){return"horizontal"===this.position&&this.line&&("boolean"==typeof this.nzAnimated?this.nzAnimated:this.nzAnimated.tabPane)}ngOnInit(){var I;this.dir=this.directionality.value,null===(I=this.directionality.change)||void 0===I||I.pipe((0,_.R)(this.destroy$)).subscribe(U=>{this.dir=U,this.cdr.detectChanges()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.tabs.destroy(),this.tabLabelSubscription.unsubscribe(),this.tabsSubscription.unsubscribe(),this.canDeactivateSubscription.unsubscribe()}ngAfterContentInit(){Promise.resolve().then(()=>{this.setUpRouter()}),this.subscribeToTabLabels(),this.subscribeToAllTabChanges(),this.tabsSubscription=this.tabs.changes.subscribe(()=>{if(this.clampTabIndex(this.indexToSelect)===this.selectedIndex){const U=this.tabs.toArray();for(let pe=0;pe<U.length;pe++)if(U[pe].isActive){this.indexToSelect=this.selectedIndex=pe;break}}this.subscribeToTabLabels(),this.cdr.markForCheck()})}ngAfterContentChecked(){const I=this.indexToSelect=this.clampTabIndex(this.indexToSelect);if(this.selectedIndex!==I){const U=null==this.selectedIndex;U||this.nzSelectChange.emit(this.createChangeEvent(I)),Promise.resolve().then(()=>{this.tabs.forEach((pe,He)=>pe.isActive=He===I),U||this.nzSelectedIndexChange.emit(I)})}this.tabs.forEach((U,pe)=>{U.position=pe-I,null!=this.selectedIndex&&0===U.position&&!U.origin&&(U.origin=I-this.selectedIndex)}),this.selectedIndex!==I&&(this.selectedIndex=I,this.cdr.markForCheck())}onClose(I,U){U.preventDefault(),U.stopPropagation(),this.nzClose.emit({index:I})}onAdd(){this.nzAdd.emit()}clampTabIndex(I){return Math.min(this.tabs.length-1,Math.max(I||0,0))}createChangeEvent(I){const U=new ve;return U.index=I,this.tabs&&this.tabs.length&&(U.tab=this.tabs.toArray()[I],this.tabs.forEach((pe,He)=>{He!==I&&pe.nzDeselect.emit()}),U.tab.nzSelect.emit()),U}subscribeToTabLabels(){this.tabLabelSubscription&&this.tabLabelSubscription.unsubscribe(),this.tabLabelSubscription=(0,x.T)(...this.tabs.map(I=>I.stateChanges)).subscribe(()=>this.cdr.markForCheck())}subscribeToAllTabChanges(){this.allTabs.changes.pipe((0,T.O)(this.allTabs)).subscribe(I=>{this.tabs.reset(I.filter(U=>U.closestTabSet===this)),this.tabs.notifyOnChanges()})}canDeactivateFun(I,U){return"function"==typeof this.nzCanDeactivate?(0,K.lN)(this.nzCanDeactivate(I,U)).pipe((0,L.P)(),(0,_.R)(this.destroy$)):(0,v.of)(!0)}clickNavItem(I,U,pe){I.nzDisabled||(I.nzClick.emit(),this.isRouterLinkClickEvent(U,pe)||this.setSelectedIndex(U))}isRouterLinkClickEvent(I,U){var pe,He;const ct=U.target;return!!this.nzLinkRouter&&!!(null===(He=null===(pe=this.tabs.toArray()[I])||void 0===pe?void 0:pe.linkDirective)||void 0===He?void 0:He.elementRef.nativeElement.contains(ct))}contextmenuNavItem(I,U){I.nzDisabled||I.nzContextmenu.emit(U)}setSelectedIndex(I){this.canDeactivateSubscription.unsubscribe(),this.canDeactivateSubscription=this.canDeactivateFun(this.selectedIndex,I).subscribe(U=>{U&&(this.nzSelectedIndex=I,this.tabNavBarRef.focusIndex=I,this.cdr.markForCheck())})}getTabIndex(I,U){return I.nzDisabled?null:this.selectedIndex===U?0:-1}getTabContentId(I){return`nz-tabs-${this.tabSetId}-tab-${I}`}setUpRouter(){if(this.nzLinkRouter){if(!this.router)throw new Error(`${De.Bq} you should import 'RouterModule' if you want to use 'nzLinkRouter'!`);this.router.events.pipe((0,_.R)(this.destroy$),(0,V.h)(I=>I instanceof re.m2),(0,T.O)(!0),(0,Y.g)(0)).subscribe(()=>{this.updateRouterActive(),this.cdr.markForCheck()})}}updateRouterActive(){if(this.router.navigated){const I=this.findShouldActiveTabIndex();I!==this.selectedIndex&&this.setSelectedIndex(I),this.nzHideAll=-1===I}}findShouldActiveTabIndex(){const I=this.tabs.toArray(),U=this.isLinkActive(this.router);return I.findIndex(pe=>{const He=pe.linkDirective;return!!He&&(U(He.routerLink)||U(He.routerLinkWithHref))})}isLinkActive(I){return U=>!!U&&I.isActive(U.urlTree,this.nzLinkExact)}getTabContentMarginValue(){return 100*-(this.nzSelectedIndex||0)}getTabContentMarginLeft(){return this.tabPaneAnimated&&"rtl"!==this.dir?`${this.getTabContentMarginValue()}%`:""}getTabContentMarginRight(){return this.tabPaneAnimated&&"rtl"===this.dir?`${this.getTabContentMarginValue()}%`:""}}return ie.\u0275fac=function(I){return new(I||ie)(o.Y36(Me.jY),o.Y36(o.sBO),o.Y36(l.Is,8),o.Y36(re.F0,8))},ie.\u0275cmp=o.Xpm({type:ie,selectors:[["nz-tabset"]],contentQueries:function(I,U,pe){if(1&I&&o.Suo(pe,Xt,5),2&I){let He;o.iGM(He=o.CRH())&&(U.allTabs=He)}},viewQuery:function(I,U){if(1&I&&o.Gf(Ue,5),2&I){let pe;o.iGM(pe=o.CRH())&&(U.tabNavBarRef=pe.first)}},hostAttrs:[1,"ant-tabs"],hostVars:24,hostBindings:function(I,U){2&I&&o.ekj("ant-tabs-card","card"===U.nzType||"editable-card"===U.nzType)("ant-tabs-editable","editable-card"===U.nzType)("ant-tabs-editable-card","editable-card"===U.nzType)("ant-tabs-centered",U.nzCentered)("ant-tabs-rtl","rtl"===U.dir)("ant-tabs-top","top"===U.nzTabPosition)("ant-tabs-bottom","bottom"===U.nzTabPosition)("ant-tabs-left","left"===U.nzTabPosition)("ant-tabs-right","right"===U.nzTabPosition)("ant-tabs-default","default"===U.nzSize)("ant-tabs-small","small"===U.nzSize)("ant-tabs-large","large"===U.nzSize)},inputs:{nzTabPosition:"nzTabPosition",nzCanDeactivate:"nzCanDeactivate",nzAddIcon:"nzAddIcon",nzTabBarStyle:"nzTabBarStyle",nzType:"nzType",nzSize:"nzSize",nzAnimated:"nzAnimated",nzTabBarGutter:"nzTabBarGutter",nzHideAdd:"nzHideAdd",nzCentered:"nzCentered",nzHideAll:"nzHideAll",nzLinkRouter:"nzLinkRouter",nzLinkExact:"nzLinkExact",nzSelectedIndex:"nzSelectedIndex",nzTabBarExtraContent:"nzTabBarExtraContent"},outputs:{nzSelectChange:"nzSelectChange",nzSelectedIndexChange:"nzSelectedIndexChange",nzTabListScroll:"nzTabListScroll",nzClose:"nzClose",nzAdd:"nzAdd"},exportAs:["nzTabset"],features:[o._Bn([{provide:jt,useExisting:ie}])],decls:4,vars:16,consts:[[3,"ngStyle","selectedIndex","inkBarAnimated","addable","addIcon","hideBar","position","extraTemplate","tabScroll","selectFocusedIndex","addClicked",4,"ngIf"],[1,"ant-tabs-content-holder"],[1,"ant-tabs-content"],["nz-tab-body","",3,"active","content","forceRender","tabPaneAnimated",4,"ngFor","ngForOf"],[3,"ngStyle","selectedIndex","inkBarAnimated","addable","addIcon","hideBar","position","extraTemplate","tabScroll","selectFocusedIndex","addClicked"],["class","ant-tabs-tab",3,"margin-right","margin-bottom","ant-tabs-tab-active","ant-tabs-tab-disabled","click","contextmenu",4,"ngFor","ngForOf"],[1,"ant-tabs-tab",3,"click","contextmenu"],["role","tab","nzTabNavItem","","cdkMonitorElementFocus","",1,"ant-tabs-tab-btn",3,"disabled","tab","active"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["nz-tab-close-button","",3,"closeIcon","click",4,"ngIf"],["nz-tab-close-button","",3,"closeIcon","click"],["nz-tab-body","",3,"active","content","forceRender","tabPaneAnimated"]],template:function(I,U){1&I&&(o.YNc(0,Ge,2,9,"nz-tabs-nav",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.YNc(3,N,1,4,"div",3),o.qZA(),o.qZA()),2&I&&(o.Q6J("ngIf",U.tabs.length||U.addable),o.xp6(2),o.Udp("margin-left",U.getTabContentMarginLeft())("margin-right",U.getTabContentMarginRight()),o.ekj("ant-tabs-content-top","top"===U.nzTabPosition)("ant-tabs-content-bottom","bottom"===U.nzTabPosition)("ant-tabs-content-left","left"===U.nzTabPosition)("ant-tabs-content-right","right"===U.nzTabPosition)("ant-tabs-content-animated",U.tabPaneAnimated),o.xp6(1),o.Q6J("ngForOf",U.tabs))},directives:[Q.O5,Q.sg,Ue,Q.PC,Be,a.kH,ye.f,Je,qe],encapsulation:2}),(0,J.gn)([(0,Me.oS)()],ie.prototype,"nzType",void 0),(0,J.gn)([(0,Me.oS)()],ie.prototype,"nzSize",void 0),(0,J.gn)([(0,Me.oS)()],ie.prototype,"nzAnimated",void 0),(0,J.gn)([(0,Me.oS)()],ie.prototype,"nzTabBarGutter",void 0),(0,J.gn)([(0,K.yF)()],ie.prototype,"nzHideAdd",void 0),(0,J.gn)([(0,K.yF)()],ie.prototype,"nzCentered",void 0),(0,J.gn)([(0,K.yF)()],ie.prototype,"nzHideAll",void 0),(0,J.gn)([(0,K.yF)()],ie.prototype,"nzLinkRouter",void 0),(0,J.gn)([(0,K.yF)()],ie.prototype,"nzLinkExact",void 0),ie})(),Xe=(()=>{class ie{}return ie.\u0275fac=function(I){return new(I||ie)},ie.\u0275mod=o.oAB({type:ie}),ie.\u0275inj=o.cJS({imports:[[l.vT,Q.ez,X.Q8,lt.PV,ye.T,ne.ud,a.rt,he.ZD,Le.b1]]}),ie})()},54395:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});var o=n(77393),s=n(33637);function i(d,u=s.P){return g=>g.lift(new a(d,u))}class a{constructor(u,g){this.dueTime=u,this.scheduler=g}call(u,g){return g.subscribe(new l(u,this.dueTime,this.scheduler))}}class l extends o.L{constructor(u,g,f){super(u),this.dueTime=g,this.scheduler=f,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(u){this.clearDebounce(),this.lastValue=u,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(r,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:u}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(u)}}clearDebounce(){const u=this.debouncedSubscription;null!==u&&(this.remove(u),u.unsubscribe(),this.debouncedSubscription=null)}}function r(d){d.debouncedNext()}},71289:(e,t,n)=>{"use strict";n.d(t,{g:()=>l});var o=n(33637),i=n(77393),a=n(41593);function l(g,f=o.P){const x=function(g){return g instanceof Date&&!isNaN(+g)}(g)?+g-f.now():Math.abs(g);return z=>z.lift(new r(x,f))}class r{constructor(f,v){this.delay=f,this.scheduler=v}call(f,v){return v.subscribe(new d(f,this.delay,this.scheduler))}}class d extends i.L{constructor(f,v,x){super(f),this.delay=v,this.scheduler=x,this.queue=[],this.active=!1,this.errored=!1}static dispatch(f){const v=f.source,x=v.queue,z=f.scheduler,b=f.destination;for(;x.length>0&&x[0].time-z.now()<=0;)x.shift().notification.observe(b);if(x.length>0){const _=Math.max(0,x[0].time-z.now());this.schedule(f,_)}else this.unsubscribe(),v.active=!1}_schedule(f){this.active=!0,this.destination.add(f.schedule(d.dispatch,this.delay,{source:this,destination:this.destination,scheduler:f}))}scheduleNotification(f){if(!0===this.errored)return;const v=this.scheduler,x=new u(v.now()+this.delay,f);this.queue.push(x),!1===this.active&&this._schedule(v)}_next(f){this.scheduleNotification(a.P.createNext(f))}_error(f){this.errored=!0,this.queue=[],this.destination.error(f),this.unsubscribe()}_complete(){this.scheduleNotification(a.P.createComplete()),this.unsubscribe()}}class u{constructor(f,v){this.time=f,this.notification=v}}},96736:(e,t,n)=>{"use strict";n.d(t,{h:()=>s});var o=n(77393);function s(l){return r=>r.lift(new i(l))}class i{constructor(r){this.value=r}call(r,d){return d.subscribe(new a(r,this.value))}}class a extends o.L{constructor(r,d){super(r),this.value=d}_next(r){this.destination.next(this.value)}}},13653:(e,t,n)=>{"use strict";n.d(t,{T:()=>s});var o=n(77393);function s(l){return r=>r.lift(new i(l))}class i{constructor(r){this.total=r}call(r,d){return d.subscribe(new a(r,this.total))}}class a extends o.L{constructor(r,d){super(r),this.total=d,this.count=0}_next(r){++this.count>this.total&&this.destination.next(r)}}},77717:(e,t,n)=>{"use strict";n.d(t,{L:()=>s});var o=n(44423);class s extends o.H{constructor(a,l){super(),this.divWidth=300,this.divHeight=300,this.defOption={},this.domdiv=a,this.divWidth=a.offsetWidth,this.divHeight=a.offsetHeight,this.setOption(this.defOption,l)}resize(){var a;this.divHeight=this.domdiv.offsetHeight,this.divWidth=this.domdiv.offsetWidth,null===(a=this.scene)||void 0===a||a.resize()}dispose(){var a;null===(a=this.scene)||void 0===a||a.remove()}}},21900:(e,t,n)=>{"use strict";n.d(t,{u:()=>a});var o=n(37574),i=n(77717);class a extends i.L{constructor(r,d){super(r,d),this.p5draw(r)}p5draw(r){this.scene=new o(u=>{let g,f,v,x,z;u.setup=()=>{u.createCanvas(r.offsetWidth,r.offsetHeight),u.smooth(),u.colorMode(u.HSB,360,100,100,360),g=u.color(330,25,100),z=u.color(220,50,50),f=u.color(230,25,90),v=u.color(210,70,10),x=u.color(360)},u.draw=()=>{u.noLoop(),u.background(230,25,90),function(T){let L=r.offsetWidth,V=r.offsetHeight;for(let Y=0;Y<V/3;Y++){let J=u.map(Y,0,V/3,360,0);u.strokeWeight(1),T.setAlpha(J),u.stroke(T),u.line(0,Y,L,Y)}}(z),function(T){let L=r.offsetWidth,V=r.offsetHeight,Y=u.random(50),J=0;for(let K=0;K<L;K+=2){let re=0;for(let X=0;X<V/3;X+=2){let ne=u.map(X,0,V/4,520,0),he=u.noise(Y+J,Y+re);he=u.map(he,.4,1,0,ne),u.noStroke(),T.setAlpha(he),u.fill(T),u.ellipse(K,X,2,2),re+=.06}J+=.01}}(g),function(T,L,V){let Y=r.offsetWidth,J=r.offsetHeight,K=J/2,re=K/10,X=[];for(let he=0;he<10;he++)X[9-he]=K,K-=re/u.pow(1.2,he);let ne=0;for(let he=1;he<10;he++){let Q=u.random(-Y/2,Y/2),ye=u.random(-Y/2,Y/2),Le=u.random(2,4),lt=u.random(40,50),Me=u.random(-Y/2,Y/2);for(let De=0;De<Y;De++){let xe=X[he];xe+=10*he*u.sin(2*ne/he+Q),xe+=Le*he*u.sin(5*ne/he+ye),xe+=lt*he*u.noise(1.2*ne/he+Me),xe+=1.7*he*u.noise(10*ne),u.strokeWeight(2),u.stroke(u.lerpColor(L,T,he/9)),u.line(De,xe,De,J),ne+=.02}for(let De=J;De>X[he];De-=3){let xe=u.map(De,X[he],J,0,360/(he+1));u.strokeWeight(3),V.setAlpha(xe),u.stroke(V),u.line(0,De,Y,De)}}}(v,f,x)},u.resize=()=>{u.resizeCanvas(r.offsetWidth,r.offsetHeight),u.loop()}},r)}}},66927:(e,t,n)=>{"use strict";n.d(t,{O:()=>mn});var o=n(79287);var r=n(30084);var g=n(97758);var x=n(44423);const z={legend:[{name:"\u5728\u7ebf",color:"#2AC670"},{name:"\u7aef\u53e3\u5f02\u5e38",color:"#C62222"},{name:"\u79bb\u7ebf",color:"#454752"}],rownum:10,colnum:4,space:.6,fontSize:16,title:{fontSize:1.25,opacity:1},xAxes:{lineheight:40,linedy:10,fontSize:1,color:"#ffffff80"},boxMargin:{top:50,bottom:80,left:0,right:0},rectk:{wk:.8,hk:.5,rxy:0}};var _=n(86851);const H={colors:["#2AC670","#454752","#C62222"],rowNum:2,colNum:50,space:1,userMax:100,rectk:{wk:.2,hk:.2,rxy:0}},ne={colors:["#0091FF","#454752","#C62222"],fontSize:16,textColor:"#fff",rowNum:1,colNum:100,rectHeight:10,rectDy:6,rowHeight:60,userMax:100,rectk:{wk:.2,hk:.2,rxy:0}};var ye=n(76887);const Le={defColor:["#57d6a0","#af3998"],lightColor:"#ffffff",circleR:{rTop:.04,rBot:.06,range1:0,range2:20,random:2},hRange:{range1:2,range2:20,random:2},numK:12,sort:!0,lightSpeed:.2,rotationSpeed:.2,camera:{x:0,y:30,z:80,target:8,viewAngle:16},background:{imgUrl:"./assets/images/back-img.png",width:60,speed:.1}},De={fontSize:16,backColor:"#18345A",userMax:1e3,pie:{r:.5,d:.1,cy:-.2,dash:"5,4",dis:-.1},centerValue:{fontSize:1.5,color:"#fff"},title:{dy:-25,fontSize:1.2,color:"#fff"},colorAndClass:[{gte:0,lt:60,color:"#E82323"},{gte:60,lt:80,color:"#FF9845"},{gte:80,color:"#0B95F8"}]};var k=n(25130),nt=(n(29853),n(84939));const St={svg:{sw:1015,sh:690,sx:2.5,sz:2},line:{uOffSpeed:2},nodes:[{id:1,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:382,y:104},{id:2,type:"box",name:"",x:291,y:82},{id:3,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:898,y:104},{id:4,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:784,y:104},{id:5,type:"box",name:"",x:955,y:231},{id:6,type:"ips",name:"IPS",x:769,y:308},{id:7,type:"ips",name:"IPS",x:769,y:381},{id:8,type:"box",name:"",x:955,y:456},{id:9,type:"firewall2",name:"\u9632\u706b\u5899",x:382,y:161},{id:10,type:"firewall2",name:"\u9632\u706b\u5899",x:492,y:161},{id:11,type:"firewall2",name:"\u9632\u706b\u5899",x:784,y:161},{id:12,type:"firewall2",name:"\u9632\u706b\u5899",x:898,y:161},{id:13,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:492,y:104},{id:14,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:14,y:141},{id:15,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:124,y:141},{id:16,type:"box",name:"",x:583,y:82},{id:17,type:"box",name:"",x:693,y:82},{id:18,type:"box",name:"",x:986,y:82},{id:19,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:899,y:286},{id:20,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:899,y:400},{id:21,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:160,y:287},{id:22,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:18,y:546},{id:23,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:125,y:546},{id:24,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:378,y:585},{id:25,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:492,y:585},{id:26,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:792,y:585},{id:27,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:899,y:585},{id:28,type:"branchExchange",name:"\u4ea4\u6362\u673a",x:160,y:401},{id:29,type:"firewall",name:"\u9632\u706b\u5899",x:626,y:298},{id:30,type:"firewall",name:"\u9632\u706b\u5899",x:626,y:393},{id:31,type:"firewall2",name:"\u9632\u706b\u5899",x:377,y:531},{id:32,type:"firewall2",name:"\u9632\u706b\u5899",x:491,y:531},{id:33,type:"firewall2",name:"\u9632\u706b\u5899",x:791,y:531},{id:34,type:"firewall2",name:"\u9632\u706b\u5899",x:898,y:531},{id:35,type:"extranet",name:"\u5916\u7f51",x:1e3,y:341},{id:36,type:"host",name:"\u670d\u52a1\u5668",x:69,y:50},{id:37,type:"host",name:"\u670d\u52a1\u5668",x:439,y:14},{id:38,type:"host",name:"\u670d\u52a1\u5668",x:843,y:14},{id:39,type:"host",name:"\u670d\u52a1\u5668",x:70,y:637},{id:40,type:"coreSwitch",name:"\u6838\u5fc3\u4ea4\u6362\u673a",x:477,y:406},{id:41,type:"coreSwitch",name:"\u6838\u5fc3\u4ea4\u6362\u673a",x:477,y:283},{id:42,type:"host",name:"\u670d\u52a1\u5668",x:842,y:676},{id:43,type:"host",name:"\u670d\u52a1\u5668",x:441,y:676},{id:44,type:"host",name:"\u670d\u52a1\u5668",x:32,y:345,angle:-90}],links:["1000 335 935 335 935 286 828 286 828 305 569 305 569 283 84 283 84 341 32 341","1000 349 935 349 935 399 828 399 828 385 569 385 569 406 84 406 84 347 32 347","955 456 899 456 898 231 955 231","986 82 941 82 941 104 746 104 746 82 693 82","838 676 838 622 791 622 792 470 569 470 569 193 792 193 791 50 839 50 839 14","848 14 848 50 898 50 898 208 14 208 14 104 64 104 64 50","846 676 846 622 898 622 899 489 14 489 14 582 65 582 65 637","445 14 445 65 491 65 492 226 477 226 477 456 492 456 492 622 445 622 445 676","439 14 439 65 384 65 384 470 125 470 125 582 75 582 75 637","439 676 439 622 377 622 377 226 125 226 125 104 75 104 75 50","291 82 291 111 583 111 583 82"]},ot={fontSize:16},Nt={sphere:!0,environment:!0,speed:.1},ke={};var _t=n(47997);const rt={},yt={},Vt={};class le extends x.H{constructor(y,M){super(),this.divWidth=300,this.divHeight=300,this.sk=80,this.defOption={},this.render=()=>{this.request=requestAnimationFrame(this.render),this.renderer.render(this.scene,this.camera),this.renderOthers()},this.domdiv=y,this.divWidth=y.offsetWidth,this.divHeight=y.offsetHeight,this.setOption(this.defOption,M),this.scene=new g.xsS,this.sk=this.divWidth<=this.divHeight?this.divWidth/this.nowOption.camera.viewAngle:this.divHeight/this.nowOption.camera.viewAngle,this.camera=new g.iKG(-this.divWidth/this.sk,this.divWidth/this.sk,this.divHeight/this.sk,-this.divHeight/this.sk,-2001,2e3),this.camera.position.set(this.nowOption.camera.x,this.nowOption.camera.y,this.nowOption.camera.z),this.camera.lookAt(0,this.nowOption.camera.target,0),this.renderer=new g.CP7({alpha:!0,antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(0,0),this.renderer.setSize(this.divWidth,this.divHeight),this.pgroup=new g.ZAu,this.scene.add(this.pgroup),this.init()}init(){this.domdiv.appendChild(this.renderer.domElement),this.render(),this.control=new ye.z(this.camera,this.renderer.domElement),this.control.target.set(0,this.nowOption.camera.target,0),this.control.update()}renderOthers(){}updateData(y){}dispose(){cancelAnimationFrame(this.request),this.domdiv.removeChild(this.renderer.domElement)}resize(){this.divHeight=this.domdiv.offsetHeight,this.divWidth=this.domdiv.offsetWidth,this.sk=this.divWidth<=this.divHeight?this.divWidth/this.nowOption.camera.viewAngle:this.divHeight/this.nowOption.camera.viewAngle,this.camera.aspect=this.divWidth/this.divHeight,this.camera.left=this.divWidth/-this.sk,this.camera.right=this.divWidth/this.sk,this.camera.top=this.divHeight/this.sk,this.camera.bottom=this.divHeight/-this.sk,this.camera.updateProjectionMatrix(),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.divWidth,this.divHeight)}updateOptions(y){this.setOption(this.defOption,y),this.camera.position.set(this.nowOption.camera.x,this.nowOption.camera.y,this.nowOption.camera.z),this.camera.lookAt(0,this.nowOption.camera.target,0),this.control.target.set(0,this.nowOption.camera.target,0),this.control.update(),this.resize(),this.updateData(this.u_data)}}const Ge={camera:{x:0,y:30,z:0,target:0,viewAngle:8}},Ce=new g.SUY,we={camera:{x:0,y:30,z:0,target:0,viewAngle:10},time:1},qe=new g.SUY,W={camera:{x:0,y:30,z:0,target:0,viewAngle:6},time:1},Je=new g.SUY,Mt={camera:{x:0,y:30,z:0,target:0,viewAngle:6},time:1},ve=new g.SUY,se={camera:{x:0,y:30,z:0,target:0,viewAngle:6},time:.1},ie=new g.SUY,U={camera:{x:0,y:30,z:0,target:0,viewAngle:6,enable:!0},time:1},ct=new g.SUY;var Ft=n(37574),Yt=n(77717),fn=n(21900);const Wt={fontSize:16};let Et=n(44134);const wn={},on=[986,848],tn=.6,yn=[{name:"\u84dd\u4e0b\u4e00\u5854",time:155,leftpalce:778,heightplace:784,value:15,\u4eba\u6570\u52a3\u52bf\u56e2:31,\u4eba\u6570\u5747\u52bf\u56e2:35,\u4eba\u6570\u4f18\u52bf\u56e2:33,\u63cf\u8ff0:"\u591a\u4e8e\u524d\u671f\u5bf9\u62fc\u662f\u6709\u4e2d\u91ce\u652f\u63f4\u65f6\u53d1\u751f\u56e2\u6218"},{name:"\u7ea2\u4e0b\u4e00\u5854",time:160,leftpalce:940,heightplace:628,value:15,\u4eba\u6570\u52a3\u52bf\u56e2:32,\u4eba\u6570\u5747\u52bf\u56e2:31,\u4eba\u6570\u4f18\u52bf\u56e2:37,\u63cf\u8ff0:"\u591a\u4e8e\u524d\u671f\u5bf9\u62fc\u662f\u6709\u4e2d\u91ce\u652f\u63f4\u65f6\u53d1\u751f\u56e2\u6218"},{name:"\u4e0b\u6cb3\u9053",time:210,leftpalce:822,heightplace:661,value:4,\u4eba\u6570\u52a3\u52bf\u56e2:25,\u4eba\u6570\u5747\u52bf\u56e2:50,\u4eba\u6570\u4f18\u52bf\u56e2:25,\u63cf\u8ff0:"\u524d\u671f\u4e0b\u8def\u56e2\u6218\u53ef\u80fd\u62c9\u626f\u5230\u6cb3\u9053"},{name:"\u5c0f\u9f99",time:420,leftpalce:713,heightplace:595,value:27,\u4eba\u6570\u52a3\u52bf\u56e2:14,\u4eba\u6570\u5747\u52bf\u56e2:82,\u4eba\u6570\u4f18\u52bf\u56e2:14,\u63cf\u8ff0:"\u62a2\u5360\u524d\u671f\u9f99\u56e2\u8d44\u6e90"},{name:"\u5ce1\u8c37\u5148\u950b",time:440,leftpalce:352,heightplace:276,value:1,\u4eba\u6570\u52a3\u52bf\u56e2:13,\u4eba\u6570\u5747\u52bf\u56e2:74,\u4eba\u6570\u4f18\u52bf\u56e2:13,\u63cf\u8ff0:"\u524d\u671f\u62a2\u5360\u5ce1\u8c37\u5148\u950b\u6709\u5229\u4e8e\u4e2d\u4e0a\u6eda\u96ea\u7403\uff0c\u4f46\u662f\u4e0b\u8def\u79bb\u5f97\u592a\u8fdc\u4e86"},{name:"\u7ea2\u65b9\u84ddBUFF\u533a",time:340,leftpalce:805,heightplace:467,value:9,\u4eba\u6570\u52a3\u52bf\u56e2:0,\u4eba\u6570\u5747\u52bf\u56e2:28,\u4eba\u6570\u4f18\u52bf\u56e2:72,\u63cf\u8ff0:"\u84dd\u8272\u65b9\u524d\u671f\u4f1a\u7ecf\u5e38\u5165\u4fb5\u7ea2\u65b9\u84dd\u533a"},{name:"\u84dd\u65b9\u7ea2BUFF\u533a",time:340,leftpalce:562,heightplace:632,value:4,\u4eba\u6570\u52a3\u52bf\u56e2:0,\u4eba\u6570\u5747\u52bf\u56e2:0,\u4eba\u6570\u4f18\u52bf\u56e2:4,\u63cf\u8ff0:"\u867d\u7136\u7ea2\u65b9\u84dd\u533a\u7ecf\u5e38\u88ab\u5165\u4fb5\uff0c\u4f46\u662f\u540c\u65f6\u95f4\u84dd\u65b9\u7ea2\u533a\u5374\u4e0d\u5e38\u88ab\u5165\u4fb5"},{name:"\u4e2d\u8def",time:660,leftpalce:543,heightplace:423,value:27,\u4eba\u6570\u52a3\u52bf\u56e2:13,\u4eba\u6570\u5747\u52bf\u56e2:69,\u4eba\u6570\u4f18\u52bf\u56e2:18,\u63cf\u8ff0:"\u5728\u62ff\u5148\u950b\u4e4b\u540e\uff0c\u4e00\u822c\u4f1a\u7206\u53d1\u4e2d\u8def\u5148\u950b\u56e2\u6218"},{name:"\u7ea2\u4e2d\u4e8c\u5854",time:1080,leftpalce:681,heightplace:302,value:14,\u4eba\u6570\u52a3\u52bf\u56e2:14,\u4eba\u6570\u5747\u52bf\u56e2:70,\u4eba\u6570\u4f18\u52bf\u56e2:16,\u63cf\u8ff0:"\u63a8\u8fdb\u4e8c\u5854"},{name:"\u84dd\u4e2d\u4e8c\u5854",time:1080,leftpalce:385,heightplace:535,value:13,\u4eba\u6570\u52a3\u52bf\u56e2:14,\u4eba\u6570\u5747\u52bf\u56e2:70,\u4eba\u6570\u4f18\u52bf\u56e2:16,\u63cf\u8ff0:"\u63a8\u8fdb\u4e8c\u5854"},{name:"\u7ea2\u65b9\u4e0a\u4e00\u5854",time:1380,leftpalce:277,heightplace:95,value:2,\u4eba\u6570\u52a3\u52bf\u56e2:50,\u4eba\u6570\u5747\u52bf\u56e2:0,\u4eba\u6570\u4f18\u52bf\u56e2:50,\u63cf\u8ff0:"\u4e0a\u8def\u88ab\u6293\u5355"},{name:"\u84dd\u8272\u4e0a\u4e8c\u5854",time:1480,leftpalce:132,heightplace:402,value:1,\u4eba\u6570\u52a3\u52bf\u56e2:0,\u4eba\u6570\u5747\u52bf\u56e2:0,\u4eba\u6570\u4f18\u52bf\u56e2:100,\u63cf\u8ff0:"\u5728\u84dd\u8272\u4e8c\u5854\u6293\u5355"},{name:"\u7ea2\u4e2d\u4e8c\u5854",time:1080,leftpalce:681,heightplace:302,value:9,\u4eba\u6570\u52a3\u52bf\u56e2:32,\u4eba\u6570\u5747\u52bf\u56e2:31,\u4eba\u6570\u4f18\u52bf\u56e2:37,\u63cf\u8ff0:"\u63a8\u8fdb\u4e8c\u5854"},{name:"\u84dd\u65b9\u9ad8\u5730",time:1700,leftpalce:220,heightplace:688,value:14,\u4eba\u6570\u52a3\u52bf\u56e2:4,\u4eba\u6570\u5747\u52bf\u56e2:91,\u4eba\u6570\u4f18\u52bf\u56e2:5,\u63cf\u8ff0:"\u6253\u4e0a\u84dd\u65b9\u9ad8\u5730"},{name:"\u7ea2\u65b9\u9ad8\u5730",time:1700,leftpalce:856,heightplace:163,value:16,\u4eba\u6570\u52a3\u52bf\u56e2:4,\u4eba\u6570\u5747\u52bf\u56e2:91,\u4eba\u6570\u4f18\u52bf\u56e2:5,\u63cf\u8ff0:"\u6253\u4e0a\u7ea2\u65b9\u9ad8\u5730"},{name:"\u5927\u9f99",time:1560,leftpalce:340,heightplace:268,value:19,\u4eba\u6570\u52a3\u52bf\u56e2:13,\u4eba\u6570\u5747\u52bf\u56e2:67,\u4eba\u6570\u4f18\u52bf\u56e2:20,\u63cf\u8ff0:"\u5728\u540e\u671f\u62ff\u53d6\u5927\u9f99\u5e2e\u52a9\u63a8\u4e0a\u9ad8\u5730"}],Tn=[{mytime:2.5,rate:1},{mytime:5,rate:1.03},{mytime:7.5,rate:1.06},{mytime:10,rate:1.07},{mytime:12.5,rate:1.08},{mytime:15,rate:1.15},{mytime:17.5,rate:1.07},{mytime:20,rate:1.06},{mytime:22.5,rate:1.03},{mytime:25,rate:1},{mytime:27.5,rate:.98},{mytime:30,rate:.94}],$t={fontSize:14,radius:35,sides:6,rotate:0,fill:"#0091FF",stroke:"#E86452",strokeWidth:4,gap:10,margin:20,float:"left"},mn={Polygon:{title:"\u591a\u8fb9\u5f62",width:"600",height:"300",mockjs:function(){return _.mock({"series|6":[{"name|+1":"@cname",value:"@integer(50,100)",fill:"@color",stroke:"@color",opacity:"@float(0,1,2,2)"}]})},component:class extends x.H{constructor(y,M,C,A){super(),this.divWidth=10,this.divHeight=10,this.defOption=$t,this.callback=C,this.scope=A,this.domdiv=y,this.divWidth=y.offsetWidth,this.divHeight=y.offsetHeight,this.setOption(this.defOption,M),y.style.fontSize=this.nowOption.fontSize+"px",this.svg=o.select(y).append("svg").attr("width",this.divWidth).attr("height",this.divHeight).style("position","absolute"),this.pathGroup=this.svg.append("g").attr("class","pathGroup")}polygonPath(y,M,C){const A=[],R=2*Math.PI/M;C=C*Math.PI/180;for(let $=0;$<M;$++){const ae=y*Math.cos(R*$+C-Math.PI/2),te=y*Math.sin(R*$+C-Math.PI/2);A.push([ae,te])}return A}updateData(y){void 0!==y&&(this.u_data=y,y=JSON.parse(JSON.stringify(y)),this.drawPolygons(y.series))}drawPolygons(y){let{sides:M,radius:C}=this.nowOption;const{rotate:A,gap:R,margin:$,float:ae}=this.nowOption;M=M<3?3:M>72?72:M,C=C<1?1:C;const te=this.polygonPath(C,M,A);let ge=0;"center"===ae&&(ge=(this.divWidth-(R+2*C)*y.length-2*C)/2);const ce=this,Te=this.pathGroup.selectAll("g").data(y).join("g").attr("transform",(fe,be)=>`translate(${(R+2*C)*be+C+$+ge},${C+$})`).attr("pointer-events",fe=>0===fe.opacity?"none":"auto").on("click",function(fe){ce.callback.call(ce.scope,fe)});Te.selectAll("path").data(fe=>[fe]).join("path").attr("d",o.line()(te)+"Z").attr("fill",fe=>fe.fill||this.nowOption.fill).attr("stroke",fe=>fe.stroke||this.nowOption.stroke).attr("opacity",fe=>void 0!==fe.opacity?fe.opacity:1).attr("stroke-width",this.nowOption.strokeWidth),Te.selectAll("foreignObject").data(fe=>[fe]).join("foreignObject").attr("width",2*C).attr("height",2*C).attr("x",-C).attr("y",-C).html(fe=>`<div style="display:flex;\n      align-items:center;\n      justify-content:center;\n      flex-direction: column;\n      text-align:center;\n      line-height: initial;\n      width:${2*C}px;height:${2*C}px;\n      color:#fff">\n              <div style="font-size: 1.2em;">${void 0===fe.value?"":fe.value}</div>\n              <div style="font-size: 1em;">${fe.name||""}</div>\n      </div>`)}dispose(){this.svg.remove()}resize(){this.divHeight=this.domdiv.offsetHeight,this.divWidth=this.domdiv.offsetWidth,!(this.divWidth<10)&&(this.divHeight<10||(this.svg.attr("width",this.divWidth).attr("height",this.divHeight),this.updateData(this.u_data)))}updateOptions(y){this.setOption(this.defOption,y),this.domdiv.style.fontSize=this.nowOption.fontSize+"px",this.resize()}},options:$t},G61:{title:"G6\u62d3\u6251\u56fe",width:300,height:200,component:class extends x.H{constructor(y,M){super(),this.defOption=Wt,this.setOption(this.defOption,M);const R=new G6.Graph({container:y,width:y.innerWidth,height:y.innerHeight,fitView:!0,layout:{type:"dagre",rankdir:"TB",preventOverlap:!0,nodeSize:30,nodesep:30,ranksep:30},defaultNode:{size:34,style:{fill:"#ff0000",stroke:"#ffff00"},labelCfg:{style:{fill:"#fff",fontSize:12,position:"bottom"}}},defaultEdge:{type:"cubic-vertical",style:{stroke:"#ffff00",lineWidth:2,lineDash:[6,6]},labelCfg:{style:{fill:"#fff",fontSize:18}}},modes:{default:["drag-canvas","zoom-canvas","drag-node"]},gpuEnabled:!0});let $=function(dt,y){const M=[],C=[];for(let A=0;A<10;A++)M[A]={id:A.toString(),label:A};for(let A=0;A<20;A++){let R=Math.floor(10*Math.random()),$=Math.floor(Math.random()*R);C[A]={source:R.toString(),target:$.toString(),label:R+"-"+$}}return{nodes:M,edges:C}}();$={nodes:[{id:"1",label:"1"},{id:"2",label:"2"},{id:"3",label:"3"},{id:"4",label:"4"},{id:"5",label:"5"},{id:"6",label:"6"},{id:"7",label:"7"},{id:"8",label:"8"},{id:"9",label:"9"}],edges:[{source:"1",target:"2",label:""},{source:"1",target:"3",label:""},{source:"3",target:"4",label:""},{source:"2",target:"5",label:""},{source:"1",target:"6",label:""},{source:"2",target:"3",label:""},{source:"6",target:"4",label:""},{source:"6",target:"1",label:""},{source:"6",target:"7",label:""},{source:"7",target:"8",label:""},{source:"7",target:"9",label:""},{source:"7",target:"6",label:""},{source:"7",target:"5",label:""}]},console.log(JSON.stringify($)),R.data($),R.render()}updateData(y){void 0!==y&&(this.u_data=y,y=JSON.parse(JSON.stringify(y)))}dispose(){}resize(){this.updateData(this.u_data)}updateOptions(y){this.setOption(this.defOption,y),this.resize()}},mockjs:function(){return _.mock({"series|4":[{"name|+1":["\u53ef\u7591IP","\u50f5\u5c38\u7f51\u7edc","\u8fdc\u7a0b\u63a7\u5236","\u6728\u9a6c\u6d3b\u52a8"],value:"@integer(100,1000)",unit:"%",max:1200}]})}},Canyon:{title:"\u53ec\u5524\u5e08\u5ce1\u8c37",width:800,height:800,component:class{constructor(y){this.divWidth=10,this.divHeight=10,this.domdiv=y,this.divWidth=y.offsetWidth,this.divHeight=y.offsetHeight,this.svg=o.select(y).append("svg").attr("width",this.divWidth).attr("height",this.divHeight).style("position","absolute"),this.gGroup=this.svg.append("g").attr("class","gGroup").attr("transform","translate(30,30)");let M=1/0,C=-1/0;yn.forEach(R=>{R.value>C&&(C=R.value),R.value<M&&(M=R.value)});let A=o.scaleLinear().domain([M,C]).range([5,25]);yn.forEach(R=>{R.r=A(R.value)}),this.pieG=this.gGroup.append("g").attr("class","pie"),this.addPlace(yn),this.addPie(null),this.addDragBar(),this.drawLine([]),this.resize()}addPie(y){if(!y)return;const M=[];M.push({name:"\u4eba\u6570\u52a3\u52bf\u56e2",value:y.\u4eba\u6570\u52a3\u52bf\u56e2}),M.push({name:"\u4eba\u6570\u5747\u52bf\u56e2",value:y.\u4eba\u6570\u5747\u52bf\u56e2}),M.push({name:"\u4eba\u6570\u4f18\u52bf\u56e2",value:y.\u4eba\u6570\u4f18\u52bf\u56e2});const A=o.pie().value(ge=>ge.value).sort(null),R=o.arc().innerRadius(0).outerRadius(100),$=o.scaleOrdinal(o.schemeCategory10);let ae=tn*on[0],te=tn*on[1]/2;this.pieG.attr("transform",`translate(${ae+120},${te}) scale(0)`).transition().duration(500).attr("transform",`translate(${ae+120},${te}) scale(1)`),this.pieG.selectAll("path").data(A(M)).join("path").attr("d",R).attr("fill",ge=>$(ge.data.name)).attr("stroke","white").style("stroke-width","2px").style("opacity",.8),this.pieG.selectAll("text").filter(".pieText").data(A(M)).join("text").attr("class","pieText").attr("dx",120).attr("dy",(ge,ce)=>30*ce-30).attr("fill","white").attr("font-size",16).attr("text-anchor","start").attr("fill",ge=>$(ge.data.name)).text(ge=>ge.data.name+":"+ge.data.value),this.pieG.selectAll("text").filter(".infoText").data([y.\u63cf\u8ff0]).join("text").attr("class","infoText").attr("dx",-90).attr("dy",130).attr("fill","red").attr("font-size",16).attr("text-anchor","start").text(ge=>ge)}addPlace(y){this.placeG=this.gGroup.append("g").attr("class","points"),this.placeG.append("image").attr("xlink:href","/assets/images/canyon-map.png").attr("x",0).attr("y",0).attr("width",on[0]*tn).attr("height",on[1]*tn),this.placeG.selectAll("circle").data(y).join("circle").attr("cx",M=>M.leftpalce*tn).attr("cy",M=>M.heightplace*tn).attr("r",M=>M.r).attr("fill","red").attr("opacity",0).on("mouseover",function(){o.select(this).attr("fill","green")}).on("mouseout",function(){o.select(this).attr("fill","red")}).on("click",M=>{console.log(M),this.addPie(M)})}addDragBar(){let y=tn*on[1],M=tn*on[0]*1.6;const C=this.gGroup.append("g").attr("class","dragBar"),R=(C.append("rect").attr("x",0).attr("y",y+20).attr("width",M).attr("height",20).attr("fill","#ccc"),C.append("circle").attr("cx",0).attr("cy",y+30).attr("r",10).attr("fill","red").on("mouseover",function(){o.select(this).style("cursor","pointer")}).on("mouseout",function(){o.select(this).style("cursor","default")}).call(o.drag().on("drag",()=>{let $=o.event.x;$<0&&($=0),$>M&&($=M),R.attr("cx",$),this.changePlace($/M)})))}changePlace(y){this.placeG.selectAll("circle").each(function(M){M.time>1800*y?o.select(this).attr("fill","red").attr("opacity",0):o.select(this).attr("fill","red").attr("opacity",.5)})}updateData(y){void 0!==y&&(this.u_data=y)}dispose(){this.svg.remove()}resize(){this.divHeight=this.domdiv.offsetHeight,this.divWidth=this.domdiv.offsetWidth,this.svg.attr("width",this.divWidth).attr("height",this.divHeight),this.updateData(this.u_data)}updateOptions(y){this.resize()}drawLine(y){let M=tn*on[1]+160,C=tn*on[0]*1.6,A=+o.max(y=Tn,me=>me.mytime),R=+o.min(y,me=>me.mytime),ae=.8/+o.min(y,me=>me.rate),te=o.scaleLinear().domain([R,A]).range([0,C]).nice(),ge=o.scaleLinear().domain([ae,1.2]).range([M,M-100]).nice(),ce=o.line().x(me=>te(me.mytime)).y(me=>ge(me.rate)).curve(o.curveMonotoneX),Te=this.gGroup.append("g").attr("class","line");Te.append("path").attr("d",ce(y)).attr("fill","none").attr("stroke","red").attr("stroke-width",2);let fe=o.axisBottom(te).ticks(10),be=o.axisLeft(ge).ticks(4);Te.append("g").attr("transform","translate(0, "+M+")").call(fe),Te.append("g").attr("transform","translate(0, 0)").call(be),Te.append("text").attr("x",10).attr("y",M-90).attr("fill","red").attr("font-size",14).text("\u4e0e\u5bf9\u4f4d\u4f24\u5bb3\u6bd4\u7387"),Te.append("text").attr("x",C).attr("y",M+35).attr("fill","red").attr("font-size",14).text("\u65f6\u95f4").attr("text-anchor","end"),Te.append("line").attr("x1",0).attr("y1",ge(1)).attr("x2",C).attr("y2",ge(1)).attr("stroke","#aaaaaa").attr("stroke-width",1).attr("stroke-dasharray","5,5")}},mockjs:function(){return function(){}}},Molecule:{title:"\u5206\u5b50\u7403",width:300,height:300,component:class extends x.H{constructor(y,M){super(),this.defOption=Vt,this.domdiv=y,this.setOption(this.defOption,M);const C=document.createElement("canvas");y.appendChild(C),this.canvas=C,C.width=y.offsetWidth,C.height=y.offsetHeight,this.init(),this.render()}init(){this.engine=new k.Engine(this.canvas,!0,{preserveDrawingBuffer:!0,stencil:!0}),this.scene=new k.Scene(this.engine),this.scene.clearColor=new k.Color4(0,0,0,0),this.scene.createDefaultCameraOrLight(!0,!0,!1);var y=this.scene.activeCamera;y.position=new k.Vector3(5,20,-40),y.attachControl(this.canvas,!0),this.createMolecule()}createMolecule(){const y=new k.StandardMaterial("redMat",this.scene);y.diffuseColor=new k.Color3(1,0,0);const M=k.MeshBuilder.CreateSphere("sphere1",{diameter:3},this.scene);M.material=y;const C=k.MeshBuilder.CreateSphere("ssphere2",{diameter:3},this.scene);C.material=y,M.position=new k.Vector3(7.37,0,0),C.position=new k.Vector3(-7.37,0,0);const A=new k.StandardMaterial("whiteMat",this.scene);A.diffuseColor=new k.Color3(1,1,1);const R=k.MeshBuilder.CreateSphere("sphere1b",{diameter:2},this.scene);R.material=A;const $=k.MeshBuilder.CreateSphere("sphere2b",{diameter:2},this.scene);$.material=A;let ae=98.35,te=9.5;const ge=te*Math.cos(ae*Math.PI/180),ce=te*Math.sin(ae*Math.PI/180);R.parent=M,$.parent=C,$.position=new k.Vector3(ge,0,-ce);let Te=192.85,fe=9.5;const be=fe*Math.cos(Te*Math.PI/180),me=fe*Math.sin(Te*Math.PI/180);R.position=new k.Vector3(0,-be,-me);let Se=k.MeshBuilder.CreateTube("tube12",{path:[M.position,C.position],radius:.4,tessellation:64,updatable:!0},this.scene);Se.material=y;let _e=k.MeshBuilder.CreateTube("tube2",{path:[new k.Vector3(0,0,0),$.position],radius:.4,tessellation:64,updatable:!0},this.scene);_e.material=A,_e.parent=C;let Ke=k.MeshBuilder.CreateTube("tube3",{path:[new k.Vector3(0,0,0),R.position],radius:.4,tessellation:64,updatable:!0},this.scene);Ke.material=A,Ke.parent=M;let We=0;this.scene.onBeforeRenderObservable.add(()=>{M.position=new k.Vector3(7.37-1*Math.sin(We),0,0),C.position=new k.Vector3(1*Math.sin(We)-7.37,0,0),Se=k.MeshBuilder.CreateTube("tube12",{path:[M.position,C.position],radius:.4,tessellation:64,updatable:!0,instance:Se},this.scene),Se.material=y,te=9.5+.5*Math.sin(We),ae=101.9+13.55*Math.sin(We);const at=te*Math.cos(ae*Math.PI/180),Ae=te*Math.sin(ae*Math.PI/180);$.position=new k.Vector3(at,0,-Ae),_e=k.MeshBuilder.CreateTube("tube2",{path:[new k.Vector3(0,0,0),$.position],radius:.4,tessellation:64,updatable:!0,instance:_e},this.scene),fe=9.5+.5*Math.sin(We),Te=192.85+32.65*Math.sin(We);const it=fe*Math.cos(Te*Math.PI/180),Dt=fe*Math.sin(Te*Math.PI/180);R.position=new k.Vector3(0,-it,-Dt),Ke=k.MeshBuilder.CreateTube("tube3",{path:[new k.Vector3(0,0,0),R.position],radius:.4,tessellation:64,updatable:!0,instance:Ke},this.scene),We+=.02})}render(){this.engine.runRenderLoop(()=>{this.scene.render()})}dispose(){var y;null===(y=this.engine)||void 0===y||y.dispose()}resize(){var y;this.canvas.width=this.domdiv.offsetWidth,this.canvas.height=this.domdiv.offsetHeight,null===(y=this.engine)||void 0===y||y.resize()}},mockjs:function(){return{}}},Mxgraph:{title:"mxgraph\u62d3\u6251\u56fe",width:300,height:200,component:class extends x.H{constructor(y,M){super(),this.defOption=wn,this.graphDiv=document.createElement("div"),this.laberDiv=document.createElement("div"),this.setOption(this.defOption,M),y.style.overflow="hidden",this.div=y,this.setLabel(this.laberDiv),o.select(y).append("text").text("+").style("left","10px").style("top","10px").style("font-size","14px").style("color","#d86c59").style("position","absolute").style("z-index",9999).on("click",()=>{this.graph.zoomIn()}),o.select(y).append("text").text("-").style("left","30px").style("top","10px").style("font-size","14px").style("color","#d86c59").style("position","absolute").style("z-index",9999).on("click",()=>{this.graph.zoomOut()}),this.graphDiv.style.width="100%",this.graphDiv.style.height="100%",y.appendChild(this.graphDiv)}setStyle(){this.graph&&this.graph.destroy();let y=new Et.mxGraph(this.graphDiv);this.graph=y,y.setEnabled(!1),y.maximumGraphBounds=new Et.mxRectangle(0,0,this.div.offsetWidth,this.div.offsetHeight),Et.mxEvent.disableContextMenu(this.graphDiv);let M=y.getStylesheet();M.getDefaultEdgeStyle().rounded="1",y.getModel().beginUpdate();let C=new Object;C=Et.mxUtils.clone(C),C[Et.mxConstants.STYLE_STROKECOLOR]="#ff00ff00",C[Et.mxConstants.STYLE_FILLCOLOR]="#ffffff00",C[Et.mxConstants.STYLE_FONTCOLOR]="#ffffff",C[Et.mxConstants.STYLE_FONTSIZE]="12",C[Et.mxConstants.STYLE_FONTFAMILY]="PingFangSC-Regular, PingFang SC",C[Et.mxConstants.STYLE_SHAPE]=Et.mxConstants.SHAPE_LABEL,C[Et.mxConstants.STYLE_ALIGN]=Et.mxConstants.ALIGN_CENTER,C[Et.mxConstants.STYLE_VERTICAL_ALIGN]=Et.mxConstants.ALIGN_BOTTOM,C[Et.mxConstants.STYLE_IMAGE_ALIGN]=Et.mxConstants.ALIGN_CENTER,C[Et.mxConstants.STYLE_IMAGE_VERTICAL_ALIGN]=Et.mxConstants.ALIGN_TOP,C[Et.mxConstants.STYLE_IMAGE]="./assets/images/pc.svg",C[Et.mxConstants.STYLE_IMAGE_WIDTH]="34",C[Et.mxConstants.STYLE_IMAGE_HEIGHT]="34",M.putCellStyle("bottom",C);let A=new Object;A=Et.mxUtils.clone(A),A[Et.mxConstants.STYLE_STROKECOLOR]="#ffffff",A[Et.mxConstants.STYLE_STROKEWIDTH]="1",A[Et.mxConstants.STYLE_DASHED]="1",A[Et.mxConstants.STYLE_DASH_PATTERN]="4 4",A[Et.mxConstants.STYLE_ENDARROW]=Et.mxConstants.ARROW_CLASSIC_THIN,A[Et.mxConstants.STYLE_ENDSIZE]="8",A[Et.mxConstants.STYLE_VERTICAL_ALIGN]=Et.mxConstants.ALIGN_MIDDLE,A[Et.mxConstants.STYLE_ALIGN]=Et.mxConstants.ALIGN_CENTER,A[Et.mxConstants.STYLE_FONTCOLOR]="#ffffff",A[Et.mxConstants.STYLE_FONTSIZE]="12",A[Et.mxConstants.STYLE_FONTFAMILY]="PingFangSC-Regular, PingFang SC",M.putCellStyle("dashed",A)}setdata(y){return y.nodes.forEach((M,C)=>{M.width=this.getLabelWidth(M.name)}),y}clearGraph(){this.graph.removeCells(this.graph.getChildVertices(this.graph.getDefaultParent()))}drawtopo(y){this.setStyle();const M=this.graph;M.getModel().beginUpdate();let C=new Et.mxHierarchicalLayout(M),A=M.getDefaultParent();try{const R={};y.nodes.forEach($=>{R[$.keyID]=M.insertVertex(A,null,$.label,0,0,$.width,65,"bottom")}),y.links.forEach($=>{R[$.from]&&R[$.to]&&M.insertEdge(A,null,$.label,R[$.from],R[$.to],"dashed")}),C.execute(A)}finally{M.getModel().endUpdate(),this.displayAllVertex(M),M.setPanning(!0),M.panningHandler.useLeftButtonForPanning=!0}}displayAllVertex(y){y.refresh();let M=y.getChildVertices(y.getDefaultParent(),!0),C=y.getBoundingBoxFromGeometry(M,!0),A=y.container.clientWidth-20,R=y.container.clientHeight-20,$=C.width/y.view.scale,ae=C.height/y.view.scale,te=Math.min(1,Math.min(A/$,R/ae));y.view.scaleAndTranslate(te,(A-$*te+20)/(2*te)-C.x/y.view.scale,(R-ae*te+20)/(2*te)-C.y/y.view.scale)}setLabel(y){y.style.position="absolute",y.style.visibility="hidden",y.style.whiteSpace="nowrap",y.style.fontSize="12px",y.style.fontFamily="\u5fae\u8f6f\u96c5\u9ed1",y.style.padding="0 5px",this.div.appendChild(y)}getLabelWidth(y){return this.laberDiv.innerHTML=y,this.laberDiv.clientWidth}updateData(y){if(void 0===y)return;this.u_data=y,y=JSON.parse(JSON.stringify(y));let M=this.setdata(y);this.drawtopo(M)}dispose(){this.graph.destroy(),this.div.innerHTML=""}resize(){this.updateData(this.u_data)}updateOptions(y){this.setOption(this.defOption,y),this.resize()}},mockjs:function(){return function(dt,y){const M=[],C=[],A=[];for(let R=0;R<10;R++){let $=Math.random().toString(36).substr(2,Math.ceil(35*Math.random())+1);M[R]={keyID:$,label:$},A.push($)}for(let R=0;R<15;R++){let $=A[Math.floor(10*Math.random())],ae=A[Math.floor(10*Math.random())];C[R]={from:$.toString(),to:ae.toString(),label:""}}return{nodes:M,links:C}}()}},Art1:{title:"\u753b1",width:300,height:200,component:class extends Yt.L{constructor(y,M){super(y,M),this.p5draw(y)}p5draw(y){this.scene=new Ft(C=>{let R,A=30,$=!1;C.preload=()=>{let te=Math.floor(20*Math.random());R=C.loadImage(`./assets/wallpaper/${te}.jpg`)},C.setup=()=>{C.createCanvas(y.offsetWidth,y.offsetHeight),C.noStroke(),R.loadPixels(),A=C.width/20,A<30&&(A=30)},C.draw=()=>{for(let ae=0;ae<10;ae++){let te=Math.floor(Math.random()*R.width),ge=Math.floor(Math.random()*R.height),ce=R.get(te,ge);ce[3]=256,C.fill(ce),C.ellipse(te*(y.offsetWidth/R.width),ge*(y.offsetHeight/R.height),A,A)}C.frameCount%100==0&&(A-=2,A<2&&(C.noLoop(),C.image(R,0,0,y.offsetWidth,y.offsetHeight),$=!0))},C.resize=()=>{C.resizeCanvas(y.offsetWidth,y.offsetHeight),C.background(0),A=C.width/20,A<30&&(A=30),$&&C.image(R,0,0,y.offsetWidth,y.offsetHeight)}},y)}}},Art2:{title:"\u5c712",width:600,height:400,component:class extends Yt.L{constructor(y,M){super(y,M),this.p5draw(y)}p5draw(y){this.scene=new Ft(C=>{let $,ae,A=C.random(0,100),R=.0035;C.setup=()=>{C.createCanvas(y.offsetWidth,y.offsetHeight),C.noStroke(),C.colorMode(C.HSB,360,100,100,50),C.noLoop()},C.draw=()=>{C.background(196,240,25);for(let te=0;te<C.width;te++){let ge=C.noise(A)*C.height;$=C.noise(A)*C.random(120,130),C.noisePoint(te,ge),A+=R,C.fill($,100,100,50)}for(let te=0;te<C.width;te++){let ge=C.noise(A)*C.height;$=C.noise(A)*C.random(170,180),C.noisePoint(te,ge+100),A+=R}for(let te=0;te<C.width;te++){let ge=C.noise(A)*C.height;$=C.noise(A)*C.random(270,280),C.noisePoint(te,ge+100),A+=R}},C.noisePoint=(te,ge)=>{for(let ce=0;ce<C.height;ce+=1)ae=C.noise(A)*C.random(50,100),C.fill($,ae,100,C.random(25,50)-ce/4),C.ellipse(te,ge-ce,1,1)},C.resize=()=>{C.resizeCanvas(y.offsetWidth,y.offsetHeight),C.redraw()}},y)}}},Art3:{title:"\u68113",width:700,height:450,component:class extends Yt.L{constructor(y,M){super(y,M),this.p5draw(y)}p5draw(y){this.scene=new Ft(C=>{let R=C.color(C.random(255),C.random(255),C.random(255)),$=C.color(C.random(255),C.random(255),C.random(255));C.setup=()=>{C.createCanvas(y.offsetWidth,y.offsetHeight),C.drawY(13,0,C.createVector(y.offsetWidth/2,y.offsetHeight))},C.drawY=(ae,te,ge)=>{let ce=ae;if(ae<0)return;C.strokeWeight(ae),C.stroke(C.lerpColor(R,$,C.map(ae,0,13,0,1)));let Te=C.createVector(0,4*-ae).rotate(te).add(ge);Te.copy().sub(C.createVector(C.mouseX,C.mouseY)).y>y.offsetHeight||(C.line(ge.x,ge.y,Te.x,Te.y),0!=parseInt(C.random(1+ae*ae/10))&&C.drawY(ce-1,te-C.PI/C.random(4,8),Te),0!=parseInt(C.random(1+ae*ae/10))&&C.drawY(ce-1,te+C.PI/C.random(4,8),Te))},C.draw=()=>{},C.resize=()=>{R=C.color(C.random(255),C.random(255),C.random(255)),$=C.color(C.random(255),C.random(255),C.random(255)),C.resizeCanvas(y.offsetWidth,y.offsetHeight),C.drawY(13,0,C.createVector(y.offsetWidth/2,y.offsetHeight))}},y)}}},Art5:{title:"\u5c71\u6c345",width:600,height:200,component:class extends Yt.L{constructor(y,M){super(y,M),this.p5draw(y)}p5draw(y){this.scene=new Ft(C=>{let A,R,$=C.random(0,10);C.setup=()=>{A=0,R=0,C.createCanvas(y.offsetWidth,y.offsetHeight),C.frameRate(30)},C.draw=()=>{C.background(220),$+=.001;for(let ae=0;ae<=C.width;ae+=1)for(let te=1;te<=15;te++)C.strokeWeight(2),C.stroke(220-15*te),C.line(ae,R+C.height/2/10*te+C.height/2*C.noise(ae/300,te*$),ae,C.height)},C.resize=()=>{C.resizeCanvas(y.offsetWidth,y.offsetHeight),$=C.random(0,1),C.redraw()}},y)}}},Art6:{title:"\u5c71\u6c346",width:400,height:300,component:fn.u},Art7:{title:"\u5c71\u6c347",width:600,height:600,component:class extends Yt.L{constructor(y,M){super(y,M),this.p5draw(y)}p5draw(y){this.scene=new Ft(C=>{var A=[],R=0;function $(ce){C.fill(ce),C.beginShape(),C.vertex(415,360),C.vertex(440,354),C.vertex(458,340),C.vertex(472,338),C.vertex(484,328),C.vertex(493,324),C.vertex(504,325),C.vertex(516,322),C.vertex(532,319),C.vertex(565,317),C.vertex(601,308),C.vertex(620,298),C.vertex(637,292),C.vertex(669,288),C.vertex(690,278),C.vertex(750,276),C.vertex(850,365),C.vertex(415,365),C.endShape()}function ae(ce){C.fill(ce),C.beginShape(),C.vertex(0,160),C.vertex(12,148),C.vertex(36,160),C.vertex(55,166),C.vertex(65,174),C.vertex(79,188),C.vertex(92,200),C.vertex(111,200),C.vertex(124,205),C.vertex(153,237),C.vertex(190,248),C.vertex(230,293),C.vertex(290,316),C.vertex(330,320),C.vertex(325,319),C.vertex(327,319),C.vertex(335,321),C.vertex(348,324),C.vertex(390,341),C.vertex(413,343),C.vertex(428,340),C.vertex(443,348),C.vertex(456,353),C.vertex(471,361),C.vertex(487,365),C.vertex(0,365),C.vertex(0,150),C.endShape()}function te(ce,Te,fe){C.beginShape();for(var be=fe,me=0;me<=C.width;me+=12){var Se=C.map(C.noise(be,R),0,1,ce,Te);C.vertex(me,Se),be+=.05}R+=.002,C.vertex(C.width,C.height),C.vertex(0,C.height),C.endShape(C.CLOSE)}C.setup=()=>{C.createCanvas(y.offsetWidth,y.offsetHeight);for(var ce=0;ce<8;ce++)A[ce]=new ge(C.random(C.width),C.random(C.height/3))},C.draw=()=>{C.background(230,25,90),C.background(150,200,255),C.noStroke(),C.fill(10,174,44),C.rect(0,360,C.width,C.height);for(var ce=0;ce<4;ce++)C.push(),C.colorMode(C.HSB,360,100,100,100),C.fill(C.color(200,30,100-12*ce,80)),te(C.height-150+50*ce,C.height-200+50*ce,ce),C.pop();var Te=C.color(139,62,47),fe=C.color(94,38,18),be=C.color(138,51,36);C.push(),C.scale(1.4,1.61),C.translate(-210,-137),$(Te),C.pop(),C.push(),C.translate(-70,0),$(fe),C.pop(),C.push(),C.scale(.85,.82),C.translate(160,80),$(be),C.pop();var me=C.color(90,39,41),Se=C.color(118,57,49),_e=C.color(77,31,0);C.translate(0,40),ae(me),C.push(),C.scale(1.2,.8),C.translate(-70,91),ae(Se),C.pop(),C.push(),C.scale(1.8,1),C.translate(-280,0),ae(_e),C.pop(),C.fill(255);for(let Ke=0;Ke<A.length;Ke++)A[Ke].move(),A[Ke].display()},C.resize=()=>{C.resizeCanvas(y.offsetWidth,y.offsetHeight)};class ge{constructor(Te,fe){this.x=Te,this.y=fe,this.windSpeed=C.random(.1,.3)}display(){C.ellipse(this.x,this.y,25),C.ellipse(this.x+10,this.y,30),C.ellipse(this.x+11,this.y-10,30),C.ellipse(this.x+20,this.y,27),C.ellipse(this.x+30,this.y,23)}move(){this.x+=this.windSpeed,this.x>C.width&&(this.x=0)}}},y)}}},Effect1:{title:"\u65cb\u6da1",width:600,height:600,mockjs:function(){return{}},component:class extends le{constructor(y,M){super(y,M),this.defOption=Ge,this.addPlane()}addPlane(){const y=new g.zf8(10,32),M=new g.jyz({uniforms:{iTime:{value:0}},side:2,depthWrite:!0,transparent:!0,depthTest:!0,vertexShader:"\n\t\tvarying vec3 vPosition;\n\t\tvarying vec2 vUv;\n\t\tvoid main() { \n\t\t\tvUv = uv; \n\t\t\tvec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n\t\t\tgl_Position = projectionMatrix * mvPosition;\n\t\t}\n\t\t",fragmentShader:"\n\n\t\tconst float PI = 3.14159265359; \n        \n\t\tuniform float iTime;\n\t\tuniform vec2 iResolution; \n          \n\t\tvarying vec2 vUv;\n        float distanceTo(vec2 src, vec2 dst) {\n\t\t\tfloat dx = src.x - dst.x;\n\t\t\tfloat dy = src.y - dst.y;\n\t\t\tfloat dv = dx * dx + dy * dy;\n\t\t\treturn sqrt(dv);\n\t\t}\n\n        vec3 hsb2rgb( in vec3 c ){\n            vec3 rgb = clamp(abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),\n                                     6.0)-3.0)-1.0,\n                             0.0,\n                             1.0 );\n            rgb = rgb*rgb*(3.0-2.0*rgb);\n            return c.z * mix( vec3(1.0), rgb, c.y);\n        }\n        \n        vec2 rotate2D (vec2 _st, float _angle) {\n            _st =  mat2(cos(_angle),-sin(_angle),\n                        sin(_angle),cos(_angle)) * _st;\n            return _st;\n        }\n        \n\t\tvoid main() {  \n            float len = distanceTo(vec2(0.5, 0.5), vec2(vUv.x, vUv.y)) * 2.0; \n            vec2 p = (vUv-0.5) * 4.0;\n            vec3 color = hsb2rgb(vec3(fract(iTime*.1),1.,1.));\n            float r = length(p);\n            float w = .3;\n            p = rotate2D(p,(r*PI*6.-iTime*2.));\n            color *= smoothstep(-w,.0,p.x)*smoothstep(w,.0,p.x);\n            color *= abs(1./(sin(pow(r,2.)*2.-iTime*1.3)*6.))*.4;\n            \n\t\t\tgl_FragColor = vec4(color,  pow(1.0 - len, 2.0))  ;\n\t\t\t\n\t\t}\n\t\t"}),C=new g.Kj0(y,M);C.rotation.x=-Math.PI/2,this.scene.add(C),this.plane=C}renderOthers(){if(this.plane){const y=Ce.getElapsedTime();this.plane.material.uniforms.iTime.value=y}}},options:Ge},Effect2:{title:"\u5b57\u5e55",width:600,height:600,mockjs:function(){return{}},component:class extends le{constructor(y,M){super(y,M),this.defOption=we,this.control.enabled=!1,this.addPlane()}addPlane(){const y=new g.BKK(20,20),M=new g.jyz({uniforms:{iTime:{value:0},iResolution:{value:new g.FM8(1200,1200)}},side:2,depthWrite:!0,transparent:!0,depthTest:!0,vertexShader:"\n\t\tvarying vec3 vPosition;\n\t\tvarying vec2 vUv;\n\t\tvoid main() { \n\t\t\tvUv = uv; \n\t\t\tvec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n\t\t\tgl_Position = projectionMatrix * mvPosition;\n\t\t}\n\t\t",fragmentShader:"\n        uniform float ratio;\n\n        float PI2 = 6.28318530718;\n        float PI = 3.1416;\n\n\t\tuniform float iTime;\n\t\tuniform vec2 iResolution; \n          \n\t\tvarying vec2 vUv;\n        float vorocloud(vec2 p){\n            float f = 0.0;\n            vec2 pp = cos(vec2(p.x * 14.0, (16.0 * p.y + cos(floor(p.x * 30.0)) + iTime * PI2)) );\n            p = cos(p * 12.1 + pp * 10.0 + 0.5 * cos(pp.x * 10.0));\n            \n            vec2 pts[4];\n            \n            pts[0] = vec2(0.5, 0.6);\n            pts[1] = vec2(-0.4, 0.4);\n            pts[2] = vec2(0.2, -0.7);\n            pts[3] = vec2(-0.3, -0.4);\n            \n            float d = 5.0;\n            \n            for(int i = 0; i < 4; i++){\n                  pts[i].x += 0.03 * cos(float(i)) + p.x;\n                  pts[i].y += 0.03 * sin(float(i)) + p.y;\n                d = min(d, distance(pts[i], pp));\n            }\n            \n            f = 2.0 * pow(1.0 - 0.3 * d, 13.0);\n            \n            f = min(f, 1.0);\n            \n            return f;\n        }\n        vec4 scene(vec2 UV){\n            float x = UV.x;\n            float y = UV.y;\n            \n            vec2 p = vec2(x, y) - vec2(0.5);\n            \n            vec4 col = vec4(0.0);\n            col.g += 0.02;\n            \n            float v = vorocloud(p);\n            v = 0.2 * floor(v * 5.0);\n            \n            col.r += 0.1 * v;\n            col.g += 0.6 * v;\n            col.b += 0.5 * pow(v, 5.0);\n            \n            \n            v = vorocloud(p * 2.0);\n            v = 0.2 * floor(v * 5.0);\n            \n            col.r += 0.1 * v;\n            col.g += 0.2 * v;\n            col.b += 0.01 * pow(v, 5.0);\n            \n            col.a = col.r + col.g + col.b;\n            \n            return col;\n        }\n         \n        float distanceTo(vec2 src, vec2 dst) {\n\t\t\tfloat dx = src.x - dst.x;\n\t\t\tfloat dy = src.y - dst.y;\n\t\t\tfloat dv = dx * dx + dy * dy;\n\t\t\treturn sqrt(dv);\n\t\t}\n\n        \n\t\tvoid main() { \n            float len = distanceTo(vec2(0.5, 0.5), vec2(vUv.x, vUv.y)) * 2.0; \n             \n\n\t\t\tgl_FragColor = scene(vUv);\n\t\t\t\n\t\t}\n\t\t"}),C=new g.Kj0(y,M);C.rotation.x=-Math.PI/2,this.scene.add(C),this.plane=C}renderOthers(){if(this.plane){const y=qe.getElapsedTime();this.plane.material.uniforms.iTime.value=y*this.nowOption.time}}},options:we},Effect3:{title:"\u96f7\u8fbe",width:600,height:600,mockjs:function(){return{}},component:class extends le{constructor(y,M){super(y,M),this.defOption=W,this.control.enabled=!1,this.addPlane()}addPlane(){const y=new g.BKK(20,20),M=new g.jyz({uniforms:{iTime:{value:0},iResolution:{value:new g.FM8(1200,1200)}},side:2,depthWrite:!0,transparent:!0,depthTest:!0,vertexShader:"\n\t\tvarying vec3 vPosition;\n\t\tvarying vec2 vUv;\n\t\tvoid main() { \n\t\t\tvUv = uv; \n\t\t\tvec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n\t\t\tgl_Position = projectionMatrix * mvPosition;\n\t\t}\n\t\t",fragmentShader:"\n        #define SMOOTH(r,R) (1.0-smoothstep(R-1.0,R+1.0, r))\n        #define RANGE(a,b,x) ( step(a,x)*(1.0-step(b,x)) )\n        #define RS(a,b,x) ( smoothstep(a-1.0,a+1.0,x)*(1.0-smoothstep(b-1.0,b+1.0,x)) )\n        #define M_PI 3.1415926535897932384626433832795\n\n        #define blue1 vec3(0.74,0.95,1.00)\n        #define blue2 vec3(0.87,0.98,1.00)\n        #define blue3 vec3(0.35,0.76,0.83)\n        #define blue4 vec3(0.953,0.969,0.89)\n        #define red   vec3(1.00,0.38,0.227)\n\n        #define MOV(a,b,c,d,t) (vec2(a*cos(t)+b*cos(0.1*(t)), c*sin(t)+d*cos(0.1*(t))))\n\n        float PI = 3.1415926;\n        uniform float iTime;\n        uniform vec2 iResolution; \n        varying vec2 vUv;\n        \n        \n        float movingLine(vec2 uv, vec2 center, float radius)\n        {\n            //angle of the line\n            float theta0 = 90.0 * iTime;\n            vec2 d = uv - center;\n            float r = sqrt( dot( d, d ) );\n            if(r<radius)\n            {\n                //compute the distance to the line theta=theta0\n                vec2 p = radius*vec2(cos(theta0*M_PI/180.0),\n                                    -sin(theta0*M_PI/180.0));\n                float l = length( d - p*clamp( dot(d,p)/dot(p,p), 0.0, 1.0) );\n                d = normalize(d);\n                //compute gradient based on angle difference to theta0\n                float theta = mod(180.0*atan(d.y,d.x)/M_PI+theta0,360.0);\n                float gradient = clamp(1.0-theta/90.0,0.0,1.0);\n                return SMOOTH(l,1.0)+0.5*gradient;\n            }\n            else return 0.0;\n        }\n\n        float circle(vec2 uv, vec2 center, float radius, float width)\n        {\n            float r = length(uv - center);\n            return SMOOTH(r-width/2.0,radius)-SMOOTH(r+width/2.0,radius);\n        }\n\n        float circle2(vec2 uv, vec2 center, float radius, float width, float opening)\n        {\n            vec2 d = uv - center;\n            float r = sqrt( dot( d, d ) );\n            d = normalize(d);\n            if( abs(d.y) > opening )\n                return SMOOTH(r-width/2.0,radius)-SMOOTH(r+width/2.0,radius);\n            else\n                return 0.0;\n        }\n        float circle3(vec2 uv, vec2 center, float radius, float width)\n        {\n            vec2 d = uv - center;\n            float r = sqrt( dot( d, d ) );\n            d = normalize(d);\n            float theta = 180.0*(atan(d.y,d.x)/M_PI);\n            return smoothstep(2.0, 2.1, abs(mod(theta+2.0,45.0)-2.0)) *\n                mix( 0.5, 1.0, step(45.0, abs(mod(theta, 180.0)-90.0)) ) *\n                (SMOOTH(r-width/2.0,radius)-SMOOTH(r+width/2.0,radius));\n        }\n\n        float triangles(vec2 uv, vec2 center, float radius)\n        {\n            vec2 d = uv - center;\n            return RS(-8.0, 0.0, d.x-radius) * (1.0-smoothstep( 7.0+d.x-radius,9.0+d.x-radius, abs(d.y)))\n                + RS( 0.0, 8.0, d.x+radius) * (1.0-smoothstep( 7.0-d.x-radius,9.0-d.x-radius, abs(d.y)))\n                + RS(-8.0, 0.0, d.y-radius) * (1.0-smoothstep( 7.0+d.y-radius,9.0+d.y-radius, abs(d.x)))\n                + RS( 0.0, 8.0, d.y+radius) * (1.0-smoothstep( 7.0-d.y-radius,9.0-d.y-radius, abs(d.x)));\n        }\n\n        float _cross(vec2 uv, vec2 center, float radius)\n        {\n            vec2 d = uv - center;\n            int x = int(d.x);\n            int y = int(d.y);\n            float r = sqrt( dot( d, d ) );\n            if( (r<radius) && ( (x==y) || (x==-y) ) )\n                return 1.0;\n            else return 0.0;\n        }\n        float dots(vec2 uv, vec2 center, float radius)\n        {\n            vec2 d = uv - center;\n            float r = sqrt( dot( d, d ) );\n            if( r <= 2.5 )\n                return 1.0;\n            if( ( r<= radius) && ( (abs(d.y+0.5)<=1.0) && ( mod(d.x+1.0, 50.0) < 2.0 ) ) )\n                return 1.0;\n            else if ( (abs(d.y+0.5)<=1.0) && ( r >= 50.0 ) && ( r < 115.0 ) )\n                return 0.5;\n            else\n                return 0.0;\n        }\n        float bip1(vec2 uv, vec2 center)\n        {\n            return SMOOTH(length(uv - center),3.0);\n        }\n        float bip2(vec2 uv, vec2 center)\n        {\n            float r = length(uv - center);\n            float R = 8.0+mod(87.0*iTime, 80.0);\n            return (0.5-0.5*cos(30.0*iTime)) * SMOOTH(r,5.0)\n                + SMOOTH(6.0,r)-SMOOTH(8.0,r)\n                + smoothstep(max(8.0,R-20.0),R,r)-SMOOTH(R,r);\n        }\n\t\tvoid main() { \n            vec2 _uv = vec2(vUv.x * iResolution.x, vUv.y * iResolution.y);\n            vec3 finalColor;\n            vec2 uv = _uv;\n            //center of the image\n            vec2 c = vec2(iResolution.x / 2.0, iResolution.y / 2.0);\n            finalColor = vec3( 0.3*_cross(uv, c, 240.0) );\n            finalColor += ( circle(uv, c, 100.0, 1.0)\n                        + circle(uv, c, 165.0, 1.0) ) * blue1;\n            finalColor += (circle(uv, c, 240.0, 2.0) );//+ dots(uv,c,240.0)) * blue4;\n            finalColor += circle3(uv, c, 313.0, 4.0) * blue1;\n            finalColor += triangles(uv, c, 315.0 + 30.0*sin(iTime)) * blue2;\n            finalColor += movingLine(uv, c, 240.0) * blue3;\n            finalColor += circle(uv, c, 10.0, 1.0) * blue3;\n            finalColor += 0.7 * circle2(uv, c, 262.0, 1.0, 0.5+0.2*cos(iTime)) * blue3;\n            if( length(uv-c) < 240.0 )\n            {\n                //animate some bips with random movements\n                vec2 p = 130.0*MOV(1.3,1.0,1.0,1.4,3.0+0.1*iTime);\n                finalColor += bip1(uv, c+p) * vec3(1,1,1);\n                p = 130.0*MOV(0.9,-1.1,1.7,0.8,-2.0+sin(0.1*iTime)+0.15*iTime);\n                finalColor += bip1(uv, c+p) * vec3(1,1,1);\n                p = 50.0*MOV(1.54,1.7,1.37,1.8,sin(0.1*iTime+7.0)+0.2*iTime);\n                finalColor += bip2(uv,c+p) * red;\n            }\n\n\t\t\tgl_FragColor = vec4( finalColor, finalColor.r + finalColor.g + finalColor.b );\n\t\t\t\n\t\t}\n\t\t"}),C=new g.Kj0(y,M);C.rotation.x=-Math.PI/2,this.scene.add(C),this.plane=C}renderOthers(){if(this.plane){const y=Je.getElapsedTime();this.plane.material.uniforms.iTime.value=y*this.nowOption.time}}},options:W},Effect4:{title:"\u706b\u7130",width:600,height:600,mockjs:function(){return{}},component:class extends le{constructor(y,M){super(y,M),this.defOption=Mt,this.control.enabled=!1,this.addPlane()}addPlane(){const y=new g.BKK(20,20),M=new g.jyz({uniforms:{iTime:{value:0},iResolution:{value:new g.FM8(1200,1200)}},side:2,depthWrite:!0,transparent:!0,depthTest:!0,vertexShader:"\n\t\tvarying vec3 vPosition;\n\t\tvarying vec2 vUv;\n\t\tvoid main() { \n\t\t\tvUv = uv; \n\t\t\tvec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n\t\t\tgl_Position = projectionMatrix * mvPosition;\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform float iTime;\n\t\tuniform vec2 iResolution; \n\t\tvarying vec2 vUv;\n\n        float snoise(vec3 uv, float res)\n        {\n            const vec3 s = vec3(1e0, 1e2, 1e3);\n            \n            uv *= res;\n            \n            vec3 uv0 = floor(mod(uv, res))*s;\n            vec3 uv1 = floor(mod(uv+vec3(1.), res))*s;\n            \n            vec3 f = fract(uv); f = f*f*(3.0-2.0*f);\n\n            vec4 v = vec4(uv0.x+uv0.y+uv0.z, uv1.x+uv0.y+uv0.z,\n                        uv0.x+uv1.y+uv0.z, uv1.x+uv1.y+uv0.z);\n\n            vec4 r = fract(sin(v*1e-1)*1e3);\n            float r0 = mix(mix(r.x, r.y, f.x), mix(r.z, r.w, f.x), f.y);\n            \n            r = fract(sin((v + uv1.z - uv0.z)*1e-1)*1e3);\n            float r1 = mix(mix(r.x, r.y, f.x), mix(r.z, r.w, f.x), f.y);\n            \n            return mix(r0, r1, f.z)*2.-1.;\n        }\n\n        void main(void) {\n            \n            vec2 p = (vUv - 0.5) * 2.0;\n            p.x *= iResolution.x/iResolution.y;\n            \n            float color = 3.0 - (3.*length(2.*p));\n            \n            vec3 coord = vec3(atan(p.x,p.y)/6.2832+.5, length(p)*.4, .5);\n            \n            for(int i = 1; i <= 7; i++)\n            {\n                float power = pow(2.0, float(i));\n                color += (1.5 / power) * snoise(coord + vec3(0.,-iTime*.05, iTime*.01), power*16.);\n            }\n            gl_FragColor = vec4( color, pow(max(color,0.),2.)*0.4, pow(max(color,0.),3.)*0.15 , 1.0);\n\n            gl_FragColor = vec4(gl_FragColor.rgb, gl_FragColor.r+gl_FragColor.g+gl_FragColor.b);\n        }\n\t\t"}),C=new g.Kj0(y,M);C.rotation.x=-Math.PI/2,this.scene.add(C),this.plane=C}renderOthers(){if(this.plane){const y=ve.getElapsedTime();this.plane.material.uniforms.iTime.value=y*this.nowOption.time}}},options:Mt},Effect5:{title:"\u5149\u5708",width:600,height:600,mockjs:function(){return{}},component:class extends le{constructor(y,M){super(y,M),this.defOption=se,this.addPlane()}addPlane(){const y=new g.BKK(10,10),M=new g.jyz({uniforms:{iTime:{value:0},iResolution:{value:new g.FM8(1,1)}},side:2,depthWrite:!0,transparent:!0,depthTest:!0,vertexShader:"\n\t\tvarying vec3 vPosition;\n\t\tvarying vec2 vUv;\n\t\tvoid main() { \n\t\t\tvUv = uv; \n\t\t\tvec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n\t\t\tgl_Position = projectionMatrix * mvPosition;\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform float iTime;\n\t\tuniform vec2 iResolution; \n\t\tvarying vec2 vUv;\n\n    vec3 mod289(vec3 x) {\n      return x - floor(x * (1.0 / 289.0)) * 289.0;\n    }\n    \n    vec2 mod289(vec2 x) {\n      return x - floor(x * (1.0 / 289.0)) * 289.0;\n    }\n    \n    vec3 permute(vec3 x) {\n      return mod289(((x*34.0)+1.0)*x);\n    }\n    \n    float snoise(vec2 v)\n      {\n      const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                          0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                         -0.577350269189626,  // -1.0 + 2.0 * C.x\n                          0.024390243902439); // 1.0 / 41.0\n    // First corner\n      vec2 i  = floor(v + dot(v, C.yy) );\n      vec2 x0 = v -   i + dot(i, C.xx);\n    \n    // Other corners\n      vec2 i1;\n      //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\n      //i1.y = 1.0 - i1.x;\n      i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n      // x0 = x0 - 0.0 + 0.0 * C.xx ;\n      // x1 = x0 - i1 + 1.0 * C.xx ;\n      // x2 = x0 - 1.0 + 2.0 * C.xx ;\n      vec4 x12 = x0.xyxy + C.xxzz;\n      x12.xy -= i1;\n    \n    // Permutations\n      i = mod289(i); // Avoid truncation effects in permutation\n      vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n                    + i.x + vec3(0.0, i1.x, 1.0 ));\n    \n      vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n      m = m*m ;\n      m = m*m ;\n    \n    // Gradients: 41 points uniformly over a line, mapped onto a diamond.\n    // The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\n    \n      vec3 x = 2.0 * fract(p * C.www) - 1.0;\n      vec3 h = abs(x) - 0.5;\n      vec3 ox = floor(x + 0.5);\n      vec3 a0 = x - ox;\n    \n    // Normalise gradients implicitly by scaling m\n    // Approximation of: m *= inversesqrt( a0*a0 + h*h );\n      m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n    \n    // Compute final noise value at P\n      vec3 g;\n      g.x  = a0.x  * x0.x  + h.x  * x0.y;\n      g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n      return 130.0 * dot(m, g);\n    }\n        \n\n        void main(void) {\n            \n          vec2 uv = (2.0*vUv.xy-iResolution.xy)/iResolution.y;\n    \n          float r = mod(iTime, 2.5);\n          \n          vec4 circleColour = vec4(snoise(vec2(r, r)), 0.5*snoise(uv*0.5), 0.5*snoise(uv*0.5), r);\n        vec4 backgroundColour = vec4(0.0, 0.0, 0.0, 1.0);\n         \n        float dist = sqrt(dot(uv, uv));\n          \n          float t = 1.0 + smoothstep(r, r+0.1, dist) - smoothstep(r-0.1, r, dist);\n          gl_FragColor = mix(circleColour, backgroundColour, t);\n          gl_FragColor = vec4(gl_FragColor.rgb, gl_FragColor.r+gl_FragColor.g+gl_FragColor.b);\n\n        }\n\t\t"}),C=new g.Kj0(y,M);C.rotation.x=-Math.PI/2,this.scene.add(C),this.plane=C}renderOthers(){if(this.plane){const y=ie.getElapsedTime();this.plane.material.uniforms.iTime.value=y*this.nowOption.time}}},options:se},Effect6:{title:"\u5149\u73af",width:600,height:600,mockjs:function(){return{}},component:class extends le{constructor(y,M){super(y,M),this.defOption=U,this.control.enabled=this.nowOption.camera.enable,this.addPlane()}addPlane(){const y=new g.zf8(5,64),M=new g.jyz({uniforms:{iTime:{value:0},iResolution:{value:new g.FM8(1,1)}},side:2,depthWrite:!0,transparent:!0,depthTest:!0,vertexShader:"\n\t\tvarying vec3 vPosition;\n\t\tvarying vec2 vUv;\n\t\tvoid main() { \n\t\t\tvUv = uv; \n\t\t\tvec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n\t\t\tgl_Position = projectionMatrix * mvPosition;\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform float iTime;\n\t\tuniform vec2 iResolution; \n\t\tvarying vec2 vUv;\n\n    vec4 hsb2rgb4(in vec4 c)\n    {\n        vec4 rgb = clamp(abs(mod(c.x*6.0+vec4(0.0,4.0,2.0,0.0),\n                                6.0)-3.0)-1.0,\n                        0.0,\n                        1.0);\n        rgb = rgb*rgb*(3.0-2.0*rgb);\n        return c.z * mix( vec4(1.0,1.0,1.0,0.0), rgb, c.y);\n    }\n    void main(void) {\n        \n      vec2 p = (2.0*vUv.xy-iResolution.xy)/iResolution.y;\n      float r = length(p) * 3.0;\n      vec4 color = hsb2rgb4(vec4(0.24, 0.7, 0.4, 0.0));\n      float a = pow(r, 2.0);\n      float b = sin(r * 0.8 - 1.6);\n      float c = sin(r - 0.010);\n      float s = sin(a - iTime * 3.0 + b) * c;\n      \n      color *= abs(1.0 / (s * 10.8)) - 0.01;\n      gl_FragColor = vec4(color.rgb, color.a*(1.0 - length(p)));\n    }\n\t\t"}),C=new g.Kj0(y,M);C.rotation.x=-Math.PI/2,this.scene.add(C),this.plane=C}renderOthers(){if(this.plane){const y=ct.getElapsedTime();this.plane.material.uniforms.iTime.value=y*this.nowOption.time}}},options:U},ComputerRoomVis:{title:"\u673a\u623f",width:800,height:600,mockjs:function(){return _.mock({"hostData|7":[{"id|+1":[36,37,38,39,42,43,44],colors:[_.Random.color(),_.Random.color(),_.Random.color()]}]})},component:class extends x.H{constructor(y,M){super(),this.defOption=St,this.emMaterials={},this.linmaterials=[],this.domDiv=y,this.setOption(this.defOption,M);const C=document.createElement("canvas");y.appendChild(C),this.canvas=C,C.width=y.offsetWidth,C.height=y.offsetHeight,this.init(),this.render(),this.addGltf()}init(){let M;this.engine=new k.Engine(this.canvas,!0,{preserveDrawingBuffer:!0,stencil:!0}),this.scene=new k.Scene(this.engine),this.scene.clearColor=new k.Color4(0,0,0,0),M=new k.ArcRotateCamera("Camera",3*Math.PI/2,Math.PI/3,2,k.Vector3.Zero(),this.scene),M.setPosition(new k.Vector3(1,2,-3)),M.attachControl(this.canvas,!0),M.wheelPrecision=300,M.lowerRadiusLimit=1,M.upperRadiusLimit=5,M.minZ=.1,M.upperBetaLimit=Math.PI/2*.9,this.activeCamera=M,new k.HemisphericLight("sun",new k.Vector3(.2,1,.2),this.scene).intensity=.5,new k.PointLight("point",new k.Vector3(0,1,0),this.scene).intensity=.5;const R=new k.GlowLayer("glow",this.scene,{mainTextureSamples:4});R.intensity=1;const $=new k.GlowLayer("glow",this.scene,{mainTextureSamples:4});this.gl1=R,this.gl2=$;let ae=0;setInterval(()=>{$.intensity=.2*(.5+Math.sin(ae)),ae+=.5},100),this.addPipe();const te=k.MeshBuilder.CreatePlane("plane",{width:14,height:10},this.scene);te.position.y=-.02,te.rotation.x=Math.PI/2;const ge=new k.StandardMaterial("planeMat",this.scene);ge.diffuseColor=k.Color3.FromHexString("#191f25"),ge.emissiveColor=new k.Color3(0,0,0),ge.specularPower=200,ge.backFaceCulling=!1,te.material=ge,this.addLines()}updateData(y){void 0!==y&&(y=JSON.parse(JSON.stringify(y)),this.changeEmissiveColor(y.hostData))}addLines(){let M=2.3,C=.1,A=[],R=Math.floor(34),$=Math.floor(M/C);for(let ae=0;ae<=R;ae++){let te=k.MeshBuilder.CreateLines("line",{colors:[new k.Color4(.9,.9,.8,.2),new k.Color4(.9,.9,.8,.2)],points:[new k.Vector3(ae*C-1.7,0,-M/2),new k.Vector3(ae*C-1.7,0,M/2)]},this.scene);te.position.y=-.01,A.push(te)}for(let ae=0;ae<=$;ae++){let te=k.MeshBuilder.CreateLines("line",{colors:[new k.Color4(.9,.9,.8,.2),new k.Color4(.9,.9,.8,.2)],points:[new k.Vector3(-1.7,0,-M/2+ae*C),new k.Vector3(1.7,0,-M/2+ae*C)]},this.scene);te.position.y=-.01,A.push(te)}}addGltf(){k.SceneLoader.LoadAssetContainer("./assets/model/","computer-room.glb",this.scene,y=>{y.materials.forEach(function(te){te.backFaceCulling=!1});const M=new k.Vector3(.01,.01,.01);y.transformNodes.forEach(te=>{if("platform"===te.name||"platform2"===te.name){const ge=te.clone("platform");ge.scaling=M,"platform"===te.name&&(ge.position.y=-.05);const ce=new k.StandardMaterial("platform",this.scene);ce.diffuseColor=k.Color3.FromHexString("#292c31"),("platform2"===te.name||"platform"===te.name)&&ge.getChildMeshes().forEach(Te=>{"platform.circle"!=Te.name&&(Te.material=ce)})}});const C=this.nowOption.nodes,{sw:A,sh:R,sx:$,sz:ae}=this.nowOption.svg;C.map(te=>{let ge=y.transformNodes.find(ce=>ce.name===te.type);if(ge){let ce=1;"host"===te.type&&(ce=3);const Te=new k.TransformNode(te.type,this.scene);Te.scaling=M;for(let Ke=0;Ke<ce;Ke++){const We=ge.clone(te.type);We.parent=Te;let wt=0;3===ce&&(wt=10*Ke-10),We.position=new k.Vector3(wt,0,0),We.getChildMeshes().forEach(at=>{"host.state"===at.name&&(at.material=at.material.clone(),at.material.emissiveColor=new k.Color3(Math.random(),.3,Math.random()),this.emMaterials[te.id]||(this.emMaterials[te.id]=[]),this.emMaterials[te.id].push(at.material),this.gl2.addIncludedOnlyMesh(at)),"coreSwitch.cylinder1"===at.name&&(at.material.emissiveColor=new k.Color3(.2,.2,.2)),"extranet.cloud"===at.name&&(at.material.emissiveColor=new k.Color3(.2,.2,.2)),"branchExchange.arrow"===at.name&&(at.material.emissiveColor=new k.Color3(.2,.2,.2))})}let fe=0,be=0;"host"===te.type&&(fe=Math.PI),"firewall2"===te.type&&(fe=Math.PI/2),"firewall"===te.type&&(be=-Math.PI/2);let me=Number(te.x)/A*$-$/2,Se=0,_e=-Number(te.y)/R*ae+ae/2;Te.position=new k.Vector3(me,Se,_e),null!=te.angle&&(fe+=te.angle*Math.PI/180,be+=te.angle*Math.PI/180),Te.rotation=new k.Vector3(0,fe,0),""!=te.name&&null!=te.name&&this.addName(Te,te,me,_e,be),"coreSwitch"===te.type&&(this.addCylinder(me,_e),this.addParticleSystem(me,0,_e))}})})}changeEmissiveColor(y){y&&y.length>0&&y.forEach(M=>{this.emMaterials[M.id]&&this.emMaterials[M.id].forEach((C,A)=>{M.colors[A]&&(C.emissiveColor=k.Color3.FromHexString(M.colors[A]))})})}addName(y,M,C,A,R){const $=y.getHierarchyBoundingVectors(),ae=$.max.y-$.min.y,ge=k.MeshBuilder.CreatePlane("plane",{width:.4,height:.2},this.scene);let ce=nt.AdvancedDynamicTexture.CreateForMesh(ge);ge.position.set(C,ae+.05,A),ge.rotation=new k.Vector3(0,R,0);let Te=nt.Button.CreateSimpleButton("but1",M.name.toString());Te.width=1,Te.height=.5,Te.children[0].color="#ffffff",Te.children[0].fontSize=140,Te.color="#00ff0000",Te.background="#11539b10",ce.addControl(Te),Te.onPointerUpObservable.add(()=>{this.cameraAnimation(ge.position)})}cameraAnimation(y){this.activeCamera.animations=[];const M=new k.Animation("cameraAnimation","position",30,k.Animation.ANIMATIONTYPE_VECTOR3,k.Animation.ANIMATIONLOOPMODE_CONSTANT),C=[];C.push({frame:0,value:this.activeCamera.position}),C.push({frame:30,value:y}),M.setKeys(C),this.activeCamera.animations.push(M),this.scene.beginAnimation(this.activeCamera,0,30,!1,1)}addParticleSystem(y,M,C){const A=.05,R=new k.ParticleSystem("particles",2e3,this.scene);R.particleTexture=new k.Texture("./assets/img/particle2.png",this.scene),R.minEmitBox=new k.Vector3(-A,0,-A),R.maxEmitBox=new k.Vector3(A,0,A),R.color1=new k.Color4(.7,.8,1,1),R.color2=new k.Color4(.1,.8,1,1),R.start(),R.minSize=.05,R.maxSize=.02,R.minEmitPower=.5,R.maxEmitPower=1,R.emitter=new k.Vector3(y,M,C)}mitredExtrude(y,M,C){let Dt,A=M.shape,R=M.path,$=M.close||!1,te=R.length,ge=k.Vector3.Zero(),ce=k.Vector3.Zero(),Te=k.Vector3.Zero(),fe=k.Vector3.Zero(),be=k.Vector3.Zero(),me=k.Vector3.Zero(),Se=k.Vector3.Zero(),_e=k.Vector3.Zero(),Ke=k.Vector3.Zero(),We=k.Vector3.Zero(),wt=k.Vector3.Zero(),it=(k.Vector3.Zero(),0),Ut=[];for(let Rt=0;Rt<A.length;Rt++){R[1].subtractToRef(R[0],ge),be=ge.clone().normalize(),Te=k.Vector3.Cross(C.activeCamera.position,be).normalize(),fe=k.Vector3.Cross(be,Te),Ke=R[0].add(Te.scale(A[Rt].x)).add(fe.scale(A[Rt].y));let ft=[Ke.clone()];for(let Ct=0;Ct<te-2;Ct++){R[Ct+2].subtractToRef(R[Ct+1],ce),_e=ce.clone().normalize(),me=k.Vector3.Cross(C.activeCamera.position,_e).normalize(),Se=k.Vector3.Cross(_e,me),_e.subtractToRef(be,wt);let Tt=k.Vector3.Cross(_e,be),Kt=k.Vector3.Cross(Tt,wt),Ln=k.Plane.FromPositionAndNormal(R[Ct+1],Kt);Dt=new k.Ray(Ke,be),it=Dt.intersectsPlane(Ln),Ke.addToRef(be.scale(it),We),ft.push(We.clone()),Te=me.clone(),fe=Se.clone(),be=_e.clone(),Ke=We.clone()}if($){R[0].subtractToRef(R[te-1],ce),_e=ce.clone().normalize(),me=k.Vector3.Cross(C.activeCamera.position,_e).normalize(),Se=k.Vector3.Cross(_e,me),_e.subtractToRef(be,wt);let Ct=k.Vector3.Cross(_e,be),Tt=k.Vector3.Cross(Ct,wt),Kt=k.Plane.FromPositionAndNormal(R[te-1],Tt);Dt=new k.Ray(Ke,be),it=Dt.intersectsPlane(Kt),Ke.addToRef(be.scale(it),We),ft.push(We.clone()),Te=me.clone(),fe=Se.clone(),be=_e.clone(),Ke=We.clone(),R[1].subtractToRef(R[0],ce),_e=ce.clone().normalize(),me=k.Vector3.Cross(C.activeCamera.position,_e).normalize(),Se=k.Vector3.Cross(_e,me),_e.subtractToRef(be,wt),Ct=k.Vector3.Cross(_e,be),Tt=k.Vector3.Cross(Ct,wt),Kt=k.Plane.FromPositionAndNormal(R[0],Tt),Dt=new k.Ray(Ke,be),it=Dt.intersectsPlane(Kt),Ke.addToRef(be.scale(it),We),ft.shift(),ft.unshift(We.clone())}else{let Tt=k.Plane.FromPositionAndNormal(R[te-1],be);Dt=new k.Ray(Ke,be),it=Dt.intersectsPlane(Tt),Ke.addToRef(be.scale(it),We),ft.push(We.clone())}Ut.push(ft)}return k.MeshBuilder.CreateRibbon("ribbon",{pathArray:Ut,sideOrientation:k.Mesh.DOUBLESIDE,closeArray:!0,closePath:$},C)}addPipe(){const y=[];this.nowOption.links.forEach($=>{y.push($.split(" "))});const{sw:M,sh:C,sx:A,sz:R}=this.nowOption.svg;y.forEach($=>{const ae=[];for(let Se=0;Se<$.length;Se+=2){let _e=Number($[Se])/M*A-A/2,Ke=0,We=-Number($[Se+1])/C*R+R/2;ae.push(new k.Vector3(_e,Ke,We))}let te=[];for(let Se=0;Se<36;Se++)te.push(new k.Vector3(.0025*Math.cos(2*Se*Math.PI/36),.0025*Math.sin(2*Se*Math.PI/36),0));let Te=this.mitredExtrude("line",{path:ae,shape:te},this.scene);Te.isPickable=!1;let fe=0;for(let Se=0;Se<ae.length-1;Se++)fe+=k.Vector3.Distance(ae[Se],ae[Se+1]);const be=new k.StandardMaterial("cylinderMat",this.scene),me=this.createCanvas(256,512);be.diffuseTexture=new k.Texture(me.toDataURL(),this.scene),be.diffuseTexture.uScale=Math.ceil(10*fe),be.diffuseTexture.hasAlpha=!0,be.diffuseColor=k.Color3.FromHexString("#5385ee"),be.emissiveColor=k.Color3.FromHexString("#264480"),be.useAlphaFromDiffuseTexture=!0,Te.material=be,this.linmaterials.push(be)})}createCanvas(y,M){const C=document.createElement("canvas");C.width=y,C.height=M;const A=C.getContext("2d");return A.fillStyle="#ffffff60",A.fillRect(0,0,.5*y,M),A.fillStyle="#ffffffa0",A.fillRect(.5*y,0,.5*y,M),C}createCanvas2(y,M){const C=document.createElement("canvas");C.width=y,C.height=M;const A=C.getContext("2d"),R=A.createLinearGradient(0,0,0,M);return R.addColorStop(0,"#ffffff00"),R.addColorStop(1,"#ffffffa0"),A.fillStyle=R,A.fillRect(0,0,y,.9*M),C}addCylinder(y,M){const C=[];C[0]=new k.Vector4(.98,.98,1,1),C[1]=new k.Vector4(.95,0,0,.95),C[2]=new k.Vector4(.98,.98,1,1);const A=k.MeshBuilder.CreateCylinder("cylinder",{diameter:.1,height:.6,tessellation:24,faceUV:C},this.scene);A.position.set(y,.28,M);const R=k.MeshBuilder.CreateCylinder("cylinder2",{diameter:.15,height:.5,tessellation:24,faceUV:C},this.scene);R.position.set(y,.22,M);const $=new k.StandardMaterial("cylinderMat",this.scene),ae=this.createCanvas2(512,512);$.diffuseTexture=new k.Texture(ae.toDataURL(),this.scene),$.diffuseTexture.hasAlpha=!0,$.diffuseColor=new k.Color3(1,1,1),$.emissiveColor=k.Color3.FromHexString("#5385ee"),$.alpha=.45,$.useAlphaFromDiffuseTexture=!0,A.material=$,R.material=$}render(){this.engine.runRenderLoop(()=>{this.scene.render(),this.linmaterials.forEach(y=>{y.diffuseTexture.uOffset+=this.nowOption.line.uOffSpeed/100})})}dispose(){var y;null===(y=this.engine)||void 0===y||y.dispose()}resize(){var y;this.canvas.width=this.domDiv.offsetWidth,this.canvas.height=this.domDiv.offsetHeight,null===(y=this.engine)||void 0===y||y.resize()}updateOptions(y){this.setOption(this.defOption,y)}},options:St},MountainTree:{title:"\u5c71\u548c\u6811",width:600,height:600,mockjs:function(){return{}},component:class extends x.H{constructor(y,M){super(),this.defOption=ke,this.domdiv=y,this.setOption(this.defOption,M);const C=document.createElement("canvas");y.appendChild(C),this.canvas=C,C.width=y.offsetWidth,C.height=y.offsetHeight,this.init(),this.render(),this.addMesh()}init(){this.engine=new k.Engine(this.canvas,!0,{preserveDrawingBuffer:!0,stencil:!0}),this.scene=new k.Scene(this.engine),this.scene.clearColor=new k.Color4(0,0,0,0),new k.AxesViewer(this.scene,1),new k.PointLight("Omni0",new k.Vector3(60,100,10),this.scene);var C=new k.UniversalCamera("camera1",new k.Vector3(0,15,-10),this.scene);C.attachControl(this.canvas,!0),this.actCamera=C}addMesh(){var y=this.actCamera,M=k.Mesh.CreateGroundFromHeightMap("ground","./assets/mountain-tree/heightMap.png",200,200,100,0,20,this.scene,!1),C=new k.StandardMaterial("ground",this.scene);C.diffuseTexture=new k.Texture("./assets/mountain-tree/grass.png",this.scene),C.diffuseTexture.uScale=6,C.diffuseTexture.vScale=6,C.specularColor=new k.Color3(0,0,0),M.position.y=-2.05,M.material=C;var A=k.Mesh.CreateBox("skyBox",1e3,this.scene),R=new k.StandardMaterial("skyBox",this.scene);R.backFaceCulling=!1,R.reflectionTexture=new k.CubeTexture("./assets/mountain-tree/TropicalSunnyDay",this.scene),R.reflectionTexture.coordinatesMode=k.Texture.SKYBOX_MODE,R.diffuseColor=new k.Color3(0,0,0),R.specularColor=new k.Color3(0,0,0),R.disableLighting=!0,A.material=R;var $=k.MeshBuilder.CreateBox("crate",{width:200,height:150,depth:200,sideOrientation:1},this.scene);$.material=new k.StandardMaterial("Mat",this.scene),$.material.alpha=0,$.position=new k.Vector3(0,1,0),this.scene.gravity=new k.Vector3(0,-.9,0),this.scene.collisionsEnabled=!0,y.checkCollisions=!0,y.ellipsoid=new k.Vector3(1,1,1),M.checkCollisions=!0,$.checkCollisions=!0;var ae=new k.DirectionalLight("dir01",new k.Vector3(0,-1,-.3),this.scene);M.onReady=()=>{M.optimize(100);var te=new k.ShadowGenerator(1024,ae);k.SceneLoader.ImportMesh("","./assets/mountain-tree/","tree.babylon",this.scene,ge=>{ge[0].material.opacityTexture=null,ge[0].material.backFaceCulling=!1,ge[0].isVisible=!1,ge[0].position.y=M.getHeightAtCoordinates(0,0),te.getShadowMap().renderList.push(ge[0]);for(var fe=0;fe<200;fe++){var be=ge[0].createInstance("i"+fe),me=100-200*Math.random(),Se=100-200*Math.random(),_e=M.getHeightAtCoordinates(me,Se);be.position=new k.Vector3(me,_e,Se),be.rotate(k.Axis.Y,Math.random()*Math.PI*2,k.Space.WORLD);var Ke=.5+2*Math.random();be.scaling.addInPlace(new k.Vector3(Ke,Ke,Ke)),te.getShadowMap().renderList.push(be)}te.getShadowMap().refreshRate=0,te.usePoissonSampling=!0,y.checkCollisions=!0})}}render(){this.engine.runRenderLoop(()=>{this.scene.render()})}dispose(){var y;null===(y=this.engine)||void 0===y||y.dispose()}resize(){var y;this.canvas.width=this.domdiv.offsetWidth,this.canvas.height=this.domdiv.offsetHeight,null===(y=this.engine)||void 0===y||y.resize()}},options:ke},BabylonGltf:{title:"\u6a21\u578b",width:800,height:600,mockjs:function(){return{}},component:class extends x.H{constructor(y,M){super(),this.defOption=Nt,this.domdiv=y,this.setOption(this.defOption,M);const C=document.createElement("canvas");y.appendChild(C),this.canvas=C,C.width=y.offsetWidth,C.height=y.offsetHeight,this.init(),this.addGltf()}init(){this.engine=new k.Engine(this.canvas,!0,{preserveDrawingBuffer:!0,stencil:!0}),this.scene=new k.Scene(this.engine),this.scene.clearColor=new k.Color4(0,0,0,0);const M=new k.GlowLayer("glow",this.scene,{mainTextureSamples:40});M.intensity=.5;let C=0;this.set1=setInterval(()=>{M.intensity=1.5*Math.sin(C)+1.5,C+=.1},100)}addGltf(){k.SceneLoader.LoadAssetContainer("./assets/models/","mylogo.glb",this.scene,y=>{y.addAllToScene(),this.scene.createDefaultCameraOrLight(!0,!0,!0),this.nowOption.environment&&this.scene.createDefaultEnvironment();let M=this.scene.activeCamera;M.lowerRadiusLimit=1,M.upperRadiusLimit=10,M.wheelPrecision=300,M.useAutoRotationBehavior=!0,M.autoRotationBehavior.idleRotationSpeed=this.nowOption.speed,y.meshes.forEach(C=>{if(this.nowOption.sphere){if("\u7403\u4f53"===C.name){const A=new k.Animation("myAnimation","position.y",30,k.Animation.ANIMATIONTYPE_FLOAT,k.Animation.ANIMATIONLOOPMODE_CYCLE),R=[];R.push({frame:0,value:-10}),R.push({frame:300,value:10}),R.push({frame:600,value:-10}),A.setKeys(R),C.animations.push(A),this.scene.beginAnimation(C,0,600,!0)}}else"\u7403\u4f53"===C.name&&C.setEnabled(!1)}),this.render()})}render(){this.engine.runRenderLoop(()=>{this.scene.render()})}dispose(){var y;null===(y=this.engine)||void 0===y||y.dispose(),this.set1&&clearInterval(this.set1)}resize(){var y;this.canvas.width=this.domdiv.offsetWidth,this.canvas.height=this.domdiv.offsetHeight,null===(y=this.engine)||void 0===y||y.resize()}},options:Nt},BabylonTrail:{title:"\u8f68\u8ff9",width:800,height:600,mockjs:function(){return{}},component:class extends x.H{constructor(y,M){super(),this.defOption=rt,this.domdiv=y,this.setOption(this.defOption,M);const C=document.createElement("canvas");y.appendChild(C),this.canvas=C,C.width=y.offsetWidth,C.height=y.offsetHeight,this.init(),this.render()}init(){this.engine=new k.Engine(this.canvas,!0,{preserveDrawingBuffer:!0,stencil:!0}),this.scene=new k.Scene(this.engine),this.scene.clearColor=new k.Color4(0,0,0,0),this.scene.createDefaultCameraOrLight(!0,!0,!1),this.scene.activeCamera.position=new k.Vector3(5,3,-5),this.createTube(),new k.GlowLayer("glow",this.scene)}createTube(){const y=[];for(let Te=-20;Te<20;Te++)y.push(new k.Vector3(0,0,0));var M=k.Mesh.FRONTSIDE,C=.1,A=function(Te,fe){return C-C*Te/40};let R=k.MeshBuilder.CreateTube("tube",{path:y,radius:C,radiusFunction:A,sideOrientation:M,updatable:!0,cap:k.Mesh.CAP_ALL},this.scene);var $=new k.StandardMaterial("mat1",this.scene);$.alpha=1,$.diffuseColor=new k.Color3(.5,.5,1),$.backFaceCulling=!1,$.emissiveColor=new k.Color3(.2,.8,0),R.material=$;var ae=k.MeshBuilder.CreateSphere("sphere",{diameter:.2});ae.position=y[0],ae.material=$;var te=0;const ge=(0,_t.Ud)(()=>Math.random());let ce={u:0,v:0};this.scene.onBeforeRenderObservable.add(()=>{te+=Math.PI/100;let Te=ge(y[0].x,y[0].y,te,7);ce.u+=4*Math.sin(Te),ce.v+=2*Math.cos(Te);let fe=this.uvToxyz(ce.u,ce.v,2);y[0].x=fe.x,y[0].y=fe.y,y[0].z=fe.z;for(let be=y.length-1;be>0;be--){let me=y[be-1];0==me.x&&0==me.y&&0==me.z&&(me.x=fe.x,me.y=fe.y,me.z=fe.z),y[be].x=me.x,y[be].y=me.y,y[be].z=me.z}R=k.MeshBuilder.CreateTube("tube",{path:y,radius:C,radiusFunction:A,sideOrientation:M,instance:R,cap:k.Mesh.CAP_ALL},this.scene),ae.position=y[0]})}uvToxyz(y,M,C){let A=y*Math.PI/180,R=M*Math.PI/180;return{x:-C*Math.cos(R)*Math.cos(A),y:-C*Math.sin(R),z:C*Math.cos(R)*Math.sin(A)}}render(){this.engine.runRenderLoop(()=>{this.scene.render()})}dispose(){var y;null===(y=this.engine)||void 0===y||y.dispose()}resize(){var y;this.canvas.width=this.domdiv.offsetWidth,this.canvas.height=this.domdiv.offsetHeight,null===(y=this.engine)||void 0===y||y.resize()}},options:rt},NodeMaterial:{title:"\u6750\u8d28",width:800,height:600,mockjs:function(){return{}},component:class extends x.H{constructor(y,M){super(),this.defOption=yt,this.domdiv=y,this.setOption(this.defOption,M);const C=document.createElement("canvas");y.appendChild(C),this.canvas=C,C.width=y.offsetWidth,C.height=y.offsetHeight,this.init(),this.render()}init(){this.engine=new k.Engine(this.canvas,!0,{preserveDrawingBuffer:!0,stencil:!0}),this.scene=new k.Scene(this.engine),this.scene.clearColor=new k.Color4(0,0,0,0);const y=new k.ArcRotateCamera("camera",Math.PI/2,Math.PI/2,10,new k.Vector3(0,0,0),this.scene);y.wheelPrecision=100,y.setPosition(new k.Vector3(0,1,3)),this.scene.ambientColor=new k.Color3(1,0,0),new k.HemisphericLight("light1",new k.Vector3(0,.5,1),this.scene),new k.GlowLayer("glow",this.scene,{mainTextureFixedSize:1024,blurKernelSize:64,mainTextureSamples:4}).intensity=.5;const A=new k.StandardMaterial("emitterMaterial",this.scene);A.diffuseColor=new k.Color3(.5,.5,1),A.emissiveColor=new k.Color3(.2,.8,0),A.backFaceCulling=!1;const R=k.MeshBuilder.CreateSphere("sphere",{diameter:.1},this.scene);R.position.y=1,R.material=A,new k.TrailMesh("trail",R,this.scene,.05,100,!0).material=A;const ae=k.MeshBuilder.CreateSphere("sphere",{diameter:.1},this.scene);ae.material=A,new k.TrailMesh("trail",ae,this.scene,.05,100,!0).material=A;let ge=0;this.scene.registerBeforeRender(()=>{let ce=new k.Vector3(1*Math.sin(ge),.5*Math.sin(.3*ge),1*Math.cos(ge));R.position=ce;let Te=new k.Vector3(1.2*Math.cos(ge),.5*Math.sin(.7*ge),1.2*Math.sin(ge));ae.position=Te,ge+=.05})}render(){this.engine.runRenderLoop(()=>{this.scene.render()})}dispose(){var y;null===(y=this.engine)||void 0===y||y.dispose()}resize(){var y;this.canvas.width=this.domdiv.offsetWidth,this.canvas.height=this.domdiv.offsetHeight,null===(y=this.engine)||void 0===y||y.resize()}},options:yt},BabylonDemo:{title:"demo",width:400,height:400,mockjs:function(){return _.mock({"series|4":[{"name|+1":"@name",value:"@integer(10,100)"}]})},component:class extends x.H{constructor(y,M){super(),this.defOption=ot,this.domdiv=y,this.setOption(this.defOption,M);const C=document.createElement("canvas");y.appendChild(C),this.canvas=C,C.width=y.offsetWidth,C.height=y.offsetHeight,this.init(),this.render()}init(){this.engine=new k.Engine(this.canvas,!0,{preserveDrawingBuffer:!0,stencil:!0}),this.scene=new k.Scene(this.engine),this.scene.clearColor=new k.Color4(0,0,0,0),this.scene.createDefaultCameraOrLight(!0,!0,!0),this.scene.createDefaultEnvironment(),this.scene.activeCamera.position=new k.Vector3(5,3,-5),k.MeshBuilder.CreateBox("box",{}),new k.AxesViewer(this.scene,1)}render(){this.engine.runRenderLoop(()=>{this.scene.render()})}dispose(){var y;null===(y=this.engine)||void 0===y||y.dispose()}resize(){var y;this.canvas.width=this.domdiv.offsetWidth,this.canvas.height=this.domdiv.offsetHeight,null===(y=this.engine)||void 0===y||y.resize()}},options:ot},GaugeStripeList:{title:"\u4eea\u8868\u76d8",width:740,height:200,mockjs:function(){return _.mock({"series|4":[{"name|+1":["\u53ef\u7591IP","\u50f5\u5c38\u7f51\u7edc","\u8fdc\u7a0b\u63a7\u5236","\u6728\u9a6c\u6d3b\u52a8"],value:"@integer(100,1000)",unit:"%",max:1200}]})},component:class extends x.H{constructor(y,M){super(),this.divWidth=10,this.divHeight=10,this.defOption=De,this.render=()=>{this.resize()},this.domdiv=y,this.divWidth=y.offsetWidth,this.divHeight=y.offsetHeight,this.setOption(this.defOption,M),y.style.fontSize=this.nowOption.fontSize+"px",this.svg=o.select(y).append("svg").attr("width",this.divWidth).attr("height",this.divHeight).style("position","absolute"),this.barG=this.svg.append("g").attr("class","barG").attr("width",this.divWidth).attr("height",this.divHeight),this.pie=o.pie().value(function(C){return C.value}),this.pie.startAngle(0*Math.PI).endAngle(-2*Math.PI).padAngle(.04).sortValues(null),this.render()}updateData(y){void 0!==y&&(this.u_data=y,y=JSON.parse(JSON.stringify(y)),this.drawGuage(y.series||[]))}drawGuage(y){if(0===y.length)this.barG.attr("display","none");else{y.forEach(fe=>{let be=this.nowOption.userMax;fe.max&&0!=fe.max&&(be=fe.max),0===be&&(be=1);let me=100*fe.value/be;me=me.toFixed(1),"0"===me.split(".")[1]&&(me=me.split(".")[0]),fe.per=me});let C=this.divHeight,{pie:A}=this.nowOption,R=A.r*C/2,$=A.d*C/2,ae=A.cy*C/2,te=A.dash,ge=A.dis*C;const ce=this.barG.selectAll("g").filter(".g").data(y).join("g").attr("class","g").attr("transform",(fe,be)=>(fe.sid=be,`translate(${C*be+C/2+ge*be},${C/2+ae})`));ce.selectAll("path").filter(".path1").data(fe=>[fe]).join("path").attr("class","path1").attr("d",()=>{const fe=o.path();return fe.arc(0,0,R,-Math.PI/2,2*-Math.PI-Math.PI/2,!0),fe}).attr("fill","none").attr("stroke",this.nowOption.backColor).attr("stroke-width",$).attr("stroke-dasharray",te),ce.selectAll("path").filter(".path2").data(fe=>[fe]).join("path").attr("class","path2").attr("d",fe=>{const be=o.path();let me=this.nowOption.userMax;fe.max&&0!=fe.max&&(me=fe.max),0===me&&(me=1);const Se=fe.value/me*(2*Math.PI);return be.arc(0,0,R,-Math.PI/2,-Se-Math.PI/2,!0),be}).attr("fill","none").attr("stroke",fe=>this.valueToColor(fe.per)).attr("stroke-width",$).attr("stroke-dasharray",te),ce.selectAll("text").filter(".value").data(fe=>[fe]).join("text").attr("class","value").text(fe=>fe.per+(fe.unit||"")).attr("fill",this.nowOption.centerValue.color).attr("font-size",this.nowOption.centerValue.fontSize+"em").attr("text-anchor","middle").attr("alignment-baseline","middle");const Te=this.nowOption.title.dy;this.barG.selectAll("text").filter(".textname").data(y).join("text").attr("class","textname").text(fe=>fe.name).attr("fill",this.nowOption.title.color).attr("font-size",this.nowOption.title.fontSize+"em").attr("text-anchor","middle").attr("alignment-baseline","text-after-edge").attr("x",(fe,be)=>C*be+C/2+ge*be).attr("y",C+Te),this.barG.selectAll("text").filter(".textvalue").data(y).join("text").attr("class","textvalue").text(fe=>{let be=fe.value.toFixed(2);return"00"===be.split(".")[1]&&(be=be.split(".")[0]),be}).attr("fill",this.nowOption.title.color).attr("font-size",this.nowOption.title.fontSize+"em").attr("text-anchor","middle").attr("alignment-baseline","text-before-edge").attr("x",(fe,be)=>C*be+C/2+ge*be).attr("y",C+Te)}}valueToColor(y){let M=this.nowOption.colorAndClass[0].color||"#E82323";return this.nowOption.colorAndClass.forEach(C=>{y>=C.gte&&y<=(C.lt?C.lt:1/0)&&(M=C.color)}),M}dispose(){this.svg.remove()}resize(){this.divHeight=this.domdiv.offsetHeight,this.divWidth=this.domdiv.offsetWidth,!(this.divWidth<10)&&(this.divHeight<10||(this.svg.attr("width",this.divWidth).attr("height",this.divHeight),this.barG.attr("width",this.divWidth).attr("height",this.divHeight),this.updateData(this.u_data)))}updateOptions(y){this.setOption(this.defOption,y),this.domdiv.style.fontSize=this.nowOption.fontSize+"px",this.resize()}},options:De},CirclePointBar:{title:"\u5706\u70b9\u67f1",width:1200,height:600,mockjs:function(){return _.mock({series:[{name:"@name","value|2-30":["@integer(10,100)"]}]})},component:class extends x.H{constructor(y,M){super(),this.divWidth=300,this.divHeight=300,this.sk=80,this.uniforms=[],this.defOption=Le,this.pointsarr=[],this.imgload=new g.dpR,this.render=()=>{this.request=requestAnimationFrame(this.render),this.renderer.render(this.scene,this.camera),this.nowOption.lightSpeed>0&&this.uniforms.forEach((C,A)=>{C.boxH.value+=this.nowOption.lightSpeed,C.boxH.value>30&&(C.boxH.value=-10)}),0!=this.nowOption.rotationSpeed&&(this.pgroup.rotation.y+=this.nowOption.rotationSpeed/100),this.planemesh&&0!=this.nowOption.background.speed&&(this.planemesh.rotation.z-=this.nowOption.background.speed/100)},this.domdiv=y,this.divWidth=y.offsetWidth,this.divHeight=y.offsetHeight,this.setOption(this.defOption,M),this.scene=new g.xsS,this.sk=this.divWidth<=this.divHeight?this.divWidth/this.nowOption.camera.viewAngle:this.divHeight/this.nowOption.camera.viewAngle,this.camera=new g.iKG(-this.divWidth/this.sk,this.divWidth/this.sk,this.divHeight/this.sk,-this.divHeight/this.sk,-2001,2e3),this.camera.position.set(this.nowOption.camera.x,this.nowOption.camera.y,this.nowOption.camera.z),this.camera.lookAt(0,this.nowOption.camera.target,0),this.renderer=new g.CP7({alpha:!0,antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(0,0),this.renderer.setSize(this.divWidth,this.divHeight),this.pgroup=new g.ZAu,this.scene.add(this.pgroup),this.drawPlane(),this.init()}getPoints(y){const M=y.map(R=>new g.Pa4(R.x,R.h,0)),A=new g.YT8(M).getPoints(10);this.pointsarr=A}init(){this.domdiv.appendChild(this.renderer.domElement),this.render(),this.control=new ye.z(this.camera,this.renderer.domElement),this.control.target.set(0,this.nowOption.camera.target,0),this.control.update()}emptyGroup(y){const M=y.children.length;for(let C=0;C<M;C++){const A=y.children[0];A.traverse(R=>{R.isMesh&&(R.material.dispose(),R.geometry.dispose()),A.remove(R)}),A.isMesh&&(A.material.dispose(),A.geometry.dispose()),y.remove(A)}}drawrunCylinder(y,M,C,A){const $={u_color:{value:new g.Ilk(this.nowOption.lightColor.substr(0,7))},u_colorTop:{value:new g.Ilk(this.nowOption.defColor[0].substr(0,7))},u_colorBot:{value:new g.Ilk(this.nowOption.defColor[1].substr(0,7))},boxH:{value:-20}};let ae=this.nowOption.hRange.range2/3;ae%1==0&&(ae+=".0");const ge=new g.jyz({uniforms:$,vertexShader:"\n                varying vec2 vUv;\n                varying float v_pz;\n                void main(){\n                    vUv = uv;\n                    v_pz = (modelMatrix * vec4(position, 1.0)).y;\n                    gl_Position\t= projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n                }\n                ",fragmentShader:`\n            uniform float  boxH;\n            // uniform float  opacity;\n            varying vec2 vUv;\n            varying float v_pz;\n            uniform vec3 u_color;\n            uniform vec3 u_colorTop;\n            uniform vec3 u_colorBot;\n            float plot (vec2 st, float pct){\n                return  smoothstep( pct-2.0, pct, v_pz) - smoothstep( pct, pct+0.25, v_pz);\n            }\n            void main(){\n                float f1 = plot(vUv,boxH);\n                vec3 colTB = mix(u_colorBot,u_colorTop,(v_pz)/${ae});\n                vec4 b1 = mix(vec4(u_color,vUv.y),vec4(colTB,f1*vUv.y),0.2);\n                gl_FragColor = mix(vec4(colTB,vUv.y*vUv.y),b1,f1);\n                // gl_FragColor = vec4(colTB,vUv.y*vUv.y);\n                if(v_pz<0.001){\n                    gl_FragColor = vec4(colTB,0.8);\n                }\n            }`,side:g.ehD,transparent:!0,depthWrite:!0,depthTest:!1}),ce=new g.m_w(this.nowOption.circleR.rTop,this.nowOption.circleR.rBot,M,64,1,!1),Te=new g.Kj0(ce,ge);Te.position.set(y,M/2,C),Te.renderOrder=A,this.pgroup.add(Te),this.uniforms.push($)}drawPlane(){this.nowOption.background.width<=0&&(this.nowOption.background.width=.01);const y=this.imgload.load(this.nowOption.background.imgUrl);y.wrapS=g.rpg,y.wrapT=g.rpg,y.repeat.set(1,1);const M=new g.BKK(this.nowOption.background.width,this.nowOption.background.width,1,1),C=new g.vBJ({map:y,side:g.ehD,transparent:!0,depthWrite:!0,depthTest:!1});this.planemesh=new g.Kj0(M,C),this.planemesh.rotateX(Math.PI/2),this.planemesh.renderOrder=0,this.scene.add(this.planemesh)}changePlaneMap(y){""===y||null==y||(this.planemesh.material.map=this.imgload.load(y),this.planemesh.material.needsUpdate=!0)}changePlaneGeometry(y){y<=0&&(y=.01),this.planemesh.geometry.dispose(),this.planemesh.geometry=new g.BKK(y,y,1,1)}updateData(y){if(void 0===y.series)return;this.u_data=JSON.parse(JSON.stringify(y));const M=y.series[0].value||[];if(0===M.length)return;1===M.length&&M.push(M[0]),this.nowOption.sort&&M.sort((ge,ce)=>ce-ge);const C=Math.max(...M),A=Math.min(...M),R=(0,o.scaleLinear)().domain([0,M.length-1]).rangeRound([this.nowOption.circleR.range1,this.nowOption.circleR.range2]),$=(0,o.scaleLinear)().domain([A,C]).rangeRound([this.nowOption.hRange.range1,this.nowOption.hRange.range2]),ae=M.map((ge,ce)=>({x:R(ce),h:$(ge),v:ge}));this.getPoints(ae),this.emptyGroup(this.pgroup);let te=0;this.checkOption(),this.pointsarr.forEach((ge,ce)=>{for(let Te=0;Te<ce*this.nowOption.numK;Te++){const fe=ge.x+Math.random()*this.nowOption.circleR.random,be=Math.random()*Math.PI*2,me=fe*Math.cos(be),Se=ge.y+Math.random()*this.nowOption.hRange.random,_e=fe*Math.sin(be);this.drawrunCylinder(me,Se,_e,te),te++}})}checkOption(){this.nowOption.numK<1&&(this.nowOption.numK=1),this.nowOption.numK>60&&(this.nowOption.numK=60)}dispose(){cancelAnimationFrame(this.request),this.domdiv.removeChild(this.renderer.domElement)}resize(){this.divHeight=this.domdiv.offsetHeight,this.divWidth=this.domdiv.offsetWidth,this.sk=this.divWidth<=this.divHeight?this.divWidth/this.nowOption.camera.viewAngle:this.divHeight/this.nowOption.camera.viewAngle,this.camera.aspect=this.divWidth/this.divHeight,this.camera.left=this.divWidth/-this.sk,this.camera.right=this.divWidth/this.sk,this.camera.top=this.divHeight/this.sk,this.camera.bottom=this.divHeight/-this.sk,this.camera.updateProjectionMatrix(),this.camera.updateProjectionMatrix(),this.renderer.setSize(this.divWidth,this.divHeight)}updateOptions(y){this.nowOption.background.imgUrl!==y.background.imgUrl&&this.changePlaneMap(y.background.imgUrl),this.nowOption.background.width!==y.background.width&&this.changePlaneGeometry(y.background.width),this.setOption(this.defOption,y),this.camera.position.set(this.nowOption.camera.x,this.nowOption.camera.y,this.nowOption.camera.z),this.camera.lookAt(0,this.nowOption.camera.target,0),this.control.target.set(0,this.nowOption.camera.target,0),this.control.update(),this.resize(),this.updateData(this.u_data)}},options:Le},BarStripeList:{title:"\u6761\u5f62\u56fe",width:"600",height:"400",mockjs:function(){return _.mock({"series|5":[{"name|+1":["PHP CGI\u53c2\u6570\u6ce8\u5165\u6f0f\u6d1e","POP3\u670d\u52a1\u7528\u6237\u5f31\u53e3\u4ee4\u8ba4\u8bc1","IMAP\u670d\u52a1\u7528\u6237\u8ba4\u8bc1\u5931\u8d25","eb\u670d\u52a1\u8fdc\u7a0bsql\u6ce8\u5165\u653b\u51fb\u53ef\u7591\u884c\u4e3a","SMB2\u62a5\u6587\u534f\u5546\u8d8a\u754c\u5185\u5b58\u5f15\u7528\u6f0f\u6d1e (MS09-050)"],"value|2":["@integer(10,100)"],"unit|1":["%","ms","$","S"]}]})},component:class extends x.H{constructor(y,M){super(),this.divWidth=10,this.divHeight=10,this.defOption=ne,this.render=()=>{this.resize()},this.domdiv=y,this.divWidth=y.offsetWidth,this.divHeight=y.offsetHeight,this.setOption(this.defOption,M),y.style.fontSize=this.nowOption.fontSize+"px",this.svg=o.select(y).append("svg").attr("width",this.divWidth).attr("height",this.divHeight).style("position","absolute"),this.barG=this.svg.append("g").attr("class","barG").attr("width",this.divWidth).attr("height",this.divHeight),this.render()}updateData(y){void 0!==y&&(this.u_data=y,y=JSON.parse(JSON.stringify(y)),this.drawBar(y.series||[]))}drawBar(y){const M=y.length,ae=this.nowOption.colors.length;if(ae<1&&(this.nowOption.colors=["#2AC670","#454752","#C62222"]),0===M)this.barG.attr("display","none");else{let te=this.divWidth-0-0,{rowHeight:ge,rectHeight:ce}=this.nowOption;ce<=2&&(ce=2),te<5&&(te=5);const fe=this.barG.selectAll("g").filter(".g").data(y).join("g").attr("class","g").attr("transform",(Ae,it)=>(Ae.sid=it,`translate(0,${0+it*ge})`));let be=this.nowOption.colNum,me=this.nowOption.rectk.wk;const Se=te/(be+(be-1)*me);let _e=this.nowOption.rowNum,Ke=this.nowOption.rectk.hk,We=ce/(_e+(_e-1)*Ke);const wt=[];let at=0;for(let Ae=0;Ae<this.nowOption.colNum;Ae++)for(let it=0;it<this.nowOption.rowNum;it++)wt.push({x:Ae,y:it,id:at++});fe.selectAll("rect").filter(".rect").data(Ae=>{if(void 0===Ae.value||0===Ae.value.length)return[];if(Ae.oldvalue=JSON.parse(JSON.stringify(Ae.value)),"number"==typeof Ae.value||1===Ae.value.length){let ft="number"==typeof Ae.value?Ae.value:Ae.value[0],Ct=void 0===this.nowOption.userMax?100:this.nowOption.userMax,Tt=0;ft>Ct?ft=Ct:Tt=Ct-ft,Ae.value=[ft,Tt]}const it=Ae.value||[],Dt=o.sum(it);if(0===Dt)return[];const Ut=[];let sn=0;it.map((ft,Ct)=>{Ut.push({value:ft,per:ft/Dt,key:Math.floor(wt.length*ft/Dt),sum:sn+=Math.round(wt.length*ft/Dt),cid:Ct})});const Rt=[];return wt.map(ft=>{const Ct=ft.id;for(let Tt=0;Tt<Ut.length;Tt++){const Kt={x:ft.x,y:ft.y,id:ft.id,cid:Ut[Tt].cid,sid:Ae.sid};if(0==Tt){if(Ct<Ut[Tt].sum){Rt.push(Kt);break}}else{if(Ct>=Ut[Tt-1].sum&&Ct<Ut[Tt].sum){Rt.push(Kt);break}Tt==Ut.length-1&&Rt.push(Kt)}}}),Rt}).join("rect").attr("class","rect").attr("rid",Ae=>Ae.id).attr("x",0).attr("y",Ae=>this.nowOption.rectDy+Ae.y*(We*(1+Ke))).attr("rx",this.nowOption.rectk.rxy).attr("ry",this.nowOption.rectk.rxy).attr("height",We).attr("width",Se).style("transform","translateY(1em)").transition().ease(o.easePolyIn).duration(750).delay(Ae=>100*Ae.sid).attr("x",Ae=>Ae.x*Se*(1+me)).attr("fill",Ae=>this.nowOption.colors[Ae.cid%ae]),this.barG.selectAll("text").filter(".text").data(y).join("text").attr("class","text").attr("x",0).attr("y",(Ae,it)=>0+it*ge).attr("opacity",0).text(Ae=>Ae.name).attr("fill",this.nowOption.textColor).attr("font-size","1em").attr("text-anchor","start").attr("alignment-baseline","before-edge").transition().ease(o.easePolyIn).duration(750).delay(Ae=>100*Ae.sid).attr("opacity",1),this.barG.selectAll("text").filter(".text2").data(y).join("text").attr("class","text2").attr("x",0).attr("y",(Ae,it)=>0+it*ge).attr("opacity",0).text(Ae=>(void 0===Ae.oldvalue?"":Ae.oldvalue)+" "+(Ae.unit||"")).attr("fill",this.nowOption.textColor).attr("font-size","1em").attr("text-anchor","end").attr("alignment-baseline","before-edge").transition().ease(o.easePolyIn).duration(750).delay(Ae=>100*Ae.sid).attr("opacity",1).attr("x",te)}}dispose(){this.svg.remove()}resize(){this.divHeight=this.domdiv.offsetHeight,this.divWidth=this.domdiv.offsetWidth,!(this.divWidth<10)&&(this.divHeight<10||(this.svg.attr("width",this.divWidth).attr("height",this.divHeight),this.barG.attr("width",this.divWidth).attr("height",this.divHeight),this.updateData(this.u_data)))}updateOptions(y){this.setOption(this.defOption,y),this.domdiv.style.fontSize=this.nowOption.fontSize+"px",this.resize()}},options:ne},BufferGeometry:{title:"\u51e0\u4f55\u4f53",width:"600",height:"400",mockjs:function(){return _.mock({"list|1-10":[{"id|+1":1}]})},component:class{constructor(y,M){this.setIntervals=[],this.clock=new g.SUY,this.bars=[],this.sk=80,this.viewAngle=3,this.uniformSix={u_h:{value:1},u_colorA:{value:new g.Pa4(221/255,246/255,62/255)},u_colorB:{value:new g.Pa4(25/255,162/255,66/255)}},this.vertexShaderSix="\n          varying vec3 v_pos;\n          void main(){\n          v_pos = position;\n          gl_Position\t= projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n          }\n          ",this.fragmentShaderSix2="\n              uniform vec3 u_colorA;\n              uniform vec3 u_colorB;\n              varying vec3 v_pos;\n              uniform float u_h;\n              void main(){\n                  float op = (v_pos.z+u_h/2.0)/u_h;\n                  float op1 = v_pos.y/2.0;\n                  if(v_pos.y>=0.49){\n                      op1 = 0.98*smoothstep(0.49,0.5,v_pos.y);\n                  }\n                  vec3 cor = mix(u_colorB,u_colorA,op);\n                  gl_FragColor = vec4(cor,op1);\n                //   gl_FragColor =  vec4(v_pos.y+0.5,.0,.0,1.0);\n              }\n      ",this.render=()=>{this.request=requestAnimationFrame(this.render),this.renderer.render(this.scene,this.camera),this.resize()},this.__id=(new Date).getTime(),this.webglDivId=y,this.webglDivId.style.position="relative",this.divWidth=this.webglDivId.offsetWidth,this.divHeight=this.webglDivId.offsetHeight,this.scene=new g.xsS,this.sk=this.divWidth<=this.divHeight?this.divWidth/this.viewAngle:this.divHeight/this.viewAngle,this.camera=new g.iKG(-this.divWidth/this.sk,this.divWidth/this.sk,this.divHeight/this.sk,-this.divHeight/this.sk,-200,200),this.camera.position.set(0,0,10),this.renderer=new g.CP7({alpha:!0,antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(6710886,0),this.renderer.setSize(this.divWidth,this.divHeight),this.init(),this.xiaoxingxing(),this.addplane(),this.addcylinder(),this.Cylinder6()}init(){this.initLight(),this.webglDivId.appendChild(this.renderer.domElement),this.render()}addcylinder(){const y=new g.fHI(.001,.6,1,6);var M=new g.RSm({});const C=new g.Kj0(y,M);C.rotateX(Math.PI/2),C.position.x=2,this.scene.add(C),setInterval(()=>{C.rotation.y+=.03},100)}addplane(){const y=new g.BKK(1,1,1),M=new g.vBJ({color:16777215,side:g.ehD}),C=new g.Kj0(y,M);C.rotation.z=Math.PI/4,C.position.x=-2,this.scene.add(C);const A=Math.PI/4,R=y.attributes.position.array;let $=0,ae=0;setInterval(()=>{$+=.04,ae=.5*Math.abs(Math.cos($)),R[0]=-ae*Math.sin(3*A),R[1]=-ae*Math.cos(3*A),R[9]=ae*Math.sin(3*A),R[10]=ae*Math.cos(3*A),y.attributes.position.needsUpdate=!0},100)}Cylinder6(){const y=2*Math.PI/6,M=new g.u9r,C=.8,R=new Float32Array([C*Math.cos(0*y),.5,C*Math.sin(0*y),C*Math.cos(1*y),.5,C*Math.sin(1*y),C*Math.cos(2*y),.5,C*Math.sin(2*y),C*Math.cos(3*y),.5,C*Math.sin(3*y),C*Math.cos(4*y),.5,C*Math.sin(4*y),C*Math.cos(5*y),.5,C*Math.sin(5*y),1*Math.cos(0*y),-.5,1*Math.sin(0*y),1*Math.cos(1*y),-.5,1*Math.sin(1*y),1*Math.cos(2*y),-.5,1*Math.sin(2*y),1*Math.cos(3*y),-.5,1*Math.sin(3*y),1*Math.cos(4*y),-.5,1*Math.sin(4*y),1*Math.cos(5*y),-.5,1*Math.sin(5*y),0,.5,0,0,-.5,-0]),$=new g.TlE(R,3);M.setAttribute("position",$),M.index=new g.TlE(new Uint16Array([0,12,1,1,12,2,2,12,3,3,12,4,4,12,5,5,12,0,6,13,7,7,13,8,8,13,9,9,13,10,10,13,11,11,13,6,0,1,6,1,6,7,1,2,7,2,7,8,2,3,8,3,8,9,3,4,9,4,9,10,4,5,10,5,10,11,5,0,11,0,11,6]),1);const ae=new g.jyz({vertexShader:this.vertexShaderSix,fragmentShader:this.fragmentShaderSix2,side:g.ehD,uniforms:this.uniformSix,transparent:!0,depthWrite:!1}),te=new g.Kj0(M,ae);this.scene.add(te),te.rotateX(Math.PI/2),te.rotateY(Math.PI/2);let ge=0,ce=0;setInterval(()=>{ge+=.1,ce=0,R[ce]=1+.25*Math.sin(ge),R[ce+18]=1.2+.25*Math.sin(ge),ce=9,R[ce]=-1-.25*Math.sin(ge),R[ce+18]=-1.2-.25*Math.sin(ge),$.needsUpdate=!0,this.uniformSix.u_h.value=1+.6*Math.cos(ce)},100)}xiaoxingxing(){let y=0;const M=new g.u9r,C=new Float32Array([0,.2,0,.2,0,0,0,-.2,0,-.2,0,0,0,1,0,1,0,0,0,-1,0,-1,0,0]),A=new g.TlE(C,3);M.setAttribute("position",A),M.index=new g.TlE(new Uint16Array([3,4,1,1,6,3,0,5,2,2,7,0]),1);const R=new g.vBJ({color:16777215,side:g.ehD}),$=new g.Kj0(M,R);this.scene.add($),$.position.x=2,setInterval(()=>{y+=.15,C[13]=1+.25*(Math.sin(y)+Math.sin(y/10)),C[19]=-1-.25*(Math.sin(y)+Math.sin(y/10)),C[15]=1+.25*Math.cos(y),C[21]=-1-.25*Math.cos(y),A.needsUpdate=!0},100)}initLight(){const y=new g.vmT(16777147,526368,1);this.scene.add(y)}dispose(){this.removeSceneChildrens(),this.clearInterval(),setTimeout(()=>{this.cancelAnimation()},1),this.webglDivId.removeChild(this.renderer.domElement)}removeSceneChildrens(){const y=this.scene.children.length;for(let M=0;M<y;M++)this.scene.children[0].traverse(A=>{A.isMesh&&(A.material.dispose(),A.geometry.dispose()),this.scene.remove(A)})}cancelAnimation(){cancelAnimationFrame(this.request)}clearInterval(){const y=this.setIntervals.length;if(!(y<=0))for(let M=0;M<y;M++)null!=this.setIntervals[M]&&clearInterval(this.setIntervals[M])}resize(){this.divWidth=this.webglDivId.offsetWidth,this.divHeight=this.webglDivId.offsetHeight,this.sk=this.divWidth<=this.divHeight?this.divWidth/this.viewAngle:this.divHeight/this.viewAngle,this.camera.left=this.divWidth/-this.sk,this.camera.right=this.divWidth/this.sk,this.camera.top=this.divHeight/this.sk,this.camera.bottom=this.divHeight/-this.sk,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.divWidth,this.divHeight)}updateData(y){}updateOptions(y){}}},D3alarmlist:{title:"\u544a\u8b66\u5217\u8868",width:"600",height:"200",mockjs:function(){return _.mock({series:[{name:"\u53d1\u751f\u8b66\u62a5\u6570",value:"@integer(100,10000)"},{name:"\u5f71\u54cd\u5e94\u7528\u6570",value:"@integer(100,10000)"},{name:"\u5f71\u54cd\u4e8b\u52a1\u6570",value:"@integer(100,10000)"},{name:"\u5f85\u5904\u7406\u544a\u8b66\u6570",value:"@integer(100,10000)"}]}).series},component:class{constructor(y,M,C,A){this.__id=(new Date).getTime(),this.divWidth=300,this.divHeight=300,this.u_data={},this.defOption={fontSize:16,colors:[{color:"#00d4f3"},{color:"#08d69d"},{color:"#00d4f3"},{color:"#08d69d"}]},this.lastvalue=[],this.firstLoad=!0,this.defColor=o.scaleOrdinal(o.schemeCategory10),this.render=()=>{this.resize()},this.domdiv=y,this.divWidth=y.offsetWidth,this.divHeight=y.offsetHeight,this.setOption(M),y.style.fontSize=this.nowOption.fontSize+"px",this.svg=o.select(y).append("svg").attr("width",this.divWidth).attr("height",this.divHeight).style("position","absolute"),this.svg.append("defs").html(`\n                <linearGradient id="linearB${this.__id}" x1 = '0%' x2 = '100%' y1 = '0%' y2 = '0%'>\n                    <stop stop-opacity="0" offset="0%" stop-color="#FFF"></stop>\n                    <stop stop-opacity="0.5" offset="70%" stop-color="#FFF"></stop>\n                    <stop stop-opacity="1" offset="100%" stop-color="#FFF"></stop>\n                </linearGradient>\n                <linearGradient id="linearC${this.__id}" x1 = '0%' x2 = '100%' y1 = '0%' y2 = '0%'>\n                    <stop stop-opacity="1" offset="0%" stop-color="#FFF"></stop>\n                    <stop stop-opacity="0.5" offset="30%" stop-color="#FFF"></stop>\n                    <stop stop-opacity="0" offset="100%" stop-color="#FFF"></stop>\n                </linearGradient>\n                `),this.listG=this.svg.append("g").attr("class","listG"),this.cordefs=this.svg.append("defs"),this.render()}updateData(y){var M;const C=JSON.parse(JSON.stringify(y)),A=C;if(void 0===A||null==A||""==A)return;!0===this.firstLoad&&(this.firstLoad=!1,this.svg.attr("transform","scale(0.1)").attr("opacity",0).transition().ease(o.easePolyIn).duration(1e3).attr("transform","scale(1)").attr("opacity",1));const R=A.length,$=[],ae=[];if(!(void 0===R||R<1)){for(let te=0;te<R;te++)$.push(A[te].value||0),A[te].id=te,A[te].color=(null===(M=this.nowOption.colors[te])||void 0===M?void 0:M.color)||this.defColor(te),ae.push(A[te].color);this.u_data=C,this.setcolrs(ae),this.drawList(A),setTimeout(()=>{this.lastvalue=$},1100)}}drawList(y){const M=y.length;let C=120;const R=(this.divHeight<100?100:this.divHeight)/4,$=R/3;let ae=100;const te=this.divWidth-100>0?this.divWidth-100:100;te/M>C&&(C=te/M),ae=1.2*C;const ge=-(M-1)*C/2,ce=[],Te=this.listG.selectAll("g").data(y).join("g").attr("transform",(me,Se)=>{const _e=ge+Se*C;return me.xp=_e,ce.push(_e),`translate(${_e},0)`}),fe=[];for(let me=0;me<ce.length;me++)0===me?fe.push(ce[me]-C/2,ce[me]+C/2):fe.push(ce[me]+C/2);Te.selectAll("rect").filter(".rect1").data(me=>[me]).join("rect").attr("class","rect1").attr("x",-C/2).attr("width",C).style("fill",me=>"url(#linearA"+(me.id||0)+this.__id+")").attr("height",R),Te.selectAll("path").filter(".patht").data(me=>[me]).join("path").attr("class","patht").attr("d",me=>{const Se=Math.abs($*fe[me.id]/ae),_e=Math.abs($*fe[me.id+1]/ae);return me.xp>0?`M${-C/2} 0 l${C} 0 l-${_e} -${$} l-${Math.abs(C+Se-_e)} 0 Z`:me.xp<0?`M${-C/2} 0 l${C} 0 l${_e} -${$} l-${Math.abs(C+_e-Se)} 0 Z`:`M${-C/2} 0 l${C} 0 l-${_e} -${$} l-${Math.abs(C-Se-_e)} 0 Z`}).style("fill",me=>"url(#linearD"+(me.id||0)+this.__id+")");const be=.6*$;Te.selectAll("path").filter(".pathl").data(me=>[me]).join("path").attr("class","pathl").attr("d",`M${-C/2+10} ${R/2+.5*be} l${1.5*be} 0 l-${be} -${be} l-${.5*be} 0`).style("fill","url(#linearB"+this.__id+")"),Te.selectAll("path").filter(".pathr").data(me=>[me]).join("path").attr("class","pathr").attr("d",`M${C/2-10} ${R/2+.5*be} l-${1.5*be} 0 l${be} -${be} l${.5*be} 0`).style("fill","url(#linearC"+this.__id+")"),Te.selectAll("text").filter(".name").data(me=>[me]).join("text").attr("class","name").attr("x",0).attr("y",0).attr("dy",R/2).attr("text-anchor","middle").attr("dominant-baseline","middle").text(me=>me.name).attr("fill","#FFF").attr("font-size","0.7em").attr("opacity",.8),Te.selectAll("text").filter(".value").data(me=>[me]).join("text").attr("class","value").attr("x",0).attr("y",0).attr("dy",-R/2).attr("dominant-baseline","inherit").attr("text-anchor","middle").attr("fill",me=>me.color||"#FFF").attr("font-size","1.5em").transition().ease(o.easePolyIn).duration(1e3).tween("text",me=>{if("number"==typeof me.value){const Se=o.interpolate(this.lastvalue[me.id]||0,me.value);return function(_e){o.select(this).text(o.format(",d")(Se(_e)))}}return function(){o.select(this).text(me.value)}})}setcolrs(y){this.cordefs.selectAll("radialGradient").remove(),this.cordefs.selectAll("linearGradient").remove();for(let M=0;M<y.length;M++){const C=this.cordefs.append("linearGradient").attr("id",`linearA${M}${this.__id}`).attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%");C.append("stop").attr("stop-opacity","1").attr("offset","0%").attr("stop-color",`${y[M]}`),C.append("stop").attr("stop-opacity",".1").attr("offset","100%").attr("stop-color",`${y[M]}`);const A=this.cordefs.append("linearGradient").attr("id",`linearD${M}${this.__id}`).attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%");A.append("stop").attr("stop-opacity","0").attr("offset","0%").attr("stop-color",`${y[M]}`),A.append("stop").attr("stop-opacity","1").attr("offset","100%").attr("stop-color",`${y[M]}`)}}setOption(y){void 0===y&&(y={}),this.nowOption=this.deepCopy(this.defOption,y)}deepCopy(y,M){const C=Object.assign({},y);for(const A in M)"object"!=typeof y[A]||null===y[A]||Array.isArray(y[A])?void 0!==M[A]&&(C[A]=M[A]):C[A]=this.deepCopy(y[A],M[A]);return C}dispose(){this.svg.remove()}resize(){this.divHeight=this.domdiv.offsetHeight,this.divWidth=this.domdiv.offsetWidth,this.svg.attr("width",this.divWidth).attr("height",this.divHeight),this.listG.attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.updateData(this.u_data)}setFontSize(y){this.nowOption.fontSize=y,this.domdiv.style.fontSize=this.nowOption.fontSize+"px"}updateOptions(y){this.setFontSize(y.fontSize),this.nowOption.colors=y.colors,this.updateData(this.u_data)}}},Mulpies:{title:"\u6df7\u5408\u56fe",width:"800",height:"800",mockjs:function(){const dt=[];for(let y=1;y<=60;y++)y<20?dt.push({name:'G1-@string("upper", 5)-'+y,groupId:1,value:"@integer(10,100)","data|3":["@integer(10,100)"]}):y>=20&&y<40?dt.push({name:'G2-@string("upper", 5)-'+y,groupId:2,value:"@integer(10,100)","data|3":["@integer(10,100)"]}):y>=40&&y<50?dt.push({name:'G3-@string("upper", 5)-'+y,groupId:3,value:"@integer(10,100)","data|3":["@integer(10,100)"]}):y>=50&&y<60&&dt.push({name:'G4-@string("upper", 5)-'+y,groupId:4,value:"@integer(10,100)","data|3":["@integer(10,100)"]});return _.mock({legend:[{name:"CPU\u4f7f\u7528\u7387",max:100,color:"#31F1FF"},{name:"\u5185\u5b58\u4f7f\u7528\u7387",max:100,color:"#704AEA"},{name:"\u78c1\u76d8\u5bb9\u91cf",max:100,color:"#52F8BD"}],group:[{id:1,name:"\u4e1a\u52a1\u7cfb\u7edf01",color:"#00FFF9"},{id:2,name:"\u4e1a\u52a1\u7cfb\u7edf02",color:"#57BFFF"},{id:3,name:"\u4e1a\u52a1\u7cfb\u7edf03",color:"#537FFD"},{id:4,name:"\u4e1a\u52a1\u7cfb\u7edf04",color:"#36FFA0"}],series:dt})},component:class{constructor(y,M,C,A){this.__id=(new Date).getTime(),this.divWidth=300,this.divHeight=300,this.request=0,this.defOption={margin:10,fontSize:16,pointlegend:[{gte:0,lt:60,label:"0-60",color:"#FFFFFF"},{gte:60,lt:80,label:"60-80",color:"#FCB33C"},{gte:80,label:"80",color:"#FF544D"}],timeInterval:4},this.dki=.29,this.dko=.6,this._time=0,this.render=()=>{this._time++,this.request=requestAnimationFrame(this.render),this.outLineG.attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")rotate("+.044*this._time+")")},this.domdiv=y,this.divWidth=y.offsetWidth,this.divHeight=y.offsetHeight,this.callback=C,this.scope=A,this.setOption(M),y.style.fontSize=this.nowOption.fontSize+"px",this.svg=o.select(y).append("svg").attr("width",this.divWidth).attr("height",this.divHeight).style("position","absolute"),this.outLineG=this.svg.append("g").attr("class","outLineG").attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.inerLineG=this.svg.append("g").attr("class","inerLineG").attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.backpieG=this.svg.append("g").attr("class","backpieG").attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.bigpieG=this.svg.append("g").attr("class","bigpieG").attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.pointG=this.svg.append("g").attr("class","pointG").attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.lengedG=this.svg.append("g").attr("class","lengedG").attr("transform","translate("+3*this.nowOption.margin+","+(this.divHeight-3*this.nowOption.margin)+")"),this.percentG=this.svg.append("g").attr("class","percentG").attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.rotateG=this.svg.append("g").attr("class","rotateG").attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.rotateGc1=this.rotateG.append("g").attr("class","rotateGc1"),this.cordefs=this.svg.append("defs").attr("class","cordefs"),this.render()}updateData(y){if(void 0===y||null==y||""==y)return;const M=y.series;if(void 0===M||null==M||""==M)return;let C=y.legend;(void 0===C||null==C||""==C)&&(C=[{name:"XXX",max:100,color:"#31F1FF",mapLegend:[{gte:0,lt:60,laber:"0-60",color:"#FFFFFF"},{gte:60,lt:80,laber:"60-80",color:"#FCB33C"},{gte:80,laber:"80",color:"#FF544D"}]}]);let A=y.group;if((void 0===A||null==A||""==A)&&(A=[{id:0,name:"XXX",color:"#31F1FF"}]),M.length<1)return;const R=[];C.map(_e=>{null==_e.max&&(_e.max=100),null==_e.mapLegend&&(_e.mapLegend=[{gte:0,lt:60,laber:"0-60",color:"#FFFFFF"},{gte:60,lt:80,laber:"60-80",color:"#FCB33C"},{gte:80,laber:"80",color:"#FF544D"}]),R.push(_e.color||"#ffffff",_e.color||"#ffffff")});const $=C.length;M.map(_e=>{if(null==_e.data&&(_e.data=[]),_e.data.length>$){const We=_e.data.splice(0,$);_e.data=We}const Ke=this.setOnecolor(C,_e.data);_e.cdata=Ke,_e.value=void 0===_e.value?0:+_e.value||0,_e.levelColor=this.valueTocolor(_e.value)[1],_e.maxlevel=this.valueTocolor(_e.value)[0]});const te=o.pie().sort((_e,Ke)=>_e.groupId-Ke.groupId).value(_e=>1)(M),ge=this.dki*this.divHeight/2-2*this.nowOption.margin,ce=this.dko*this.divHeight/2-2*this.nowOption.margin,Te=ce-ge,fe=C.length,be=Te/fe,me=[];me.push(0);for(let _e=1;_e<fe;_e++)me.push(_e*be-3,_e*be+3);me.push(Te);const Se=(180*te[0].endAngle/Math.PI||0)/2;this.drawBline(me,R,ge),this.drawBackarea(Se,te,A,ge,ce),this.drawPoints(Se,te,me,ge,ce,C),this.drawPercent(me,ge),this.drawLegend(C,A)}setOnecolor(y,M){const C=[];return M.map((A,R)=>{let ae="#ffffff",te=0;y[R].mapLegend.map((ge,ce)=>{A>=ge.gte&&A<=(null==ge.lt?1/0:ge.lt)&&(ae=ge.color,te=ce)}),C[R]=[A,y[R].color,ae,te]}),C}valueTocolor(y){const M=this.nowOption.pointlegend;let C="#ffffff",A=!1;return M.map((R,$)=>{y>=R.gte&&y<=(null==R.lt?1/0:R.lt)&&(C=R.color,$==M.length-1&&(A=!0))}),[A,C]}drawPercent(y,M){this.percentG.selectAll("text").filter(".pert").data(y).join("text").attr("class","pert").attr("fill","#ffffff").attr("y",C=>""+(-M-C)).attr("dy",(C,A)=>A%2==0?"-0.5em":"0.5em").attr("font-size","0.75em").attr("text-anchor","middle").attr("dominant-baseline","central").text((C,A)=>A%2==0?"0%":"100%").transition().ease(o.easePolyIn).duration(1e3).attr("opacity",.5)}drawPoints(y,M,C,A,R,$){const ae=this.pointG.selectAll("g").filter(".pg").data(M).join("g").attr("class","pg").attr("transform",Se=>(Se.data.myrang=180/Math.PI*(Se.endAngle+Se.startAngle)/2-y,`rotate(${180/Math.PI*(Se.endAngle+Se.startAngle)/2-90-y})`));ae.transition().ease(o.easePolyIn).duration(1e3).attr("opacity",1);const te=[];$.map((Se,_e)=>{const Ke=o.scaleLinear().domain([0,Se.max]).rangeRound([C[2*_e],C[2*_e+1]]);te.push(Ke)}),ae.selectAll("circle").filter(".circle1a").data(Se=>Se.data.cdata).join("circle").attr("class","circle1a").attr("r",1.8).attr("fill",Se=>Se[2]).transition().ease(o.easePolyIn).duration(1e3).attr("cx",(Se,_e)=>A+te[_e%te.length](+Se[0]||0)),ae.selectAll("circle").filter(".circle2").data(()=>[1]).join("circle").attr("class","circle2").attr("r",1).attr("cx",(Se,_e)=>R+44).attr("fill","#ffffff").attr("opacity",.5),ae.selectAll("line").data(Se=>[Se.index]).join("line").attr("fill","#ffffff").attr("x1",0).attr("y1",-R-6).attr("x2",0).attr("y2",-R-40).attr("stroke","#FFFFFF").attr("stroke-width",1).attr("stroke-dasharray",[2,5]).attr("stroke-opacity",Se=>Se%2==1?.5:0).attr("transform",(Se,_e)=>`rotate(${360*_e/60})`);const ge=[],ce=[];ae.selectAll("text").filter(".text").data(Se=>[Se.data]).join("text").attr("class","text").attr("fill",Se=>Se.levelColor).attr("opacity",.5).attr("x",Se=>Se.myrang>180?""+(-R-50):`${R+50}`).attr("font-size","0.75em").attr("text-anchor",Se=>Se.myrang>180?"end":"start").attr("dominant-baseline","central").style("transform",Se=>Se.myrang>180?"rotateY(180deg) rotateX(180deg)":"rotateY(0deg) rotateX(0deg)").text(Se=>Se.name).each(function(){ge.push(this.getBBox().width),ce.push(this.getBBox().height)});const Te=o.max(ge),fe=o.max(ce);this.drawOutLines(R,Te),this.drawInnerLines(A);const be=M.sort((Se,_e)=>Se.index-_e.index),me=[];if(be.map(Se=>{!0===Se.data.maxlevel&&me.push(Se)}),this.setfi&&clearInterval(this.setfi),this.set1&&clearInterval(this.set1),me.length>0){this.rotateGc1.attr("transform",`rotate(${-90-y})`);let Se=0;this.drawRoateRect(me[Se],y,A,R,Te,fe),this.callback.call(this.scope,me[Se].data),Se++,this.setfi=setInterval(()=>{if(Se>=me.length){clearInterval(this.setfi);let _e=0;this.drawRoateRect(be[_e],y,A,R,Te,fe),this.callback.call(this.scope,be[_e].data),_e++,this.set1=setInterval(()=>{_e>=be.length&&(_e=0),this.drawRoateRect(be[_e],y,A,R,Te,fe),this.callback.call(this.scope,be[_e].data),_e++},1e3*this.nowOption.timeInterval)}else this.drawRoateRect(me[Se],y,A,R,Te,fe),this.callback.call(this.scope,me[Se].data);Se++},1e3*this.nowOption.timeInterval)}else{this.rotateGc1.attr("transform",`rotate(${-90-y})`);let Se=0;this.drawRoateRect(be[Se],y,A,R,Te,fe),this.callback.call(this.scope,be[Se].data),Se++,this.set1=setInterval(()=>{Se>=be.length&&(Se=0),this.drawRoateRect(be[Se],y,A,R,Te,fe),this.callback.call(this.scope,be[Se].data),Se++},1e3*this.nowOption.timeInterval)}}drawLegend(y,M){const C=this.lengedG.selectAll("g").filter(".g1").data(M).join("g").attr("class","g1");C.selectAll("rect").filter(".circleg").data(me=>[me]).join("rect").attr("class","circleg").attr("width",16).attr("height",4).attr("y",-2).attr("x",0).attr("fill",me=>me.color),C.selectAll("text").filter(".text").data(me=>[me]).join("text").attr("class","text").text(me=>me.name).attr("x",20).attr("font-size","0.75em").attr("fill","#FFFFFF").attr("text-anchor","start").attr("dominant-baseline","central");const $=[],ae=[];let te=0;const ge=[];this.lengedG.selectAll("g").filter(".g1").each(function(){const me=this.getBBox();$.push(me.width+20),ae.push(me.height),ge.push(te),te+=me.width+20});const ce=o.max(ae);this.lengedG.selectAll("g").filter(".g1").attr("transform",(me,Se)=>`translate(${ge[Se]},0)`);const Te=this.lengedG.selectAll("g").filter(".g2").data(y).join("g").attr("class","g2");Te.selectAll("rect").filter(".circleg2").data(me=>[me]).join("rect").attr("class","circleg2").attr("width",16).attr("height",8).attr("y",-4).attr("x",0).attr("rx",1.6).attr("ry",1.6).attr("stroke",me=>me.color).attr("fill","none").attr("stroke-width",1),Te.selectAll("text").filter(".textg2").data(me=>[me]).join("text").attr("class","textg2").text(me=>me.name).attr("x",20).attr("font-size","0.75em").attr("fill","#FFFFFF").attr("text-anchor","start").attr("dominant-baseline","central");let fe=0;const be=[];this.lengedG.selectAll("g").filter(".g2").each(function(){const me=this.getBBox();be.push(fe),fe+=me.width+20}),this.lengedG.selectAll("g").filter(".g2").attr("transform",(me,Se)=>`translate(${be[Se]},${1.5*-ce})`)}drawRoateRect(y,M,C,A,R,$){const ae=y.data.levelColor;this.rotateGc1.transition().ease(o.easePolyIn).duration(500).attr("stroke-opacity",.8).attr("transform",`rotate(${180/Math.PI*(y.endAngle+y.startAngle)/2-90-M})`),this.rotateGc1.selectAll("line").data([1]).join("line").attr("y1",0).attr("x1",C-20).attr("y2",0).attr("x2",A+40).attr("stroke",ae).attr("stroke-width",1);const te=R+20,ge=$+10;this.rotateGc1.selectAll("rect").data([1]).join("rect").attr("width",te).attr("height",ge).attr("y",-ge/2).attr("x",A+40).attr("rx",ge/4).attr("ry",ge/4).attr("stroke",ae).attr("fill","none").attr("stroke-width",1),this.rotateGc1.selectAll("path").data([1]).join("path").attr("stroke",ae).attr("stroke-width",1).attr("d",o.symbol().type(o.symbolTriangle).size(40)).attr("fill","none").attr("transform","translate("+(C-40)+",0) rotate(90) scale(1,1.5)")}drawOutLines(y,M){const C=Array(60).fill(1);this.outLineG.selectAll("line").data(C).join("line").attr("fill","#ffffff").attr("x1",0).attr("y1",-y-M-70).attr("x2",0).attr("y2",-y-M-70-5).attr("stroke","#FFFFFF").attr("stroke-width",1).attr("transform",(A,R)=>`rotate(${360*R/60})`).transition().ease(o.easePolyIn).duration(1e3).attr("stroke-opacity",.5)}drawInnerLines(y){const M=Array(60).fill(1);this.inerLineG.selectAll("line").data(M).join("line").attr("fill","#ffffff").attr("x1",0).attr("y1",(C,A)=>A%5==0?10-y:12-y).attr("x2",0).attr("y2",(C,A)=>A%5==0?14-y:13-y).attr("stroke","#FFFFFF").attr("stroke-width",1).attr("transform",(C,A)=>`rotate(${360*A/60})`).transition().ease(o.easePolyIn).duration(1e3).attr("stroke-opacity",.5)}drawBline(y,M,C){this.backpieG.selectAll("path").filter(".yuan").data(y).join("path").attr("class","yuan").attr("fill",($,ae)=>M[ae]).attr("fill-opacity",.6).attr("d",$=>o.arc().startAngle(0).endAngle(2*Math.PI).innerRadius(C+$).outerRadius(C+$+1)()).transition().ease(o.easePolyIn).duration(1e3).attr("opacity",1);const A=y.length,R=[];for(let $=0;$<A;$+=2)R.push([y[$],y[$+1],M[$]]);this.backpieG.selectAll("path").filter(".pathd").data(R).join("path").attr("class","pathd").attr("fill",$=>$[2]).attr("fill-opacity",.1).attr("d",$=>o.arc().startAngle(0).endAngle(2*Math.PI).innerRadius(C+$[0]).outerRadius(C+$[1])()).transition().ease(o.easePolyIn).duration(1e3).attr("opacity",1)}drawBackarea(y,M,C,A,R){const $=this.bigpieG.selectAll("g").filter(".pgpath").data(M).join("g").attr("class","pgpath").attr("transform",()=>`rotate(${-y})`);$.transition().ease(o.easePolyIn).duration(1e3).attr("opacity",1),$.selectAll("path").filter(".background").data(ae=>[ae]).join("path").attr("class","background").attr("fill",ae=>{let te="#ffffff";return C.map(ge=>{ge.id==ae.data.groupId&&(te=ge.color)}),te}).attr("fill-opacity",.2).attr("d",ae=>o.arc().startAngle(ae.startAngle).endAngle(ae.endAngle).innerRadius(R+10).outerRadius(R+20)()),$.selectAll("line").data(ae=>[ae]).join("line").attr("fill",ae=>{let te="#ffffff";return C.map(ge=>{ge.id==ae.data.groupId&&(te=ge.color)}),te}).attr("x1",0).attr("y1",-R).attr("x2",0).attr("y2",-A).attr("stroke","#FFFFFF").attr("stroke-width",1).attr("stroke-opacity",.2).attr("transform",ae=>`rotate(${180/Math.PI*(ae.endAngle+ae.startAngle)/2})`)}setOption(y){void 0===y&&(y={}),this.nowOption=this.deepCopy(this.defOption,y)}roundcolor(){return o.hsl(255*Math.random(),1,.5).formatHex()}deepCopy(y,M){const C=Object.assign({},y);for(const A in M)"object"!=typeof y[A]||null===y[A]||Array.isArray(y[A])?void 0!==M[A]&&(C[A]=M[A]):C[A]=this.deepCopy(y[A],M[A]);return C}dispose(){cancelAnimationFrame(this.request),this.sti&&clearInterval(this.sti),this.setfi&&clearInterval(this.setfi),this.svg.remove()}resize(){this.divHeight=this.domdiv.offsetHeight,this.divWidth=this.domdiv.offsetWidth,!(this.divHeight<100||this.divWidth<100)&&(this.svg.attr("width",this.divWidth).attr("height",this.divHeight),this.bigpieG.attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.outLineG.attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.inerLineG.attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.backpieG.attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.pointG.attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.percentG.attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.rotateG.attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.lengedG.attr("transform","translate("+3*this.nowOption.margin+","+(this.divHeight-3*this.nowOption.margin)+")"))}setFontSize(y){this.nowOption.fontSize=y,this.domdiv.style.fontSize=y+"px"}setMargin(y){this.nowOption.margin=+y}setLegend(y){this.nowOption.pointlegend=y}settimeInterval(y){y<0&&(y=1),this.nowOption.timeInterval=y}updateOptions(y){this.setLegend(y.pointlegend||this.defOption.pointlegend),this.settimeInterval(y.timeInterval||this.defOption.timeInterval),this.setFontSize(y.fontSize||this.defOption.fontSize),this.setMargin(y.margin||this.defOption.margin),this.resize()}}},AlarmFaultList:{title:"\u544a\u8b66\u5217\u8868",width:"1300",height:"800",mockjs:function(){let dt=40+Math.round(1e3*Math.random()),y=[];for(let M=0;M<dt;M++){let C=1+Math.round(7*Math.random());y.push({name:"G"+C+"-@url()-"+M,id:M,value:Math.round(100*Math.random()),groupId:C})}return _.mock({infolist:[{name:"\u544a\u8b66\u6570",value:dt},{name:"\u538b\u7f29\u7387","value|50-100.2":1},{name:"\u6545\u969c\u6570",value:"@integer(1,20)"}],group:[{id:1,name:"1\u57fa\u4e8eAI\u572832\u5206\u949f\u5185\u805a\u5408\u4e8615\u4e2a\u4e8b\u4ef6",info:[{name:"\u5f71\u54cd\u6307\u6807",value:"\u6bcf\u5206\u949f\u9519\u8bef\u6570, \u9519\u8bef\u7387"},{name:"URL",value:"@url"},{name:"IP",value:"@ip"}]},{id:2,name:"2\u57fa\u4e8eAI\u57282\u5206\u949f\u5185\u805a\u5408\u4e863\u4e2a\u4e8b\u4ef6",info:[{name:"\u5f71\u54cd\u6307\u6807",value:"\u54cd\u5e94\u65f6\u95f4,\u6bcf\u5206\u949f\u9519\u8bef\u6570"},{name:"URL",value:"@url"},{name:"IP",value:"@ip"}]},{id:3,name:"3\u57fa\u4e8eAI\u57281\u5c0f\u65f637\u5206\u949f48\u79d2\u5185\u805a\u5408\u4e864\u4e2a\u4e8b\u4ef6",info:[{name:"\u5f71\u54cd\u6307\u6807",value:"\u54cd\u5e94\u65f6\u95f4, \u9519\u8bef\u7387"},{name:"URL",value:"@url"},{name:"IP",value:"@ip"}]},{id:4,name:"4\u57fa\u4e8eAI\u57283\u5c0f\u65f641\u5206\u949f1\u79d2\u5185\u805a\u5408\u4e8624\u4e2a\u4e8b\u4ef6",info:[{name:"\u5f71\u54cd\u6307\u6807",value:"\u6bcf\u5206\u949f\u9519\u8bef\u6570, \u541e\u5410\u7387, \u9519\u8bef\u7387"},{name:"URL",value:"@url"},{name:"IP",value:"@ip"}]},{id:5,name:"5\u57fa\u4e8eAI\u57281\u5c0f\u65f653\u79d2\u5185\u805a\u5408\u4e862\u4e2a\u4e8b\u4ef6",info:[{name:"\u5f71\u54cd\u6307\u6807",value:"\u6bcf\u5206\u949f\u9519\u8bef\u6570, \u541e\u5410\u7387, \u54cd\u5e94\u65f6\u95f4"},{name:"URL",value:"@url"},{name:"IP",value:"@ip"}]},{id:6,name:"6\u57fa\u4e8eAI\u57286\u5c0f\u65f633\u79d2\u5185\u805a\u5408\u4e8620\u4e2a\u4e8b\u4ef6",info:[{name:"\u5f71\u54cd\u6307\u6807",value:"\u6bcf\u5206\u949f\u9519\u8bef\u6570, \u541e\u5410\u7387,  \u9519\u8bef\u7387"},{name:"URL",value:"@url"},{name:"IP",value:"@ip"}]},{id:7,name:"7\u57fa\u4e8eAI\u57287\u5c0f\u65f64\u79d2\u5185\u805a\u5408\u4e8656\u4e2a\u4e8b\u4ef6",info:[{name:"\u5f71\u54cd\u6307\u6807",value:"\u6bcf\u5206\u949f\u9519\u8bef\u6570, \u54cd\u5e94\u65f6\u95f4, \u9519\u8bef\u7387"},{name:"URL",value:"@url"},{name:"IP",value:"@ip"}]},{id:8,name:"8\u57fa\u4e8eAI\u57288\u5c0f\u65f623\u79d2\u5185\u805a\u5408\u4e86200\u4e2a\u4e8b\u4ef6",info:[{name:"\u5f71\u54cd\u6307\u6807",value:" \u541e\u5410\u7387, \u54cd\u5e94\u65f6\u95f4, \u9519\u8bef\u7387"},{name:"URL",value:"@url"},{name:"IP",value:"@ip"}]}],series:y})},component:class{constructor(y,M,C,A){this.__id=(new Date).getTime(),this.divWidth=300,this.divHeight=300,this.defOption={margin:10,fontSize:16,lineNum:30,rightLineNum:5,timeInterval:4,centerSpace:650,rightHeight:120,listLegend:[{min:80,max:1/0,color:"#FF544D"},{min:60,max:80,color:"#FCB33C"},{min:0,max:60,color:"#11F2DB"}]},this.defcolor="#6beefe",this.deftextcolor="#10F6F2",this.gradsd=[],this._i=0,this.alli=0,this.render=()=>{this.request=requestAnimationFrame(this.render),this._i=this.alli%100;let $=1;0==this._i&&($=0),this.alli<105?(this.gradsd[0][2].attr("offset",this._i-20*$+"%"),this.gradsd[0][0].attr("offset",`${this._i}%`),this.gradsd[0][1].attr("offset",`${this._i+5*$}%`)):105<=this.alli&&this.alli<=205&&(this.gradsd[1][2].attr("offset",this._i-10*$+"%"),this.gradsd[1][0].attr("offset",`${this._i}%`),this.gradsd[1][1].attr("offset",`${this._i+10*$}%`)),this.alli+=2,this.alli>350&&(this.alli=0)},this.domdiv=y,this.divWidth=y.offsetWidth,this.divHeight=y.offsetHeight,this.callback=C,this.scope=A,this.setOption(M),y.style.fontSize=this.nowOption.fontSize+"px",this.svg=o.select(y).append("svg").attr("width",this.divWidth).attr("height",this.divHeight).style("position","absolute"),this.cordefs=this.svg.append("defs").attr("class","cordefs");let R=1;for(let $=0;$<2;$++){R=0==$?.3:.5;let ae=this.cordefs.append("linearGradient").attr("id",`grad_${this.__id}_F${$}`).attr("x1","0%").attr("x2","100%").attr("y1","0%").attr("y2","0%");ae.append("stop").attr("offset","0%").attr("stop-color",`${this.defcolor}`).attr("stop-opacity",R);let te=ae.append("stop").attr("offset","0%").attr("stop-color",`${this.defcolor}`).attr("stop-opacity",R),ge=ae.append("stop").attr("offset","0%").attr("stop-color",`${this.defcolor}`).attr("stop-opacity",1),ce=ae.append("stop").attr("offset","0%").attr("stop-color",`${this.defcolor}`).attr("stop-opacity",R);ae.append("stop").attr("offset","100%").attr("stop-color",`${this.defcolor}`).attr("stop-opacity",R),this.gradsd.push([ge,ce,te])}this.noiseG=this.svg.append("g").attr("class","noiseG").attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.leftLineG=this.svg.append("g").attr("class","leftLineG").attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.rightLineG=this.svg.append("g").attr("class","rightLineG").attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.lcrListG=this.svg.append("g").attr("class","lcrListG").attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.leftListG=this.lcrListG.append("g").attr("class","leftListG"),this.rightListG=this.lcrListG.append("g").attr("class","rightListG"),this.rightBackG=this.lcrListG.append("g").attr("class","rightBackG"),this.centerListG=this.lcrListG.append("g").attr("class","centerListG"),this.render(),this.drawNoise()}updateData(y){if(void 0===y||null==y||""==y)return;let M=y.series;if(void 0===M||null==M||""==M)return;let C=y.group;(void 0===C||null==C||""==C)&&(C=[]);let A=y.infolist;if((void 0===A||null==A||""==A)&&(A=[]),M.length<1)return;M.forEach((We,wt)=>{We.color=this.valueTocolor(We.value)});let R=Math.ceil(M.length/this.nowOption.lineNum),$=[];for(let We=0;We<R;We++)$[We]=[];let ae=new Set;C.map(We=>{ae.add(We.id?We.id:"")}),M.map((We,wt)=>{$[Math.floor(wt/this.nowOption.lineNum)].push(We)});let te=[],ge=new Set,ce=0;M.map(We=>{ae.has(We.groupId)?(ge.add(We.groupId),We.rightpage=ce,ge.size==this.nowOption.rightLineNum?(te[ce]=Array.from(ge),ge.clear(),ce++):te[ce]=Array.from(ge)):We.rightpage=null});let fe=0,be=this.drawLeftListg($[fe]);this.drawCenterListg(A);let me=[],Se=6*this.nowOption.lineNum;for(let We=0;We<Se;We++)me.push([Math.random()*be-be/2,2*Math.sin(1.57*We/Se)]);if(this.drawleftLines(me),C.length<=this.nowOption.rightLineNum){let We=this.drawRightListg(C);this.drawrightLines(We)}else{let We=[];te[0].map(at=>{for(let Ae=0;Ae<C.length;Ae++)if(at==C[Ae].id){We.push(C[Ae]);break}});let wt=this.drawRightListg(We);this.drawrightLines(wt)}this.set1&&clearInterval(this.set1),this.settime1&&clearTimeout(this.settime1),this.timetout&&clearTimeout(this.timetout);let _e=0,Ke=0;this.timetout=setTimeout(()=>{o.select(this.textarr[_e]).transition().ease(o.easePolyIn).duration(500).attr("opacity",1).attr("font-size","16px").transition().ease(o.easePolyIn).duration(500).delay(1e3*this.nowOption.timeInterval-1e3).attr("opacity",.5).attr("font-size","12px");let We=o.select(this.textarr[_e]).attr("pageId");if(We&&Ke!=We){let wt=[];te[We].map(Ae=>{for(let it=0;it<C.length;it++)if(Ae==C[it].id){wt.push(C[it]);break}});let at=this.drawRightListg(wt);this.drawrightLines(at),Ke=We}this.redBoxdisaplay(o.select(this.textarr[_e]).attr("groupId")),this.callback.call(this.scope,$[fe][_e]),_e++},500),this.set1=setInterval(()=>{o.select(this.textarr[_e]).transition().ease(o.easePolyIn).duration(500).attr("opacity",1).attr("font-size","16px").transition().ease(o.easePolyIn).duration(500).delay(1e3*this.nowOption.timeInterval-1e3).attr("opacity",.5).attr("font-size","12px");let We=o.select(this.textarr[_e]).attr("pageId");if(We&&Ke!=We){let wt=[];te[We].map(Ae=>{for(let it=0;it<C.length;it++)if(Ae==C[it].id){wt.push(C[it]);break}});let at=this.drawRightListg(wt);this.drawrightLines(at),Ke=We}this.redBoxdisaplay(o.select(this.textarr[_e]).attr("groupId")),this.callback.call(this.scope,$[fe][_e]),_e++,_e>=this.textarr.length&&(_e=0,$.length>1&&(this.settime1=setTimeout(()=>{fe++,fe>=$.length&&(fe=0);let wt=this.drawLeftListg($[fe]),at=[],Ae=6*this.nowOption.lineNum;for(let it=0;it<Ae;it++)at.push([Math.random()*wt-wt/2,2*Math.sin(1.57*it/Ae)]);this.drawleftLines(at)},1e3*this.nowOption.timeInterval+100)))},1e3*this.nowOption.timeInterval+200)}drawNoise(){const y=new r.L;for(var M=Math.random(),C=performance.now(),A=[],R=0;R<5;R++){for(var $=[],ae=0;ae<=10;ae++)$.push({x:ae/10,y:Math.random(),dt:M});A.push($)}var ge=o.line().x(fe=>fe.x*(this.nowOption.centerSpace+10)/4-(this.nowOption.centerSpace+10)/8).y(fe=>function(fe){var be=Math.sin(2*Math.PI*M+fe.x)+Math.sin(1*Math.PI*M-fe.x);let me=1;return(0==fe.x||1==fe.x)&&(me=0),(.1==fe.x||.9==fe.x)&&(me=.1),(.2==fe.x||.8==fe.x)&&(me=.3),30*me*y.noise3d(fe.x,fe.y,be)}(fe)).curve(o.curveCatmullRom.alpha(.5));this.noiseG.selectAll("path").filter(".line").data(A).join("path").attr("class","line").attr("stroke-width",1).attr("stroke-opacity",.5).attr("stroke",this.defcolor).attr("fill","none").attr("stroke-linejoin","unset").attr("stroke-linecap","unset").attr("d",ge);let Te=()=>{this.requestLine=requestAnimationFrame(Te),M=.5*(performance.now()-C)%5e3/5e3,this.noiseG.selectAll("path").filter(".line").data(A).join("path").attr("class","line").attr("d",ge)};Te()}crpath(y){let M=this.nowOption.centerSpace/2,R=[M/4,0],$=[M,y],ae=[R[0]+.5*M,R[1]],te=[$[0],$[1]+-.2*y];return`M${R[0]},${R[1]} C${ae[0]},${ae[1]} ${te[0]},${te[1]} ${$[0]},${$[1]}`}clpath(y){let M=this.nowOption.centerSpace/2+10*y[1],R=[-M,y[0]],$=[-M/4,0],ae=[R[0]+.5*M,R[1]],te=[$[0]-.6*M,$[1]];return`M${R[0]},${R[1]} C${ae[0]},${ae[1]} ${te[0]},${te[1]} ${$[0]},${$[1]}`}drawleftLines(y){this.leftLineG.selectAll("path").filter(".line").data(y).join("path").attr("class","line").attr("stroke-width",1).attr("stroke-opacity",.3).style("stroke",`url(#grad_${this.__id}_F0)`).attr("fill","none").attr("stroke-linejoin","unset").attr("stroke-linecap","unset").attr("d",M=>this.clpath(M)),this.leftLineG.selectAll("circle").filter(".circle").data(y).join("circle").attr("class","circle").attr("r","1").attr("fill",this.defcolor).attr("fill-opacity",.5).attr("cx",M=>-this.nowOption.centerSpace/2-10*M[1]).attr("cy",M=>M[0])}drawrightLines(y){this.rightLineG.selectAll("path").filter(".line").data(y).join("path").attr("class","line").attr("stroke-width",1).attr("stroke-opacity",1).style("stroke",`url(#grad_${this.__id}_F1)`).attr("fill","none").attr("stroke-linejoin","unset").attr("stroke-linecap","unset").attr("d",M=>this.crpath(M)),this.rightLineG.selectAll("circle").filter(".circle").data(y).join("circle").attr("class","circle").attr("r","1.2").attr("cx",this.nowOption.centerSpace/2).attr("cy",M=>M).attr("fill",this.defcolor)}drawLeftListg(y){this.textarr=[];let C=this;this.leftListG.selectAll("text").filter(".name").data(y).join("text").attr("class","name").attr("groupId",R=>R.groupId).attr("pageId",R=>R.rightpage).attr("fill",R=>null!=R.color?R.color:"#ffffff").text((R,$)=>R.name).each(function(){C.textarr.push(this)}).attr("x",(R,$)=>10*-Math.random()-30).attr("y",(R,$)=>22*$+"px").attr("font-size","12px").attr("text-anchor","end").attr("dominant-baseline","central").transition().ease(o.easePolyIn).duration(1e3).attr("opacity",.5);let A=0;return this.leftListG.each(function(){A=this.getBBox().height}),this.leftListG.attr("transform",(R,$)=>`translate(${-this.nowOption.centerSpace/2},${-A/2})`),A}drawCenterListg(y){let M=0;y.length>1&&(M=140*(y.length-1));let A=this.centerListG.selectAll("g").data(y).join("g").attr("transform",(R,$)=>(R.id=$,`translate(${140*$-M/2},0)`));A.selectAll("text").filter(".value").data(R=>[R]).join("text").attr("class","value").attr("fill","#ffffff").attr("dy",R=>1==R.id?"14px":"0px").attr("font-size",R=>1==R.id?"38px":"24px").attr("text-anchor","middle").attr("dominant-baseline","text-after-edge").text((R,$)=>R.value||"").transition().ease(o.easePolyIn).duration(1e3).attr("opacity",.9),A.selectAll("text").filter(".name").data(R=>[R]).join("text").attr("class","name").attr("fill","#ffffff").attr("dy",R=>1==R.id?"32px":"0").attr("y","8px").attr("font-size","16px").attr("text-anchor","middle").attr("dominant-baseline","text-before-edge").text((R,$)=>R.name||"").transition().ease(o.easePolyIn).duration(1e3).attr("opacity",.9),A.append("path").filter(R=>1==R.id).attr("d",o.symbol().type(o.symbolTriangle).size(20)).attr("fill","#ffffff").attr("transform",R=>"translate(0,30)")}drawRightListg(y){let M=0;y.length>1&&(M=(y.length-1)*this.nowOption.rightHeight);let C=this.rightListG.selectAll("g").data(y).join("g").attr("groupid",ce=>ce.id);C.selectAll("rect").filter(".rect1").data([0]).join("rect").attr("class","rect1").attr("x",-1).attr("y",-6).attr("width",2).attr("height",12).attr("fill",this.deftextcolor).transition().ease(o.easePolyIn).duration(1e3).attr("opacity",.9),C.selectAll("text").filter(".name").data(ce=>[ce]).join("text").attr("class","name").attr("fill",this.deftextcolor).attr("dx",10).attr("y",0).attr("font-size","0.75em").attr("text-anchor","start").attr("dominant-baseline","central").text((ce,Te)=>ce.name).transition().ease(o.easePolyIn).duration(1e3).attr("opacity",.9),C.selectAll("text").filter(".info").data(ce=>ce.info||[]).join("text").attr("class","info").attr("fill","#ffffff").attr("dy",0).attr("y",(ce,Te)=>1.5*-(Te+1)-.5+"em").attr("font-size","0.75em").attr("text-anchor","start").attr("dominant-baseline","central").text((ce,Te)=>ce.name+"\uff1a"+ce.value).transition().ease(o.easePolyIn).duration(1e3).attr("opacity",.9);let $=[],ae=[];this.rightListG.selectAll("g").each(function(){const ce=this.getBBox();$.push(ce.height),ae.push({h:ce.height,w:ce.width,id:o.select(this).attr("groupid")})});let te=[];this.rightListG.selectAll("g").attr("transform",(ce,Te)=>{let fe=Te*this.nowOption.rightHeight+$[Te]/2-M/2;return te.push(fe),`translate(30,${fe})`}),this.rightListG.attr("transform",(ce,Te)=>`translate(${this.nowOption.centerSpace/2},0)`),this.rightBackG.attr("transform",(ce,Te)=>`translate(${this.nowOption.centerSpace/2},0)`);let ge=this.rightBackG.selectAll("g").data(ae).join("g").attr("opacity",0).attr("groupid",ce=>ce.id);return this.rightBackG.selectAll("g").attr("transform",(ce,Te)=>`translate(30,${Te*this.nowOption.rightHeight+$[Te]/2-M/2})`),ge.selectAll("rect").filter(".rect1").data(ce=>[ce]).join("rect").attr("class","rect1").attr("x",-15).attr("rx",10).attr("ry",10).attr("y",ce=>9-ce.h-10).attr("width",ce=>ce.w+30).attr("height",ce=>ce.h+20).attr("fill","#ff3333").attr("fill-opacity",.15).attr("stroke","#ff3333"),te}redBoxdisaplay(y){this.rightBackG.selectAll("g").filter(function(){let M=o.select(this).attr("groupid");return y==M}).transition().ease(o.easePolyIn).duration(500).attr("opacity",1).transition().ease(o.easePolyIn).duration(500).delay(1e3*this.nowOption.timeInterval-1e3).attr("opacity",0)}setOption(y){void 0===y&&(y={}),this.nowOption=this.deepCopy(this.defOption,y)}roundcolor(){return o.hsl(255*Math.random(),1,.5).formatHex()}deepCopy(y,M){let C=Object.assign({},y);for(let A in M)"object"!=typeof y[A]||null===y[A]||Array.isArray(y[A])?void 0!==M[A]&&(C[A]=M[A]):C[A]=this.deepCopy(y[A],M[A]);return C}dispose(){cancelAnimationFrame(this.request),cancelAnimationFrame(this.requestLine),this.sti&&clearInterval(this.sti),this.settime1&&clearTimeout(this.settime1),this.svg.remove()}resize(){this.divHeight=this.domdiv.offsetHeight,this.divWidth=this.domdiv.offsetWidth,!(this.divHeight<100||this.divWidth<100)&&(this.svg.attr("width",this.divWidth).attr("height",this.divHeight),this.noiseG.attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.lcrListG.attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.rightLineG.attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"),this.leftLineG.attr("transform","translate("+this.divWidth/2+","+this.divHeight/2+")"))}setFontSize(y){this.nowOption.fontSize=y,this.domdiv.style.fontSize=y+"px",this.resize()}setlineNum(y,M){+y<1&&(y=1),+M<1&&(M=1),this.nowOption.lineNum=+y,this.nowOption.rightLineNum=+M}setcenterSpace(y){+y<1&&(y=1),this.nowOption.centerSpace=+y}setrightHeight(y){+y<1&&(y=1),this.nowOption.rightHeight=+y}settimeInterval(y){y<1&&(y=1),this.nowOption.timeInterval=y}valueTocolor(y){y<0&&(y=0);let C="#ffffff";return this.nowOption.listLegend.map((A,R)=>{y>=+A.min&&y<(null==A.max||null==A.max?1/0:+A.max)&&(C=A.color)}),C}clInter(){this.set1&&clearInterval(this.set1),this.settime1&&clearTimeout(this.settime1)}}},BarStackRect:{title:"\u5806\u53e0\u67f1\u72b6\u56fe",width:"800",height:"300",mockjs:function(){return _.mock({"series|8":[{name:'@time("HH:mm")',"value|3":["@integer(10,100)"]}]})},component:class extends x.H{constructor(y,M){super(),this.divWidth=10,this.divHeight=10,this.defOption=z,this.render=()=>{this.resize()},this.domdiv=y,this.divWidth=y.offsetWidth,this.divHeight=y.offsetHeight,this.setOption(this.defOption,M),this.svg=o.select(y).append("svg").attr("width",this.divWidth).attr("height",this.divHeight).style("position","absolute").style("font-size",this.nowOption.fontSize),this.barG=this.svg.append("g").attr("class","barG").attr("width",this.divWidth).attr("height",this.divHeight),this.title=o.select(this.domdiv).append("div").style("position","absolute"),this.render()}updateData(y){void 0!==y&&(y=JSON.parse(JSON.stringify(y)),this.u_data=y,this.drawBar(y.series||[]),this.drawTitle(y.series||[]))}drawBar(y){const M=y.length,C=this.nowOption.space,{top:A,bottom:R,left:$,right:ae}=this.nowOption.boxMargin;if(0===M)this.barG.attr("display","none");else{let te=(this.divWidth-$-ae)/(M+(M-1)*C),ge=this.divHeight-R-A,ce=te*C;ge<=5&&(ge=5),te<5&&(te=5);const Te=this.barG.selectAll("g").filter(".g").data(y).join("g").attr("class","g").attr("transform",(at,Ae)=>(at.sid=Ae,`translate(${$+Ae*(te+ce)},${A})`));let fe=this.nowOption.colnum,be=this.nowOption.rectk.wk;const me=te/(fe+(fe-1)*be);let Se=this.nowOption.rownum,_e=this.nowOption.rectk.hk,Ke=ge/(Se+(Se-1)*_e);const We=[];let wt=0;for(let at=this.nowOption.rownum-1;at>=0;at--)for(let Ae=0;Ae<this.nowOption.colnum;Ae++)We.push({x:Ae,y:at,id:wt++});Te.selectAll("rect").filter(".rect").data(at=>{const Ae=at.value||[],it=o.sum(Ae);if(0===it)return[];const Dt=[];let Ut=0;Ae.map((Rt,ft)=>{Dt.push({value:Rt,per:Rt/it,key:Math.floor(We.length*Rt/it),sum:Ut+=Math.round(We.length*Rt/it),cid:ft})});const sn=[];return We.map(Rt=>{const ft=Rt.id;for(let Ct=0;Ct<Dt.length;Ct++){const Tt={x:Rt.x,y:Rt.y,id:Rt.id,cid:Dt[Ct].cid,sid:at.sid};if(0==Ct){if(ft<Dt[Ct].sum){sn.push(Tt);break}}else{if(ft>=Dt[Ct-1].sum&&ft<Dt[Ct].sum){sn.push(Tt);break}Ct==Dt.length-1&&sn.push(Tt)}}}),sn}).join("rect").attr("class","rect").attr("rid",at=>at.id).attr("x",at=>at.x*me*(1+be)).attr("y",ge-Ke).attr("rx",this.nowOption.rectk.rxy).attr("ry",this.nowOption.rectk.rxy).attr("height",Ke).attr("width",me).transition().ease(o.easePolyIn).duration(500).delay(at=>20*at.sid).attr("y",at=>at.y*(Ke*(1+_e))).attr("fill",at=>this.nowOption.legend[at.cid||0].color),this.barG.selectAll("text").filter(".text").data(y).join("text").attr("class","text").attr("x",(at,Ae)=>$+Ae*(te+ce)+te/2).attr("y",this.divHeight).text(at=>at.name).attr("fill",this.nowOption.xAxes.color).attr("font-size",this.nowOption.xAxes.fontSize+"em").attr("text-anchor","middle").attr("alignment-baseline","after-edge"),this.barG.selectAll("line").filter(".line").data(y).join("line").attr("class","line").attr("x1",(at,Ae)=>$+Ae*(te+ce)+te/2).attr("y1",A+ge+this.nowOption.xAxes.linedy).attr("x2",(at,Ae)=>$+Ae*(te+ce)+te/2).attr("y2",A+ge+this.nowOption.xAxes.linedy+this.nowOption.xAxes.lineheight).attr("stroke",this.nowOption.xAxes.color).attr("stroke-width","1px")}}drawTitle(y){let M=this.nowOption.legend;const C=[];y.map(R=>{R.value.map((ae,te)=>{C[te]||(C[te]=0),C[te]+=ae})}),M.map((R,$)=>{R.sum=C[$]});let A="";M.map((R,$)=>{A+=`<span style="color:${R.color}">${R.name}&nbsp${R.sum}&nbsp &nbsp &nbsp &nbsp</span>`}),this.title.style("font-size",this.nowOption.title.fontSize+"em").style("opacity",this.nowOption.title.opacity).html(A)}dispose(){this.svg.remove(),this.title.remove()}resize(){this.divHeight=this.domdiv.offsetHeight,this.divWidth=this.domdiv.offsetWidth,!(this.divWidth<10)&&(this.divHeight<10||(this.svg.attr("width",this.divWidth).attr("height",this.divHeight),this.barG.attr("width",this.divWidth).attr("height",this.divHeight),this.updateData(this.u_data)))}updateOptions(y){this.setOption(this.defOption,y),this.resize()}},options:z},BarStripe:{title:"\u6761\u5f62\u56fe",width:"600",height:"150",mockjs:function(){return _.mock({"series|2":[{"value|2":["@integer(10,100)"]}]})},component:class extends x.H{constructor(y,M){super(),this.divWidth=10,this.divHeight=10,this.defOption=H,this.render=()=>{this.resize()},this.domdiv=y,this.divWidth=y.offsetWidth,this.divHeight=y.offsetHeight,this.setOption(this.defOption,M),this.svg=o.select(y).append("svg").attr("width",this.divWidth).attr("height",this.divHeight).style("position","absolute").style("font-size",this.nowOption.fontSize),this.barG=this.svg.append("g").attr("class","barG").attr("width",this.divWidth).attr("height",this.divHeight),this.render()}updateData(y){void 0!==y&&(console.log("data :>> ",y),this.u_data=y,y=JSON.parse(JSON.stringify(y)),this.drawBar(y.series||[]))}drawBar(y){const M=y.length,C=this.nowOption.space,te=this.nowOption.colors.length;if(te<1&&(this.nowOption.colors=["#2AC670","#454752","#C62222"]),0===M)this.barG.attr("display","none");else{let ge=this.divWidth-0-0,ce=(this.divHeight-0-0)/(M+(M-1)*C),Te=ce*C;ce<=5&&(ce=5),ge<5&&(ge=5);const fe=this.barG.selectAll("g").filter(".g").data(y).join("g").attr("class","g").attr("transform",(Ae,it)=>(Ae.sid=it,`translate(0,${0+it*(ce+Te)})`));let be=this.nowOption.colNum,me=this.nowOption.rectk.wk;const Se=ge/(be+(be-1)*me);let _e=this.nowOption.rowNum,Ke=this.nowOption.rectk.hk,We=ce/(_e+(_e-1)*Ke);const wt=[];let at=0;for(let Ae=0;Ae<this.nowOption.colNum;Ae++)for(let it=0;it<this.nowOption.rowNum;it++)wt.push({x:Ae,y:it,id:at++});fe.selectAll("rect").filter(".rect").data(Ae=>{if(void 0===Ae.value||0===Ae.value.length)return[];if("number"==typeof Ae.value||1===Ae.value.length){let ft="number"==typeof Ae.value?Ae.value:Ae.value[0],Ct=void 0===this.nowOption.userMax?100:this.nowOption.userMax,Tt=0;ft>Ct?ft=Ct:Tt=Ct-ft,Ae.value=[ft,Tt]}const it=Ae.value||[],Dt=o.sum(it);if(0===Dt)return[];const Ut=[];let sn=0;it.map((ft,Ct)=>{Ut.push({value:ft,per:ft/Dt,key:Math.floor(wt.length*ft/Dt),sum:sn+=Math.round(wt.length*ft/Dt),cid:Ct})});const Rt=[];return wt.map(ft=>{const Ct=ft.id;for(let Tt=0;Tt<Ut.length;Tt++){const Kt={x:ft.x,y:ft.y,id:ft.id,cid:Ut[Tt].cid,sid:Ae.sid};if(0==Tt){if(Ct<Ut[Tt].sum){Rt.push(Kt);break}}else{if(Ct>=Ut[Tt-1].sum&&Ct<Ut[Tt].sum){Rt.push(Kt);break}Tt==Ut.length-1&&Rt.push(Kt)}}}),Rt}).join("rect").attr("class","rect").attr("rid",Ae=>Ae.id).attr("x",0).attr("y",Ae=>Ae.y*(We*(1+Ke))).attr("rx",this.nowOption.rectk.rxy).attr("ry",this.nowOption.rectk.rxy).attr("height",We).attr("width",Se).transition().ease(o.easePolyIn).duration(750).delay(Ae=>20*Ae.sid).attr("x",Ae=>Ae.x*Se*(1+me)).attr("fill",Ae=>this.nowOption.colors[Ae.cid%te])}}dispose(){this.svg.remove()}resize(){this.divHeight=this.domdiv.offsetHeight,this.divWidth=this.domdiv.offsetWidth,!(this.divWidth<10)&&(this.divHeight<10||(this.svg.attr("width",this.divWidth).attr("height",this.divHeight),this.barG.attr("width",this.divWidth).attr("height",this.divHeight),this.updateData(this.u_data)))}updateOptions(y){this.setOption(this.defOption,y),this.resize()}},options:H}}},44423:(e,t,n)=>{"use strict";n.d(t,{H:()=>o});class o{constructor(){this.__id=(new Date).getTime(),this.defOption={}}setOption(a,l){this.nowOption=this.deepCopy(a,l||{})}deepCopy(a,l){const r=Object.assign({},a);for(const d in l)"object"!=typeof a[d]||null===a[d]||Array.isArray(a[d])?void 0!==l[d]&&(r[d]=l[d]):r[d]=this.deepCopy(a[d],l[d]);return r}updateData(a){}dispose(){}resize(){}updateOptions(a){}}},8383:(e,t,n)=>{"use strict";n.d(t,{b:()=>ea});var o=n(14453),i=(n(64762),n(37716)),u=(n(79765),n(46782),n(47070),n(32729),n(90641)),f=(n(96182),n(70946)),v=n(38583),x=n(68178),z=n(53599);let X=(()=>{class m{}return m.\u0275fac=function(c){return new(c||m)},m.\u0275mod=i.oAB({type:m}),m.\u0275inj=i.cJS({imports:[[f.vT,v.ez,z.PV,x.T,u.g]]}),m})();var ne=n(83385),he=n(65072),Q=n(80521);n(82298),n(36102);let De=(()=>{class m{}return m.\u0275fac=function(c){return new(c||m)},m.\u0275mod=i.oAB({type:m}),m.\u0275inj=i.cJS({imports:[[f.vT,v.ez,he.xu,Q.ud]]}),m})();n(66682),n(59193),n(45435),n(39761),n(43190),n(19773),n(88002);var et=n(90665),ot=n(19238);let we=(()=>{class m{}return m.\u0275fac=function(c){return new(c||m)},m.\u0275mod=i.oAB({type:m}),m.\u0275inj=i.cJS({imports:[[f.vT,v.ez,z.PV,Q.ud,x.T]]}),m})();var Fe=n(90343),Ue=n(12746),qe=n(83730),de=n(57564),G=(n(36461),n(22759),n(29374));let q=(()=>{class m{}return m.\u0275fac=function(c){return new(c||m)},m.\u0275mod=i.oAB({type:m}),m.\u0275inj=i.cJS({imports:[[f.vT,v.ez,G.vG,z.PV,x.T]]}),m})();var B=n(45107),se=n(47618);let He=(()=>{class m{}return m.\u0275fac=function(c){return new(c||m)},m.\u0275mod=i.oAB({type:m}),m.\u0275inj=i.cJS({imports:[[f.vT,v.ez,et.u5,ot.rt]]}),m})();var ct=n(94401),bt=n(87636),Ot=n(36756);new i.OlP("nz-empty-component-name");let zn=(()=>{class m{}return m.\u0275fac=function(c){return new(c||m)},m.\u0275mod=i.oAB({type:m}),m.\u0275inj=i.cJS({imports:[[f.vT,v.ez,bt.eL,x.T,Ot.YI]]}),m})();n(26215),n(90739);var un=n(90625),dt=(n(26169),n(86911)),y=n(84514);let Li=(()=>{class m{}return m.\u0275fac=function(c){return new(c||m)},m.\u0275mod=i.oAB({type:m}),m.\u0275inj=i.cJS({imports:[[f.vT,v.ez,Ot.YI,et.u5,Q.ud,un.U8,z.PV,x.T,zn,dt.e4,u.g,y.a,B.Cl,ot.rt]]}),m})(),Zn=(()=>{class m{}return m.\u0275fac=function(c){return new(c||m)},m.\u0275mod=i.oAB({type:m}),m.\u0275inj=i.cJS({imports:[[f.vT,v.ez,et.u5,Li,Ot.YI,z.PV]]}),m})(),po=(()=>{class m{}return m.\u0275fac=function(c){return new(c||m)},m.\u0275mod=i.oAB({type:m}),m.\u0275inj=i.cJS({imports:[[f.vT,v.ez,et.u5]]}),m})();n(38634),n(87519),n(85345);var xo=n(18553);let Eo=(()=>{class m{}return m.\u0275fac=function(c){return new(c||m)},m.\u0275mod=i.oAB({type:m}),m.\u0275inj=i.cJS({imports:[[f.vT,v.ez,xo.Q8]]}),m})();n(25917),n(71289),n(54395),n(13653),n(96526);let Js=(()=>{class m{}return m.\u0275fac=function(c){return new(c||m)},m.\u0275mod=i.oAB({type:m}),m.\u0275inj=i.cJS({imports:[[f.vT,qe.ip,et.u5,x.T,po,He,ct.b1,o.sL,v.ez,Q.ud,Zn,se.y7,Eo,Ot.YI,z.PV,zn,B.Cl]]}),m})();var qs=n(84828);let ea=(()=>{class m{}return m.\u0275fac=function(c){return new(c||m)},m.\u0275mod=i.oAB({type:m}),m.\u0275inj=i.cJS({imports:[o.sL,X,ne.S,De,z.PV,we,Fe.Z,Ue.wm,qe.ip,de.N3,q,Js,qs.we]}),m})()}}]);